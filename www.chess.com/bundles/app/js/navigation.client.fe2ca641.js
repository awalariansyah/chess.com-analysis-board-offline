!function(e){var t={};function __webpack_require__(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,__webpack_require__),a.l=!0,a.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)__webpack_require__.d(n,a,function(t){return e[t]}.bind(null,a));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="/bundles/app/js/",__webpack_require__(__webpack_require__.s=317)}([function(e,t,n){"use strict";n.d(t,"g",function(){return blankObject}),n.d(t,"a",function(){return _differs}),n.d(t,"b",function(){return _differsImmutable}),n.d(t,"q",function(){return fire}),n.d(t,"r",function(){return flush}),n.d(t,"s",function(){return get}),n.d(t,"t",function(){return init}),n.d(t,"w",function(){return on}),n.d(t,"z",function(){return removeFromStore}),n.d(t,"x",function(){return o}),n.d(t,"d",function(){return append}),n.d(t,"u",function(){return insert}),n.d(t,"p",function(){return detachNode}),n.d(t,"o",function(){return detachBetween}),n.d(t,"n",function(){return detachBefore}),n.d(t,"y",function(){return reinsertBefore}),n.d(t,"m",function(){return destroyEach}),n.d(t,"j",function(){return createFragment}),n.d(t,"i",function(){return createElement}),n.d(t,"k",function(){return createText}),n.d(t,"h",function(){return createComment}),n.d(t,"c",function(){return addListener}),n.d(t,"A",function(){return removeListener}),n.d(t,"D",function(){return setAttribute}),n.d(t,"E",function(){return setData}),n.d(t,"F",function(){return setStyle}),n.d(t,"B",function(){return selectOption}),n.d(t,"C",function(){return selectValue}),n.d(t,"l",function(){return destroyBlock}),n.d(t,"G",function(){return updateKeyedEach}),n.d(t,"H",function(){return wrapTransition}),n.d(t,"v",function(){return noop}),n.d(t,"e",function(){return assign}),n.d(t,"f",function(){return assignTrue});var a=n(24),r=n.n(a);n(16),n(5);function noop(){}function assign(e,t){for(var n in t)e[n]=t[n];return e}function assignTrue(e,t){for(var n in t)e[n]=1;return e}function run(e){e()}function append(e,t){e.appendChild(t)}function insert(e,t,n){e.insertBefore(t,n)}function detachNode(e){e.parentNode.removeChild(e)}function detachBetween(e,t){for(;e.nextSibling&&e.nextSibling!==t;)e.parentNode.removeChild(e.nextSibling)}function detachBefore(e){for(;e.previousSibling;)e.parentNode.removeChild(e.previousSibling)}function reinsertBefore(e,t){for(var n=e.parentNode;n.firstChild!==e;)t.appendChild(n.firstChild)}function destroyEach(e,t){for(var n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function createFragment(){return document.createDocumentFragment()}function createElement(e){return document.createElement(e)}function createText(e){return document.createTextNode(e)}function createComment(){return document.createComment("")}function addListener(e,t,n,a){e.addEventListener(t,n,a)}function removeListener(e,t,n,a){e.removeEventListener(t,n,a)}function setAttribute(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function setData(e,t){e.data=""+t}function setStyle(e,t,n){e.style.setProperty(t,n)}function selectOption(e,t){for(var n=0;n<e.options.length;n+=1){var a=e.options[n];if(a.__value===t)return void(a.selected=!0)}}function selectValue(e){var t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function linear(e){return e}function generateRule(e,t,n){for(var a=e.a,r=e.b,i=e.delta,s=16.666/e.duration,o="{\n",c=0;c<=1;c+=s){var l=a+i*t(c);o+=100*c+"%{".concat(n(l,1-l),"}\n")}return o+"100% {".concat(n(r,1-r),"}\n}")}function hash(e){for(var t=5381,n=e.length;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function wrapTransition(e,t,n,a,r){var o,c,l,u=n.call(e,t,a),d=!1;return{t:r?0:1,running:!1,program:null,pending:null,run:function run(e,t){var n=this;"function"==typeof u?s.wait().then(function(){u=u(),n._run(e,t)}):this._run(e,t)},_run:function _run(e,n){o=u.duration||300,c=u.easing||linear;var a={start:window.performance.now()+(u.delay||0),b:e,callback:n||noop};r&&!d&&(u.css&&u.delay&&(l=t.style.cssText,t.style.cssText+=u.css(0,1)),u.tick&&u.tick(0,1),d=!0),e||(a.group=i.current,i.current.remaining+=1),u.delay?this.pending=a:this.start(a),this.running||(this.running=!0,s.add(this))},start:function start(n){if(e.fire("".concat(n.b?"intro":"outro",".start"),{node:t}),n.a=this.t,n.delta=n.b-n.a,n.duration=o*Math.abs(n.b-n.a),n.end=n.start+n.duration,u.css){u.delay&&(t.style.cssText=l);var a=generateRule(n,c,u.css);s.addRule(a,n.name="__svelte_"+hash(a)),t.style.animation=(t.style.animation||"").split(", ").filter(function(e){return e&&(n.delta<0||!/__svelte/.test(e))}).concat("".concat(n.name," ").concat(n.duration,"ms linear 1 forwards")).join(", ")}this.program=n,this.pending=null},update:function update(e){var t=this.program;if(t){var n=e-t.start;this.t=t.a+t.delta*c(n/t.duration),u.tick&&u.tick(this.t,1-this.t)}},done:function done(){var n=this.program;this.t=n.b,u.tick&&u.tick(this.t,1-this.t),e.fire("".concat(n.b?"intro":"outro",".end"),{node:t}),n.b||n.invalidated?u.css&&s.deleteRule(t,n.name):(n.group.callbacks.push(function(){n.callback(),u.css&&s.deleteRule(t,n.name)}),0==--n.group.remaining&&n.group.callbacks.forEach(run)),this.running=!!this.pending},abort:function abort(e){this.program&&(e&&u.tick&&u.tick(1,0),u.css&&s.deleteRule(t,this.program.name),this.program=this.pending=null,this.running=!1)},invalidate:function invalidate(){this.program&&(this.program.invalidated=!0)}}}var i={};var s={running:!1,transitions:[],bound:null,stylesheet:null,activeRules:{},promise:null,add:function add(e){this.transitions.push(e),this.running||(this.running=!0,requestAnimationFrame(this.bound||(this.bound=this.next.bind(this))))},addRule:function addRule(e,t){if(!this.stylesheet){var n=createElement("style");document.head.appendChild(n),s.stylesheet=n.sheet}this.activeRules[t]||(this.activeRules[t]=!0,this.stylesheet.insertRule("@keyframes ".concat(t," ").concat(e),this.stylesheet.cssRules.length))},next:function next(){this.running=!1;for(var e=window.performance.now(),t=this.transitions.length;t--;){var n=this.transitions[t];n.program&&e>=n.program.end&&n.done(),n.pending&&e>=n.pending.start&&n.start(n.pending),n.running?(n.update(e),this.running=!0):n.pending||this.transitions.splice(t,1)}if(this.running)requestAnimationFrame(this.bound);else if(this.stylesheet){for(var a=this.stylesheet.cssRules.length;a--;)this.stylesheet.deleteRule(a);this.activeRules={}}},deleteRule:function deleteRule(e,t){e.style.animation=e.style.animation.split(", ").filter(function(e){return e&&-1===e.indexOf(t)}).join(", ")},wait:function wait(){return s.promise||(s.promise=Promise.resolve(),s.promise.then(function(){s.promise=null})),s.promise}};function destroyBlock(e,t){e.d(1),t[e.key]=null}function updateKeyedEach(e,t,n,a,r,i,s,o,c,l,u,d,f,_){for(var h=e.length,m=s.length,p=h,b={};p--;)b[e[p].key]=p;var g=[],v={},O={};for(p=m;p--;){var j=_(i,s,p),y=a(j),w=o[y];w?r&&w.p(n,j):(w=u(t,y,j)).c(),g[p]=v[y]=w,y in b&&(O[y]=Math.abs(p-b[y]))}var k={},E={};function insert(e){e[d](c,f),o[e.key]=e,f=e.first,m--}for(;h&&m;){var C=g[m-1],S=e[h-1],N=C.key,T=S.key;C===S?(f=C.first,h--,m--):v[T]?!o[N]||k[N]?insert(C):E[T]?h--:O[N]>O[T]?(E[N]=!0,insert(C)):(k[T]=!0,h--):(l(S,o),h--)}for(;h--;){v[(S=e[h]).key]||l(S,o)}for(;m;)insert(g[m-1]);return g}function blankObject(){return Object.create(null)}function destroy(e){this.destroy=noop,this.fire("destroy"),this.set=noop,this._fragment.d(!1!==e),this._fragment=null,this._state={}}function _differs(e,t){return e!=e?t==t:e!==t||e&&"object"===r()(e)||"function"==typeof e}function _differsImmutable(e,t){return e!=e?t==t:e!==t}function fire(e,t){var n=e in this._handlers&&this._handlers[e].slice();if(n)for(var a=0;a<n.length;a+=1){var r=n[a];if(!r.__calling)try{r.__calling=!0,r.call(this,t)}finally{r.__calling=!1}}}function flush(e){e._lock=!0,callAll(e._beforecreate),callAll(e._oncreate),callAll(e._aftercreate),e._lock=!1}function get(){return this._state}function init(e,t){e._handlers=blankObject(),e._slots=blankObject(),e._bind=t._bind,e._staged={},e.options=t,e.root=t.root||e,e.store=t.store||e.root.store,t.root||(e._beforecreate=[],e._oncreate=[],e._aftercreate=[])}function on(e,t){var n=this._handlers[e]||(this._handlers[e]=[]);return n.push(t),{cancel:function cancel(){var e=n.indexOf(t);~e&&n.splice(e,1)}}}function set(e){this._set(assign({},e)),this.root._lock||flush(this.root)}function _set(e){var t=this._state,n={},a=!1;for(var r in e=assign(this._staged,e),this._staged={},e)this._differs(e[r],t[r])&&(n[r]=a=!0);a&&(this._state=assign(assign({},t),e),this._recompute(n,this._state),this._bind&&this._bind(n,this._state),this._fragment&&(this.fire("state",{changed:n,current:this._state,previous:t}),this._fragment.p(n,this._state),this.fire("update",{changed:n,current:this._state,previous:t})))}function _stage(e){assign(this._staged,e)}function callAll(e){for(;e&&e.length;)e.shift()()}function _mount(e,t){this._fragment[this._fragment.i?"i":"m"](e,t||null)}function removeFromStore(){this.store._remove(this)}var o={destroy:destroy,get:get,fire:fire,on:on,set:set,_recompute:noop,_set:_set,_stage:_stage,_mount:_mount,_differs:_differs}},function(e,t,n){e.exports=n(21)(72)},function(e,t,n){e.exports=n(21)(47)},function(e,t,n){e.exports=n(21)(71)},function(e,t,n){"use strict";var a,r={SEND_MESSAGE:{key:"Social - SendMessage",payload:function payload(e){return{mode:"globalChat",recipient:e?"friend":"member"}}}},i={personalChannel:function personalChannel(e){return"chat/users/"+e},userStatusChannel:function userStatusChannel(e){return"presence/users/"+e}};!function(e){e.BADGE_KEY="chatMessages",e[e.BIG_EMOTES_LIMIT=4]="BIG_EMOTES_LIMIT",e[e.DEFAULT_CHAT_WINDOW_HEIGHT=400]="DEFAULT_CHAT_WINDOW_HEIGHT",e[e.DEFAULT_CHAT_WINDOW_WIDTH=350]="DEFAULT_CHAT_WINDOW_WIDTH",e[e.CHAT_WINDOW_MOVE_TRESHOLD=30]="CHAT_WINDOW_MOVE_TRESHOLD",e[e.CHAT_WINDOW_WIDTH_ON_MOBILE=.9]="CHAT_WINDOW_WIDTH_ON_MOBILE",e[e.EMOTES_IN_A_ROW=3]="EMOTES_IN_A_ROW",e[e.HTTP_CODE_TOO_MUCH_REQUESTS=429]="HTTP_CODE_TOO_MUCH_REQUESTS",e[e.HTTP_CODE_FORBIDDEN=403]="HTTP_CODE_FORBIDDEN",e[e.INTERVAL_GET_PUBSUB_STATE=3e3]="INTERVAL_GET_PUBSUB_STATE",e[e.INTERVAL_GET_PUBSUB_STATE_INITIAL=500]="INTERVAL_GET_PUBSUB_STATE_INITIAL",e[e.KEY_ENTER=13]="KEY_ENTER",e[e.KEY_ESC=27]="KEY_ESC",e[e.MESSAGES_PER_REQUEST=20]="MESSAGES_PER_REQUEST",e[e.MIN_CHAT_WINDOW_HEIGHT=200]="MIN_CHAT_WINDOW_HEIGHT",e[e.MIN_CHAT_WINDOW_WIDTH=300]="MIN_CHAT_WINDOW_WIDTH",e.ONLINE_STATUS="online",e.PENDING_MESSAGE_ID="pending_message",e.PUBSUB_ACTION_CREATED="created",e[e.WINDOW_RESIZE_DEBOUNCE=250]="WINDOW_RESIZE_DEBOUNCE",e[e.SCROLL_HEIGHT_TRIGGER=100]="SCROLL_HEIGHT_TRIGGER",e[e.TIMEOUT_TILL_MESSAGE_IS_READ=500]="TIMEOUT_TILL_MESSAGE_IS_READ",e[e.UNREAD_MESSAGE_BADGE_ANIMATION=1e3]="UNREAD_MESSAGE_BADGE_ANIMATION",e[e.USER_MUTE_MESSAGES_ANMOUNT=60]="USER_MUTE_MESSAGES_ANMOUNT",e[e.USER_MUTE_TIMEOUT=1e4]="USER_MUTE_TIMEOUT",e[e.USERS_TRACK_STATUS_LIMIT=25]="USERS_TRACK_STATUS_LIMIT"}(a||(a={}));var s={OPENED_CHATS_CONTAINER:".opened-chats-container",messageElement:function messageElement(e){return'[data-id="chat-message-'+e+'"]'},messagesList:function messagesList(e){return'[data-id="chat-messages-list-'+e+'"]'},MOUNTED_CHATS_CONTAINER:".opened-chats-list",USER_POPOVER_CONTAINER_ID:"user-popover",USER_POPOVER_LINK_ATTRIBUTE:"data-link-id"},o=n(2),c={accept:Object(o.trans)("Accept"),acceptAndChat:Object(o.trans)("Accept & Chat"),cancel:Object(o.trans)("Cancel"),chatRequestSent:Object(o.trans)("Chat request sent"),decline:Object(o.trans)("Decline"),declinedChatRequest:function declinedChatRequest(e){return Object(o.trans)("You have declined to chat with %1$s%. You can change your mind and accept at any time.",{"%1$s%":e})},hideInactiveChats:function hideInactiveChats(e){return Object(o.trans)("Hide inactive dialogs (%1$s%)",{"%1$s%":e})},message:Object(o.trans)("Message..."),gotIt:Object(o.trans)("Got it!"),pleaseUpgrade:Object(o.trans)("Upgrade to get all emojis!"),removeChat:Object(o.trans)("Remove chat"),sendMessageError:Object(o.trans)("Message failed."),showInactiveChats:function showInactiveChats(e){return Object(o.trans)("Show inactive dialogs (%1$s%)",{"%1$s%":e})},tooMuchMessages:Object(o.trans)("Relax! You are sending too many messages."),tryAgain:Object(o.trans)("Resend"),unableToConnect:Object(o.trans)("Unable to connect to chat. Please refresh or login again."),userIsUnavailable:function userIsUnavailable(e){return Object(o.trans)("Sorry! %1$s% is not available to chat.",{"%1$s%":e})},userWasUnavailable:function userWasUnavailable(e){return Object(o.trans)("%1$s% declined to chat earlier. You can try again now.",{"%1$s%":e})},userWantsToChat:function userWantsToChat(e){return Object(o.trans)("%1$s% would like to chat",{"%1$s%":e})}},l=n(13),u=Object(l.c)("uuid"),d=window.context,f=d&&d.user&&d.user.isPremium,_=["avatarUrl","chessTitle","flairCode","isFriend","isStreamer","membership","username"];n.d(t,"b",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return a}),n.d(t,"e",function(){return s}),n.d(t,"f",function(){return c}),n.d(t,"g",function(){return u}),n.d(t,"h",function(){return f}),n.d(t,"a",function(){return _})},function(e,t,n){e.exports=n(21)(5)},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return o}),n.d(t,"e",function(){return c}),n.d(t,"f",function(){return l}),n.d(t,"j",function(){return u}),n.d(t,"k",function(){return d}),n.d(t,"l",function(){return f}),n.d(t,"m",function(){return _}),n.d(t,"n",function(){return h}),n.d(t,"o",function(){return m}),n.d(t,"g",function(){return p}),n.d(t,"h",function(){return b}),n.d(t,"i",function(){return g});var a=n(3),r={speedChessChampionshipUrl:"data-speed-chess-championship-url",challengeUser:"data-challenge-user",loginAndGoRoute:"data-route-login-and-go",registerRoute:"data-route-register",routes:"data-routes",showChallengeUser:"data-show-challenge-user"},i=99,s={ALERTS:"alerts",CHALLENGES:"challenges",CHAT_MESSAGES:"chatMessages",GAMES:"games",MESSAGES:"messages"},o={CLOSE:"close",COLLAPSED:"collapsed",HOVER:"hover",NO_REDIRECT:"noredirect",OPEN:"open",WIDE:"wide"},c={CLOSE_SHAREABLE_URL_MODAL:"CLOSE_SHAREABLE_URL_MODAL",OPEN_SHAREABLE_URL_MODAL:"OPEN_SHAREABLE_URL_MODAL",SEND_NEW_GAME_SEEK:"SEND_NEW_GAME_SEEK",SEND_NEW_GAME_SEEK_SUCCESS:"SEND_NEW_GAME_SEEK_SUCCESS",SHOW_NEW_GAME_MODAL:"SHOW_NEW_GAME_MODAL",START_DIRECT_CHAT:"START_DIRECT_CHAT"},l={ANY:"any",DEFAULT_AND_USER:"default_and_user"},u={MOBILE_WIDTH:960,TOOLTIP_OFFSET:8},d={registerRoute:function registerRoute(e){return a.default.generate("web_security_register",{redirectUrl:e})},loginAndGoRoute:function loginAndGoRoute(e){return a.default.generate("web_security_login_and_go",{redirectUrl:e})}},f={FRIEND_RESULTS:".svelte-friend-result",LESSONS_CONTAINER:".lessons-container",LOGOUT_FORM:".form.logout",LOGOUT_TRIGGER:"#sb .logout",MAIN_NAV:"#sb",MAIN_NAV_CONNECT_LINK:"#sb .link.connect",MAIN_NAV_HOME_LINK:"#sb .link.home",MAIN_NAV_LINKS:"#sb .menu > .link",MAIN_NAV_LOGIN_LINK:"#sb .login",MAIN_NAV_PLAY_LINK:"#sb .link.play",MAIN_NAV_REGISTER_LINK:".signup.register",MAIN_TOP_NAV:"#sb .menu.top",MAIN_TOP_NAV_LINKS:"#sb .menu.top > .link",TOOLTIP:".svelte-tooltip",TOOLTIP_TRIGGER:"[data-tooltip-content]"},_={FACEBOOK:"facebook",TWITTER:"twitter"},h={TOOLTIP_SHOW_DELAY:400},m={COLLAPSED_NAV:"collapsed-nav"},p=2,b=5,g=3},function(e,t,n){"use strict";n.d(t,"c",function(){return l}),n.d(t,"b",function(){return u}),n.d(t,"a",function(){return d}),n.d(t,"j",function(){return f}),n.d(t,"k",function(){return _}),n.d(t,"l",function(){return h}),n.d(t,"g",function(){return m}),n.d(t,"h",function(){return p}),n.d(t,"i",function(){return b}),n.d(t,"d",function(){return g}),n.d(t,"f",function(){return v}),n.d(t,"e",function(){return O});var a,r,i=n(5),s=n.n(i),o=n(3),c=n(1);function ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}var l={REPORT_USER:"web_user_callback_report_user",USER_POPUP:"web_user_callback_popup"},u=(c.default.trans("Membership Icons"),c.default.trans("Emoji"),c.default.trans("Chess"),c.default.trans("Holiday"),c.default.trans("Hosts"),c.default.trans("Computer Chess"),c.default.trans("PRO Chess League"),{category:"membership_icons",code:"nothing",description:c.default.trans("Nothing"),id:206,imageCode:"nothing",membershipLevelCode:"staff",name:c.default.trans("Nothing"),status:""}),d=["blocked","clear","clear_light"],f={USER_POPOVER_CONTAINER:"user-popover",USER_FLAIR:"user-flair"},_={about:function about(){return o.default.generate("web_about")},membership:function membership(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"icon";return o.default.generate("web_membership",{c:e})},usernameSearch:function usernameSearch(e){return o.default.generate("web_user_callback_username_search",function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach(function(t){s()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({activeDays:4e3},e))}},h={acceptFriendRequest:c.default.trans("Accept Friend Request"),addFriend:c.default.trans("Add Friend"),block:c.default.trans("Block"),blockConfirm:c.default.trans("Are you sure you want to block this user?"),cancel:c.default.trans("Cancel"),cancelFriendRequest:c.default.trans("Cancel Friend Request"),challenge:c.default.trans("Challenge"),follow:c.default.trans("Follow"),gameArchive:c.default.trans("Game Archive"),giftMembership:c.default.trans("Gift Membership"),giveTrophy:c.default.trans("Give Award"),joinedDate:function joinedDate(e){return c.default.trans("Joined %1$s%",{"%1$s%":e})},lastOnline:function lastOnline(e){return c.default.trans("Online %1$s%",{"%1$s%":e})},moderator:c.default.trans("Moderator"),onlineNow:c.default.trans("Online Now"),inLiveNow:c.default.trans("In Live"),removeFriend:c.default.trans("Remove Friend"),removeFriendConfirm:c.default.trans("Are you sure you want to remove this friend from your list?"),report:c.default.trans("Report"),reportUser:function reportUser(e){return c.default.trans("Report %username%",{"%username%":e})},sendMessage:c.default.trans("Send Message"),showYourFlair:c.default.trans("Show your flair!"),staff:c.default.trans("Staff"),unblock:c.default.trans("Unblock"),unfollow:c.default.trans("Unfollow"),userReportError:c.default.trans("Tell us more...")},m={cheater:5,abuser:6,voluntarilyClosed:7,unspecifiedClosed:8,basic:10,silver:20,gold:30,platinum:40,diamond:50,moderator:80,staff:90},p=(a={},s()(a,m.diamond,"diamond"),s()(a,m.abuser,"abuser"),s()(a,m.cheater,"cheater"),s()(a,m.voluntarilyClosed,"inactive"),s()(a,m.unspecifiedClosed,"cheater"),s()(a,m.gold,"gold"),s()(a,m.moderator,"pawn-blue"),s()(a,m.platinum,"platinum"),s()(a,m.staff,"pawn-green"),a),b=(r={},s()(r,m.basic,c.default.trans("Basic Membership")),s()(r,m.diamond,c.default.trans("Diamond Membership")),s()(r,m.cheater,c.default.trans("Closed: Fair Play")),s()(r,m.abuser,c.default.trans("Closed: Abuse")),s()(r,m.voluntarilyClosed,c.default.trans("Closed: Inactive")),s()(r,m.unspecifiedClosed,c.default.trans("Account Closed")),s()(r,m.gold,c.default.trans("Gold Membership")),s()(r,m.moderator,c.default.trans("Moderator Account")),s()(r,m.platinum,c.default.trans("Platinum Membership")),s()(r,m.silver,c.default.trans("Silver Membership")),s()(r,m.staff,c.default.trans("Staff Account")),r),g={GM:c.default.trans("Grandmaster"),WGM:c.default.trans("Woman Grandmaster"),IM:c.default.trans("International Master"),WIM:c.default.trans("Woman International Master"),FM:c.default.trans("FIDE Master"),WFM:c.default.trans("Woman FIDE Master"),NM:c.default.trans("National Master"),CM:c.default.trans("FIDE Candidate Master"),WCM:c.default.trans("FIDE Woman Candidate Master"),WNM:c.default.trans("Woman National Master")},v=function isOnline(e){return!0===e||"online"===e},O=function isLive(e){return"onlive"===e}},function(e,t,n){e.exports=n(21)(2)},,function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r}),n.d(t,"d",function(){return i}),n.d(t,"c",function(){return s}),n.d(t,"e",function(){return o}),n.d(t,"f",function(){return c}),n.d(t,"g",function(){return l}),n.d(t,"h",function(){return u}),n.d(t,"i",function(){return d}),n.d(t,"j",function(){return f}),n.d(t,"k",function(){return _}),n.d(t,"l",function(){return h}),n.d(t,"m",function(){return m}),n.d(t,"n",function(){return p});var a={NEW_GAME_IS_DAILY:"new_game_is_daily",NEW_GAME_IS_LIVE:"new_game_is_live",NEW_GAME_IS_USING_CUSTOM_LIVE_TIME_VARIANT:"new_game_is_using_custom_live_time_variant",NEW_GAME_TIME_VARIANT_WITH_INCREMENT:"new_game_time_variant_with_increment"},r={BOOK:"book",CHESS:"chess",CHESS_960:"chess960",CUSTOM:"custom"},i={days:0,inc:0,mins:10,secs:0},s={days:3,inc:0,mins:0,secs:0},o="8/8/8/8/8/8/8/8 w KQkq - 0 1",c={blitz:"#ffc800",bughouse:"#97bd4d",bullet:"#a68b46",chess:"#8a8886",chess960:"#f05a29",crazyhouse:"#005e94",kingofthehill:"#71604e",lightning:"#ffc800",live960:"#ee5b34",rapid:"#769656",standard:"#8a8886",threecheck:"#1eaea7"},l={BUGHOUSE:"bughouse",CHESS:"chess",CHESS_960:"chess960",CRAZYHOUSE:"crazyhouse",KING_OF_THE_HILL:"kingofthehill",THREE_CHECK:"threecheck",ANALYSIS:"analysis"},u="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",d={INC:60,MINS:120,SECS:90},f={CUSTOM_CHALLENGE:"game-custom-challenge",GAME_TYPE:"game-type",GAME_TIME:"game-time",OPEN_CHALLENGES:"game-open-challenges",PLAY_FRIEND:"game-play-friend",QUICK_CHALLENGE:"quick-challenge",TOURNAMENTS:"game-tournaments"},_={RANDOM:0,WHITE:1,BLACK:2},h={CUSTOM_CHALLENGE:"custom-challenge",JOIN_A_TOURNAMENT:"join-a-tournament",OPEN_CHALLENGES:"open-challenges",PLAY_A_FRIEND:"play-a-friend",PLAY_COMPUTER:"play-computer",QUICK_PLAY:"quick-play"},m={DAILY:"daily",LIVE:"live",LIVE_ARENA:"arena",LIVE_SWISS:"live"},p={CHESSCOM:"chesscom",FRIENDS:"friends",RECENT_OPPONENTS:"recent-opponents"}},function(e,t,n){e.exports=n(21)(70)},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return s});var a=n(1),r={badRequest:a.default.trans("There was an error processing the request. Please try again.")},i=(a.default.trans("Avatar uploaded"),a.default.trans("Thank you for your comment."),a.default.trans("Comment deleted."),a.default.trans("You cannot send an empty comment"),a.default.trans("Comment marked as spam."),a.default.trans("Comment updated."),a.default.trans("Comment link is copied to clipboard"),a.default.trans("All forum topics have been marked as read"),a.default.trans("Feature Set! It might take a minute or two to appear."),a.default.trans("PGN copied to buffer"),{error:"error",info:"info",success:"success"}),s="create-header-alert";i.error,r.badRequest},function(e,t,n){"use strict";n.d(t,"i",function(){return s}),n.d(t,"g",function(){return o}),n.d(t,"h",function(){return c}),n.d(t,"b",function(){return l}),n.d(t,"a",function(){return u}),n.d(t,"c",function(){return d}),n.d(t,"j",function(){return f}),n.d(t,"k",function(){return _}),n.d(t,"d",function(){return h}),n.d(t,"f",function(){return m}),n.d(t,"e",function(){return p});var a=n(49),r=(n(3),n(7)),i=window.context,s=function isLoggedIn(){return!(!i||!i.user||Object(a.a)())},o=function isEnabled(){return!(!s()||!i.user.isEnabled)},c=function isImpersonating(){return!(!s()||!i.user.isImpersonating)},l=function eligibleFirstTrial(){return!(!s()||!i.user.eligibleFirstTrial)},u=function checkUserStatus(e){if(!s())return!1;var t=!1;switch(e){case"isActivated":t=i.user.isActivated;break;case"isStaff":t=i.user.membershipLevel>=r.g.staff;break;case"isStaffOnly":t=i.user.membershipLevel===r.g.staff;break;case"isModerator":t=i.user.membershipLevel>=r.g.moderator;break;case"isModeratorOnly":t=i.user.membershipLevel===r.g.moderator;break;case"isDiamond":t=i.user.membershipLevel>=r.g.diamond;break;case"isDiamondOnly":t=i.user.membershipLevel===r.g.diamond;break;case"isPlatinum":t=i.user.membershipLevel>=r.g.platinum;break;case"isPlatinumOnly":t=i.user.membershipLevel===r.g.platinum;break;case"isSilver":t=i.user.membershipLevel>=r.g.silver;break;case"isSilverOnly":t=i.user.membershipLevel===r.g.silver;break;case"isGold":t=i.user.membershipLevel>=r.g.gold;break;case"isGoldOnly":t=i.user.membershipLevel===r.g.gold;break;case"isPremium":t=i.user.membershipLevel>=r.g.silver;break;case"isBasic":t=i.user.membershipLevel===r.g.basic;break;case"chessTitle":t=i.user.chessTitle;break;default:t=!1}return t},d=function getAdditionalUserInfo(e){if(!s())return"diagramSettings"===e?{}:null;var t=!1;switch(e){case"cohort":t=i.user.cohort;break;case"flairCode":t=i.user.flairCode;break;case"getUserId":t=i.user.id;break;case"getUsername":t=i.user.username;break;case"getAvatarUrl":t=i.user.avatarUrl;break;case"getAvatarLargeUrl":t=i.user.avatarLargeUrl;break;case"getSettingsAvatarUrl":t=i.user.settingsAvatarUrl;break;case"getLastLoginDate":t=i.user.lastLoginDate;break;case"registerDate":t=i.user.registerDate;break;case"getBrowserTimezone":t=window.jstz.determine().name();break;case"getTimezone":t=i.user.timezone;break;case"getDiagramSettings":t=i.diagramSettings;break;case"language":t=i.i18n.locale;break;case"contentLanguage":t=i.i18n.contentLanguage;break;case"speaksEnglish":t="en_US"===i.i18n.locale;break;case"eligibleFirstTrial":t=i.user.eligibleFirstTrial;break;case"fairPlayAgree":t=i.user.fairPlayAgree;break;case"getArchiveView":t=i.user.archiveView?i.user.archiveView:"grid";break;case"homeContentType":t="following";break;case"showAlertsOnHome":t=i.user.showAlertsOnHome;break;case"getMembershipLevel":t=i.user.membershipLevel;break;case"isClassicTheme":t=i.user.isClassicTheme;break;case"isContentHidden":t=i.user.isContentHidden;break;case"isDarkMode":t=i.user.isDarkMode;break;case"isUserTwitchSub":t=i.user.isUserTwitchSub;break;case"safeMode":t=i.user.safeMode;break;case"uuid":t=i.user.uuid;break;default:t=!1}return t},f=function isValidArchiveView(e){return"grid"===e||"list"===e},_=function isValidHomeContentType(e){return"following"===e||"my_activity"===e},h=function getFeatures(){return s()?i.user.features:{}},m=function getMembershipNumber(e,t){return!t&&e>=r.g.basic?r.g.unspecifiedClosed:e},p=function getMembershipName(e){return Object.keys(r.g).filter(function(t){return r.g[t]===e||t===e})[0]}},function(e,t,n){"use strict";var a=n(2);t.a={accept:Object(a.trans)("Accept"),achievements:Object(a.trans)("Achievements"),alerts:Object(a.trans)("Alerts"),analysis:Object(a.trans)("analysis",{},"mobile"),archive:Object(a.trans)("Archive"),articles:Object(a.trans)("articles",{},"mobile"),awards:Object(a.trans)("Awards"),blogs:Object(a.trans)("Blogs"),cancel:Object(a.trans)("Cancel"),captchaPlaceholder:Object(a.trans)("Enter text to continue"),coaches:Object(a.trans)("Coaches"),challengeAnytime:function challengeAnytime(e){return Object(a.trans)("Friends can directly challenge you anytime at: %url%",{"%url%":e})},chat:Object(a.trans)("Chat"),chessKid:Object(a.trans)("ChessKid"),chessTv:Object(a.trans)("ChessTV",{},"mobile"),chessToday:Object(a.trans)("Chess Today"),clearAll:Object(a.trans)("Clear Alerts"),clubs:Object(a.trans)("Clubs"),computer:Object(a.trans)("computer",{},"mobile"),computerChampionship:Object(a.trans)("Computer Championship"),connectionExcellent:Object(a.trans)("lag.connection_excellent",null,"live"),connectionGood:Object(a.trans)("lag.connection_good",null,"live"),connectionOffline:Object(a.trans)("lag.connection_offline",null,"live"),connectionOk:Object(a.trans)("lag.connection_ok",null,"live"),connectionPoor:Object(a.trans)("lag.connection_poor",null,"live"),copy:Object(a.trans)("Copy"),dailyChess:Object(a.trans)("daily_chess",{},"mobile"),dailyPuzzle:Object(a.trans)("Daily Puzzle"),decline:Object(a.trans)("Decline"),drills:Object(a.trans)("drills",{},"mobile"),events:Object(a.trans)("Events"),explorer:Object(a.trans)("Explorer"),forums:Object(a.trans)("forums",{},"mobile"),fourPlayerChess:Object(a.trans)("4 Player Chess"),freeTrial:Object(a.trans)("Free Trial"),friends:Object(a.trans)("friends",{},"mobile"),help:Object(a.trans)("Help"),home:Object(a.trans)("Home"),join:Object(a.trans)("Join"),leaderboard:Object(a.trans)("Leaderboard"),leagues:Object(a.trans)("Leagues",{},"mobile"),lessons:Object(a.trans)("lessons",{},"mobile"),linkExpires:Object(a.trans)("Link expires in"),live:Object(a.trans)("Live"),liveChess:Object(a.trans)("live_chess",{},"mobile"),liveRankings:Object(a.trans)("Live Rankings"),loading:Object(a.trans)("Loading"),login:Object(a.trans)("Login"),loginOrJoin:Object(a.trans)("Login or join to play"),logOut:Object(a.trans)("Log Out"),masterGames:Object(a.trans)("Master Games"),members:Object(a.trans)("Members"),membership:Object(a.trans)("Membership"),merch:Object(a.trans)("Merch"),message:Object(a.trans)("Message"),messages:Object(a.trans)("messages",{},"mobile"),mobileApps:Object(a.trans)("Mobile Apps"),myTurn:Object(a.trans)("My Turn"),newGame:Object(a.trans)("New Game"),new:Object(a.trans)("New"),news:Object(a.trans)("news",{},"mobile"),noAlerts:Object(a.trans)("No Alerts"),openings:Object(a.trans)("Openings"),or:Object(a.trans)("or"),otherGames:Object(a.trans)("Other Games"),playMeSocial:function playMeSocial(e){return Object(a.trans)('Play chess with me? I play on @chesscom as "%user%". Click the link to play me in a daily game!',{"%user%":e})},playMeEmail:function playMeEmail(e){return Object(a.trans)('Play chess with me? I play on chess.com as "%user%". Click the link to play me in a daily game!',{"%user%":e})},playingNow:Object(a.trans)("Playing Now"),pleaseEnter:Object(a.trans)("Please enter %number% or more characters",{"%number%":3}),proChessLeague:Object(a.trans)("PRO Chess League"),profile:Object(a.trans)("Profile"),puzzleBattle:Object(a.trans)("Puzzle Battle"),puzzleBattleChallengeMessage:function puzzleBattleChallengeMessage(e,t,n){return Object(a.trans)("<strong>%user%</strong> (%rating%) challenges you to a Puzzle Battle!",{"%user%":'<strong id="'.concat(n,'">').concat(e,"</strong>"),"%rating%":t})},puzzleRush:Object(a.trans)("Puzzle Rush"),puzzles:Object(a.trans)("Puzzles"),resources:Object(a.trans)("Resources"),rules:Object(a.trans)("Rules"),searchUsername:Object(a.trans)("Search username..."),send:Object(a.trans)("Send"),settings:Object(a.trans)("settings",{},"mobile"),shareLink:Object(a.trans)("Share this link with anyone to play."),shop:Object(a.trans)("Shop"),soloChess:Object(a.trans)("Solo Chess"),speedChessChampionship:Object(a.trans)("Speed Chess Championship"),stats:Object(a.trans)("stats",{},"mobile"),streamers:Object(a.trans)("Streamers"),tactics:Object(a.trans)("tactics",{},"mobile"),theme:Object(a.trans)("Theme"),themes:Object(a.trans)("Themes"),topPlayers:Object(a.trans)("Top Players"),tournaments:Object(a.trans)("tournaments",{},"mobile"),typeClubName:Object(a.trans)("Type club name..."),typeFriendName:Object(a.trans)("Type friend name..."),videos:Object(a.trans)("videos",{},"mobile"),vision:Object(a.trans)("vision",{},"mobile"),voteChess:Object(a.trans)("Vote Chess"),waitHere:Object(a.trans)("Wait here for your opponent."),worldChessChampionship:Object(a.trans)("World Chess Championship")}},function(e,t,n){"use strict";var a,r,i;!function(e){!function(e){e.ACCEPTED="accepted",e.PENDING="pending",e.REJECTED="rejected",e.REJECTED_EXPIRED="rejected_expired"}(e.Status||(e.Status={}))}(a||(a={})),r||(r={}),function(e){!function(e){e.ACTIVATED="activate",e.CREATED="create",e.UPDATED="update"}(e.MessageTypes||(e.MessageTypes={}))}(i||(i={})),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i})},function(e,t,n){e.exports=n(21)(15)},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"b",function(){return i});var a={BADGE_TYPE:"data-badge",BADGE_COUNT:"data-badge-count",SEEK_IS_SEEKER:"data-seek-is-seeker",SHAREABLE_GAME_UUID:"data-seek-short-uuid"},r={PUZZLE_BATTLE_CHALLENGE_TOASTER:"puzzle-battle-challenge-toaster",PUZZLE_BATTLE_CHALLENGE_USER:"puzzle-battle-challenge-user",HOME_NOTIFICATIONS:"home-sb-notifications",LOGIN_REGISTER_MODAL:"login-register-modal",OFFLINE_CHALLENGE_TOASTER:"offline-challenge-toaster",NAV_ROOT:"sb",NOTIFICATION_TOASTERS:"notification-toasters",SHAREABLE_GAME_URL_MODAL:"shareable-game-url-modal",SHAREABLE_GAME_SHORT_UUID:"shareable-game-short-uuid"},i={BADGES:".svelte-badge"}},function(e,t,n){"use strict";var a={headers:{accept:"application/json"},withCredentials:!0},r=n(8),i=function(){return(i=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function getRequest(e){var t=e.url,n=e.payload,i=void 0===n?{}:n,s=e.needHeaders,o=void 0===s||s,c=Object.assign({data:{},params:i},o?a:{});return r.default.get(t,c).then(function(e){return e.data})}function postRequest(e){var t=e.url,n=e.payload,i=void 0===n?{}:n;return r.default.post(t,i,a).then(function(e){return e.data})}var s=function(){return(s=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function putRequest(e){var t=e.url,n=e.payload,i=s({data:{}},a);return r.default.put(t,n,i).then(function(e){return e.data})}var o=n(4),c=n(3),l=self.PubSub;function wrapUrl(e){var t=l.options.url.chat,n=e.includes("?")?"&":"?";return""+t+e+n+"uid="+o.g}var u={answerToChatRequest:function answerToChatRequest(e){return wrapUrl("/direct/"+e+"/confirmation")},createDirectChat:function createDirectChat(){return wrapUrl("/direct")},getUsersData:function getUsersData(){return c.default.generate("web_user_callback_id_to_user_data")},getUsersOnlineStatus:function getUsersOnlineStatus(){return l.options.url.presence+"/users"},getChatData:function getChatData(e){return wrapUrl("/direct/"+e)},getChatsList:function getChatsList(){return wrapUrl("/users/"+o.g)},loadMessages:function loadMessages(e){return wrapUrl("/direct/"+e+"/messages")},markChatAsRead:function markChatAsRead(e){return wrapUrl("/users/"+o.g+"/chats/direct/"+e)},removeChat:function removeChat(e){return wrapUrl("/direct/"+e)},postMessage:function postMessage(e,t){return wrapUrl("/direct/"+e+"/messages?request_id="+t)}};var d={};var f,_,h={answerToChatRequest:function answerToChatRequest(e,t){return putRequest({url:u.answerToChatRequest(e),payload:{status:t}})},createDirectChat:function createDirectChat(e,t){return postRequest({url:u.createDirectChat(),payload:{content:t,users:[o.g,e]}}).then(function(e){return e.data})},deleteChat:function deleteChat(e){return function deleteRequest(e){var t=e.url,n=i({data:{}},a);return r.default.delete(t,n).then(function(e){return e.data})}({url:u.removeChat(e)})},getChatData:function getChatData(e){return getRequest({url:u.getChatData(e)})},getChatMessages:function getChatMessages(e,t){var n=u.loadMessages(e),a={limit:o.d.MESSAGES_PER_REQUEST};return t&&(a.before=t),getRequest({url:n,payload:a})},getChatsList:function get_chats_list_getChatsList(e){var t=u.getChatsList(),n={with_counters:!0};return e&&(n.with_inactive=!0),getRequest({url:t,payload:n})},getUsersData:function get_users_data_getUsersData(e){return getRequest({url:u.getUsersData(),payload:{uuids:e},needHeaders:!1})},getUsersOnlineStatus:function getUsersOnlineStatus(e){return getRequest({url:u.getUsersOnlineStatus(),payload:{ids:e.slice(0,o.d.USERS_TRACK_STATUS_LIMIT).join(",")}})},markChatAsRead:function mark_chat_as_readed_markChatAsRead(e,t){return putRequest({url:u.markChatAsRead(e),payload:{read_position:t}})},postMessage:function postMessage(e,t){var n=""+e+String((new Date).getTime()),a=u.postMessage(e,n),r={content:t},i=d[e];return i&&(r.prev_request_id=i),d[e]=n,postRequest({url:a,payload:r})}};!function(e){e.NewMessages="NewMessages",e.OnlineStatus="OnlineStatus",e.OpenChats="OpenChats",e.UserDetails="UserDetails"}(_||(_={}));var m=((f={})[_.NewMessages]={storageKey:"chat_new_messages_"+o.g,timeToLive:31536e6},f[_.OnlineStatus]={storageKey:"chat_users_online_status_"+o.g,timeToLive:3e5},f[_.UserDetails]={storageKey:"chat_users_details_"+o.g,timeToLive:2592e5},f[_.OpenChats]={storageKey:"chat_open_chats_"+o.g,timeToLive:31536e6},f);function addToCache(e,t){var n=m[e],a=read(n.storageKey),r=Date.now()+n.timeToLive,i=1e4*Math.ceil(r/1e4);Object.keys(t).forEach(function(e){a[e]={expiredAt:i,data:t[e]}}),write(n.storageKey,a)}function clearExpiredCache(e){var t=m[e].storageKey;write(t,function filterValidCache(e){void 0===e&&(e={});var t={};return Object.keys(e).forEach(function(n){var a=e[n];a.expiredAt>(new Date).getTime()&&(t[n]=a)}),t}(read(t)))}function getModelsCollection(e,t){var n=function getCacheCollection(e){return clearExpiredCache(e),read(m[e].storageKey)}(e),a=t?function arrayValuesToObject(e){void 0===e&&(e=[]);var t={};return e.forEach(function(e){"string"!=typeof e&&"number"!=typeof e||(t[e]=!0)}),t}(t):{},r={};return Object.keys(n).forEach(function(e){t&&!a[e]||(r[e]=n[e].data)}),r}function read(e){var t=localStorage&&localStorage.getItem(e);return t?JSON.parse(t):{}}function write(e,t){var n=localStorage&&localStorage.getItem(e),a=JSON.stringify(t);a!==n&&localStorage&&localStorage.setItem(e,a)}var p={addUsersData:function addUsersData(e){addToCache(_.UserDetails,e)},getOpenChats:function getOpenChats(){var e=getModelsCollection(_.OpenChats);return e&&e.values||[]},getUnreadMessages:function getUnreadMessages(){var e=getModelsCollection(_.NewMessages);return e&&e.values||{}},getUsersData:function cache_get_users_data_getUsersData(e){return getModelsCollection(_.UserDetails,e)},saveOpenChats:function saveOpenChats(e){addToCache(_.OpenChats,{values:e})},saveUnreadMessages:function saveUnreadMessages(e){var t=e.reduce(function(e,t){return e[t.id]=t.newMessages,e},{});addToCache(_.NewMessages,{values:t})}};var b=n(6),g=n(27);function loadUserPopoverBundle(){var e="data-user-popover-src",t=document.querySelector("["+e+"]");if(t){var n=t.getAttribute("data-user-popover-styles"),a=t.getAttribute(e);if(n){var r=document.createElement("link");r.href=n,r.rel="stylesheet",r.type="text/css",document.head.appendChild(r)}if(a){var i=document.createElement("script");i.src=a,i.defer=!0,document.body.appendChild(i)}}Setter({assetsLoaded:!0})}var v=n(42);var O=n(66),j=n(103),y=n.n(j),w=n(104),k=n.n(w),E=n(19),C=n(41),S=n(26),N={createBoundObject:function createBoundObject(e){return Object.keys(e).forEach(function(t){E.a.isFunction(e[t])&&(e[t]=e[t].bind(e))}),e},createState:function createState(e){var t=Object.create(null);return Object.defineProperty(t,"reset",{writable:!1,enumerable:!1,configurable:!1,value:function value(){return Object.assign(t,e())}}),t.reset(),t},createClient:function createClient(e){return this.createBoundObject(e)},createService:function createService(e){var t=this.createBoundObject(e);return k()(t),t},createUtils:function createUtils(e){return this.createBoundObject(e)},createDisposable:function(){var e=[],t=[],n=[];return{on:function on(t,n,a){if(!t.on||!t.off)throw new Error("invalid event emitter");t.on(n,a),e.push([t,n,a])},off:function off(t,n,a){if(!t.on||!t.off)throw new Error("invalid event emitter");t.off(n,a),C.a.remove(e,function(e){return e[0]===t&&e[1]===n&&e[2]===a})},once:function once(t,n,a){if(!t.once||!t.off)throw new Error("invalid event emitter");t.once(n,a),e.push([t,n,a])},setTimeout:function setTimeout(e,n){for(var a=arguments.length,r=new Array(a>2?a-2:0),i=2;i<a;i++)r[i-2]=arguments[i];var s=S.a.setTimeout(function(){e.apply(void 0,r),C.a.remove(t,s)},n);return t.push(s),s},clearTimeout:function clearTimeout(e){S.a.clearTimeout(e),C.a.remove(t,e)},setInterval:function setInterval(e,t){for(var a=arguments.length,r=new Array(a>2?a-2:0),i=2;i<a;i++)r[i-2]=arguments[i];var s=S.a.setInterval.apply(S.a,[e,t].concat(r));return n.push(s),s},clearInterval:function clearInterval(e){S.a.clearInterval(e),C.a.remove(n,e)},dispose:function dispose(){for(;e.length;){var a=e.shift();a[0].off(a[1],a[2])}for(;t.length;)S.a.clearTimeout(t.shift());for(;n.length;)S.a.clearInterval(n.shift())}}}}.createUtils({escape:function escape(e){return y()(e)},replaceCommandUrls:function replaceCommandUrls(e){var t=e,n=/^((https?:\/\/)?live\.chess\.com\/[a-z]+(\?v=[0-9]+)?)?(#[a-z]+=[0-9a-zA-Z]+)$/g;if(t){for(var a=t.split(" "),r=0;r<a.length;r++){if(a[r].match(n)){var i=n.exec(a[r]);a[r]=i[4]}}t=a.join(" ")}return t},convertUrls:function convertUrls(e,t){var n=e||"",a=t&&t.className?t.className:"auto-converted",r="\\b((?:https?://)?((?:[a-zA-Z0-9-]+\\.)*(?:chess|chesskid|chesspersonality|twitch|prochessleague|youtube)\\.(com|tv)(?:/[\\w#!:.?+=&;%@!-/]*)?))\\b",i='<a href="//$2" class="'.concat(a,'" target="_blank">$1</a>');return t&&t.allDomains&&(r+="|\\b((?:https?://|(www\\.))([-A-Z0-9+&@#/%=~_|$?!:,.]*[A-Z0-9+&@#/%=~_|$]))",i='<a href="//$2$5$6" class="'.concat(a,'" target="_blank">$1$4</a>')),n=String(n).replace(new RegExp(r,"gi"),i)},convertLiveRoutes:function convertLiveRoutes(e,t){var n=t&&t.className?t.className:"auto-converted";return String(e).replace(/\s(#[a-z]+=[^\s]+)/g,' <a href="$1" class="'.concat(n,'">$1</a>'))},isImageUrl:function isImageUrl(e){return!!(e||"").match(/^\s*(https?:)?\/\/([-A-Z0-9+&@#\/%=~_|$?!:,.]+)\.(png|jpg|jpeg|gif)\s*$/gi)},convertUserMention:function convertUserMention(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.className,r=void 0===a?"mention":a,i=n.usernameClassName,s=void 0===i?"user-mention":i;if(!e||!t)return e;var o=new RegExp("(^|[^A-z0-9_!#$%&*@＠/])([@＠](?!".concat(t,")[A-Z0-9]+(:?[_-][A-Z0-9]+)*)(?:\\b)"),"gim"),c=new RegExp("(^|[^A-z0-9_!#$%&*@＠/])([@＠]".concat(t,")(?:\\b)"),"gim");return e.replace(c,'$1<span class="'.concat(s,'">$2</span>')).replace(o,'$1<span class="'.concat(r,'">$2</span>'))}});function messageFactory(e){var t=new Date,n=t.toISOString(),a=e.created_at?new Date(e.created_at):t,r=function messageContentFactory(e){if(!e.body||!e.body.content)return[];var t=[];return e.body.content.split(" ").filter(function(e){return e.trim()}).forEach(function(e){var n=O.a.getByCode(e);!n||n.isPremium&&!o.h?t.push({text:N.convertUrls(e)}):t.push({iconCode:n.name})}),t}(e),i=r.every(function(e){return Boolean(e.iconCode)}),s=r.length<o.d.BIG_EMOTES_LIMIT;return{authorId:e.author_id,content:r,chatId:e.chat_id,createdAt:e.created_at||n,firstInHistory:!1,hasError:!1,id:e.id,isEmotesEnlarged:i&&s,isReaded:!0,originalMessage:e.body.content,timestamp:a.getTime(),updatedAt:e.updated_at||n}}var T=n(15);function canBeMarkedAsRead(e){return e&&e.confirmations[o.g]===T.a.Status.ACCEPTED&&e.messages.length>0&&e.newMessages>0&&e.isOpen&&!e.isMinimized}var A=n(39);var I=n(29),L=n(11);var P={amplitudeLogSendMessage:function amplitudeLogSendMessage(){var e=o.b.SEND_MESSAGE;A.a.logEvent(e.key,e.payload(!0))},openChatsTab:function openChatsTab(){L.default.stores.navigation.changeCurrentTab(I.b.CHATS_TAB)},updateNavigationBadge:function updateNavigationBadge(e){L.default.stores.notifications&&L.default.stores.notifications.setBadgeCount({type:o.d.BADGE_KEY,count:e})},updateNavigationTabVisibility:function updateNavigationTabVisibility(e){L.default.stores.navigation&&L.default.stores.navigation.switchChatTab(e)}};var M={activate:function activateChat(){var e=V.state().inactiveChatsLoaded;$.list.load(e)},addEmoticon:function addEmoticonToChat(e,t){var n=V.chat(e);n&&(n.draft.length&&!n.draft.endsWith(" ")&&(n.draft+=" "),n.draft+=t+" ",$.view.updateOpenChats())},answer:function answer_to_chat_request_answerToChatRequest(e,t){h.answerToChatRequest(e,t).then(function(){var n=V.chat(e);n&&(n.confirmations[o.g]=t,$.list.handleCountersChange(),$.view.updateAll(),t===T.a.Status.ACCEPTED&&$.chat.markAsRead(n))})},close:function closeChat(e){var t=V.chat(e),n=V.state().openChats;t&&(t.isOpen=!1),n=n.filter(function(t){return t.id!==e}),$.view.updateOpenChats(n)},handleSendMessageError:function handleSendMessageError(e,t,n){var a=e.messages.find(function(e){return e.id===o.d.PENDING_MESSAGE_ID&&e.originalMessage===t});a&&(a.hasError=!0),n.response&&n.response.status===o.d.HTTP_CODE_TOO_MUCH_REQUESTS&&$.chat.tooMuchRequestsFilter(e,!0),$.view.updateOpenChats()},markAsRead:function mark_chat_as_read_markChatAsRead(e){if(canBeMarkedAsRead(e)){var t=e.messages.slice(-1)[0];setTimeout(function(){canBeMarkedAsRead(e)&&h.markChatAsRead(e.id,t.createdAt).then(function(t){var n=t.read_position,a=new Date(n).getTime(),r=e.messages.filter(function(e){var t=e.authorId;return e.timestamp>a&&t!==o.g});e.newMessages=r.length,$.view.updateOpenChats(),$.list.handleCountersChange(),$.list.filter()})},o.d.TIMEOUT_TILL_MESSAGE_IS_READ)}},maximize:function maximizeChat(e){var t=V.chat(e);t&&(t.isMinimized=!1,$.view.updateOpenChats(),t.newMessages?(G.scroll.toLastMessage(t.id),$.chat.markAsRead(t)):t.scrollPosition&&G.scroll.toPosition(t.id,t.scrollPosition),$.openChats.save())},messageDelete:function messageDelete(e,t){var n=V.chat(e);n&&(n.messages.splice(t,1),$.view.updateOpenChats())},minimize:function minimizeChat(e){var t=V.chat(e);t&&(t.isMinimized=!0,$.view.updateOpenChats())},move:function moveChat(e){var t=V.chat(e.chatId);if(t){var n=window.innerHeight-t.windowHeight,a=o.d.CHAT_WINDOW_MOVE_TRESHOLD,r=window.innerWidth-t.windowWidth-o.d.DEFAULT_CHAT_WINDOW_WIDTH,i=!0,s=Math.min(e.right,r),c=Math.min(e.bottom,n);s=Math.max(s,0),c<a&&(c=0,s=0,i=!1),t.isDetached=i,t.positionBottom=c,t.positionRight=s,$.view.updateOpenChats()}},open:function openChat(e){var t=V.state(),n=V.chat(e);n&&(n.isOpen?n.isMinimized&&$.chat.maximize(e):(n.isOpen=!0,n.isMinimized=!1,n.scrollPosition=null,t.openChats.unshift(n),$.view.updateOpenChats(),G.chat.load(e),G.openChats.checkLimit(),t.assetsLoaded||loadUserPopoverBundle()))},receiveMessage:function receiveChatMessage(e,t){void 0===t&&(t=!1);var n=V.chat(e.message.chat_id);if(n){var a=messageFactory(e.message),r=function findPendingMessageIndex(e,t){return t.authorId!==o.g?-1:e.messages.findIndex(function(e){var n=e.id===o.d.PENDING_MESSAGE_ID,a=e.originalMessage===t.originalMessage;return n&&a})}(n,a);r>-1?n.messages.splice(r,1,a):n.messages.push(a),function updateUnreadMessagesCounter(e,t){var n=t!==o.g,a=e.confirmations[o.g]===T.a.Status.ACCEPTED,r=!e.isOpen||e.isMinimized;n&&a&&r&&e.newMessages++}(n,a.authorId),n.lastMessageTimestamp=a.timestamp,$.view.updateAll(),G.scroll.toLastMessage(n.id),t||($.list.handleCountersChange(),$.chat.markAsRead(n),$.list.filter(),n.isOpen&&$.openChats.save())}},resize:function resizeChat(e){var t=V.chat(e.chatId);if(t){var n=Math.max(e.height,o.d.MIN_CHAT_WINDOW_HEIGHT),a=Math.max(e.width,o.d.MIN_CHAT_WINDOW_WIDTH);n=Math.min(n,window.innerHeight),a=Math.min(a,window.innerWidth-o.d.DEFAULT_CHAT_WINDOW_WIDTH),window.innerWidth<o.d.DEFAULT_CHAT_WINDOW_WIDTH&&(a=window.innerWidth*o.d.CHAT_WINDOW_WIDTH_ON_MOBILE),t.windowHeight=n,t.windowWidth=a,$.view.updateOpenChats()}},sendMessage:function sendMessage(e,t){var n=V.chat(e);if(n&&t&&!$.chat.tooMuchRequestsFilter(n)){n.draft="",n.isActive||(n.isActive=!0,$.pubsub.subscribe(n.channel));var a=function pendingMessageFactory(e,t){return{action:o.d.PUBSUB_ACTION_CREATED,message:{author_id:o.g,id:o.d.PENDING_MESSAGE_ID,body:{content:t},chat_id:e}}}(e,t);$.chat.receiveMessage(a,!0),h.postMessage(e,t).then(P.amplitudeLogSendMessage).catch(function(e){$.chat.handleSendMessageError(n,t,e)}),$.view.updateOpenChats()}},tooMuchRequestsFilter:function tooMuchRequestsFilter(e,t){void 0===t&&(t=!1);var n=(new Date).getTime()-6e4,a=e.messages.filter(function(e){var t=e.authorId,a=e.timestamp;return t===o.g&&a>n}).length;return!(!t&&a<o.d.USER_MUTE_MESSAGES_ANMOUNT||(e.isTemporaryMuted=!0,$.view.updateOpenChats(),setTimeout(function(){e.isTemporaryMuted=!1,$.view.updateOpenChats()},o.d.USER_MUTE_TIMEOUT),0))},toggleEmotes:function toggleEmotesPopup(e,t){var n=V.chat(e);if(n){var a=void 0!==t?t:!n.emotesPopupIsOpen;n.emotesPopupIsOpen=a,$.view.updateOpenChats()}},updateConfirmations:function updateChatConfirmations(e,t){var n=V.chat(e);n&&(t.forEach(function(e){var t=e.status,a=e.user;n.confirmations[a]=t}),$.view.updateAll())}},R=!1;function realActionCall(){$.list.updateCountersFromCache()}function viewUpdateListener(){realActionCall(),document.removeEventListener("visibilitychange",viewUpdateListener),R=!1}var x={browserTabsSync:function browserTabsSync(){window.addEventListener("storage",function(e){e.key===m[_.NewMessages].storageKey&&("visible"===document.visibilityState?realActionCall():R||(document.addEventListener("visibilitychange",viewUpdateListener),R=!0))})}};function directChatFactory(e,t){void 0===t&&(t=!1);var n=e.confirmations.map(function(e){return e.user}),a=n[0]===o.g?n[1]:n[0],r={};e.confirmations.forEach(function(e){var t=e.status,n=e.user;return r[n]=t});var i=p.getUsersData(),s=i[a]?i[a].avatarUrl:"",l=i[a]?i[a].username:"",u=o.d.DEFAULT_CHAT_WINDOW_HEIGHT,d=o.d.DEFAULT_CHAT_WINDOW_WIDTH,f={};n.forEach(function(e){f[e]={};var t=i[e];if(t){var n=c.default.generate("web_member_view",{username:t.username});f[e]=Object.assign({},t,{profileUrl:n})}});var _=e.unread_count;return r[o.g]===T.a.Status.PENDING?_=1:[T.a.Status.REJECTED,T.a.Status.REJECTED_EXPIRED].includes(r[o.g])&&(_=0),{avatarUrl:s||"",channel:e.channel,confirmations:r,draft:"",emotesPopupIsOpen:!1,id:e.id,isActive:e.active,isChatInitiationForm:t,isDetached:!1,isMinimized:!1,isOnline:!1,isOpen:!1,isPlaceholder:!1,isTemporaryMuted:!1,lastMessageTimestamp:e.last_position?new Date(e.last_position).getTime():0,messages:[],messagesListIsLoading:!1,name:l||"",newMessages:_,positionBottom:0,positionRight:0,scrollPosition:null,userIds:n,userId:a,users:f,windowHeight:u,windowWidth:d}}function defaultState(){return{assetsLoaded:!1,chats:{direct:[],group:[],clubs:[]},chatsMap:{},chatListIsLoading:!1,filteredList:[],inactiveChatsCounter:0,inactiveChatsLoaded:!1,isConnected:!1,openChats:[],searchQuery:"",showInactiveChats:!1,subscriptions:{},unrecoverableFailure:!1}}var D={createChatDirect:function createChatDirect(e){var t=e.temporaryChat,n=e.isRepeatedRequest,a=t.draft,r=t.userId;t.draft="",$.view.updateOpenChats(),h.createDirectChat(r,a).then(function(e){var t=V.state(),a=t.chats,i=t.openChats,s=directChatFactory(e),o=a.direct.findIndex(function(e){return e.userId===r});o<0&&(a.direct.unshift(s),$.list.createMap(),$.view.updateAll()),(o=i.findIndex(function(e){return e.userId===r}))>-1&&(n?$.chat.updateConfirmations(s.id,e.confirmations):(i.splice(o,1,s),$.view.updateOpenChats(i)),G.chat.load(s.id))}).catch(function(e){if(e.response&&e.response.status===o.d.HTTP_CODE_FORBIDDEN){var t=V.state().openChats.find(function(e){return e.userId===r});if(!t)return;t.confirmations[r]=T.a.Status.REJECTED,$.view.updateOpenChats()}})},createMap:function createChatsMap(){var e=V.state().chats;Setter({chatsMap:e.direct.concat(e.group,e.clubs).reduce(function(e,t){return e[t.id]=t,e},{})})},filter:function filterChatList(){var e=V.state().searchQuery.trim().toLowerCase(),t=T.a.Status.PENDING,n=V.allChats();e&&(n=n.filter(function(t){return t.name.toLowerCase().includes(e)})),n.sort(function(e,n){return n.newMessages&&!e.newMessages?1:e.newMessages&&!n.newMessages?-1:n.confirmations[o.g]===t?1:e.confirmations[o.g]===t?-1:n.lastMessageTimestamp>e.lastMessageTimestamp?1:-1}),Setter({filteredList:n})},handleCountersChange:function handleCountersChange(){var e=V.unreadChats();p.saveUnreadMessages(e),$.list.updateCountersSum()},load:function loadChatList(e){return void 0===e&&(e=!1),h.getChatsList(e).then(function(t){t.chats&&t.chats.direct&&(Setter({chats:Object.assign({direct:[],group:[],clubs:[]},{club:[],direct:t.chats.direct.map(function(e){return directChatFactory(e)}),group:[]}),inactiveChatsCounter:t.inactive_chats_counter,inactiveChatsLoaded:e}),$.list.onload())}).catch(function(){$.list.onload()})},onload:function chatListOnload(){$.list.createMap(),$.pubsub.checkSubscriptions(),$.users.updateDetails(),$.list.handleCountersChange(),$.list.filter(),G.openChats.syncObjects(),$.openChats.save();var e=V.state(),t=e.openChats,n=e.inactiveChatsCounter;t.forEach(function(e){G.chat.load(e.id)});var a=V.allChats().length>0||n>0;P.updateNavigationTabVisibility(a)},toggleInactive:function toggleInactiveChats(){var e=V.state(),t=e.inactiveChatsLoaded,n=e.showInactiveChats;t?Setter({showInactiveChats:!n}):$.list.load(!0).then(toggleInactiveChats)},updateCountersFromCache:function updateCountersFromCache(){var e=p.getUnreadMessages();V.allChats().forEach(function(t){return t.newMessages=e[t.id]||0}),$.list.updateCountersSum(),$.view.updateAll()},updateCountersSum:function updateCountersSum(){var e=V.newMessagesCounter();P.updateNavigationBadge(e),e>0&&P.openChatsTab()}};var U={openEmptyChat:function openEmptyChat(e){var t=V.state(),n=t.assetsLoaded,a=t.openChats,r=T.a.Status,i=(new Date).toISOString();if(!a.find(function(t){return t.userId===e.id})){var s=directChatFactory({active:!0,channel:"",confirmations:[{user:o.g,status:r.ACCEPTED},{user:e.id,status:r.PENDING}],created_at:i,id:"temporary-chat-with-"+e.id,type:"direct",unread_count:0,updated_at:i},!0);a.unshift(s),$.view.updateOpenChats(a),G.openChats.checkLimit(),n||loadUserPopoverBundle()}},restore:function restoreOpenChats(){var e=p.getOpenChats();$.view.updateOpenChats(e),V.state().openChats.forEach(function(e){e.scrollPosition?G.scroll.toPosition(e.id,e.scrollPosition):G.scroll.toLastMessage(e.id)})},save:function save_open_chats_saveOpenChats(){var e=V.state().openChats;p.saveOpenChats(e)}};var B={checkSubscriptions:function checkSubscriptions(){V.state().isConnected?V.channelsToSubscribe().forEach($.pubsub.subscribe):setTimeout(checkSubscriptions,o.d.INTERVAL_GET_PUBSUB_STATE_INITIAL)},handleMessage:function handlePubSubMessage(e){var t,n="metadata"in e&&e.metadata.message_type;if("metadata"in e&&n===T.b.MessageTypes.CREATED)G.list.receiveInvite(e);else if("metadata"in e&&n===T.b.MessageTypes.UPDATED){var a=e.data,r=a.id,i=a.confirmations;$.chat.updateConfirmations(r,i)}else"metadata"in e&&n===T.b.MessageTypes.ACTIVATED?$.chat.activate():"status"in e&&"id"in e?$.users.updateOnlineStatus(((t={})[e.id]=e.status===o.d.ONLINE_STATUS,t)):"message"in e&&$.chat.receiveMessage(e)},subscribe:function subscribe(e){var t=V.state().subscriptions;if(!t[e]){var n=PubSub.subscribe(e,{onDetach:function onDetach(){t[e]=null,Setter({subscriptions:t})},onMessage:function onMessage(e){$.pubsub.handleMessage(e)}});t[e]=n,Setter({subscriptions:t})}},unsubscribe:function unsubscribe(e){var t=V.state().subscriptions,n=t[e];n&&(n.close(),t[e]=null,Setter({subscriptions:t}))},updateState:function updateState(){if(PubSub.client){var e=PubSub.client.getState().transport,t=!!e&&e.isConnected,n=o.d.INTERVAL_GET_PUBSUB_STATE_INITIAL;t&&(n=o.d.INTERVAL_GET_PUBSUB_STATE),Setter({isConnected:t}),setTimeout(updateState,n)}}};var z=n(7);var $={chat:M,init:x,list:D,openChats:U,pubsub:B,users:{loadOnlineStatus:function loadOnlineStatus(){var e=V.usersIds();0!==e.length&&h.getUsersOnlineStatus(e).then(function(e){var t=e.users;if(t&&0!==t.length){var n={};t.forEach(function(e){var t=e.id,a=e.status;return n[t]=a===o.d.ONLINE_STATUS}),$.users.updateOnlineStatus(n)}})},updateDetails:function updateDetails(){var e=V.usersIds(),t=p.getUsersData(),n=e.filter(function(e){var n=t[e];return!n||o.a.some(function(e){return void 0===n[e]})});n.length?h.getUsersData(n).then(function(e){p.addUsersData(e),$.users.updateDetailsFromCache()}):$.users.updateDetailsFromCache()},updateDetailsFromCache:function updateDetailsFromCache(){var e=V.state(),t=e.chats,n=e.openChats,a=p.getUsersData();t.direct.concat(n).forEach(function(e){var t=a[e.userId];t&&(t.avatarUrl&&(e.avatarUrl=t.avatarUrl),t.username&&(e.name=t.username)),e.userIds.forEach(function(t){var n=a[t];n&&(n.profileUrl=c.default.generate("web_member_view",{username:n.username}),n.isSelf=t===o.g,n.membership&&(n.membershipValue=z.g[n.membership]),e.users[t]=Object.assign({},n))})}),$.view.updateAll()},updateOnlineStatus:function updateOnlineStatus(e){V.state().chats.direct.forEach(function(t){"boolean"==typeof e[t.userId]&&(t.isOnline=e[t.userId])}),$.view.updateAll()}},view:{updateAll:function updateAll(){$.view.updateOpenChats(),$.view.updateChats()},updateChats:function updateChats(e){void 0===e&&(e=V.state().chats),Setter({chats:e})},updateOpenChats:function updateOpenChats(e){void 0===e&&(e=V.state().openChats),Setter({openChats:e}),p.saveOpenChats(e)}}};var F=function(e,t,n,a){return new(n||(n=Promise))(function(r,i){function fulfilled(e){try{step(a.next(e))}catch(e){i(e)}}function rejected(e){try{step(a.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((a=a.apply(e,t||[])).next())})},H=function(e,t){var n,a,r,i,s={label:0,sent:function sent(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(o){return function step(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,a=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};var G={chat:{add:function addChat(e){var t;return p.addUsersData(((t={})[e.id]={avatarUrl:e.avatarUrl,username:e.username},t)),h.createDirectChat(e.id,"")},load:function loadMessages(e,t){var n=V.chat(e);n&&!n.isChatInitiationForm&&(n.messages.length&&n.messages[0].firstInHistory&&t||(n.messagesListIsLoading=!0,h.getChatMessages(e,t).then(function(a){n.messagesListIsLoading=!1;var r=(a.messages||[]).map(messageFactory).reverse();if(0!==r.length){var i=r.slice(-1)[0],s=G.scroll.getScrollHeight(e)-(n.scrollPosition||0);W.chat.updateMessages({chatId:e,loadedMessages:r});var o=G.scroll.getScrollHeight(e)-s;t?G.scroll.toPosition(e,o):G.scroll.toMessage(i),$.chat.markAsRead(n),$.users.updateDetails()}})))},startDirect:function startDirectChat(e){return F(this,void 0,void 0,function(){var t,n,a,r,i;return H(this,function(s){switch(s.label){case 0:return n=V.state(),a=n.chats,r=n.inactiveChatsLoaded,(i=a.direct.find(function(t){return t.userId===e.id}))?($.chat.open(i.id),[2]):r?[3,2]:[4,$.list.load(!0)];case 1:return s.sent(),startDirectChat(e),[2];case 2:return p.addUsersData(((t={})[e.id]={avatarUrl:e.avatarUrl,username:e.username},t)),$.openChats.openEmptyChat(e),$.users.updateDetails(),[2]}})})},remove:function delete_chat_deleteChat(e){h.deleteChat(e).then(function(){$.chat.close(e),$.list.load()})}},list:{init:function initChatList(){$.pubsub.updateState(),$.openChats.restore(),V.state().openChats.length&&window.addEventListener("load",loadUserPopoverBundle,{once:!0}),$.list.load().then(function(){$.users.loadOnlineStatus()}),PubSub.on(g.a.FAILURE,function(){Setter({unrecoverableFailure:!0})}),$.init.browserTabsSync(),window.addEventListener("resize",Object(v.a)(function(){G.openChats.checkLimit(),G.openChats.checkHeight()},o.d.WINDOW_RESIZE_DEBOUNCE)),window.addEventListener("message",function(e){var t=e.data;t&&t.key===b.e.START_DIRECT_CHAT&&G.chat.startDirect(t.payload)})},receiveInvite:function receiveInvite(e){"metadata"in e&&"data"in e&&$.list.load()}},openChats:{checkHeight:function checkOpenChatsHeight(){var e=V.state().openChats,t=window.innerHeight;e.forEach(function(e){e.windowHeight>t&&$.chat.resize({chatId:e.id,height:t,width:e.windowWidth})})},checkLimit:function checkOpenChatsLimit(){var e=V.state().openChats.filter(function(e){return!e.isDetached});if(e.reduce(function(e,t){return e+t.windowWidth},0)+o.d.DEFAULT_CHAT_WINDOW_WIDTH>window.innerWidth&&e.length>1){var t=e.slice(-1)[0];$.chat.close(t.id),G.openChats.checkLimit()}else if(1===e.length){var n=e[0],a=window.innerWidth<n.windowWidth,r=n.windowWidth<o.d.MIN_CHAT_WINDOW_WIDTH;(a||r)&&(n.windowWidth=window.innerWidth*o.d.CHAT_WINDOW_WIDTH_ON_MOBILE)}},syncObjects:function syncOpenChatsObjects(){var e=V.state().openChats;W.list.syncOpenChatsObjects({savedChats:e}),G.openChats.checkLimit(),G.openChats.checkHeight()}},scroll:{getScrollHeight:function getScrollHeight(e){var t=V.chat(e);if(!t)return 0;var n=o.e.messagesList(t.id),a=document.querySelector(n);return a?a.scrollHeight:0},handle:function handleChatScroll(e,t){var n=V.chat(e);if(n){var a=n.scrollPosition;if(null!==a&&t<a&&t<o.d.SCROLL_HEIGHT_TRIGGER){var r=n.messages[0];r&&!n.messagesListIsLoading&&G.chat.load(e,r.createdAt)}n.scrollPosition=t,$.openChats.save()}},toLastMessage:function scrollToLastMessage(e){var t=V.chat(e);if(t&&0!==t.messages.length){var n=t.messages.slice(-1)[0];G.scroll.toMessage(n)}},toMessage:function scrollToMessage(e){var t=V.chat(e.chatId);if(t){var n=t.messages.findIndex(function(t){return t.id===e.id})<t.messages.length-o.d.MESSAGES_PER_REQUEST,a=o.e.messageElement(e.id);setTimeout(function(){var e=document.querySelector(a);e&&e.scrollIntoView(n)})}},toPosition:function scrollToPosition(e,t){var n=V.chat(e);if(n){var a=o.e.messagesList(n.id);setTimeout(function(){var e=document.querySelector(a);e&&e.scrollTo(0,t)})}}}};var q=n(25);var V={allChats:function getAllChatsArray(){var e=V.state().chatsMap;return Object.values(e)},channelsToSubscribe:function getChannelsToSubscribe(){var e=V.state(),t=e.chats,n=e.subscriptions,a=[];t.direct.forEach(function(e){if(e.isActive){n[e.channel]||a.push(e.channel);var t=o.c.userStatusChannel(e.userId);n[t]||a.push(t)}});var r=o.c.personalChannel(o.g);return n[r]||a.push(r),a},chat:function getChat(e){var t=V.state(),n=t.chatsMap,a=t.openChats;return n[e]||a.find(function(t){return t.id===e})},newMessagesCounter:function getNewMessagesCounter(){return V.allChats().reduce(function(e,t){var n=t.confirmations[o.g],a=t.newMessages;return n===T.a.Status.PENDING?a=1:n===T.a.Status.REJECTED&&(a=0),e+a},0)},state:function getState(){return V.store().get()},store:function getStore(){return q.default.stores.chat},unreadChats:function getUnreadChats(){return V.allChats().filter(function(e){return e.newMessages>0})},usersIds:function getUsersIds(){var e=V.state(),t=e.chats,n=e.openChats,a=t.direct.map(function(e){return e.userId}),r=n.filter(function(e){return e.isChatInitiationForm}).map(function(e){return e.userId});return[o.g].concat(a,r)}},W={chat:{updateMessages:bind(function updateMessagesList(e,t){var n=t.chatId,a=t.loadedMessages,r=e.chatsMap[n];if(r&&a.length){r.messages=r.messages.concat(a);var i={};r.messages=r.messages.filter(function(e){var t=e.id;if(t===o.d.PENDING_MESSAGE_ID)return!0;var n=i[t];return i[t]=!0,!n}),r.messages.sort(function(e,t){return e.timestamp<t.timestamp?-1:1}),a.length<o.d.MESSAGES_PER_REQUEST&&r.messages.length&&(r.messages[0].firstInHistory=!0)}return e})},list:{syncOpenChatsObjects:bind(function syncOpenChatsObjects(e,t){var n=t.savedChats,a={};return n.forEach(function(t){var n,r=e.chatsMap[t.id];!r&&t.isChatInitiationForm&&(r=t),r&&!r.isOpen&&(r.isOpen=!0,r.isPlaceholder=!0,r.emotesPopupIsOpen=t.emotesPopupIsOpen,r.isDetached=t.isDetached,r.isMinimized=t.isMinimized,r.messages=t.messages,r.positionBottom=t.positionBottom,r.positionRight=t.positionRight,r.scrollPosition=t.scrollPosition,r.windowHeight=t.windowHeight,r.windowWidth=t.windowWidth,(n=e.openChats.findIndex(function(e){return e.id===r.id}))>-1&&e.openChats.splice(n,1,r)),r&&!a[t.userId]||(n=e.openChats.findIndex(function(e){return e.id===t.id}))>-1&&e.openChats.splice(n,1),a[t.userId]=!0}),e})}};function bind(e){return function(t){var n=Object.assign({},V.state()),a=e(n,t);q.default.stores.chat.set(a)}}function Setter(e){V.store().set(e)}n.d(t,"a",function(){return G}),n.d(t,"b",function(){return V}),n.d(t,"f",function(){return defaultState}),n.d(t,"c",function(){return W}),n.d(t,"e",function(){return Setter}),n.d(t,"d",function(){return $})},function(e,t,n){"use strict";var a=n(24),r=n.n(a);function isNull(e){return null===e}function isUndefined(e){return void 0===e}function isObject(e){return!isNull(e)&&"object"===r()(e)}t.a={isString:function isString(e){return"string"==typeof e},isFunction:function isFunction(e){return"function"==typeof e},isNumber:function isNumber(e){return"number"==typeof e},isNil:function isNil(e){return isNull(e)||isUndefined(e)},isObject:isObject,isPlainObject:function isPlainObject(e){return!!isObject(e)&&(e.constructor&&"Object"===e.constructor.name)},isArray:function isArray(e){return Array.isArray(e)},isError:function isError(e){if(!isObject(e))return!1;var t=Object.prototype.toString.call(e);return"[object Error]"===t||"[object DOMException]"===t},isUndefined:isUndefined}},function(e,t,n){"use strict";var a=n(5),r=n.n(a),i=n(6),s=n(32),o=n(64),c=(n(10),n(31)),l=n(39);function ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}n.d(t,"c",function(){return d}),n.d(t,"a",function(){return _}),n.d(t,"b",function(){return h}),n.d(t,"d",function(){return m}),n.d(t,"e",function(){return p}),n.d(t,"f",function(){return b}),n.d(t,"g",function(){return g}),n.d(t,"h",function(){return v}),n.d(t,"i",function(){return O}),n.d(t,"j",function(){return j}),n.d(t,"k",function(){return y}),n.d(t,"l",function(){return w});var u=document.querySelector(i.l.MAIN_NAV),d=function generateMyTurnsLink(e){return Object(s.a)(e)},f=function getMainNav(){return null==u&&(u=document.querySelector(i.l.MAIN_NAV)),u},_=function commentIcon(e){return{forum_topic:"chat",blog:"paper-pencil",news:"news",article:"page",votechess:"checkbox",chess_video:"play",game:"chess-move",opening:"book-alt",tactics:"chess-board-puzzle",tournament:"order",club:"users",team_match:"crossed-swords",survey:"question"}[e]},h=function countryCode(e){return e.country_code.toLowerCase()},m=function getTvByUserLanguage(e){if(null!=e){var t;t=Array.isArray(e)?e:[e];var n=window.context.i18n,a=n.contentLanguage,r=n.locale,s=t.find(function(e){var t=e.language;return r===t});return s||(a===i.f.DEFAULT_AND_USER||a===i.f.ANY?t.find(function(e){var t=e.language;return e.defaultLanguage===t}):void 0)}},p=function isLive(){return"/live"===window.location.pathname.substr(0,5)},b=o.a,g=function isMobileNav(){return window.innerWidth<=i.j.MOBILE_WIDTH},v=function joinUrl(e){var t=e||window.location.href,n=f();return n?"".concat(n.getAttribute(i.a.registerRoute),"?redirectUrl=").concat(encodeURI(t)):i.k.registerRoute(e)},O=function loginUrl(e){var t=e||window.location.href,n=f();return n?"".concat(n.getAttribute(i.a.loginAndGoRoute),"?redirectUrl=").concat(encodeURI(t)):i.k.loginAndGoRoute(e)},j=function mountReplace(e,t){var n=document.createDocumentFragment(),a=new e(function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach(function(t){r()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{target:n}));return t.target.parentNode.replaceChild(n,t.target),a},y=function sendInvitation(e){var t="body=Play a daily game with me on chess.com by clicking on the following link ".concat(e," or copying and pasting into your browser.");Object(c.h)("subject=Play chess with me on Chess.com",t)},w=function sendSocialInvitation(e){var t=e.shareUrl,n=e.network,a=e.username,r='Play chess with me? I play on @chesscom as "'.concat(a,'." Click the link to play me in a daily game!!');!function openWindow(e){l.a.logSocialShare();var t=window.screen.width/2-280,n=window.screen.height/2-340,a="width=".concat(560,", height=").concat(510),r="left=".concat(t,", top=").concat(n);window.open(e,"_blank","".concat(a,",").concat(r,",").concat("resizable=no, status=no, menubar=no, scrollbars=no"))}(n===i.m.TWITTER?"https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(r),"&url=").concat(encodeURIComponent(t)):"http://www.facebook.com/sharer.php?u=".concat(encodeURIComponent(t)))}},function(e,t){e.exports=coreDLL},function(e,t,n){"use strict";var a=n(99),r=n.n(a).a;t.a=new class service_CacheService{constructor(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.cache=new r(e),this.cacheKey=t,this.memory=n}get ready(){return!1!==this.cache}get(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.memory[e]?this.memory[e]:this.ready?(this.pull(),void 0!==this.memory[e]?this.memory[e]:t):t}pull(){return this.memory=this.cache.get(this.cacheKey)||{},this}push(){return this.cache.set(this.cacheKey,this.memory),this}remove(e){return this.ready?(this.pull(),void 0===this.memory[e]?this:(delete this.memory[e],this.push())):this}set(e,t){return this.ready?(this.pull(),this.memory[e]=t,this.push()):this}}({namespace:null,storages:["local","cookie"],storage:"local",expireDays:1},"json_settings")},,function(e,t){function _typeof2(e){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof2(e){return typeof e}:function _typeof2(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(t){return"function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?e.exports=_typeof=function _typeof(e){return _typeof2(e)}:e.exports=_typeof=function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)},_typeof(t)}e.exports=_typeof},function(e,t,n){e.exports=n(21)(46)},function(e,t,n){"use strict";var a=n(46),r={};["setTimeout","setInterval","clearTimeout","clearInterval"].forEach(function(e){r[e]=a.a[e].bind(a.a)}),t.a=r},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a={CONNECT:"connect",DISCONNECT:"disconnect",FAILURE:"failure",MESSAGE:"message",RECONNECT:"reconnect",SUBSCRIBE:"subscribe",SUBSCRIBE_FAIL:"subscribe_fail",UNSUBSCRIBE:"unsubscribe"}},function(e,t,n){(function(t,n,a){var r;r=function(){"use strict";var e="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}createCommonjsModule(function(t,n){
/*! JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org */
(function(){var a={function:!0,object:!0},r=a.object&&n&&!n.nodeType&&n,i=a[typeof window]&&window||this,s=r&&a.object&&t&&!t.nodeType&&"object"==typeof e&&e;function runInContext(e,t){e||(e=i.Object()),t||(t=i.Object());var n=e.Number||i.Number,r=e.String||i.String,s=e.Object||i.Object,o=e.Date||i.Date,c=e.SyntaxError||i.SyntaxError,l=e.TypeError||i.TypeError,u=e.Math||i.Math,d=e.JSON||i.JSON;"object"==typeof d&&d&&(t.stringify=d.stringify,t.parse=d.parse);var f,_,h,m=s.prototype,p=m.toString,b=new o(-0xc782b5b800cec);try{b=-109252==b.getUTCFullYear()&&0===b.getUTCMonth()&&1===b.getUTCDate()&&10==b.getUTCHours()&&37==b.getUTCMinutes()&&6==b.getUTCSeconds()&&708==b.getUTCMilliseconds()}catch(e){}function has(e){if(has[e]!==h)return has[e];var a;if("bug-string-char-index"==e)a="a"!="a"[0];else if("json"==e)a=has("json-stringify")&&has("json-parse");else{var i,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var c=t.stringify,l="function"==typeof c&&b;if(l){(i=function(){return 1}).toJSON=i;try{l="0"===c(0)&&"0"===c(new n)&&'""'==c(new r)&&c(p)===h&&c(h)===h&&c()===h&&"1"===c(i)&&"[1]"==c([i])&&"[null]"==c([h])&&"null"==c(null)&&"[null,null,null]"==c([h,p,null])&&c({a:[i,!0,!1,null,"\0\b\n\f\r\t"]})==s&&"1"===c(null,i)&&"[\n 1,\n 2\n]"==c([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==c(new o(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==c(new o(864e13))&&'"-000001-01-01T00:00:00.000Z"'==c(new o(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==c(new o(-1))}catch(e){l=!1}}a=l}if("json-parse"==e){var u=t.parse;if("function"==typeof u)try{if(0===u("0")&&!u(!1)){var d=5==(i=u(s)).a.length&&1===i.a[0];if(d){try{d=!u('"\t"')}catch(e){}if(d)try{d=1!==u("01")}catch(e){}if(d)try{d=1!==u("1.")}catch(e){}}}}catch(e){d=!1}a=d}}return has[e]=!!a}if(!has("json")){var g=has("bug-string-char-index");if(!b)var v=u.floor,O=[0,31,59,90,120,151,181,212,243,273,304,334],j=function(e,t){return O[t]+365*(e-1970)+v((e-1969+(t=+(t>1)))/4)-v((e-1901+t)/100)+v((e-1601+t)/400)};if((f=m.hasOwnProperty)||(f=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=p?f=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,f=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,f.call(this,e)}),_=function(e,t){var n,r,i,s=0;for(i in(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n)f.call(r,i)&&s++;return n=r=null,s?_=2==s?function(e,t){var n,a={},r="[object Function]"==p.call(e);for(n in e)r&&"prototype"==n||f.call(a,n)||!(a[n]=1)||!f.call(e,n)||t(n)}:function(e,t){var n,a,r="[object Function]"==p.call(e);for(n in e)r&&"prototype"==n||!f.call(e,n)||(a="constructor"===n)||t(n);(a||f.call(e,n="constructor"))&&t(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],_=function(e,t){var n,i,s="[object Function]"==p.call(e),o=!s&&"function"!=typeof e.constructor&&a[typeof e.hasOwnProperty]&&e.hasOwnProperty||f;for(n in e)s&&"prototype"==n||!o.call(e,n)||t(n);for(i=r.length;n=r[--i];o.call(e,n)&&t(n));}),_(e,t)},!has("json-stringify")){var y={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},w=function(e,t){return("000000"+(t||0)).slice(-e)},k=function(e){for(var t='"',n=0,a=e.length,r=!g||a>10,i=r&&(g?e.split(""):e);n<a;n++){var s=e.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=y[s];break;default:if(s<32){t+="\\u00"+w(2,s.toString(16));break}t+=r?i[n]:e.charAt(n)}}return t+'"'},E=function(e,t,n,a,r,i,s){var o,c,u,d,m,b,g,O,y,C,S,N,T,A,I,L;try{o=t[e]}catch(e){}if("object"==typeof o&&o)if("[object Date]"!=(c=p.call(o))||f.call(o,"toJSON"))"function"==typeof o.toJSON&&("[object Number]"!=c&&"[object String]"!=c&&"[object Array]"!=c||f.call(o,"toJSON"))&&(o=o.toJSON(e));else if(o>-1/0&&o<1/0){if(j){for(m=v(o/864e5),u=v(m/365.2425)+1970-1;j(u+1,0)<=m;u++);for(d=v((m-j(u,0))/30.42);j(u,d+1)<=m;d++);m=1+m-j(u,d),g=v((b=(o%864e5+864e5)%864e5)/36e5)%24,O=v(b/6e4)%60,y=v(b/1e3)%60,C=b%1e3}else u=o.getUTCFullYear(),d=o.getUTCMonth(),m=o.getUTCDate(),g=o.getUTCHours(),O=o.getUTCMinutes(),y=o.getUTCSeconds(),C=o.getUTCMilliseconds();o=(u<=0||u>=1e4?(u<0?"-":"+")+w(6,u<0?-u:u):w(4,u))+"-"+w(2,d+1)+"-"+w(2,m)+"T"+w(2,g)+":"+w(2,O)+":"+w(2,y)+"."+w(3,C)+"Z"}else o=null;if(n&&(o=n.call(t,e,o)),null===o)return"null";if("[object Boolean]"==(c=p.call(o)))return""+o;if("[object Number]"==c)return o>-1/0&&o<1/0?""+o:"null";if("[object String]"==c)return k(""+o);if("object"==typeof o){for(A=s.length;A--;)if(s[A]===o)throw l();if(s.push(o),S=[],I=i,i+=r,"[object Array]"==c){for(T=0,A=o.length;T<A;T++)N=E(T,o,n,a,r,i,s),S.push(N===h?"null":N);L=S.length?r?"[\n"+i+S.join(",\n"+i)+"\n"+I+"]":"["+S.join(",")+"]":"[]"}else _(a||o,function(e){var t=E(e,o,n,a,r,i,s);t!==h&&S.push(k(e)+":"+(r?" ":"")+t)}),L=S.length?r?"{\n"+i+S.join(",\n"+i)+"\n"+I+"}":"{"+S.join(",")+"}":"{}";return s.pop(),L}};t.stringify=function(e,t,n){var r,i,s,o;if(a[typeof t]&&t)if("[object Function]"==(o=p.call(t)))i=t;else if("[object Array]"==o){s={};for(var c,l=0,u=t.length;l<u;c=t[l++],("[object String]"==(o=p.call(c))||"[object Number]"==o)&&(s[c]=1));}if(n)if("[object Number]"==(o=p.call(n))){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else"[object String]"==o&&(r=n.length<=10?n:n.slice(0,10));return E("",((c={})[""]=e,c),i,s,r,"",[])}}if(!has("json-parse")){var C,S,N=r.fromCharCode,T={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},A=function(){throw C=S=null,c()},I=function(){for(var e,t,n,a,r,i=S,s=i.length;C<s;)switch(r=i.charCodeAt(C)){case 9:case 10:case 13:case 32:C++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=g?i.charAt(C):i[C],C++,e;case 34:for(e="@",C++;C<s;)if((r=i.charCodeAt(C))<32)A();else if(92==r)switch(r=i.charCodeAt(++C)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=T[r],C++;break;case 117:for(t=++C,n=C+4;C<n;C++)(r=i.charCodeAt(C))>=48&&r<=57||r>=97&&r<=102||r>=65&&r<=70||A();e+=N("0x"+i.slice(t,C));break;default:A()}else{if(34==r)break;for(r=i.charCodeAt(C),t=C;r>=32&&92!=r&&34!=r;)r=i.charCodeAt(++C);e+=i.slice(t,C)}if(34==i.charCodeAt(C))return C++,e;A();default:if(t=C,45==r&&(a=!0,r=i.charCodeAt(++C)),r>=48&&r<=57){for(48==r&&((r=i.charCodeAt(C+1))>=48&&r<=57)&&A(),a=!1;C<s&&((r=i.charCodeAt(C))>=48&&r<=57);C++);if(46==i.charCodeAt(C)){for(n=++C;n<s&&((r=i.charCodeAt(n))>=48&&r<=57);n++);n==C&&A(),C=n}if(101==(r=i.charCodeAt(C))||69==r){for(43!=(r=i.charCodeAt(++C))&&45!=r||C++,n=C;n<s&&((r=i.charCodeAt(n))>=48&&r<=57);n++);n==C&&A(),C=n}return+i.slice(t,C)}if(a&&A(),"true"==i.slice(C,C+4))return C+=4,!0;if("false"==i.slice(C,C+5))return C+=5,!1;if("null"==i.slice(C,C+4))return C+=4,null;A()}return"$"},L=function(e){var t,n;if("$"==e&&A(),"string"==typeof e){if("@"==(g?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=I());n||(n=!0))n&&(","==e?"]"==(e=I())&&A():A()),","==e&&A(),t.push(L(e));return t}if("{"==e){for(t={};"}"!=(e=I());n||(n=!0))n&&(","==e?"}"==(e=I())&&A():A()),","!=e&&"string"==typeof e&&"@"==(g?e.charAt(0):e[0])&&":"==I()||A(),t[e.slice(1)]=L(I());return t}A()}return e},P=function(e,t,n){var a=M(e,t,n);a===h?delete e[t]:e[t]=a},M=function(e,t,n){var a,r=e[t];if("object"==typeof r&&r)if("[object Array]"==p.call(r))for(a=r.length;a--;)P(r,a,n);else _(r,function(e){P(r,e,n)});return n.call(e,t,r)};t.parse=function(e,t){var n,a;return C=0,S=""+e,n=L(I()),"$"!=I()&&A(),C=S=null,t&&"[object Function]"==p.call(t)?M(((a={})[""]=n,a),"",t):n}}}return t.runInContext=runInContext,t}if(!s||s.global!==s&&s.window!==s&&s.self!==s||(i=s),r)runInContext(i,r);else{var o=i.JSON,c=i.JSON3,l=!1,u=runInContext(i,i.JSON3={noConflict:function(){return l||(l=!0,i.JSON=o,i.JSON3=c,o=c=null),u}});i.JSON={parse:u.parse,stringify:u.stringify}}}).call(e)});var r="$default_instance",i=2,s=4096,o=1e3,c="$identify",l="amplitude_lastEventId",u="amplitude_lastEventTime",d="amplitude_lastIdentifyId",f="amplitude_lastSequenceNumber",_="amplitude_sessionId",h="amplitude_deviceId",m="amplitude_optOut",p="amplitude_userId",b="amplitude_cookie_test",g="revenue_amount",v="$productId",O="$quantity",j="$price",y="$revenueType",w="amp_device_id",k=function encode(e){for(var t="",n=0;n<e.length;n++){var a=e.charCodeAt(n);a<128?t+=String.fromCharCode(a):a>127&&a<2048?(t+=String.fromCharCode(a>>6|192),t+=String.fromCharCode(63&a|128)):(t+=String.fromCharCode(a>>12|224),t+=String.fromCharCode(a>>6&63|128),t+=String.fromCharCode(63&a|128))}return t},E=function decode(e){for(var t="",n=0,a=0,r=0,i=0;n<e.length;)(a=e.charCodeAt(n))<128?(t+=String.fromCharCode(a),n++):a>191&&a<224?(r=e.charCodeAt(n+1),t+=String.fromCharCode((31&a)<<6|63&r),n+=2):(r=e.charCodeAt(n+1),i=e.charCodeAt(n+2),t+=String.fromCharCode((15&a)<<12|(63&r)<<6|63&i),n+=3);return t},C={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function encode(e){try{if(window.btoa&&window.atob)return window.btoa(unescape(encodeURIComponent(e)))}catch(e){}return C._encode(e)},_encode:function _encode(e){var t,n,a,r,i,s,o,c="",l=0;for(e=k(e);l<e.length;)r=(t=e.charCodeAt(l++))>>2,i=(3&t)<<4|(n=e.charCodeAt(l++))>>4,s=(15&n)<<2|(a=e.charCodeAt(l++))>>6,o=63&a,isNaN(n)?s=o=64:isNaN(a)&&(o=64),c=c+C._keyStr.charAt(r)+C._keyStr.charAt(i)+C._keyStr.charAt(s)+C._keyStr.charAt(o);return c},decode:function decode(e){try{if(window.btoa&&window.atob)return decodeURIComponent(escape(window.atob(e)))}catch(e){}return C._decode(e)},_decode:function _decode(e){var t,n,a,r,i,s,o="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)t=C._keyStr.indexOf(e.charAt(c++))<<2|(r=C._keyStr.indexOf(e.charAt(c++)))>>4,n=(15&r)<<4|(i=C._keyStr.indexOf(e.charAt(c++)))>>2,a=(3&i)<<6|(s=C._keyStr.indexOf(e.charAt(c++))),o+=String.fromCharCode(t),64!==i&&(o+=String.fromCharCode(n)),64!==s&&(o+=String.fromCharCode(a));return o=E(o)}},S=createCommonjsModule(function(e,t){function port(e){switch(e){case"http:":return 80;case"https:":return 443;default:return location.port}}t.parse=function(e){var t=document.createElement("a");return t.href=e,{href:t.href,host:t.host||location.host,port:"0"===t.port||""===t.port?port(t.protocol):t.port,hash:t.hash,hostname:t.hostname||location.hostname,pathname:"/"!=t.pathname.charAt(0)?"/"+t.pathname:t.pathname,protocol:t.protocol&&":"!=t.protocol?t.protocol:location.protocol,search:t.search,query:t.search.slice(1)}},t.isAbsolute=function(e){return 0==e.indexOf("//")||!!~e.indexOf("://")},t.isRelative=function(e){return!t.isAbsolute(e)},t.isCrossDomain=function(e){e=t.parse(e);var n=t.parse(window.location.href);return e.hostname!==n.hostname||e.port!==n.port||e.protocol!==n.protocol}}),N=1e3,T=60*N,A=60*T,I=24*A,L=365.25*I,P=function(e,t){t=t||{};var n=typeof e;if("string"===n&&e.length>0)return function parse$1(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*L;case"days":case"day":case"d":return n*I;case"hours":case"hour":case"hrs":case"hr":case"h":return n*A;case"minutes":case"minute":case"mins":case"min":case"m":return n*T;case"seconds":case"second":case"secs":case"sec":case"s":return n*N;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(e);if("number"===n&&!1===isNaN(e))return t.long?function fmtLong(e){return plural(e,I,"day")||plural(e,A,"hour")||plural(e,T,"minute")||plural(e,N,"second")||e+" ms"}(e):function fmtShort(e){if(e>=I)return Math.round(e/I)+"d";if(e>=A)return Math.round(e/A)+"h";if(e>=T)return Math.round(e/T)+"m";if(e>=N)return Math.round(e/N)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function plural(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var M=createCommonjsModule(function(e,t){function createDebug(e){var n;function debug(){if(debug.enabled){var e=debug,a=+new Date,r=a-(n||a);e.diff=r,e.prev=n,e.curr=a,n=a;for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var o=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(n,a){if("%%"===n)return n;o++;var r=t.formatters[a];if("function"==typeof r){var s=i[o];n=r.call(e,s),i.splice(o,1),o--}return n}),t.formatArgs.call(e,i),(debug.log||t.log||console.log.bind(console)).apply(e,i)}}return debug.namespace=e,debug.enabled=t.enabled(e),debug.useColors=t.useColors(),debug.color=function selectColor(e){var n,a=0;for(n in e)a=(a<<5)-a+e.charCodeAt(n),a|=0;return t.colors[Math.abs(a)%t.colors.length]}(e),debug.destroy=destroy,"function"==typeof t.init&&t.init(debug),t.instances.push(debug),debug}function destroy(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=createDebug.debug=createDebug.default=createDebug).coerce=function coerce(e){return e instanceof Error?e.stack||e.message:e},t.disable=function disable(){t.enable("")},t.enable=function enable(e){var n;t.save(e),t.names=[],t.skips=[];var a=("string"==typeof e?e:"").split(/[\s,]+/),r=a.length;for(n=0;n<r;n++)a[n]&&("-"===(e=a[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var i=t.instances[n];i.enabled=t.enabled(i.namespace)}},t.enabled=function enabled(e){if("*"===e[e.length-1])return!0;var n,a;for(n=0,a=t.skips.length;n<a;n++)if(t.skips[n].test(e))return!1;for(n=0,a=t.names.length;n<a;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=P,t.instances=[],t.names=[],t.skips=[],t.formatters={}}),R=createCommonjsModule(function(e,t){function load(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(t=e.exports=M).log=function log(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function formatArgs(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var a="color: "+this.color;e.splice(1,0,a,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))}),e.splice(i,0,a)},t.save=function save(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=load,t.useColors=function useColors(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function localstorage(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(load())})("cookie"),x=function(e,t,n){switch(arguments.length){case 3:case 2:return function set$1(e,t,n){n=n||{};var a=encode(e)+"="+encode(t);null==t&&(n.maxage=-1);n.maxage&&(n.expires=new Date(+new Date+n.maxage));n.path&&(a+="; path="+n.path);n.domain&&(a+="; domain="+n.domain);n.expires&&(a+="; expires="+n.expires.toUTCString());n.secure&&(a+="; secure");document.cookie=a}(e,t,n);case 1:return function get$1(e){return all()[e]}(e);default:return all()}};function all(){var e;try{e=document.cookie}catch(e){return"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e.stack||e),{}}return function parse(e){var t,n={},a=e.split(/ *; */);if(""==a[0])return n;for(var r=0;r<a.length;++r)t=a[r].split("="),n[decode(t[0])]=decode(t[1]);return n}(e)}function encode(e){try{return encodeURIComponent(e)}catch(t){R("error `encode(%o)` - %o",e,t)}}function decode(e){try{return decodeURIComponent(e)}catch(t){R("error `decode(%o)` - %o",e,t)}}var D,U=createCommonjsModule(function(e,t){var n=S.parse;function domain(e){for(var n=t.cookie,a=t.levels(e),r=0;r<a.length;++r){var i=a[r],s={domain:"."+i};if(n("__tld__",1,s),n("__tld__"))return n("__tld__",null,s),i}return""}domain.levels=function(e){var t=n(e).hostname.split("."),a=t[t.length-1],r=[];if(4===t.length&&a===parseInt(a,10))return r;if(t.length<=1)return r;for(var i=t.length-2;i>=0;--i)r.push(t.slice(i).join("."));return r},domain.cookie=x,t=e.exports=domain}),B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z=Object.prototype.toString,$=function(e){switch(z.call(e)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===e?"null":void 0===e?"undefined":e!=e?"nan":e&&1===e.nodeType?"element":void 0!==a&&a.isBuffer(e)?"buffer":void 0===(e=e.valueOf?e.valueOf():Object.prototype.valueOf.apply(e))?"undefined":B(e)},F="WARN",H={DISABLE:0,ERROR:1,WARN:2,INFO:3},G={error:function error(e){F>=H.ERROR&&q(e)},warn:function warn(e){F>=H.WARN&&q(e)},info:function info(e){F>=H.INFO&&q(e)}},q=function _log(e){try{console.log("[Amplitude] "+e)}catch(e){}},V=function _truncateValue(e){return"string"===$(e)&&e.length>s?e.substring(0,s):e},W=function validateProperties(e){var t=$(e);if("object"!==t)return G.error("Error: invalid properties format. Expecting Javascript object, received "+t+", ignoring"),{};if(Object.keys(e).length>o)return G.error("Error: too many properties (more than 1000), ignoring"),{};var n={};for(var a in e)if(e.hasOwnProperty(a)){var r=a,i=$(r);"string"!==i&&(r=String(r),G.warn("WARNING: Non-string property key, received type "+i+', coercing to string "'+r+'"'));var s=Y(r,e[a]);null!==s&&(n[r]=s)}return n},K=["null","nan","undefined","function","arguments","regexp","element"],Y=function validatePropertyValue(e,t){var n=$(t);if(-1!==K.indexOf(n))G.warn('WARNING: Property key "'+e+'" with invalid value type '+n+", ignoring"),t=null;else if("error"===n)t=String(t),G.warn('WARNING: Property key "'+e+'" with value type error, coercing to '+t);else if("array"===n){for(var a=[],r=0;r<t.length;r++){var i=t[r],s=$(i);"array"!==s&&"object"!==s?a.push(validatePropertyValue(e,i)):G.warn("WARNING: Cannot have "+s+" nested in an array property value, skipping")}t=a}else"object"===n&&(t=W(t));return t},J=function validateGroupName(e,t){var n=$(t);if("string"===n)return t;if("date"===n||"number"===n||"boolean"===n)return t=String(t),G.warn("WARNING: Non-string groupName, received type "+n+', coercing to string "'+t+'"'),t;if("array"===n){for(var a=[],r=0;r<t.length;r++){var i=t[r],s=$(i);"array"!==s&&"object"!==s?"string"===s?a.push(i):"date"!==s&&"number"!==s&&"boolean"!==s||(i=String(i),G.warn("WARNING: Non-string groupName, received type "+s+', coercing to string "'+i+'"'),a.push(i)):G.warn("WARNING: Skipping nested "+s+" in array groupName")}return a}G.warn("WARNING: Non-string groupName, received type "+n+". Please use strings or array of strings for groupName")},Q=G,Z=function isEmptyString(e){return!e||0===e.length},X=function getQueryParam(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===n?void 0:decodeURIComponent(n[1].replace(/\+/g," "))},ee=function truncate(e){if("array"===$(e))for(var t=0;t<e.length;t++)e[t]=truncate(e[t]);else if("object"===$(e))for(var n in e)e.hasOwnProperty(n)&&(e[n]=truncate(e[n]));else e=V(e);return e},te=function validateGroups(e){var t=$(e);if("object"!==t)return G.error("Error: invalid groups format. Expecting Javascript object, received "+t+", ignoring"),{};var n={};for(var a in e)if(e.hasOwnProperty(a)){var r=a,i=$(r);"string"!==i&&(r=String(r),G.warn("WARNING: Non-string groupType, received type "+i+', coercing to string "'+r+'"'));var s=J(r,e[a]);null!==s&&(n[r]=s)}return n},ne=function validateInput(e,t,n){return $(e)===n||(G.error("Invalid "+t+" input type. Expected "+n+" but received "+$(e)),!1)},ae=W,re={expirationDays:void 0,domain:void 0},ie=function _domainSpecific(e){var t="";return re.domain&&(t="."===re.domain.charAt(0)?re.domain.substring(1):re.domain),e+t},se=function get(e){try{for(var t=ie(e)+"=",n=document.cookie.split(";"),a=null,r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t)){a=i.substring(t.length,i.length);break}}return a?JSON.parse(C.decode(a)):null}catch(e){return null}},oe=function set(e,t){try{return ce(ie(e),C.encode(JSON.stringify(t)),re),!0}catch(e){return!1}},ce=function _set(e,t,n){var a=null!==t?n.expirationDays:-1;if(a){var r=new Date;r.setTime(r.getTime()+24*a*60*60*1e3),a=r}var i=e+"="+t;a&&(i+="; expires="+a.toUTCString()),i+="; path=/",n.domain&&(i+="; domain="+n.domain),document.cookie=i},le=function remove(e){try{return ce(ie(e),null,re),!0}catch(e){return!1}},ue={reset:function reset(){re={expirationDays:void 0,domain:void 0}},options:function options(e){if(0===arguments.length)return re;e=e||{},re.expirationDays=e.expirationDays;var t=Z(e.domain)?"."+U(window.location.href):e.domain,n=Math.random();re.domain=t,oe("amplitude_test",n);var a=se("amplitude_test");a&&a===n||(t=null),le("amplitude_test"),re.domain=t},get:se,set:oe,remove:le};if(function windowLocalStorageAvailable(){var e,t=new Date;try{return window.localStorage.setItem(t,t),e=window.localStorage.getItem(t)===String(t),window.localStorage.removeItem(t),e}catch(e){}return!1}())D=window.localStorage;else if(window.globalStorage)try{D=window.globalStorage[window.location.hostname]}catch(e){}else{var de=document.createElement("div"),fe="localStorage";de.style.display="none",document.getElementsByTagName("head")[0].appendChild(de),de.addBehavior&&(de.addBehavior("#default#userdata"),D={length:0,setItem:function setItem(e,t){de.load(fe),de.getAttribute(e)||this.length++,de.setAttribute(e,t),de.save(fe)},getItem:function getItem(e){return de.load(fe),de.getAttribute(e)},removeItem:function removeItem(e){de.load(fe),de.getAttribute(e)&&this.length--,de.removeAttribute(e),de.save(fe)},clear:function clear(){de.load(fe);for(var e,t=0;e=de.XMLDocument.documentElement.attributes[t++];)de.removeAttribute(e.name);de.save(fe),this.length=0},key:function key(e){return de.load(fe),de.XMLDocument.documentElement.attributes[e]}},de.load(fe),D.length=de.XMLDocument.documentElement.attributes.length)}D||(D={length:0,setItem:function setItem(e,t){},getItem:function getItem(e){},removeItem:function removeItem(e){},clear:function clear(){},key:function key(e){}});var _e=D,he=function cookieStorage(){this.storage=null};he.prototype._cookiesEnabled=function(){var e,t=String(new Date);try{return ue.set(b,t),e=ue.get(b)===t,ue.remove(b),e}catch(e){}return!1},he.prototype.getStorage=function(){if(null!==this.storage)return this.storage;if(this._cookiesEnabled())this.storage=ue;else{this.storage={_options:{expirationDays:void 0,domain:void 0},reset:function reset(){this._options={expirationDays:void 0,domain:void 0}},options:function options(e){return 0===arguments.length?this._options:(e=e||{},this._options.expirationDays=e.expirationDays||this._options.expirationDays,this._options.domain=e.domain||this._options.domain||window.location.hostname,this._options)},get:function get(e){try{return JSON.parse(_e.getItem("amp_cookiestore_"+e))}catch(e){}return null},set:function set(e,t){try{return _e.setItem("amp_cookiestore_"+e,JSON.stringify(t)),!0}catch(e){}return!1},remove:function remove(e){try{_e.removeItem("amp_cookiestore_"+e)}catch(e){return!1}}}}return this.storage};var me=function Identify(){this.userPropertiesOperations={},this.properties=[]};me.prototype.add=function(e,t){return"number"===$(t)||"string"===$(t)?this._addOperation("$add",e,t):Q.error("Unsupported type for value: "+$(t)+", expecting number or string"),this},me.prototype.append=function(e,t){return this._addOperation("$append",e,t),this},me.prototype.clearAll=function(){return Object.keys(this.userPropertiesOperations).length>0?(this.userPropertiesOperations.hasOwnProperty("$clearAll")||Q.error("Need to send $clearAll on its own Identify object without any other operations, skipping $clearAll"),this):(this.userPropertiesOperations.$clearAll="-",this)},me.prototype.prepend=function(e,t){return this._addOperation("$prepend",e,t),this},me.prototype.set=function(e,t){return this._addOperation("$set",e,t),this},me.prototype.setOnce=function(e,t){return this._addOperation("$setOnce",e,t),this},me.prototype.unset=function(e){return this._addOperation("$unset",e,"-"),this},me.prototype._addOperation=function(e,t,n){this.userPropertiesOperations.hasOwnProperty("$clearAll")?Q.error("This identify already contains a $clearAll operation, skipping operation "+e):-1===this.properties.indexOf(t)?(this.userPropertiesOperations.hasOwnProperty(e)||(this.userPropertiesOperations[e]={}),this.userPropertiesOperations[e][t]=n,this.properties.push(t)):Q.error('User property "'+t+'" already used in this identify, skipping operation '+e)};var pe,be=createCommonjsModule(function(t){!function(e){function safeAdd(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function md5cmn(e,t,n,a,r,i){return safeAdd(function bitRotateLeft(e,t){return e<<t|e>>>32-t}(safeAdd(safeAdd(t,e),safeAdd(a,i)),r),n)}function md5ff(e,t,n,a,r,i,s){return md5cmn(t&n|~t&a,e,t,r,i,s)}function md5gg(e,t,n,a,r,i,s){return md5cmn(t&a|n&~a,e,t,r,i,s)}function md5hh(e,t,n,a,r,i,s){return md5cmn(t^n^a,e,t,r,i,s)}function md5ii(e,t,n,a,r,i,s){return md5cmn(n^(t|~a),e,t,r,i,s)}function binlMD5(e,t){var n,a,r,i,s;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var o=1732584193,c=-271733879,l=-1732584194,u=271733878;for(n=0;n<e.length;n+=16)a=o,r=c,i=l,s=u,o=md5ff(o,c,l,u,e[n],7,-680876936),u=md5ff(u,o,c,l,e[n+1],12,-389564586),l=md5ff(l,u,o,c,e[n+2],17,606105819),c=md5ff(c,l,u,o,e[n+3],22,-1044525330),o=md5ff(o,c,l,u,e[n+4],7,-176418897),u=md5ff(u,o,c,l,e[n+5],12,1200080426),l=md5ff(l,u,o,c,e[n+6],17,-1473231341),c=md5ff(c,l,u,o,e[n+7],22,-45705983),o=md5ff(o,c,l,u,e[n+8],7,1770035416),u=md5ff(u,o,c,l,e[n+9],12,-1958414417),l=md5ff(l,u,o,c,e[n+10],17,-42063),c=md5ff(c,l,u,o,e[n+11],22,-1990404162),o=md5ff(o,c,l,u,e[n+12],7,1804603682),u=md5ff(u,o,c,l,e[n+13],12,-40341101),l=md5ff(l,u,o,c,e[n+14],17,-1502002290),o=md5gg(o,c=md5ff(c,l,u,o,e[n+15],22,1236535329),l,u,e[n+1],5,-165796510),u=md5gg(u,o,c,l,e[n+6],9,-1069501632),l=md5gg(l,u,o,c,e[n+11],14,643717713),c=md5gg(c,l,u,o,e[n],20,-373897302),o=md5gg(o,c,l,u,e[n+5],5,-701558691),u=md5gg(u,o,c,l,e[n+10],9,38016083),l=md5gg(l,u,o,c,e[n+15],14,-660478335),c=md5gg(c,l,u,o,e[n+4],20,-405537848),o=md5gg(o,c,l,u,e[n+9],5,568446438),u=md5gg(u,o,c,l,e[n+14],9,-1019803690),l=md5gg(l,u,o,c,e[n+3],14,-187363961),c=md5gg(c,l,u,o,e[n+8],20,1163531501),o=md5gg(o,c,l,u,e[n+13],5,-1444681467),u=md5gg(u,o,c,l,e[n+2],9,-51403784),l=md5gg(l,u,o,c,e[n+7],14,1735328473),o=md5hh(o,c=md5gg(c,l,u,o,e[n+12],20,-1926607734),l,u,e[n+5],4,-378558),u=md5hh(u,o,c,l,e[n+8],11,-2022574463),l=md5hh(l,u,o,c,e[n+11],16,1839030562),c=md5hh(c,l,u,o,e[n+14],23,-35309556),o=md5hh(o,c,l,u,e[n+1],4,-1530992060),u=md5hh(u,o,c,l,e[n+4],11,1272893353),l=md5hh(l,u,o,c,e[n+7],16,-155497632),c=md5hh(c,l,u,o,e[n+10],23,-1094730640),o=md5hh(o,c,l,u,e[n+13],4,681279174),u=md5hh(u,o,c,l,e[n],11,-358537222),l=md5hh(l,u,o,c,e[n+3],16,-722521979),c=md5hh(c,l,u,o,e[n+6],23,76029189),o=md5hh(o,c,l,u,e[n+9],4,-640364487),u=md5hh(u,o,c,l,e[n+12],11,-421815835),l=md5hh(l,u,o,c,e[n+15],16,530742520),o=md5ii(o,c=md5hh(c,l,u,o,e[n+2],23,-995338651),l,u,e[n],6,-198630844),u=md5ii(u,o,c,l,e[n+7],10,1126891415),l=md5ii(l,u,o,c,e[n+14],15,-1416354905),c=md5ii(c,l,u,o,e[n+5],21,-57434055),o=md5ii(o,c,l,u,e[n+12],6,1700485571),u=md5ii(u,o,c,l,e[n+3],10,-1894986606),l=md5ii(l,u,o,c,e[n+10],15,-1051523),c=md5ii(c,l,u,o,e[n+1],21,-2054922799),o=md5ii(o,c,l,u,e[n+8],6,1873313359),u=md5ii(u,o,c,l,e[n+15],10,-30611744),l=md5ii(l,u,o,c,e[n+6],15,-1560198380),c=md5ii(c,l,u,o,e[n+13],21,1309151649),o=md5ii(o,c,l,u,e[n+4],6,-145523070),u=md5ii(u,o,c,l,e[n+11],10,-1120210379),l=md5ii(l,u,o,c,e[n+2],15,718787259),c=md5ii(c,l,u,o,e[n+9],21,-343485551),o=safeAdd(o,a),c=safeAdd(c,r),l=safeAdd(l,i),u=safeAdd(u,s);return[o,c,l,u]}function binl2rstr(e){var t,n="",a=32*e.length;for(t=0;t<a;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function rstr2binl(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var a=8*e.length;for(t=0;t<a;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function rstr2hex(e){var t,n,a="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),a+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return a}function str2rstrUTF8(e){return unescape(encodeURIComponent(e))}function rawMD5(e){return function rstrMD5(e){return binl2rstr(binlMD5(rstr2binl(e),8*e.length))}(str2rstrUTF8(e))}function rawHMACMD5(e,t){return function rstrHMACMD5(e,t){var n,a,r=rstr2binl(e),i=[],s=[];for(i[15]=s[15]=void 0,r.length>16&&(r=binlMD5(r,8*e.length)),n=0;n<16;n+=1)i[n]=909522486^r[n],s[n]=1549556828^r[n];return a=binlMD5(i.concat(rstr2binl(t)),512+8*t.length),binl2rstr(binlMD5(s.concat(a),640))}(str2rstrUTF8(e),str2rstrUTF8(t))}function md5(e,t,n){return t?n?rawHMACMD5(t,e):function hexHMACMD5(e,t){return rstr2hex(rawHMACMD5(e,t))}(t,e):n?rawMD5(e):function hexMD5(e){return rstr2hex(rawMD5(e))}(e)}t.exports?t.exports=md5:e.md5=md5}(e)}),ge="object"==typeof e&&e&&e.Object===Object&&e,ve="object"==typeof self&&self&&self.Object===Object&&self,Oe=ge||ve||Function("return this")(),je=Oe.Symbol,ye=Object.prototype,we=ye.hasOwnProperty,ke=ye.toString,Ee=je?je.toStringTag:void 0,Ce=function getRawTag(e){var t=we.call(e,Ee),n=e[Ee];try{e[Ee]=void 0;var a=!0}catch(e){}var r=ke.call(e);return a&&(t?e[Ee]=n:delete e[Ee]),r},Se=Object.prototype.toString,Ne=function objectToString(e){return Se.call(e)},Te="[object Null]",Ae="[object Undefined]",Ie=je?je.toStringTag:void 0,Le=function baseGetTag(e){return null==e?void 0===e?Ae:Te:Ie&&Ie in Object(e)?Ce(e):Ne(e)},Pe=function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},Me="[object AsyncFunction]",Re="[object Function]",xe="[object GeneratorFunction]",De="[object Proxy]",Ue=function isFunction(e){if(!Pe(e))return!1;var t=Le(e);return t==Re||t==xe||t==Me||t==De},Be=Oe["__core-js_shared__"],ze=(pe=/[^.]+$/.exec(Be&&Be.keys&&Be.keys.IE_PROTO||""))?"Symbol(src)_1."+pe:"",$e=function isMasked(e){return!!ze&&ze in e},Fe=Function.prototype.toString,He=function toSource(e){if(null!=e){try{return Fe.call(e)}catch(e){}try{return e+""}catch(e){}}return""},Ge=/^\[object .+?Constructor\]$/,qe=Function.prototype,Ve=Object.prototype,We=qe.toString,Ke=Ve.hasOwnProperty,Ye=RegExp("^"+We.call(Ke).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Je=function baseIsNative(e){return!(!Pe(e)||$e(e))&&(Ue(e)?Ye:Ge).test(He(e))},Qe=function getValue(e,t){return null==e?void 0:e[t]},Ze=function getNative(e,t){var n=Qe(e,t);return Je(n)?n:void 0},Xe=function(){try{var e=Ze(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),et=function baseAssignValue(e,t,n){"__proto__"==t&&Xe?Xe(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},tt=function eq(e,t){return e===t||e!=e&&t!=t},nt=Object.prototype.hasOwnProperty,at=function assignValue(e,t,n){var a=e[t];nt.call(e,t)&&tt(a,n)&&(void 0!==n||t in e)||et(e,t,n)},rt=function copyObject(e,t,n,a){var r=!n;n||(n={});for(var i=-1,s=t.length;++i<s;){var o=t[i],c=a?a(n[o],e[o],o,n,e):void 0;void 0===c&&(c=e[o]),r?et(n,o,c):at(n,o,c)}return n},it=function identity(e){return e},st=function apply(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},ot=Math.max,ct=function overRest(e,t,n){return t=ot(void 0===t?e.length-1:t,0),function(){for(var a=arguments,r=-1,i=ot(a.length-t,0),s=Array(i);++r<i;)s[r]=a[t+r];r=-1;for(var o=Array(t+1);++r<t;)o[r]=a[r];return o[t]=n(s),st(e,this,o)}},lt=function constant(e){return function(){return e}},ut=Xe?function(e,t){return Xe(e,"toString",{configurable:!0,enumerable:!1,value:lt(t),writable:!0})}:it,dt=800,ft=16,_t=Date.now,ht=function shortOut(e){var t=0,n=0;return function(){var a=_t(),r=ft-(a-n);if(n=a,r>0){if(++t>=dt)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(ut),mt=function baseRest(e,t){return ht(ct(e,t,it),e+"")},pt=9007199254740991,bt=function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=pt},gt=function isArrayLike(e){return null!=e&&bt(e.length)&&!Ue(e)},vt=9007199254740991,Ot=/^(?:0|[1-9]\d*)$/,jt=function isIndex(e,t){return!!(t=null==t?vt:t)&&("number"==typeof e||Ot.test(e))&&e>-1&&e%1==0&&e<t},yt=function isIterateeCall(e,t,n){if(!Pe(n))return!1;var a=typeof t;return!!("number"==a?gt(n)&&jt(t,n.length):"string"==a&&t in n)&&tt(n[t],e)},wt=function createAssigner(e){return mt(function(t,n){var a=-1,r=n.length,i=r>1?n[r-1]:void 0,s=r>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(r--,i):void 0,s&&yt(n[0],n[1],s)&&(i=r<3?void 0:i,r=1),t=Object(t);++a<r;){var o=n[a];o&&e(t,o,a,i)}return t})},kt=Object.prototype,Et=function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||kt)},Ct=function baseTimes(e,t){for(var n=-1,a=Array(e);++n<e;)a[n]=t(n);return a},St=function isObjectLike(e){return null!=e&&"object"==typeof e},Nt="[object Arguments]",Tt=function baseIsArguments(e){return St(e)&&Le(e)==Nt},At=Object.prototype,It=At.hasOwnProperty,Lt=At.propertyIsEnumerable,Pt=Tt(function(){return arguments}())?Tt:function(e){return St(e)&&It.call(e,"callee")&&!Lt.call(e,"callee")},Mt=Array.isArray,Rt=function stubFalse(){return!1},xt=createCommonjsModule(function(e,t){var n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,r=a&&a.exports===n?Oe.Buffer:void 0,i=(r?r.isBuffer:void 0)||Rt;e.exports=i}),Dt={};Dt["[object Float32Array]"]=Dt["[object Float64Array]"]=Dt["[object Int8Array]"]=Dt["[object Int16Array]"]=Dt["[object Int32Array]"]=Dt["[object Uint8Array]"]=Dt["[object Uint8ClampedArray]"]=Dt["[object Uint16Array]"]=Dt["[object Uint32Array]"]=!0,Dt["[object Arguments]"]=Dt["[object Array]"]=Dt["[object ArrayBuffer]"]=Dt["[object Boolean]"]=Dt["[object DataView]"]=Dt["[object Date]"]=Dt["[object Error]"]=Dt["[object Function]"]=Dt["[object Map]"]=Dt["[object Number]"]=Dt["[object Object]"]=Dt["[object RegExp]"]=Dt["[object Set]"]=Dt["[object String]"]=Dt["[object WeakMap]"]=!1;var Ut=function baseIsTypedArray(e){return St(e)&&bt(e.length)&&!!Dt[Le(e)]},Bt=function baseUnary(e){return function(t){return e(t)}},zt=createCommonjsModule(function(e,t){var n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,r=a&&a.exports===n&&ge.process,i=function(){try{return r&&r.binding&&r.binding("util")}catch(e){}}();e.exports=i}),$t=zt&&zt.isTypedArray,Ft=$t?Bt($t):Ut,Ht=Object.prototype.hasOwnProperty,Gt=function arrayLikeKeys(e,t){var n=Mt(e),a=!n&&Pt(e),r=!n&&!a&&xt(e),i=!n&&!a&&!r&&Ft(e),s=n||a||r||i,o=s?Ct(e.length,String):[],c=o.length;for(var l in e)!t&&!Ht.call(e,l)||s&&("length"==l||r&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||jt(l,c))||o.push(l);return o},qt=function overArg(e,t){return function(n){return e(t(n))}}(Object.keys,Object),Vt=Object.prototype.hasOwnProperty,Wt=function baseKeys(e){if(!Et(e))return qt(e);var t=[];for(var n in Object(e))Vt.call(e,n)&&"constructor"!=n&&t.push(n);return t},Kt=function keys(e){return gt(e)?Gt(e):Wt(e)},Yt=Object.prototype.hasOwnProperty,Jt=wt(function(e,t){if(Et(t)||gt(t))rt(t,Kt(t),e);else for(var n in t)Yt.call(t,n)&&at(e,n,t[n])});function hasOwnProperty$7(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Qt=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function stringifyPrimitive(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function stringify(e,t,n,a){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?map(Zt(e),function(a){var r=encodeURIComponent(stringifyPrimitive(a))+n;return Qt(e[a])?map(e[a],function(e){return r+encodeURIComponent(stringifyPrimitive(e))}).join(t):r+encodeURIComponent(stringifyPrimitive(e[a]))}).join(t):a?encodeURIComponent(stringifyPrimitive(a))+n+encodeURIComponent(stringifyPrimitive(e)):""}function map(e,t){if(e.map)return e.map(t);for(var n=[],a=0;a<e.length;a++)n.push(t(e[a],a));return n}var Zt=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t};function parse$2(e,t,n,a){t=t||"&",n=n||"=";var r={};if("string"!=typeof e||0===e.length)return r;var i=/\+/g;e=e.split(t);var s=1e3;a&&"number"==typeof a.maxKeys&&(s=a.maxKeys);var o=e.length;s>0&&o>s&&(o=s);for(var c=0;c<o;++c){var l,u,d,f,_=e[c].replace(i,"%20"),h=_.indexOf(n);h>=0?(l=_.substr(0,h),u=_.substr(h+1)):(l=_,u=""),d=decodeURIComponent(l),f=decodeURIComponent(u),hasOwnProperty$7(r,d)?Qt(r[d])?r[d].push(f):r[d]=[r[d],f]:r[d]=f}return r}var Xt={encode:stringify,stringify:stringify,decode:parse$2,parse:parse$2},en=function Request(e,t){this.url=e,this.data=t||{}};en.prototype.send=function(e){if(!!window.XDomainRequest){var t=new window.XDomainRequest;t.open("POST",this.url,!0),t.onload=function(){e(200,t.responseText)},t.onerror=function(){"Request Entity Too Large"===t.responseText?e(413,t.responseText):e(500,t.responseText)},t.ontimeout=function(){},t.onprogress=function(){},t.send(Xt.stringify(this.data))}else{var n=new XMLHttpRequest;n.open("POST",this.url,!0),n.onreadystatechange=function(){4===n.readyState&&e(n.status,n.responseText)},n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.send(Xt.stringify(this.data))}};var tn=function Revenue(){this._price=null,this._productId=null,this._quantity=1,this._revenueType=null,this._properties=null};tn.prototype.setProductId=function setProductId(e){return"string"!==$(e)?Q.error("Unsupported type for productId: "+$(e)+", expecting string"):Z(e)?Q.error("Invalid empty productId"):this._productId=e,this},tn.prototype.setQuantity=function setQuantity(e){return"number"!==$(e)?Q.error("Unsupported type for quantity: "+$(e)+", expecting number"):this._quantity=parseInt(e),this},tn.prototype.setPrice=function setPrice(e){return"number"!==$(e)?Q.error("Unsupported type for price: "+$(e)+", expecting number"):this._price=e,this},tn.prototype.setRevenueType=function setRevenueType(e){return"string"!==$(e)?Q.error("Unsupported type for revenueType: "+$(e)+", expecting string"):this._revenueType=e,this},tn.prototype.setEventProperties=function setEventProperties(e){return"object"!==$(e)?Q.error("Unsupported type for eventProperties: "+$(e)+", expecting object"):this._properties=ae(e),this},tn.prototype._isValidRevenue=function _isValidRevenue(){return"number"===$(this._price)||(Q.error("Invalid revenue, need to set price field"),!1)},tn.prototype._toJSONObject=function _toJSONObject(){var e="object"===$(this._properties)?this._properties:{};return null!==this._productId&&(e[v]=this._productId),null!==this._quantity&&(e[O]=this._quantity),null!==this._price&&(e[j]=this._price),null!==this._revenueType&&(e[y]=this._revenueType),e};var nn=createCommonjsModule(function(t,n){!function(e,a){var r="model",i="name",s="type",o="vendor",c="version",l="mobile",u="tablet",d={extend:function(e,t){var n={};for(var a in e)t[a]&&t[a].length%2==0?n[a]=t[a].concat(e[a]):n[a]=e[a];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.split(".")[0]:void 0}},f={rgx:function(){for(var e,t,n,a,r,i,s,o=0,c=arguments;o<c.length&&!i;){var l=c[o],u=c[o+1];if(void 0===e)for(a in e={},u)u.hasOwnProperty(a)&&("object"==typeof(r=u[a])?e[r[0]]=void 0:e[r]=void 0);for(t=n=0;t<l.length&&!i;)if(i=l[t++].exec(this.getUA()))for(a=0;a<u.length;a++)s=i[++n],"object"==typeof(r=u[a])&&r.length>0?2==r.length?"function"==typeof r[1]?e[r[0]]=r[1].call(this,s):e[r[0]]=r[1]:3==r.length?"function"!=typeof r[1]||r[1].exec&&r[1].test?e[r[0]]=s?s.replace(r[1],r[2]):void 0:e[r[0]]=s?r[1].call(this,s,r[2]):void 0:4==r.length&&(e[r[0]]=s?r[3].call(this,s.replace(r[1],r[2])):void 0):e[r]=s||void 0;o+=2}return e},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var a=0;a<t[n].length;a++)if(d.has(t[n][a],e))return"?"===n?void 0:n}else if(d.has(t[n],e))return"?"===n?void 0:n;return e}},_={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},name:{"Opera Mobile":"Opera Mobi","IE Mobile":"IEMobile"}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},name:{"Windows Phone":"Windows Phone OS"}}}},h={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[i,c],[/(OPiOS)[\/\s]+([\w\.]+)/i],[[i,"Opera Mini"],c],[/\s(opr)\/([\w\.]+)/i],[[i,"Opera"],c],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[i,c],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[i,"IE"],c],[/(edge)\/((\d+)?[\w\.]+)/i],[i,c],[/(yabrowser)\/([\w\.]+)/i],[[i,"Yandex"],c],[/(comodo_dragon)\/([\w\.]+)/i],[[i,/_/g," "],c],[/((?:android.+)crmo|crios)\/([\w\.]+)/i,/android.+(chrome)\/([\w\.]+)\s+(?:mobile\s?safari)/i],[[i,"Chrome Mobile"],c],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[i,c],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/JUC.+(ucweb)[\/\s]?([\w\.]+)/i],[[i,"UCBrowser"],c],[/(dolfin)\/([\w\.]+)/i],[[i,"Dolphin"],c],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[c,[i,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[c,[i,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[c,[i,"Facebook"]],[/fxios\/([\w\.-]+)/i],[c,[i,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[c,[i,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[c,i],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[i,[c,f.str,_.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[i,c],[/(blackberry)\\s?\/([\w\.]+)/i],[[i,"BlackBerry"],c],[/(navigator|netscape)\/([\w\.-]+)/i],[[i,"Netscape"],c],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[i,c]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",d.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",d.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",d.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[r,o,[s,u]],[/applecoremedia\/[\w\.]+ \((ipad)/],[r,[o,"Apple"],[s,u]],[/(apple\s{0,1}tv)/i],[[r,"Apple TV"],[o,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[o,r,[s,u]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[r,[o,"Amazon"],[s,u]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[r,f.str,_.device.amazon.model],[o,"Amazon"],[s,l]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[r,o,[s,l]],[/\((ip[honed|\s\w*]+);/i],[r,[o,"Apple"],[s,l]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[o,r,[s,l]],[/\(bb10;\s(\w+)/i],[r,[o,"BlackBerry"],[s,l]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[r,[o,"Asus"],[s,u]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[o,"Sony"],[r,"Xperia Tablet"],[s,u]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[o,"Sony"],[r,"Xperia Phone"],[s,l]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[o,r,[s,"console"]],[/android.+;\s(shield)\sbuild/i],[r,[o,"Nvidia"],[s,"console"]],[/(playstation\s[34portablevi]+)/i],[r,[o,"Sony"],[s,"console"]],[/(sprint\s(\w+))/i],[[o,f.str,_.device.sprint.vendor],[r,f.str,_.device.sprint.model],[s,l]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[o,r,[s,u]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[o,[r,/_/g," "],[s,l]],[/(nexus\s9)/i],[r,[o,"HTC"],[s,u]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[r,[o,"Microsoft"],[s,"console"]],[/(kin\.[onetw]{3})/i],[[r,/\./g," "],[o,"Microsoft"],[s,l]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s[6])/i],[r,[o,"Motorola"],[s,l]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[r,[o,"Motorola"],[s,u]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[o,"Samsung"],r,[s,u]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[o,"Samsung"],r,[s,l]],[/(samsung);smarttv/i],[o,r,[s,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[r,[o,"Sharp"],[s,"smarttv"]],[/sie-(\w+)*/i],[r,[o,"Siemens"],[s,l]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[o,"Nokia"],r,[s,l]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[r,[o,"Acer"],[s,u]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[o,"LG"],r,[s,u]],[/(lg) netcast\.tv/i],[o,r,[s,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[r,[o,"LG"],[s,l]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[r,[o,"Lenovo"],[s,u]],[/linux;.+((jolla));/i],[o,r,[s,l]],[/((pebble))app\/[\d\.]+\s/i],[o,r,[s,"wearable"]],[/android.+;\s(glass)\s\d/i],[r,[o,"Google"],[s,"wearable"]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[[r,/_/g," "],[o,"Xiaomi"],[s,l]],[/\s(tablet)[;\/\s]/i,/\s(mobile)[;\/\s]/i],[[s,d.lowerize],o,r]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[c,[i,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[i,c],[/rv\:([\w\.]+).*(gecko)/i],[c,i]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[i,c],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[[i,f.str,_.os.windows.name],[c,f.str,_.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[i,"Windows"],[c,f.str,_.os.windows.version]],[/\((bb)(10);/i],[[i,"BlackBerry"],c],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[i,c],[/(symbian\s?o?s?|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[i,"Symbian"],c],[/\((series40);/i],[i],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[i,"Firefox OS"],c],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[[i,"Linux"],c],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[i,"Chromium OS"],c],[/(sunos)\s?([\w\.]+\d)*/i],[[i,"Solaris"],c],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[[i,"Linux"],c],[/(iphone)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[i,"iPhone"],[c,/_/g,"."]],[/(ipad)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[i,"iPad"],[c,/_/g,"."]],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[i,"iOS"],[c,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[i,"Mac"],[c,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[i,c]]},m=function(t,n){if(!(this instanceof m))return new m(t,n).getResult();var a=t||(e&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:""),r=n?d.extend(h,n):h;return this.getBrowser=function(){var e=f.rgx.apply(this,r.browser);return e.major=d.major(e.version),e},this.getCPU=function(){return f.rgx.apply(this,r.cpu)},this.getDevice=function(){return f.rgx.apply(this,r.device)},this.getEngine=function(){return f.rgx.apply(this,r.engine)},this.getOS=function(){return f.rgx.apply(this,r.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return a},this.setUA=function(e){return a=e,this},this};m.VERSION="0.7.10",m.BROWSER={NAME:i,MAJOR:"major",VERSION:c},m.CPU={ARCHITECTURE:"architecture"},m.DEVICE={MODEL:r,VENDOR:o,TYPE:s,CONSOLE:"console",MOBILE:l,SMARTTV:"smarttv",TABLET:u,WEARABLE:"wearable",EMBEDDED:"embedded"},m.ENGINE={NAME:i,VERSION:c},m.OS={NAME:i,VERSION:c},t.exports&&(n=t.exports=m),n.UAParser=m;var p=e.jQuery||e.Zepto;if(void 0!==p){var b=new m;p.ua=b.getResult(),p.ua.get=function(){return b.getUA()},p.ua.set=function(e){b.setUA(e);var t=b.getResult();for(var n in t)p.ua[n]=t[n]}}}("object"==typeof window?window:e)}),an=function uuid(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,uuid)},rn={apiEndpoint:"api.amplitude.com",cookieExpiration:3650,cookieName:"amplitude_id",domain:"",includeReferrer:!1,includeUtm:!1,language:{language:function getLanguage(){return navigator&&(navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage)||void 0}()}.language,logLevel:"WARN",optOut:!1,platform:"Web",savedMaxCount:1e3,saveEvents:!0,sessionTimeout:18e5,unsentKey:"amplitude_unsent",unsentIdentifyKey:"amplitude_unsent_identify",uploadBatchSize:100,batchEvents:!1,eventUploadThreshold:30,eventUploadPeriodMillis:3e4,forceHttps:!0,includeGclid:!1,saveParamsReferrerOncePerSession:!0,deviceIdFromUrlParam:!1},sn=function AmplitudeClient(e){this._instanceName=Z(e)?r:e.toLowerCase(),this._legacyStorageSuffix=this._instanceName===r?"":"_"+this._instanceName,this._unsentEvents=[],this._unsentIdentifys=[],this._ua=new nn(navigator.userAgent).getResult(),this.options=Jt({},rn),this.cookieStorage=(new he).getStorage(),this._q=[],this._sending=!1,this._updateScheduled=!1,this._eventId=0,this._identifyId=0,this._lastEventTime=null,this._newSession=!1,this._sequenceNumber=0,this._sessionId=null,this._userAgent=navigator&&navigator.userAgent||null};sn.prototype.Identify=me,sn.prototype.Revenue=tn,sn.prototype.init=function init(e,t,n,a){if("string"!==$(e)||Z(e))Q.error("Invalid apiKey. Please re-initialize with a valid apiKey");else try{if(this.options.apiKey=e,this._storageSuffix="_"+e+this._legacyStorageSuffix,on(this.options,n),this.cookieStorage.options({expirationDays:this.options.cookieExpiration,domain:this.options.domain}),this.options.domain=this.cookieStorage.options().domain,this._instanceName===r&&cn(this),ln(this),this.options.deviceId="object"===$(n)&&"string"===$(n.deviceId)&&!Z(n.deviceId)&&n.deviceId||this.options.deviceIdFromUrlParam&&this._getDeviceIdFromUrlParam(this._getUrlParams())||this.options.deviceId||an()+"R",this.options.userId="string"===$(t)&&!Z(t)&&t||"number"===$(t)&&t.toString()||this.options.userId||null,this.options.saveEvents){this._unsentEvents=this._loadSavedUnsentEvents(this.options.unsentKey),this._unsentIdentifys=this._loadSavedUnsentEvents(this.options.unsentIdentifyKey);for(var i=0;i<this._unsentEvents.length;i++){var s=this._unsentEvents[i].event_properties,o=this._unsentEvents[i].groups;this._unsentEvents[i].event_properties=ae(s),this._unsentEvents[i].groups=te(o)}for(var c=0;c<this._unsentIdentifys.length;c++){var l=this._unsentIdentifys[c].user_properties,u=this._unsentIdentifys[c].groups;this._unsentIdentifys[c].user_properties=ae(l),this._unsentIdentifys[c].groups=te(u)}}var d=(new Date).getTime();(!this._sessionId||!this._lastEventTime||d-this._lastEventTime>this.options.sessionTimeout)&&(this._newSession=!0,this._sessionId=d,this.options.saveParamsReferrerOncePerSession&&this._trackParamsAndReferrer()),this.options.saveParamsReferrerOncePerSession||this._trackParamsAndReferrer(),this._lastEventTime=d,dn(this),this._sendEventsIfReady()}catch(e){Q.error(e)}finally{"function"===$(a)&&a(this)}},sn.prototype._trackParamsAndReferrer=function _trackParamsAndReferrer(){this.options.includeUtm&&this._initUtmData(),this.options.includeReferrer&&this._saveReferrer(this._getReferrer()),this.options.includeGclid&&this._saveGclid(this._getUrlParams())};var on=function _parseConfig(e,t){if("object"===$(t)){var n=function parseValidateAndLoad(n){if(rn.hasOwnProperty(n)){var a=t[n],r=$(rn[n]);ne(a,n+" option",r)&&("boolean"===r?e[n]=!!a:("string"===r&&!Z(a)||"number"===r&&a>0)&&(e[n]=a))}};for(var a in t)t.hasOwnProperty(a)&&n(a)}};sn.prototype.runQueuedFunctions=function(){for(var e=0;e<this._q.length;e++){var t=this[this._q[e][0]];"function"===$(t)&&t.apply(this,this._q[e].slice(1))}this._q=[]},sn.prototype._apiKeySet=function _apiKeySet(e){return!Z(this.options.apiKey)||(Q.error("Invalid apiKey. Please set a valid apiKey with init() before calling "+e),!1)},sn.prototype._loadSavedUnsentEvents=function _loadSavedUnsentEvents(e){var t=this._getFromStorage(_e,e),n=this._parseSavedUnsentEventsString(t,e),a=this._getFromStorageLegacy(_e,e),r=this._parseSavedUnsentEventsString(a,e).concat(n);return this._removeFromLegacyStorage(_e,e),this._setInStorage(_e,e,JSON.stringify(r)),r},sn.prototype._removeFromLegacyStorage=function _removeFromLegacyStorage(e,t){e.removeItem(t+this._legacyStorageSuffix)},sn.prototype._parseSavedUnsentEventsString=function _parseSavedUnsentEventsString(e,t){if(Z(e))return[];if("string"===$(e))try{var n=JSON.parse(e);if("array"===$(n))return n}catch(e){}return Q.error("Unable to load "+t+" events. Restart with a new empty queue."),[]},sn.prototype.isNewSession=function isNewSession(){return this._newSession},sn.prototype.getSessionId=function getSessionId(){return this._sessionId},sn.prototype.nextEventId=function nextEventId(){return this._eventId++,this._eventId},sn.prototype.nextIdentifyId=function nextIdentifyId(){return this._identifyId++,this._identifyId},sn.prototype.nextSequenceNumber=function nextSequenceNumber(){return this._sequenceNumber++,this._sequenceNumber},sn.prototype._unsentCount=function _unsentCount(){return this._unsentEvents.length+this._unsentIdentifys.length},sn.prototype._sendEventsIfReady=function _sendEventsIfReady(e){return 0!==this._unsentCount()&&(this.options.batchEvents?this._unsentCount()>=this.options.eventUploadThreshold?(this.sendEvents(e),!0):(this._updateScheduled||(this._updateScheduled=!0,setTimeout(function(){this._updateScheduled=!1,this.sendEvents()}.bind(this),this.options.eventUploadPeriodMillis)),!1):(this.sendEvents(e),!0))},sn.prototype._getFromStorage=function _getFromStorage(e,t){return e.getItem(t+this._storageSuffix)},sn.prototype._getFromStorageLegacy=function _getFromStorageLegacy(e,t){return e.getItem(t+this._legacyStorageSuffix)},sn.prototype._setInStorage=function _setInStorage(e,t,n){e.setItem(t+this._storageSuffix,n)};var cn=function _upgradeCookeData(e){var t=e.cookieStorage.get(e.options.cookieName+e._storageSuffix);if("object"!==$(t)&&(t=e.cookieStorage.get(e.options.cookieName+e._legacyStorageSuffix),!("object"===$(t)&&t.deviceId&&t.sessionId&&t.lastEventTime))){var n=function _getAndRemoveFromLocalStorage(e){var t=_e.getItem(e);return _e.removeItem(e),t},a="string"===$(e.options.apiKey)&&"_"+e.options.apiKey.slice(0,6)||"",r=n(h+a),i=n(p+a),s=n(m+a);null!=s&&(s="true"===String(s));var o=parseInt(n(_)),c=parseInt(n(u)),b=parseInt(n(l)),g=parseInt(n(d)),v=parseInt(n(f)),O=function _getFromCookie(e){return"object"===$(t)&&t[e]};e.options.deviceId=O("deviceId")||r,e.options.userId=O("userId")||i,e._sessionId=O("sessionId")||o||e._sessionId,e._lastEventTime=O("lastEventTime")||c||e._lastEventTime,e._eventId=O("eventId")||b||e._eventId,e._identifyId=O("identifyId")||g||e._identifyId,e._sequenceNumber=O("sequenceNumber")||v||e._sequenceNumber,e.options.optOut=s||!1,t&&void 0!==t.optOut&&null!==t.optOut&&(e.options.optOut="true"===String(t.optOut)),dn(e)}},ln=function _loadCookieData(e){var t=e.cookieStorage.get(e.options.cookieName+e._storageSuffix);if("object"===$(t))un(e,t);else{var n=e.cookieStorage.get(e.options.cookieName+e._legacyStorageSuffix);"object"===$(n)&&(e.cookieStorage.remove(e.options.cookieName+e._legacyStorageSuffix),un(e,n))}},un=function _loadCookieDataProps(e,t){t.deviceId&&(e.options.deviceId=t.deviceId),t.userId&&(e.options.userId=t.userId),null!==t.optOut&&void 0!==t.optOut&&(e.options.optOut=t.optOut),t.sessionId&&(e._sessionId=parseInt(t.sessionId)),t.lastEventTime&&(e._lastEventTime=parseInt(t.lastEventTime)),t.eventId&&(e._eventId=parseInt(t.eventId)),t.identifyId&&(e._identifyId=parseInt(t.identifyId)),t.sequenceNumber&&(e._sequenceNumber=parseInt(t.sequenceNumber))},dn=function _saveCookieData(e){e.cookieStorage.set(e.options.cookieName+e._storageSuffix,{deviceId:e.options.deviceId,userId:e.options.userId,optOut:e.options.optOut,sessionId:e._sessionId,lastEventTime:e._lastEventTime,eventId:e._eventId,identifyId:e._identifyId,sequenceNumber:e._sequenceNumber})};sn.prototype._initUtmData=function _initUtmData(e,t){e=e||this._getUrlParams();var n=function getUtmData(e,t){var n=e?"?"+e.split(".").slice(-1)[0].replace(/\|/g,"&"):"",a=function fetchParam(e,t,n,a){return X(e,t)||X(n,a)},r=a("utm_source",t,"utmcsr",n),i=a("utm_medium",t,"utmcmd",n),s=a("utm_campaign",t,"utmccn",n),o=a("utm_term",t,"utmctr",n),c=a("utm_content",t,"utmcct",n),l={},u=function addIfNotNull(e,t){Z(t)||(l[e]=t)};return u("utm_source",r),u("utm_medium",i),u("utm_campaign",s),u("utm_term",o),u("utm_content",c),l}(t=t||this.cookieStorage.get("__utmz"),e);fn(this,n)};var fn=function _sendParamsReferrerUserProperties(e,t){if("object"===$(t)&&0!==Object.keys(t).length){var n=new me;for(var a in t)t.hasOwnProperty(a)&&(n.setOnce("initial_"+a,t[a]),n.set(a,t[a]));e.identify(n)}};sn.prototype._getReferrer=function _getReferrer(){return document.referrer},sn.prototype._getUrlParams=function _getUrlParams(){return location.search},sn.prototype._saveGclid=function _saveGclid(e){var t=X("gclid",e);Z(t)||fn(this,{gclid:t})},sn.prototype._getDeviceIdFromUrlParam=function _getDeviceIdFromUrlParam(e){return X(w,e)},sn.prototype._getReferringDomain=function _getReferringDomain(e){if(Z(e))return null;var t=e.split("/");return t.length>=3?t[2]:null},sn.prototype._saveReferrer=function _saveReferrer(e){if(!Z(e)){var t={referrer:e,referring_domain:this._getReferringDomain(e)};fn(this,t)}},sn.prototype.saveEvents=function saveEvents(){try{this._setInStorage(_e,this.options.unsentKey,JSON.stringify(this._unsentEvents))}catch(e){}try{this._setInStorage(_e,this.options.unsentIdentifyKey,JSON.stringify(this._unsentIdentifys))}catch(e){}},sn.prototype.setDomain=function setDomain(e){if(ne(e,"domain","string"))try{this.cookieStorage.options({domain:e}),this.options.domain=this.cookieStorage.options().domain,ln(this),dn(this)}catch(e){Q.error(e)}},sn.prototype.setUserId=function setUserId(e){try{this.options.userId=null!=e&&""+e||null,dn(this)}catch(e){Q.error(e)}},sn.prototype.setGroup=function(e,t){if(this._apiKeySet("setGroup()")&&ne(e,"groupType","string")&&!Z(e)){var n={};n[e]=t;var a=(new me).set(e,t);this._logEvent(c,null,null,a.userPropertiesOperations,n,null,null)}},sn.prototype.setOptOut=function setOptOut(e){if(ne(e,"enable","boolean"))try{this.options.optOut=e,dn(this)}catch(e){Q.error(e)}},sn.prototype.setSessionId=function setSessionId(e){if(ne(e,"sessionId","number"))try{this._sessionId=e,dn(this)}catch(e){Q.error(e)}},sn.prototype.resetSessionId=function resetSessionId(){this.setSessionId((new Date).getTime())},sn.prototype.regenerateDeviceId=function regenerateDeviceId(){this.setDeviceId(an()+"R")},sn.prototype.setDeviceId=function setDeviceId(e){if(ne(e,"deviceId","string"))try{Z(e)||(this.options.deviceId=""+e,dn(this))}catch(e){Q.error(e)}},sn.prototype.setUserProperties=function setUserProperties(e){if(this._apiKeySet("setUserProperties()")&&ne(e,"userProperties","object")){var t=ee(ae(e));if(0!==Object.keys(t).length){var n=new me;for(var a in t)t.hasOwnProperty(a)&&n.set(a,t[a]);this.identify(n)}}},sn.prototype.clearUserProperties=function clearUserProperties(){if(this._apiKeySet("clearUserProperties()")){var e=new me;e.clearAll(),this.identify(e)}};var _n=function _convertProxyObjectToRealObject(e,t){for(var n=0;n<t._q.length;n++){var a=e[t._q[n][0]];"function"===$(a)&&a.apply(e,t._q[n].slice(1))}return e};sn.prototype.identify=function(e,t){if(this._apiKeySet("identify()")){if("object"===$(e)&&e.hasOwnProperty("_q")&&(e=_n(new me,e)),e instanceof me){if(Object.keys(e.userPropertiesOperations).length>0)return this._logEvent(c,null,null,e.userPropertiesOperations,null,null,t)}else Q.error("Invalid identify input type. Expected Identify object but saw "+$(e));"function"===$(t)&&t(0,"No request sent")}else"function"===$(t)&&t(0,"No request sent")},sn.prototype.setVersionName=function setVersionName(e){ne(e,"versionName","string")&&(this.options.versionName=e)},sn.prototype._logEvent=function _logEvent(e,t,n,a,r,i,s){if(ln(this),e&&!this.options.optOut)try{var o;o=e===c?this.nextIdentifyId():this.nextEventId();var l=this.nextSequenceNumber(),u="number"===$(i)?i:(new Date).getTime();(!this._sessionId||!this._lastEventTime||u-this._lastEventTime>this.options.sessionTimeout)&&(this._sessionId=u),this._lastEventTime=u,dn(this),a=a||{},n=n||{},t=t||{},r=r||{};var d={device_id:this.options.deviceId,user_id:this.options.userId,timestamp:u,event_id:o,session_id:this._sessionId||-1,event_type:e,version_name:this.options.versionName||null,platform:this.options.platform,os_name:this._ua.browser.name||null,os_version:this._ua.browser.major||null,device_model:this._ua.os.name||null,language:this.options.language,api_properties:n,event_properties:ee(ae(t)),user_properties:ee(ae(a)),uuid:an(),library:{name:"amplitude-js",version:"4.2.1"},sequence_number:l,groups:ee(te(r)),user_agent:this._userAgent};return e===c?(this._unsentIdentifys.push(d),this._limitEventsQueued(this._unsentIdentifys)):(this._unsentEvents.push(d),this._limitEventsQueued(this._unsentEvents)),this.options.saveEvents&&this.saveEvents(),this._sendEventsIfReady(s)||"function"!==$(s)||s(0,"No request sent"),o}catch(e){Q.error(e)}else"function"===$(s)&&s(0,"No request sent")},sn.prototype._limitEventsQueued=function _limitEventsQueued(e){e.length>this.options.savedMaxCount&&e.splice(0,e.length-this.options.savedMaxCount)},sn.prototype.logEvent=function logEvent(e,t,n){return this.logEventWithTimestamp(e,t,null,n)},sn.prototype.logEventWithTimestamp=function logEvent(e,t,n,a){return this._apiKeySet("logEvent()")&&ne(e,"eventType","string")&&!Z(e)?this._logEvent(e,t,null,null,null,n,a):("function"===$(a)&&a(0,"No request sent"),-1)},sn.prototype.logEventWithGroups=function(e,t,n,a){return this._apiKeySet("logEventWithGroup()")&&ne(e,"eventType","string")?this._logEvent(e,t,null,null,n,null,a):("function"===$(a)&&a(0,"No request sent"),-1)};var hn=function _isNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)};sn.prototype.logRevenueV2=function logRevenueV2(e){if(this._apiKeySet("logRevenueV2()"))if("object"===$(e)&&e.hasOwnProperty("_q")&&(e=_n(new tn,e)),e instanceof tn){if(e&&e._isValidRevenue())return this.logEvent(g,e._toJSONObject())}else Q.error("Invalid revenue input type. Expected Revenue object but saw "+$(e))},sn.prototype.logRevenue=function logRevenue(e,t,n){return this._apiKeySet("logRevenue()")&&hn(e)&&(void 0===t||hn(t))?this._logEvent(g,{},{productId:n,special:"revenue_amount",quantity:t||1,price:e},null,null,null,null):-1},sn.prototype.removeEvents=function removeEvents(e,t){mn(this,"_unsentEvents",e),mn(this,"_unsentIdentifys",t)};var mn=function _removeEvents(e,t,n){if(!(n<0)){for(var a=[],r=0;r<e[t].length;r++)e[t][r].event_id>n&&a.push(e[t][r]);e[t]=a}};sn.prototype.sendEvents=function sendEvents(e){if(!this._apiKeySet("sendEvents()")||this._sending||this.options.optOut||0===this._unsentCount())"function"===$(e)&&e(0,"No request sent");else{this._sending=!0;var t=(this.options.forceHttps?"https":"https:"===window.location.protocol?"https":"http")+"://"+this.options.apiEndpoint+"/",n=Math.min(this._unsentCount(),this.options.uploadBatchSize),a=this._mergeEventsAndIdentifys(n),r=a.maxEventId,s=a.maxIdentifyId,o=JSON.stringify(a.eventsToSend),c=(new Date).getTime(),l={client:this.options.apiKey,e:o,v:i,upload_time:c,checksum:be(i+this.options.apiKey+o+c)},u=this;new en(t,l).send(function(t,a){u._sending=!1;try{200===t&&"success"===a?(u.removeEvents(r,s),u.options.saveEvents&&u.saveEvents(),u._sendEventsIfReady(e)||"function"!==$(e)||e(t,a)):413===t?(1===u.options.uploadBatchSize&&u.removeEvents(r,s),u.options.uploadBatchSize=Math.ceil(n/2),u.sendEvents(e)):"function"===$(e)&&e(t,a)}catch(e){}})}},sn.prototype._mergeEventsAndIdentifys=function _mergeEventsAndIdentifys(e){for(var t=[],n=0,a=-1,r=0,i=-1;t.length<e;){var s,o=r>=this._unsentIdentifys.length,c=n>=this._unsentEvents.length;if(c&&o){Q.error("Merging Events and Identifys, less events and identifys than expected");break}o?a=(s=this._unsentEvents[n++]).event_id:c?i=(s=this._unsentIdentifys[r++]).event_id:!("sequence_number"in this._unsentEvents[n])||this._unsentEvents[n].sequence_number<this._unsentIdentifys[r].sequence_number?a=(s=this._unsentEvents[n++]).event_id:i=(s=this._unsentIdentifys[r++]).event_id,t.push(s)}return{eventsToSend:t,maxEventId:a,maxIdentifyId:i}},sn.prototype.setGlobalUserProperties=function setGlobalUserProperties(e){this.setUserProperties(e)},sn.prototype.__VERSION__="4.2.1";var pn=function Amplitude(){this.options=Jt({},rn),this._q=[],this._instances={}};pn.prototype.Identify=me,pn.prototype.Revenue=tn,pn.prototype.getInstance=function getInstance(e){e=Z(e)?r:e.toLowerCase();var t=this._instances[e];return void 0===t&&(t=new sn(e),this._instances[e]=t),t},pn.prototype.init=function init(e,t,n,a){this.getInstance().init(e,t,n,function(e){this.options=e.options,"function"===$(a)&&a(e)}.bind(this))},pn.prototype.runQueuedFunctions=function(){for(var e=0;e<this._q.length;e++){var t=this[this._q[e][0]];"function"===$(t)&&t.apply(this,this._q[e].slice(1))}for(var n in this._q=[],this._instances)this._instances.hasOwnProperty(n)&&this._instances[n].runQueuedFunctions()},pn.prototype.isNewSession=function isNewSession(){return this.getInstance().isNewSession()},pn.prototype.getSessionId=function getSessionId(){return this.getInstance().getSessionId()},pn.prototype.nextEventId=function nextEventId(){return this.getInstance().nextEventId()},pn.prototype.nextIdentifyId=function nextIdentifyId(){return this.getInstance().nextIdentifyId()},pn.prototype.nextSequenceNumber=function nextSequenceNumber(){return this.getInstance().nextSequenceNumber()},pn.prototype.saveEvents=function saveEvents(){this.getInstance().saveEvents()},pn.prototype.setDomain=function setDomain(e){this.getInstance().setDomain(e)},pn.prototype.setUserId=function setUserId(e){this.getInstance().setUserId(e)},pn.prototype.setGroup=function(e,t){this.getInstance().setGroup(e,t)},pn.prototype.setOptOut=function setOptOut(e){this.getInstance().setOptOut(e)},pn.prototype.regenerateDeviceId=function regenerateDeviceId(){this.getInstance().regenerateDeviceId()},pn.prototype.setDeviceId=function setDeviceId(e){this.getInstance().setDeviceId(e)},pn.prototype.setUserProperties=function setUserProperties(e){this.getInstance().setUserProperties(e)},pn.prototype.clearUserProperties=function clearUserProperties(){this.getInstance().clearUserProperties()},pn.prototype.identify=function(e,t){this.getInstance().identify(e,t)},pn.prototype.setVersionName=function setVersionName(e){this.getInstance().setVersionName(e)},pn.prototype.logEvent=function logEvent(e,t,n){return this.getInstance().logEvent(e,t,n)},pn.prototype.logEventWithGroups=function(e,t,n,a){return this.getInstance().logEventWithGroups(e,t,n,a)},pn.prototype.logRevenueV2=function logRevenueV2(e){return this.getInstance().logRevenueV2(e)},pn.prototype.logRevenue=function logRevenue(e,t,n){return this.getInstance().logRevenue(e,t,n)},pn.prototype.removeEvents=function removeEvents(e,t){this.getInstance().removeEvents(e,t)},pn.prototype.sendEvents=function sendEvents(e){this.getInstance().sendEvents(e)},pn.prototype.setGlobalUserProperties=function setGlobalUserProperties(e){this.getInstance().setUserProperties(e)},pn.prototype.__VERSION__="4.2.1";var bn=window.amplitude||{},gn=new pn;for(var vn in gn._q=bn._q||[],bn._iq)bn._iq.hasOwnProperty(vn)&&(gn.getInstance(vn)._q=bn._iq[vn]._q||[]);return gn},e.exports=r()}).call(this,n(33),n(81),n(82).Buffer)},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i}),n.d(t,"d",function(){return s}),n.d(t,"c",function(){return o});var a=n(14),r={FRIENDS_TAB:0,CLUBS_TAB:1,CHATS_TAB:2},i={AMPLITUDE_LOG:"amplitudeLog",AMPLITUDE_SOURCE_NAV:"menu",DRILLS_NAV_EVENT:"Drills - Home",LESSONS_NAV_EVENT:"Lessons - Home",SOCIAL_VIEW_EVENT:"Social - ViewEvent",TACTICS_NAV_EVENT:"Tactics - Home",VIDEOS_NAV_EVENT:"Videos - Home",VISION_NAV_EVENT:"Vision - Home"},s=27,o={0:a.a.connectionOffline,1:a.a.connectionPoor,2:a.a.connectionOk,3:a.a.connectionGood,4:a.a.connectionExcellent}},function(e,t){e.exports=function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"h",function(){return i}),n.d(t,"e",function(){return o}),n.d(t,"d",function(){return c}),n.d(t,"g",function(){return l}),n.d(t,"b",function(){return u}),n.d(t,"c",function(){return d}),n.d(t,"f",function(){return f});window.location.pathname,function getWindowTitle(){encodeURIComponent(window.document.title)}(),function getWindowLocation(){encodeURIComponent(window.location.href)}();window.chessBrowserChecker={};var a={chrome:"Chrome",edge:"edge",firefox:"Firefox",ie:"IE",safari:"Safari",waterfox:"Waterfox"};window.chessBrowserChecker.supportedBrowsers=["Chrome","edge","Firefox","IE","Safari","Waterfox"];var r={chrome:74,edge:17,firefox:60,safari:11,waterfox:56};window.chessBrowserChecker.supportedBrowserVersions=r;var i=function sendEmail(e,t){window.location.href="mailto:?".concat(e,"&").concat(t)},s=function version(e,t){return t.appVersion.indexOf(e)>-1},o=function isMobile(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)},c=function isApple(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return Boolean(["macintosh","iphone","ipad"].find(function(t){return e.toLowerCase().indexOf(t)>=0}))},l=function isiOS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return Boolean(["iphone","ipad"].find(function(t){return e.toLowerCase().indexOf(t)>=0}))},u=function getBrowser(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(function isEdge(){return null!==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent).match(/Edge/)}(t)){var a=t.indexOf("Edge/");return{name:"Edge",version:parseInt(t.substring(a+5,t.indexOf(".",a)),10)}}if(/trident/i.test(n[1]))return{name:"IE",version:(e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""};if("Chrome"===n[1]&&null!=(e=t.match(/\bOPR\/(\d+)/)))return{name:"Opera",version:e[1]};if("Firefox"===n[1]){var r=t.match(/(waterfox(?=\/))\/?\s*(\d+)/i)||[];if("Waterfox"===r[1])return{name:r[1],version:parseInt(r[2],10)}}return"Safari"===(n=n[2]?[n[1],n[2]]:[window.navigator.appName,window.navigator.appVersion,"-?"])[0]&&null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),{name:n[0],version:parseInt(n[1],10)}};window.chessBrowserChecker.getBrowserInformation=u;var d=function getWindowsVersion(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator;return s("NT",e)?s("Windows NT 5.1",e)||s("Windows NT 6.0",e)?6:s("Windows NT 6.1",e)?7:s("Windows NT 6.2",e)||s("Windows NT 6.3",e)?8:10:-1},f=function isOldBrowser(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent,t=u(e);return"Chrome"===t.name?t.version<r.chrome:"Safari"===t.name?t.version<r.safari:"Firefox"===t.name?t.version<r.firefox:"Edge"===t.name?t.version<r.edge:"IE"===t.name};window.chessBrowserChecker.isOldBrowser=f},function(e,t,n){"use strict";var a={GAME_ILLEGAL_MOVE:100,RATING_MAX:3500,RATING_MIN:0,ACTIVE_DAY_CUTOFF:365,TIME_WARNING_SECONDS:28800,MAX_DAY_PER_MOVE:14,TIME_MULTIPLIER:10,DEFAULT_NAME:"Let's Play!",WELCOME_NAME:"Welcome to Chess.com!",MIN_CHEAT_POLICY_RATING:2e3,MIN_SUSPICIOUS_PLAY_RATING:2e3,MIN_SUSPICIOUS_PLAY_TOGGLE_PERC:75,MIN_SUSPICIOUS_PLAY_PLY_COUNT:40,MIN_PLY_COUNT_RATED:6,SPAM_CHECK_GAMES_MIN_LIMIT:5,SPAM_CHECK_NEW_PLAYERS_GAMES_MIN_LIMIT:10,DEFAULT_FEN_SHORT:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq",DEFAULT_FEN:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",ACCESS_LEVEL_SUPER_ADMIN:"super_admin",ACCESS_LEVEL_ADMIN:"admin",ACCESS_LEVEL_MEMBER:"member",ACTIVITY_TYPE_NEWS:"news",ACTIVITY_TYPE_EVENT:"event",ACTIVITY_TYPE_FORUM:"forum",ACTIVITY_TYPE_NOTES:"notes",POINT_VALUE:1,LAST_ACTIVITY_DATE_EXPIRATION_IN_MINUTES:10,MAX_PROBLEMS_PER_DAY_DEFAULT:3,AVERAGE_TIME_PER_MOVE:30,MIN_ATTEMPT_COUNT:20,MIN_SCORE_TO_BE_QUEUED:5,BEST_SCORE:0,DEAD_SCORE:10,MIN_RATING:400,MAX_ATTEMPT_LOGGED_OUT:10,USER_FEED_MAX_PAGES:4,USER_FEED_ITEMS_FIRST_PAGE:5,USER_FEED_ITEMS_PER_PAGE:20,STD_PROP_LIST:1,ARRAY_AS_PROPS:2,DEFAULT_LOCALE:"en_US",DEFAULT_LANGUAGE_CODE:"en",DEFAULT_LANGUAGE_DIRECTION:"ltr",DEFAULT_MAX_YEAR_INCREASE:5,CONTENT_ITEMS_PER_PAGE:25,LEADERBOARD_ITEMS_PER_PAGE:50,I18N_DEFAULT_LOCALE:"en_US"},r=n(3);n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o});var i=function daily(e){return r.default.generate("web_daily_game",{id:e})},s=window.context&&window.context.locale?window.context.locale:a.I18N_DEFAULT_LOCALE,o={home:r.default.generate("web_user_home"),live:r.default.generate("web_live"),loginAndGoRoute:function loginAndGoRoute(e){return r.default.generate("web_security_login_and_go",{redirectUrl:e})},logout:r.default.generate("web_security_logout"),membership:r.default.generate("web_membership",{c:"navbarsvelte"}),messages:r.default.generate("web_message_index"),playUrl:function playUrl(e){return"chess.com".concat(r.default.generate("web_member_play",{username:e}))},stats:r.default.generate("web_stats"),themes:r.default.generate("web_user_settings_themes"),registerRoute:function registerRoute(e){return r.default.generate("web_security_register",{redirectUrl:e})},settings:r.default.generate("web_user_settings_edit"),support:"https://support.chess.com/",topPlayerObserve:function topPlayerObserve(e){return"".concat(r.default.generate("web_live"),"#follow=").concat(e)},tv:["en_US","en"].includes(s)?r.default.generate("web_tv"):r.default.generate("i18n_web_tv",{_locale:s.substr(0,2)})}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function isObjectLike(e){return null!=e&&"object"==typeof e}},function(e,t,n){var a=n(52),r="object"==typeof self&&self&&self.Object===Object&&self,i=a||r||Function("return this")();e.exports=i},function(e,t,n){var a=n(47),r=n(79),i=n(80),s="[object Null]",o="[object Undefined]",c=a?a.toStringTag:void 0;e.exports=function baseGetTag(e){return null==e?void 0===e?o:s:c&&c in Object(e)?r(e):i(e)}},function(e,t,n){"use strict";n.d(t,"a",function(){return Store});var a=n(0);function Store(e,t){this._handlers={},this._dependents=[],this._computed=Object(a.g)(),this._sortedComputedProperties=[],this._state=Object(a.e)({},e),this._differs=t&&t.immutable?a.b:a.a}Object(a.e)(Store.prototype,{_add:function _add(e,t){this._dependents.push({component:e,props:t})},_init:function _init(e){for(var t={},n=0;n<e.length;n+=1){var a=e[n];t["$"+a]=this._state[a]}return t},_remove:function _remove(e){for(var t=this._dependents.length;t--;)if(this._dependents[t].component===e)return void this._dependents.splice(t,1)},_set:function _set(e,t){var n=this,r=this._state;this._state=Object(a.e)(Object(a.e)({},r),e);for(var i=0;i<this._sortedComputedProperties.length;i+=1)this._sortedComputedProperties[i].update(this._state,t);this.fire("state",{changed:t,previous:r,current:this._state}),this._dependents.filter(function(e){for(var a={},r=!1,i=0;i<e.props.length;i+=1){var s=e.props[i];s in t&&(a["$"+s]=n._state[s],r=!0)}if(r)return e.component._stage(a),!0}).forEach(function(e){e.component.set({})}),this.fire("update",{changed:t,previous:r,current:this._state})},_sortComputedProperties:function _sortComputedProperties(){var e,t=this._computed,n=this._sortedComputedProperties=[],r=Object(a.g)();function visit(a){var i=t[a];i&&(i.deps.forEach(function(t){if(t===e)throw new Error("Cyclical dependency detected between ".concat(t," <-> ").concat(a));visit(t)}),r[a]||(r[a]=!0,n.push(i)))}for(var i in this._computed)visit(e=i)},compute:function compute(e,t,n){var r,i=this,s={deps:t,update:function update(a,s,o){var c=t.map(function(e){return e in s&&(o=!0),a[e]});if(o){var l=n.apply(null,c);i._differs(l,r)&&(r=l,s[e]=!0,a[e]=r)}}};this._computed[e]=s,this._sortComputedProperties();var o=Object(a.e)({},this._state),c={};s.update(o,c,!0),this._set(o,c)},fire:a.q,get:a.s,on:a.w,set:function set(e){var t=this._state,n=this._changed={},a=!1;for(var r in e){if(this._computed[r])throw new Error("'".concat(r,"' is a read-only computed property"));this._differs(e[r],t[r])&&(n[r]=a=!0)}a&&this._set(e,n)}})},function(e,t,n){"use strict";var a=n(0);n(179);function Avatar_svelte(e){Object(a.t)(this,e),this._state=Object(a.e)({},e.data),this._intro=!0,this._fragment=function create_main_fragment(e,t){var n,r,i,s,o;return{c:function c(){n=Object(a.i)("span"),r=Object(a.i)("img"),i=Object(a.k)("\n\n  "),s=Object(a.i)("span"),r.alt=t.username,r.width=t.size,r.height=t.size,r.src=t.src,s.className=o="status "+(t.online?"online":"")+" "+(t.live?"live":"")+" svelte-g0lln",n.className="component svelte-g0lln",Object(a.F)(n,"width",t.size+"px")},m:function m(e,t){Object(a.u)(e,n,t),Object(a.d)(n,r),Object(a.d)(n,i),Object(a.d)(n,s)},p:function p(e,t){e.username&&(r.alt=t.username),e.size&&(r.width=t.size,r.height=t.size),e.src&&(r.src=t.src),(e.online||e.live)&&o!==(o="status "+(t.online?"online":"")+" "+(t.live?"live":"")+" svelte-g0lln")&&(s.className=o),e.size&&Object(a.F)(n,"width",t.size+"px")},d:function d(e){e&&Object(a.p)(n)}}}(0,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}Object(a.e)(Avatar_svelte.prototype,a.x),t.a=Avatar_svelte},function(e,t,n){"use strict";var a=n(28),r=n.n(a),i=n(57),s=n.n(i).a;t.a=new class logger_AmplitudeLogger{init(){if(this.initialized)return!0;var e=window.context||{};return r.a.getInstance().init(e.amplitudeKey,null,{includeUtm:!0,includeReferrer:!0,includeGclid:!0}),null!=e&&null!=e.user&&r.a.getInstance().setUserId(e.user.id),this.initialized=!0,!0}logEvent(e,t,n,a){var i=this,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;this.init()?(this.setUserProperties(n),this.incrementUserProperties(a),r.a.getInstance().logEvent(e,t||{})):s<3&&setTimeout(function(){i.logEvent(e,t,n,a,s+1)},1e3)}setUserProperties(e){this.init()&&null!=e&&r.a.getInstance().setUserProperties(e)}incrementUserProperties(e){if(this.init()&&null!=e){var t=new r.a.Identify;s(e,function(e,n){t.add(n,e)}),r.a.getInstance().identify(t)}}logSocialShare(){this.logEvent("Social - SocialShare",null,null,{numSocialShares:1})}logOnboardChangeAvatar(e){this.logEvent("Onboard - Avatar",null,{hasAvatar:e})}logOnboardChangeTheme(e){this.logEvent("Onboard - Theme",null,{themeName:e})}logAccountClose(e){this.logEvent("User - AccountClose",e)}logStartCheckout(e){var t=e.plan,n=e.version,a=e.userProps;this.logEvent("Upgrade - Checkout",{plan:t,version:n},a)}logSubmitPayment(e){this.logEvent("Upgrade - SubmitPayment",{auth:e})}logAccountDowngrade(e,t){this.logEvent("Upgrade - Cancel",e,t)}logAccountDowngradeTrial(e,t){this.logEvent("Upgrade - CancelTrial",e,t)}logVideoComplete(e,t,n,a){this.logEvent("Videos - Complete",{skillLevels:e,category:t,title:n,author:a})}logVideoStart(e,t,n,a){this.logEvent("Videos - Start",{skillLevels:e,category:t,title:n,author:a},null,{numVideos:1})}}},,function(e,t,n){"use strict";var a=n(19),r=function getValue(e,t){return a.a.isString(t)&&a.a.isObject(e)?e[t]:a.a.isFunction(t)?t(e):void 0},i=function compareValues(e,t,n,a){var i=r(e,n),s=r(t,n);return null==i?1:null==s?-1:i>s?"desc"===a?-1:1:i<s?"desc"===a?1:-1:0};t.a={remove:function remove(e,t){var n=a.a.isFunction(t)?e.findIndex(t):e.indexOf(t);-1!==n&&e.splice(n,1)},range:function range(e,t){for(var n=[],a=e;a<t;a++)n.push(a);return n},uniq:function uniq(e,t){return a.a.isFunction(t)?e.filter(function(n,a){return e.findIndex(function(e){return t(e)===t(n)})===a}):t?e.filter(function(n,a){return e.findIndex(function(e){return e[t]===n[t]})===a}):e.filter(function(t,n){return e.indexOf(t)===n})},sortBy:function sortBy(e,t,n){var r=a.a.isArray(t)?t:[t],s=a.a.isArray(n)?n:[n],o=e.slice(0);return o.sort(function(e,t){for(var n=0,a=0;a<r.length&&0===n;a++)n=i(e,t,r[a],s[a]);return n}),o}}},function(e,t,n){"use strict";var a=n(48),r=n.n(a);t.a=r.a},,function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return u});var a=n(51),r="top",i="right",s="bottom",o="left",c=function getUserPopoverPosition(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:172,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,a={top:null,left:null,right:null,x:null,y:null},c=e.width/2,l=window,u=e.bottom+t<l.innerHeight,d=n-28-12,f=n-d,_=e.left+c+d<l.innerWidth;return u?(a.top=e.bottom,a.y=s):(a.top=e.top-t,a.y=r),_?(a.left=e.left+c-f,a.right=window.innerWidth-e.right,a.x=i):(a.left=e.left+c-d,a.right=window.innerWidth-e.right,a.x=o),a.top=Math.round(a.top),a.left=Math.round(a.left),a.right=Math.round(a.right),a},l=function positionTooltip(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!e||!t)return null;var l=function getPosition(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!e||!t)return null;var c=e.getBoundingClientRect(),l={},u=window.innerWidth-c.x,d=function canFitTop(){return c.top-(t.clientHeight+a)>0},f=function canFitLeft(){return c.left-(t.clientWidth+a)>0};return n===r&&d()||n===s&&!function canFitBottom(){return c.bottom+t.clientHeight+a<window.innerHeight}()?(l.left=c.left-(t.clientWidth-c.width)/2,l.rtlLeft=u-t.clientWidth/2-c.width/2,l.top=c.top-t.clientHeight-a,l.placement=r):n===s||n===r&&!d()?(l.left=c.left-(t.clientWidth-c.width)/2,l.rtlLeft=u-t.clientWidth/2-c.width/2,l.top=c.bottom+a,l.placement=s):n===o&&f()||n===i&&!function canFitRight(){return c.right+t.clientWidth+a<window.innerWidth}()?(l.left=c.left-t.clientWidth-a,l.rtlLeft=c.rtlLeft-t.clientWidth-a,l.top=c.top-(t.clientHeight-c.height)/2,l.placement=o):(n===i||n===o&&!f())&&(l.left=c.right+a,l.rtlLeft=c.rtlLeft+a,l.top=c.top-(t.clientHeight-c.height)/2,l.placement=i),{left:Math.round(l.left),placement:l.placement,rtlLeft:Math.round(l.rtlLeft),top:Math.round(l.top)}}(e,t,n,c);return Object(a.a)()?t.style.transform="translate(-".concat(l.rtlLeft,"px, ").concat(l.top,"px)"):t.style.transform="translate(".concat(l.left,"px, ").concat(l.top,"px)"),t.classList.add(l.placement),t},u=function removePositionStyle(e){return e?(e.style.transform="translate(-100%, -100%)",e.classList.remove(o,i,s,r),e):null}},function(e,t,n){e.exports=n(21)(16)},function(e,t,n){"use strict";(function(e){var n="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};t.a=n}).call(this,n(33))},function(e,t,n){var a=n(35).Symbol;e.exports=a},function(e,t,n){var a=n(30),r=n(77),i=n(78),s="Expected a function",o=Math.max,c=Math.min;e.exports=function debounce(e,t,n){var l,u,d,f,_,h,m=0,p=!1,b=!1,g=!0;if("function"!=typeof e)throw new TypeError(s);function invokeFunc(t){var n=l,a=u;return l=u=void 0,m=t,f=e.apply(a,n)}function shouldInvoke(e){var n=e-h;return void 0===h||n>=t||n<0||b&&e-m>=d}function timerExpired(){var e=r();if(shouldInvoke(e))return trailingEdge(e);_=setTimeout(timerExpired,function remainingWait(e){var n=t-(e-h);return b?c(n,d-(e-m)):n}(e))}function trailingEdge(e){return _=void 0,g&&l?invokeFunc(e):(l=u=void 0,f)}function debounced(){var e=r(),n=shouldInvoke(e);if(l=arguments,u=this,h=e,n){if(void 0===_)return function leadingEdge(e){return m=e,_=setTimeout(timerExpired,t),p?invokeFunc(e):f}(h);if(b)return _=setTimeout(timerExpired,t),invokeFunc(h)}return void 0===_&&(_=setTimeout(timerExpired,t)),f}return t=i(t)||0,a(n)&&(p=!!n.leading,d=(b="maxWait"in n)?o(i(n.maxWait)||0,t):d,g="trailing"in n?!!n.trailing:g),debounced.cancel=function cancel(){void 0!==_&&clearTimeout(_),m=0,l=h=u=_=void 0},debounced.flush=function flush(){return void 0===_?f:trailingEdge(r())},debounced}},function(e,t,n){"use strict";var a=n(3);t.a=function(){return-1!==window.location.href.indexOf(a.default.generate("web_2fa_login"))}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function isRtl(){return"rtl"===document.querySelector("html").getAttribute("dir")}},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(33))},function(e,t){var n=Array.isArray;e.exports=n},function(e,t){var n=9007199254740991;e.exports=function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}},function(e,t,n){var a=n(60),r=n(54);e.exports=function isArrayLike(e){return null!=e&&r(e.length)&&!a(e)}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function makeResizeEvent(){var e;return"function"==typeof Event?e=new Event("resize"):(e=document.createEvent("Event")).initEvent("resize",!1,!0),e}},function(e,t,n){var a=n(86),r=n(97);e.exports=function forOwn(e,t){return e&&a(e,r(t))}},function(e,t,n){var a=n(36),r=n(34),i="[object Symbol]";e.exports=function isSymbol(e){return"symbol"==typeof e||r(e)&&a(e)==i}},function(e,t){var n=Object.prototype;e.exports=function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var a=n(36),r=n(30),i="[object AsyncFunction]",s="[object Function]",o="[object GeneratorFunction]",c="[object Proxy]";e.exports=function isFunction(e){if(!r(e))return!1;var t=a(e);return t==s||t==o||t==i||t==c}},function(e,t){e.exports=function identity(e){return e}},function(e,t,n){"use strict";var a=n(171)();e.exports=function(e){return e!==a&&null!==e}},function(e,t,n){"use strict";var a=n(102),r=n.n(a);t.a=r.a},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a="ontouchstart"in window||window.navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0||/firefox/i.test(window.navigator.userAgent)&&"TouchEvent"in window},function(e,t,n){"use strict";var a=n(0),r=n(38);n(180);function create_else_block(e,t){var n;return{c:function c(){(n=Object(a.i)("span")).className="chat-avatar-placeholder svelte-1vqrvrr",Object(a.F)(n,"height",t.size+"px"),Object(a.F)(n,"width",t.size+"px")},m:function m(e,t){Object(a.u)(e,n,t)},p:function p(e,t){e.size&&(Object(a.F)(n,"height",t.size+"px"),Object(a.F)(n,"width",t.size+"px"))},d:function d(e){e&&Object(a.p)(n)}}}function create_if_block(e,t){var n={online:t.chat.isOnline,size:t.size,src:t.src,username:t.chat.name},a=new r.a({root:e.root,store:e.store,data:n});return{c:function c(){a._fragment.c()},m:function m(e,t){a._mount(e,t)},p:function p(e,t){var n={};e.chat&&(n.online=t.chat.isOnline),e.size&&(n.size=t.size),e.src&&(n.src=t.src),e.chat&&(n.username=t.chat.name),a._set(n)},d:function d(e){a.destroy(e)}}}function Chat_avatar_svelte(e){Object(a.t)(this,e),this._state=Object(a.e)({},e.data),this._recompute({chat:1,avatarSize:1},this._state),this._intro=!0,this._fragment=function create_main_fragment(e,t){var n;function select_block_type(e){return e.src?create_if_block:create_else_block}var r=select_block_type(t),i=r(e,t);return{c:function c(){i.c(),n=Object(a.h)()},m:function m(e,t){i.m(e,t),Object(a.u)(e,n,t)},p:function p(t,a){r===(r=select_block_type(a))&&i?i.p(t,a):(i.d(1),(i=r(e,a)).c(),i.m(n.parentNode,n))},d:function d(e){i.d(e),e&&Object(a.p)(n)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(a.r)(this))}Object(a.e)(Chat_avatar_svelte.prototype,a.x),Chat_avatar_svelte.prototype._recompute=function _recompute(e,t){e.chat&&this._differs(t.src,t.src=function src(e){return e.chat.avatarUrl||void 0}(t))&&(e.src=!0),e.avatarSize&&this._differs(t.size,t.size=function size(e){return e.avatarSize||30}(t))&&(e.size=!0)},t.a=Chat_avatar_svelte},function(e,t,n){"use strict";var a=[{name:"",icons:[{name:"happy",code:":)"},{name:"sad",code:":("},{name:"angry",code:":C"},{name:"ohno"},{name:"worry"},{name:"wink",code:";)"},{name:"tears",code:":.("},{name:"cry",code:":_("},{name:"delicious"},{name:"meh",code:":/"},{name:"grin",code:":D"},{name:"eek"},{name:"grimace"},{name:"evil",code:":V"},{name:"nervous"},{name:"rage",code:":[]"},{name:"blush"},{name:"shock"},{name:"dead"},{name:"zzz"},{name:"tongue"},{name:"laugh",code:":P"},{name:"river"},{name:"horror"},{name:"peaceful"},{name:"love"},{name:"smart"},{name:"cool"},{name:"mustache"},{name:"ghost"},{name:"scream"},{name:"devil"},{name:"sick"},{name:"kiss"},{name:"clap"},{name:"tup"},{name:"tdown"},{name:"fist"},{name:"raised_hands"},{name:"strong"},{name:"wave",isPremium:!0},{name:"troll",isPremium:!0},{name:"rainbow",isPremium:!0},{name:"unicorn",isPremium:!0},{name:"coffee",isPremium:!0},{name:"donut",isPremium:!0},{name:"earth",isPremium:!0},{name:"panda",isPremium:!0},{name:"skull",isPremium:!0},{name:"bitcoin",isPremium:!0}]},{name:"chess",icons:[{name:"play"},{name:"draw"},{name:"resign"},{name:"board"},{name:"wp"},{name:"wn"},{name:"wb"},{name:"wr"},{name:"wq"},{name:"wk"},{name:"medal"},{name:"mate"},{name:"cmate"},{name:"clock"},{name:"bp"},{name:"bn"},{name:"bb"},{name:"br"},{name:"bq"},{name:"bk"},{name:"bullet"},{name:"blitz"},{name:"live"},{name:"castle"},{name:"skewer"},{name:"fork"},{name:"pin"},{name:"fish"},{name:"trophy"},{name:"battle"},{name:"puzzle_rush"},{name:"bughouse"},{name:"daily"},{name:"watch"},{name:"four_player"},{name:"chesskid"},{name:"friend"},{name:"club"},{name:"leaderboard"},{name:"computer"},{name:"settings"},{name:"messages"},{name:"arena_kings"},{name:"speed_chess_championship"},{name:"titled_tuesday"},{name:"diamond"},{name:"platinum"},{name:"gold"}]},{name:"holiday",icons:[{name:"birthday_cake",isPremium:!0},{name:"party_hat",isPremium:!0},{name:"cheers",isPremium:!0},{name:"heart_bear",isPremium:!0},{name:"heart_gift",isPremium:!0},{name:"heart_letter",isPremium:!0},{name:"clover",isPremium:!0},{name:"coins_bag",isPremium:!0},{name:"palm_tree",isPremium:!0},{name:"fireworks",isPremium:!0},{name:"halloween_ghost",isPremium:!0},{name:"halloween",isPremium:!0},{name:"rip",isPremium:!0},{name:"maple_leaf",isPremium:!0},{name:"turkey",isPremium:!0},{name:"present",isPremium:!0},{name:"hanukkah",isPremium:!0},{name:"christmas_tree",isPremium:!0},{name:"santa",isPremium:!0},{name:"christmas_wrench",isPremium:!0}]},{name:"hosts",icons:[{name:"danny_rensch",isPremium:!0},{name:"danny_rensch_surprised",isPremium:!0},{name:"robert_hess",isPremium:!0},{name:"luison",isPremium:!0},{name:"hikaru_nakamura",isPremium:!0},{name:"anna_rudolf",isPremium:!0},{name:"alexandra_botez",isPremium:!0},{name:"levy_rozman",isPremium:!0},{name:"eric_hansen",isPremium:!0},{name:"aman_hambleton",isPremium:!0}]},{name:"engines",icons:[{name:"ccc",isPremium:!0},{name:"stockfish",isPremium:!0},{name:"lc0",isPremium:!0},{name:"komodo",isPremium:!0},{name:"houdini",isPremium:!0},{name:"ethereal",isPremium:!0},{name:"fire",isPremium:!0},{name:"leelenstein",isPremium:!0},{name:"allie",isPremium:!0},{name:"boom",isPremium:!0}]},{name:"pro chess league",icons:[{name:"pcl",isPremium:!0},{name:"amsterdam_mosquitoes",isPremium:!0},{name:"armenia_eagles",isPremium:!0},{name:"australia_kangaroos",isPremium:!0},{name:"baden_baden_snowballs",isPremium:!0},{name:"barcelona_raptors",isPremium:!0},{name:"berlin_bears",isPremium:!0},{name:"cannes_blitzstreams",isPremium:!0},{name:"chengdu_pandas",isPremium:!0},{name:"dallas_destiny",isPremium:!0},{name:"delhi_dynamite",isPremium:!0},{name:"estonia_horses",isPremium:!0},{name:"ljubljana_turtles",isPremium:!0},{name:"london_lions",isPremium:!0},{name:"marseille_migraines",isPremium:!0},{name:"miami_champions",isPremium:!0},{name:"montclair_sopranos",isPremium:!0},{name:"montreal_chessbrahs",isPremium:!0},{name:"moscow_phoenix",isPremium:!0},{name:"moscow_wizards",isPremium:!0},{name:"mumbai_movers",isPremium:!0},{name:"new_york_marshalls",isPremium:!0},{name:"norway_gnomes",isPremium:!0},{name:"san_diego_surfers",isPremium:!0},{name:"san_francisco_mechanics",isPremium:!0},{name:"san_jose_hackers",isPremium:!0},{name:"seattle_sluggers",isPremium:!0},{name:"st_louis_arch_bishops",isPremium:!0},{name:"webster_windmills",isPremium:!0},{name:"tbilisi_gentlemen",isPremium:!0},{name:"pittsburgh_pawngrabbers",isPremium:!0},{name:"minnesota_blizzard",isPremium:!0},{name:"volga_stormbringers",isPremium:!0}]}];var r=/(:[\w\)\(\;\.\_\]\[]+)/g,i=/\S/;var s=n(1);n.d(t,"a",function(){return o});var o=new class helper_Emoticons{constructor(){var e=this;this.emoticonsByCode={},a.forEach(function(t){t.icons.forEach(function(t){t.code=t.code||":".concat(t.name),e.emoticonsByCode[t.code]=t})}),this.emoticonsMatcherRegEx=function createEmoticonMatcherRegEx(e){var t=e.map(function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$|]/g,"\\$&")});t=t.join("|");var n="(?:\\s|^)(".concat(t,")(?=\\s|$)");return new RegExp(n,"g")}(Object.keys(this.emoticonsByCode))}getByCode(e){return this.emoticonsByCode[e]}getList(e){var t=[];return a.forEach(function(n){var a={disabledIcons:[],enabledIcons:[],name:n.name};n.icons.forEach(function(t){t.isPremium&&!e?a.disabledIcons.push(t):a.enabledIcons.push(t)}),t.push(a)}),t}getFormattedInput(e){return"".concat(e," ")}emoticonify(e,t,n){var a=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=function shouldEnlargeEmoticons(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.match(r);return t&&t.length<=5&&!i.test(e.replace(r,""))}(e)?"chat-emoticon-2x":"chat-emoticon";return e.replace(this.emoticonsMatcherRegEx,function(e,r){var i=a.emoticonsByCode[r],l=i.isPremium&&!t?s.default.trans("Upgrade to get all emojis!"):i.description||i.code;return n||!i.isPremium?'<span class="'.concat(o).concat(o?" ":"").concat(c," ").concat(c,'-$1" title="$2"></span>').replace("$1",i.name).replace("$2",l):r})}}},function(e,t,n){var a=n(87)();e.exports=a},function(e,t,n){var a=n(89),r=n(69),i=n(53),s=n(70),o=n(71),c=n(72),l=Object.prototype.hasOwnProperty;e.exports=function arrayLikeKeys(e,t){var n=i(e),u=!n&&r(e),d=!n&&!u&&s(e),f=!n&&!u&&!d&&c(e),_=n||u||d||f,h=_?a(e.length,String):[],m=h.length;for(var p in e)!t&&!l.call(e,p)||_&&("length"==p||d&&("offset"==p||"parent"==p)||f&&("buffer"==p||"byteLength"==p||"byteOffset"==p)||o(p,m))||h.push(p);return h}},function(e,t,n){var a=n(90),r=n(34),i=Object.prototype,s=i.hasOwnProperty,o=i.propertyIsEnumerable,c=a(function(){return arguments}())?a:function(e){return r(e)&&s.call(e,"callee")&&!o.call(e,"callee")};e.exports=c},function(e,t,n){(function(e){var a=n(35),r=n(91),i=t&&!t.nodeType&&t,s=i&&"object"==typeof e&&e&&!e.nodeType&&e,o=s&&s.exports===i?a.Buffer:void 0,c=(o?o.isBuffer:void 0)||r;e.exports=c}).call(this,n(50)(e))},function(e,t){var n=9007199254740991,a=/^(?:0|[1-9]\d*)$/;e.exports=function isIndex(e,t){var r=typeof e;return!!(t=null==t?n:t)&&("number"==r||"symbol"!=r&&a.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){var a=n(92),r=n(93),i=n(94),s=i&&i.isTypedArray,o=s?r(s):a;e.exports=o},function(e,t){e.exports=function overArg(e,t){return function(n){return e(t(n))}}},function(e,t,n){var a,r,i;
/*!
	autosize 4.0.1
	license: MIT
	http://www.jacklmoore.com/autosize
*/r=[e,t],void 0===(i="function"==typeof(a=function(e,t){"use strict";var n,a,r="function"==typeof Map?new Map:(n=[],a=[],{has:function has(e){return n.indexOf(e)>-1},get:function get(e){return a[n.indexOf(e)]},set:function set(e,t){-1===n.indexOf(e)&&(n.push(e),a.push(t))},delete:function _delete(e){var t=n.indexOf(e);t>-1&&(n.splice(t,1),a.splice(t,1))}}),i=function createEvent(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){i=function createEvent(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function assign(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!r.has(e)){var t=null,n=null,a=null,s=function pageResize(){e.clientWidth!==n&&update()},o=function(t){window.removeEventListener("resize",s,!1),e.removeEventListener("input",update,!1),e.removeEventListener("keyup",update,!1),e.removeEventListener("autosize:destroy",o,!1),e.removeEventListener("autosize:update",update,!1),Object.keys(t).forEach(function(n){e.style[n]=t[n]}),r.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",o,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",update,!1),window.addEventListener("resize",s,!1),e.addEventListener("input",update,!1),e.addEventListener("autosize:update",update,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",r.set(e,{destroy:o,update:update}),function init(){var n=window.getComputedStyle(e,null);"vertical"===n.resize?e.style.resize="none":"both"===n.resize&&(e.style.resize="horizontal"),t="content-box"===n.boxSizing?-(parseFloat(n.paddingTop)+parseFloat(n.paddingBottom)):parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth),isNaN(t)&&(t=0),update()}()}function changeOverflow(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,e.style.overflowY=t}function resize(){if(0!==e.scrollHeight){var a=function getParentOverflows(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(e),r=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+t+"px",n=e.clientWidth,a.forEach(function(e){e.node.scrollTop=e.scrollTop}),r&&(document.documentElement.scrollTop=r)}}function update(){resize();var t=Math.round(parseFloat(e.style.height)),n=window.getComputedStyle(e,null),r="content-box"===n.boxSizing?Math.round(parseFloat(n.height)):e.offsetHeight;if(r!==t?"hidden"===n.overflowY&&(changeOverflow("scroll"),resize(),r="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==n.overflowY&&(changeOverflow("hidden"),resize(),r="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),a!==r){a=r;var s=i("autosize:resized");try{e.dispatchEvent(s)}catch(e){}}}}function destroy(e){var t=r.get(e);t&&t.destroy()}function update(e){var t=r.get(e);t&&t.update()}var s=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((s=function autosize(e){return e}).destroy=function(e){return e},s.update=function(e){return e}):((s=function autosize(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return assign(e)}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],destroy),e},s.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],update),e}),t.default=s,e.exports=t.default})?a.apply(t,r):a)||(e.exports=i)},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s});var a=n(5),r=n.n(a);function ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach(function(t){r()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var i=function invertObject(e){return Object.keys(e).reduce(function(t,n){return _objectSpread({},t,r()({},e[n],n))},{})},s=function transformObjectBooleansToBinaryString(e){return Object.keys(e).reduce(function(t,n){var a=e[n];return"boolean"==typeof a&&(a=a?"1":"0"),t[n]=a,t},{})}},function(e,t,n){"use strict";n(16);var a=n(5),r=n.n(a);n.d(t,"a",function(){return s});var i=function checkWindowObject(){!function register(e){var t=e.key,n=e.value;window.chesscom||(window.chesscom={}),window.chesscom[t]||(window.chesscom[t]=n)}({key:"logData",value:{}})},s=function log(e){var t=e.key,n=e.value;i(),window.chesscom.logData[t]=n,function setSentryContext(e){window.Sentry&&window.Sentry.configureScope(function(t){Object.keys(e).forEach(function(n){t.setExtra(n,e[n])})})}(r()({},t,n))}},function(e,t,n){var a=n(35);e.exports=function(){return a.Date.now()}},function(e,t,n){var a=n(30),r=n(58),i=NaN,s=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;e.exports=function toNumber(e){if("number"==typeof e)return e;if(r(e))return i;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=c.test(e);return n||l.test(e)?u(e.slice(2),n?2:8):o.test(e)?i:+e}},function(e,t,n){var a=n(47),r=Object.prototype,i=r.hasOwnProperty,s=r.toString,o=a?a.toStringTag:void 0;e.exports=function getRawTag(e){var t=i.call(e,o),n=e[o];try{e[o]=void 0;var a=!0}catch(e){}var r=s.call(e);return a&&(t?e[o]=n:delete e[o]),r}},function(e,t){var n=Object.prototype.toString;e.exports=function objectToString(e){return n.call(e)}},function(e,t,n){e.exports=n(21)(6)},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var a=n(83),r=n(84),i=n(85);function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(e,t){if(kMaxLength()<t)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Buffer.prototype:(null===e&&(e=new Buffer(t)),e.length=t),e}function Buffer(e,t,n){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,e)}return from(this,e,t,n)}function from(e,t,n,a){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function fromArrayBuffer(e,t,n,a){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(a||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===a?new Uint8Array(t):void 0===a?new Uint8Array(t,n):new Uint8Array(t,n,a);Buffer.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Buffer.prototype:e=fromArrayLike(e,t);return e}(e,t,n,a):"string"==typeof t?function fromString(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!Buffer.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var a=0|byteLength(t,n),r=(e=createBuffer(e,a)).write(t,n);r!==a&&(e=e.slice(0,r));return e}(e,t,n):function fromObject(e,t){if(Buffer.isBuffer(t)){var n=0|checked(t.length);return 0===(e=createBuffer(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function isnan(e){return e!=e}(t.length)?createBuffer(e,0):fromArrayLike(e,t);if("Buffer"===t.type&&i(t.data))return fromArrayLike(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function allocUnsafe(e,t){if(assertSize(t),e=createBuffer(e,t<0?0:0|checked(t)),!Buffer.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function fromArrayLike(e,t){var n=t.length<0?0:0|checked(t.length);e=createBuffer(e,n);for(var a=0;a<n;a+=1)e[a]=255&t[a];return e}function checked(e){if(e>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|e}function byteLength(e,t){if(Buffer.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return base64ToBytes(e).length;default:if(a)return utf8ToBytes(e).length;t=(""+t).toLowerCase(),a=!0}}function swap(e,t,n){var a=e[t];e[t]=e[n],e[n]=a}function bidirectionalIndexOf(e,t,n,a,r){if(0===e.length)return-1;if("string"==typeof n?(a=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=Buffer.from(t,a)),Buffer.isBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,n,a,r);if("number"==typeof t)return t&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):arrayIndexOf(e,[t],n,a,r);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,n,a,r){var i,s=1,o=e.length,c=t.length;if(void 0!==a&&("ucs2"===(a=String(a).toLowerCase())||"ucs-2"===a||"utf16le"===a||"utf-16le"===a)){if(e.length<2||t.length<2)return-1;s=2,o/=2,c/=2,n/=2}function read(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(r){var l=-1;for(i=n;i<o;i++)if(read(e,i)===read(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===c)return l*s}else-1!==l&&(i-=i-l),l=-1}else for(n+c>o&&(n=o-c),i=n;i>=0;i--){for(var u=!0,d=0;d<c;d++)if(read(e,i+d)!==read(t,d)){u=!1;break}if(u)return i}return-1}function hexWrite(e,t,n,a){n=Number(n)||0;var r=e.length-n;a?(a=Number(a))>r&&(a=r):a=r;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");a>i/2&&(a=i/2);for(var s=0;s<a;++s){var o=parseInt(t.substr(2*s,2),16);if(isNaN(o))return s;e[n+s]=o}return s}function utf8Write(e,t,n,a){return blitBuffer(utf8ToBytes(t,e.length-n),e,n,a)}function asciiWrite(e,t,n,a){return blitBuffer(function asciiToBytes(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,a)}function latin1Write(e,t,n,a){return asciiWrite(e,t,n,a)}function base64Write(e,t,n,a){return blitBuffer(base64ToBytes(t),e,n,a)}function ucs2Write(e,t,n,a){return blitBuffer(function utf16leToBytes(e,t){for(var n,a,r,i=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),a=n>>8,r=n%256,i.push(r),i.push(a);return i}(t,e.length-n),e,n,a)}function base64Slice(e,t,n){return 0===t&&n===e.length?a.fromByteArray(e):a.fromByteArray(e.slice(t,n))}function utf8Slice(e,t,n){n=Math.min(e.length,n);for(var a=[],r=t;r<n;){var i,o,c,l,u=e[r],d=null,f=u>239?4:u>223?3:u>191?2:1;if(r+f<=n)switch(f){case 1:u<128&&(d=u);break;case 2:128==(192&(i=e[r+1]))&&(l=(31&u)<<6|63&i)>127&&(d=l);break;case 3:i=e[r+1],o=e[r+2],128==(192&i)&&128==(192&o)&&(l=(15&u)<<12|(63&i)<<6|63&o)>2047&&(l<55296||l>57343)&&(d=l);break;case 4:i=e[r+1],o=e[r+2],c=e[r+3],128==(192&i)&&128==(192&o)&&128==(192&c)&&(l=(15&u)<<18|(63&i)<<12|(63&o)<<6|63&c)>65535&&l<1114112&&(d=l)}null===d?(d=65533,f=1):d>65535&&(d-=65536,a.push(d>>>10&1023|55296),d=56320|1023&d),a.push(d),r+=f}return function decodeCodePointsArray(e){var t=e.length;if(t<=s)return String.fromCharCode.apply(String,e);var n="",a=0;for(;a<t;)n+=String.fromCharCode.apply(String,e.slice(a,a+=s));return n}(a)}t.Buffer=Buffer,t.SlowBuffer=function SlowBuffer(e){+e!=e&&(e=0);return Buffer.alloc(+e)},t.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function typedArraySupport(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(e){return e.__proto__=Buffer.prototype,e},Buffer.from=function(e,t,n){return from(null,e,t,n)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(e,t,n){return function alloc(e,t,n,a){return assertSize(t),t<=0?createBuffer(e,t):void 0!==n?"string"==typeof a?createBuffer(e,t).fill(n,a):createBuffer(e,t).fill(n):createBuffer(e,t)}(null,e,t,n)},Buffer.allocUnsafe=function(e){return allocUnsafe(null,e)},Buffer.allocUnsafeSlow=function(e){return allocUnsafe(null,e)},Buffer.isBuffer=function isBuffer(e){return!(null==e||!e._isBuffer)},Buffer.compare=function compare(e,t){if(!Buffer.isBuffer(e)||!Buffer.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,a=t.length,r=0,i=Math.min(n,a);r<i;++r)if(e[r]!==t[r]){n=e[r],a=t[r];break}return n<a?-1:a<n?1:0},Buffer.isEncoding=function isEncoding(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function concat(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var a=Buffer.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var s=e[n];if(!Buffer.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(a,r),r+=s.length}return a},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function swap16(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer.prototype.swap32=function swap32(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer.prototype.swap64=function swap64(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer.prototype.toString=function toString(){var e=0|this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):function slowToString(e,t,n){var a=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,n);case"utf8":case"utf-8":return utf8Slice(this,t,n);case"ascii":return asciiSlice(this,t,n);case"latin1":case"binary":return latin1Slice(this,t,n);case"base64":return base64Slice(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,n);default:if(a)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}.apply(this,arguments)},Buffer.prototype.equals=function equals(e){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function inspect(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},Buffer.prototype.compare=function compare(e,t,n,a,r){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===a&&(a=0),void 0===r&&(r=this.length),t<0||n>e.length||a<0||r>this.length)throw new RangeError("out of range index");if(a>=r&&t>=n)return 0;if(a>=r)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(r>>>=0)-(a>>>=0),s=(n>>>=0)-(t>>>=0),o=Math.min(i,s),c=this.slice(a,r),l=e.slice(t,n),u=0;u<o;++u)if(c[u]!==l[u]){i=c[u],s=l[u];break}return i<s?-1:s<i?1:0},Buffer.prototype.includes=function includes(e,t,n){return-1!==this.indexOf(e,t,n)},Buffer.prototype.indexOf=function indexOf(e,t,n){return bidirectionalIndexOf(this,e,t,n,!0)},Buffer.prototype.lastIndexOf=function lastIndexOf(e,t,n){return bidirectionalIndexOf(this,e,t,n,!1)},Buffer.prototype.write=function write(e,t,n,a){if(void 0===t)a="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)a=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===a&&(a="utf8")):(a=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(var i=!1;;)switch(a){case"hex":return hexWrite(this,e,t,n);case"utf8":case"utf-8":return utf8Write(this,e,t,n);case"ascii":return asciiWrite(this,e,t,n);case"latin1":case"binary":return latin1Write(this,e,t,n);case"base64":return base64Write(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),i=!0}},Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var s=4096;function asciiSlice(e,t,n){var a="";n=Math.min(e.length,n);for(var r=t;r<n;++r)a+=String.fromCharCode(127&e[r]);return a}function latin1Slice(e,t,n){var a="";n=Math.min(e.length,n);for(var r=t;r<n;++r)a+=String.fromCharCode(e[r]);return a}function hexSlice(e,t,n){var a=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>a)&&(n=a);for(var r="",i=t;i<n;++i)r+=toHex(e[i]);return r}function utf16leSlice(e,t,n){for(var a=e.slice(t,n),r="",i=0;i<a.length;i+=2)r+=String.fromCharCode(a[i]+256*a[i+1]);return r}function checkOffset(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,n,a,r,i){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<i)throw new RangeError('"value" argument is out of bounds');if(n+a>e.length)throw new RangeError("Index out of range")}function objectWriteUInt16(e,t,n,a){t<0&&(t=65535+t+1);for(var r=0,i=Math.min(e.length-n,2);r<i;++r)e[n+r]=(t&255<<8*(a?r:1-r))>>>8*(a?r:1-r)}function objectWriteUInt32(e,t,n,a){t<0&&(t=4294967295+t+1);for(var r=0,i=Math.min(e.length-n,4);r<i;++r)e[n+r]=t>>>8*(a?r:3-r)&255}function checkIEEE754(e,t,n,a,r,i){if(n+a>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function writeFloat(e,t,n,a,i){return i||checkIEEE754(e,0,n,4),r.write(e,t,n,a,23,4),n+4}function writeDouble(e,t,n,a,i){return i||checkIEEE754(e,0,n,8),r.write(e,t,n,a,52,8),n+8}Buffer.prototype.slice=function slice(e,t){var n,a=this.length;if((e=~~e)<0?(e+=a)<0&&(e=0):e>a&&(e=a),(t=void 0===t?a:~~t)<0?(t+=a)<0&&(t=0):t>a&&(t=a),t<e&&(t=e),Buffer.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=Buffer.prototype;else{var r=t-e;n=new Buffer(r,void 0);for(var i=0;i<r;++i)n[i]=this[i+e]}return n},Buffer.prototype.readUIntLE=function readUIntLE(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var a=this[e],r=1,i=0;++i<t&&(r*=256);)a+=this[e+i]*r;return a},Buffer.prototype.readUIntBE=function readUIntBE(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var a=this[e+--t],r=1;t>0&&(r*=256);)a+=this[e+--t]*r;return a},Buffer.prototype.readUInt8=function readUInt8(e,t){return t||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUInt16LE=function readUInt16LE(e,t){return t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUInt16BE=function readUInt16BE(e,t){return t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUInt32LE=function readUInt32LE(e,t){return t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUInt32BE=function readUInt32BE(e,t){return t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readIntLE=function readIntLE(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var a=this[e],r=1,i=0;++i<t&&(r*=256);)a+=this[e+i]*r;return a>=(r*=128)&&(a-=Math.pow(2,8*t)),a},Buffer.prototype.readIntBE=function readIntBE(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var a=t,r=1,i=this[e+--a];a>0&&(r*=256);)i+=this[e+--a]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*t)),i},Buffer.prototype.readInt8=function readInt8(e,t){return t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function readInt16LE(e,t){t||checkOffset(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt16BE=function readInt16BE(e,t){t||checkOffset(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt32LE=function readInt32LE(e,t){return t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function readInt32BE(e,t){return t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readFloatLE=function readFloatLE(e,t){return t||checkOffset(e,4,this.length),r.read(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function readFloatBE(e,t){return t||checkOffset(e,4,this.length),r.read(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function readDoubleLE(e,t){return t||checkOffset(e,8,this.length),r.read(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function readDoubleBE(e,t){return t||checkOffset(e,8,this.length),r.read(this,e,!1,52,8)},Buffer.prototype.writeUIntLE=function writeUIntLE(e,t,n,a){(e=+e,t|=0,n|=0,a)||checkInt(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,i=0;for(this[t]=255&e;++i<n&&(r*=256);)this[t+i]=e/r&255;return t+n},Buffer.prototype.writeUIntBE=function writeUIntBE(e,t,n,a){(e=+e,t|=0,n|=0,a)||checkInt(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,i=1;for(this[t+r]=255&e;--r>=0&&(i*=256);)this[t+r]=e/i&255;return t+n},Buffer.prototype.writeUInt8=function writeUInt8(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Buffer.prototype.writeUInt16LE=function writeUInt16LE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeUInt16BE=function writeUInt16BE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeUInt32LE=function writeUInt32LE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeUInt32BE=function writeUInt32BE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeIntLE=function writeIntLE(e,t,n,a){if(e=+e,t|=0,!a){var r=Math.pow(2,8*n-1);checkInt(this,e,t,n,r-1,-r)}var i=0,s=1,o=0;for(this[t]=255&e;++i<n&&(s*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+n},Buffer.prototype.writeIntBE=function writeIntBE(e,t,n,a){if(e=+e,t|=0,!a){var r=Math.pow(2,8*n-1);checkInt(this,e,t,n,r-1,-r)}var i=n-1,s=1,o=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+n},Buffer.prototype.writeInt8=function writeInt8(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer.prototype.writeInt16LE=function writeInt16LE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeInt16BE=function writeInt16BE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeInt32LE=function writeInt32LE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeInt32BE=function writeInt32BE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeFloatLE=function writeFloatLE(e,t,n){return writeFloat(this,e,t,!0,n)},Buffer.prototype.writeFloatBE=function writeFloatBE(e,t,n){return writeFloat(this,e,t,!1,n)},Buffer.prototype.writeDoubleLE=function writeDoubleLE(e,t,n){return writeDouble(this,e,t,!0,n)},Buffer.prototype.writeDoubleBE=function writeDoubleBE(e,t,n){return writeDouble(this,e,t,!1,n)},Buffer.prototype.copy=function copy(e,t,n,a){if(n||(n=0),a||0===a||(a=this.length),t>=e.length&&(t=e.length),t||(t=0),a>0&&a<n&&(a=n),a===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),e.length-t<a-n&&(a=e.length-t+n);var r,i=a-n;if(this===e&&n<t&&t<a)for(r=i-1;r>=0;--r)e[r+t]=this[r+n];else if(i<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(r=0;r<i;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},Buffer.prototype.fill=function fill(e,t,n,a){if("string"==typeof e){if("string"==typeof t?(a=t,t=0,n=this.length):"string"==typeof n&&(a=n,n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");if("string"==typeof a&&!Buffer.isEncoding(a))throw new TypeError("Unknown encoding: "+a)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var s=Buffer.isBuffer(e)?e:utf8ToBytes(new Buffer(e,a).toString()),o=s.length;for(i=0;i<n-t;++i)this[i+t]=s[i%o]}return this};var o=/[^+\/0-9A-Za-z-_]/g;function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,t){var n;t=t||1/0;for(var a=e.length,r=null,i=[],s=0;s<a;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===a){(t-=3)>-1&&i.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&i.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function base64ToBytes(e){return a.toByteArray(function base64clean(e){if((e=function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(o,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function blitBuffer(e,t,n,a){for(var r=0;r<a&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}}).call(this,n(33))},function(e,t,n){"use strict";t.byteLength=function byteLength(e){var t=getLens(e),n=t[0],a=t[1];return 3*(n+a)/4-a},t.toByteArray=function toByteArray(e){for(var t,n=getLens(e),a=n[0],s=n[1],o=new i(function _byteLength(e,t,n){return 3*(t+n)/4-n}(0,a,s)),c=0,l=s>0?a-4:a,u=0;u<l;u+=4)t=r[e.charCodeAt(u)]<<18|r[e.charCodeAt(u+1)]<<12|r[e.charCodeAt(u+2)]<<6|r[e.charCodeAt(u+3)],o[c++]=t>>16&255,o[c++]=t>>8&255,o[c++]=255&t;2===s&&(t=r[e.charCodeAt(u)]<<2|r[e.charCodeAt(u+1)]>>4,o[c++]=255&t);1===s&&(t=r[e.charCodeAt(u)]<<10|r[e.charCodeAt(u+1)]<<4|r[e.charCodeAt(u+2)]>>2,o[c++]=t>>8&255,o[c++]=255&t);return o},t.fromByteArray=function fromByteArray(e){for(var t,n=e.length,r=n%3,i=[],s=0,o=n-r;s<o;s+=16383)i.push(encodeChunk(e,s,s+16383>o?o:s+16383));1===r?(t=e[n-1],i.push(a[t>>2]+a[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(a[t>>10]+a[t>>4&63]+a[t<<2&63]+"="));return i.join("")};for(var a=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,c=s.length;o<c;++o)a[o]=s[o],r[s.charCodeAt(o)]=o;function getLens(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function encodeChunk(e,t,n){for(var r,i,s=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(a[(i=r)>>18&63]+a[i>>12&63]+a[i>>6&63]+a[63&i]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,a,r){var i,s,o=8*r-a-1,c=(1<<o)-1,l=c>>1,u=-7,d=n?r-1:0,f=n?-1:1,_=e[t+d];for(d+=f,i=_&(1<<-u)-1,_>>=-u,u+=o;u>0;i=256*i+e[t+d],d+=f,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=a;u>0;s=256*s+e[t+d],d+=f,u-=8);if(0===i)i=1-l;else{if(i===c)return s?NaN:1/0*(_?-1:1);s+=Math.pow(2,a),i-=l}return(_?-1:1)*s*Math.pow(2,i-a)},t.write=function(e,t,n,a,r,i){var s,o,c,l=8*i-r-1,u=(1<<l)-1,d=u>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,_=a?0:i-1,h=a?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+d>=1?f/c:f*Math.pow(2,1-d))*c>=2&&(s++,c/=2),s+d>=u?(o=0,s=u):s+d>=1?(o=(t*c-1)*Math.pow(2,r),s+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,r),s=0));r>=8;e[n+_]=255&o,_+=h,o/=256,r-=8);for(s=s<<r|o,l+=r;l>0;e[n+_]=255&s,_+=h,s/=256,l-=8);e[n+_-h]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){var a=n(67),r=n(88);e.exports=function baseForOwn(e,t){return e&&a(e,t,r)}},function(e,t){e.exports=function createBaseFor(e){return function(t,n,a){for(var r=-1,i=Object(t),s=a(t),o=s.length;o--;){var c=s[e?o:++r];if(!1===n(i[c],c,i))break}return t}}},function(e,t,n){var a=n(68),r=n(95),i=n(55);e.exports=function keys(e){return i(e)?a(e):r(e)}},function(e,t){e.exports=function baseTimes(e,t){for(var n=-1,a=Array(e);++n<e;)a[n]=t(n);return a}},function(e,t,n){var a=n(36),r=n(34),i="[object Arguments]";e.exports=function baseIsArguments(e){return r(e)&&a(e)==i}},function(e,t){e.exports=function stubFalse(){return!1}},function(e,t,n){var a=n(36),r=n(54),i=n(34),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function baseIsTypedArray(e){return i(e)&&r(e.length)&&!!s[a(e)]}},function(e,t){e.exports=function baseUnary(e){return function(t){return e(t)}}},function(e,t,n){(function(e){var a=n(52),r=t&&!t.nodeType&&t,i=r&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===r&&a.process,o=function(){try{return s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=o}).call(this,n(50)(e))},function(e,t,n){var a=n(59),r=n(96),i=Object.prototype.hasOwnProperty;e.exports=function baseKeys(e){if(!a(e))return r(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t,n){var a=n(73)(Object.keys,Object);e.exports=a},function(e,t,n){var a=n(61);e.exports=function castFunction(e){return"function"==typeof e?e:a}},,function(e,t,n){var a;!function(){var r=function(e){return r.utils.extend({},r.plugins,(new r.Storage).init(e))};r.version="0.4.4",r.utils={extend:function(){for(var e="object"==typeof arguments[0]?arguments[0]:{},t=1;t<arguments.length;t++)if(arguments[t]&&"object"==typeof arguments[t])for(var n in arguments[t])e[n]=arguments[t][n];return e},each:function(e,t,n){if(this.isArray(e)){for(var a=0;a<e.length;a++)if(!1===t.call(n,e[a],a))return}else if(e)for(var r in e)if(!1===t.call(n,e[r],r))return},tryEach:function(e,t,n,a){this.each(e,function(e,r){try{return t.call(a,e,r)}catch(t){if(this.isFunction(n))try{n.call(a,e,r,t)}catch(e){}}},this)},registerPlugin:function(e){r.plugins=this.extend(e,r.plugins)},getTypeOf:function(e){return null==e?""+e:Object.prototype.toString.call(e).replace(/^\[object\s(.*)\]$/,function(e,t){return t.toLowerCase()})}};for(var i=["Arguments","Boolean","Function","String","Array","Number","Date","RegExp","Undefined","Null"],s=0;s<i.length;s++)r.utils["is"+i[s]]=function(e){return function(t){return r.utils.getTypeOf(t)===e.toLowerCase()}}(i[s]);r.plugins={},r.options=r.utils.extend({namespace:"b45i1",storages:["local","cookie","session","memory"],expireDays:365},window.Basil?window.Basil.options:{}),r.Storage=function(){var e="b45i1"+(Math.random()+1).toString(36).substring(7),t={},n=function(e){var t=r.utils.getTypeOf(e);return"string"===t&&e||"number"===t||"boolean"===t},a=function(e){return r.utils.isArray(e)?e:r.utils.isString(e)?[e]:[]},i=function(e,t){var a="";return n(t)?a+=t:r.utils.isArray(t)&&(a=(t=r.utils.isFunction(t.filter)?t.filter(n):t).join(".")),a&&n(e)?e+"."+a:a},s=function(e,t){return n(e)?t.replace(new RegExp("^"+e+"."),""):t},o={engine:null,check:function(){try{window[this.engine].setItem(e,!0),window[this.engine].removeItem(e)}catch(e){return!1}return!0},set:function(e,t,n){if(!e)throw Error("invalid key");window[this.engine].setItem(e,t)},get:function(e){return window[this.engine].getItem(e)},remove:function(e){window[this.engine].removeItem(e)},reset:function(e){for(var t,n=0;n<window[this.engine].length;n++)t=window[this.engine].key(n),e&&0!==t.indexOf(e)||(this.remove(t),n--)},keys:function(e){for(var t,n=[],a=0;a<window[this.engine].length;a++)t=window[this.engine].key(a),e&&0!==t.indexOf(e)||n.push(s(e,t));return n}};return t.local=r.utils.extend({},o,{engine:"localStorage"}),t.session=r.utils.extend({},o,{engine:"sessionStorage"}),t.memory={_hash:{},check:function(){return!0},set:function(e,t,n){if(!e)throw Error("invalid key");this._hash[e]=t},get:function(e){return this._hash[e]||null},remove:function(e){delete this._hash[e]},reset:function(e){for(var t in this._hash)e&&0!==t.indexOf(e)||this.remove(t)},keys:function(e){var t=[];for(var n in this._hash)e&&0!==n.indexOf(e)||t.push(s(e,n));return t}},t.cookie={check:function(){if(!navigator.cookieEnabled)return!1;if(window.self!==window.top){var e="thirdparty.check="+Math.round(1e3*Math.random());return document.cookie=e+"; path=/",-1!==document.cookie.indexOf(e)}return!0},set:function(e,t,n){if(!this.check())throw Error("cookies are disabled");if(n=n||{},!e)throw Error("invalid key");var a=encodeURIComponent(e)+"="+encodeURIComponent(t);if(n.expireDays){var r=new Date;r.setTime(r.getTime()+24*n.expireDays*60*60*1e3),a+="; expires="+r.toGMTString()}if(n.domain&&n.domain!==document.domain){var i=n.domain.replace(/^\./,"");if(-1===document.domain.indexOf(i)||i.split(".").length<=1)throw Error("invalid domain");a+="; domain="+n.domain}!0===n.secure&&(a+="; secure"),document.cookie=a+"; path=/"},get:function(e){if(!this.check())throw Error("cookies are disabled");for(var t,n=encodeURIComponent(e),a=document.cookie?document.cookie.split(";"):[],r=a.length-1;r>=0;r--)if(0===(t=a[r].replace(/^\s*/,"")).indexOf(n+"="))return decodeURIComponent(t.substring(n.length+1,t.length));return null},remove:function(e){this.set(e,"",{expireDays:-1});for(var t=document.domain.split("."),n=t.length;n>=0;n--)this.set(e,"",{expireDays:-1,domain:"."+t.slice(-n).join(".")})},reset:function(e){for(var t,n,a=document.cookie?document.cookie.split(";"):[],r=0;r<a.length;r++)n=(t=a[r].replace(/^\s*/,"")).substr(0,t.indexOf("=")),e&&0!==n.indexOf(e)||this.remove(n)},keys:function(e){if(!this.check())throw Error("cookies are disabled");for(var t,n,a=[],r=document.cookie?document.cookie.split(";"):[],i=0;i<r.length;i++)t=r[i].replace(/^\s*/,""),n=decodeURIComponent(t.substr(0,t.indexOf("="))),e&&0!==n.indexOf(e)||a.push(s(e,n));return a}},{init:function(e){return this.setOptions(e),this},setOptions:function(e){this.options=r.utils.extend({},this.options||r.options,e)},support:function(e){return t.hasOwnProperty(e)},check:function(e){return!!this.support(e)&&t[e].check()},set:function(e,n,s){if(s=r.utils.extend({},this.options,s),!(e=i(s.namespace,e)))return!1;n=!0===s.raw?n:function(e){return JSON.stringify(e)}(n);var o=null;return r.utils.tryEach(a(s.storages),function(a,r){return t[a].set(e,n,s),o=a,!1},null,this),!!o&&(r.utils.tryEach(a(s.storages),function(n,a){n!==o&&t[n].remove(e)},null,this),!0)},get:function(e,n){if(n=r.utils.extend({},this.options,n),!(e=i(n.namespace,e)))return null;var s=null;return r.utils.tryEach(a(n.storages),function(a,r){if(null!==s)return!1;s=t[a].get(e,n)||null,s=!0===n.raw?s:function(e){return e?JSON.parse(e):null}(s)},function(e,t,n){s=null},this),s},remove:function(e,n){n=r.utils.extend({},this.options,n),(e=i(n.namespace,e))&&r.utils.tryEach(a(n.storages),function(n){t[n].remove(e)},null,this)},reset:function(e){e=r.utils.extend({},this.options,e),r.utils.tryEach(a(e.storages),function(n){t[n].reset(e.namespace)},null,this)},keys:function(e){e=e||{};var t=[];for(var n in this.keysMap(e))t.push(n);return t},keysMap:function(e){e=r.utils.extend({},this.options,e);var n={};return r.utils.tryEach(a(e.storages),function(a){r.utils.each(t[a].keys(e.namespace),function(e){n[e]=r.utils.isArray(n[e])?n[e]:[],n[e].push(a)},this)},null,this),n}}},r.memory=(new r.Storage).init({storages:"memory",namespace:null,raw:!0}),r.cookie=(new r.Storage).init({storages:"cookie",namespace:null,raw:!0}),r.localStorage=(new r.Storage).init({storages:"local",namespace:null,raw:!0}),r.sessionStorage=(new r.Storage).init({storages:"session",namespace:null,raw:!0}),window.Basil=r,void 0===(a=function(){return r}.call(t,n,t,e))||(e.exports=a)}()},function(e,t,n){"use strict";t.a=new class ScriptLoader{constructor(){this.insert=this.loadScript(function(e,t){var n=document.createElement("script");return n.type="text/javascript",n.src=e,t&&Object.keys(t).forEach(function(e){n.setAttribute(e,t[e])}),document.body.appendChild(n),n})}loadScript(e){var t={};return function(n,a){if(void 0===t[n]){var r=new Promise(function(t,r){var i=e(n,a);i.onload=function(e){t(e)},i.onreadystatechange=i.onload,i.onerror=function(e){r(e)}});t[n]=r}return t[n]}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function pixelDensity(e,t){if(e){var n="@2x";return/\.svg$/.test(e)?e:([1.5,3,4].indexOf(t)>-1&&(n="@".concat(t,"x")),e.replace(/(\.\w+)$/,function(e){return n+e}))}}},function(e,t,n){var a=n(48),r=n(30),i="Expected a function";e.exports=function throttle(e,t,n){var s=!0,o=!0;if("function"!=typeof e)throw new TypeError(i);return r(n)&&(s="leading"in n?!!n.leading:s,o="trailing"in n?!!n.trailing:o),a(e,t,{leading:s,maxWait:t,trailing:o})}},function(e,t,n){var a=n(159),r=n(161),i=/[&<>"']/g,s=RegExp(i.source);e.exports=function escape(e){return(e=r(e))&&s.test(e)?e.replace(i,a):e}},function(e,t,n){"use strict";var a,r,i,s,o,c,l,u=n(164),d=n(178),f=Function.prototype.apply,_=Function.prototype.call,h=Object.create,m=Object.defineProperty,p=Object.defineProperties,b=Object.prototype.hasOwnProperty,g={configurable:!0,enumerable:!1,writable:!0};r=function(e,t){var n,r;return d(t),r=this,a.call(this,e,n=function(){i.call(r,e,n),f.call(t,this,arguments)}),n.__eeOnceListener__=t,this},o={on:a=function(e,t){var n;return d(t),b.call(this,"__ee__")?n=this.__ee__:(n=g.value=h(null),m(this,"__ee__",g),g.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},once:r,off:i=function(e,t){var n,a,r,i;if(d(t),!b.call(this,"__ee__"))return this;if(!(n=this.__ee__)[e])return this;if("object"==typeof(a=n[e]))for(i=0;r=a[i];++i)r!==t&&r.__eeOnceListener__!==t||(2===a.length?n[e]=a[i?0:1]:a.splice(i,1));else a!==t&&a.__eeOnceListener__!==t||delete n[e];return this},emit:s=function(e){var t,n,a,r,i;if(b.call(this,"__ee__")&&(r=this.__ee__[e]))if("object"==typeof r){for(n=arguments.length,i=new Array(n-1),t=1;t<n;++t)i[t-1]=arguments[t];for(r=r.slice(),t=0;a=r[t];++t)f.call(a,this,i)}else switch(arguments.length){case 1:_.call(r,this);break;case 2:_.call(r,this,arguments[1]);break;case 3:_.call(r,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,i=new Array(n-1),t=1;t<n;++t)i[t-1]=arguments[t];f.call(r,this,i)}}},c={on:u(a),once:u(r),off:u(i),emit:u(s)},l=p({},c),e.exports=t=function(e){return null==e?h(l):p(Object(e),c)},t.methods=o},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var a=n(160)({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});e.exports=a},function(e,t){e.exports=function basePropertyOf(e){return function(t){return null==e?void 0:e[t]}}},function(e,t,n){var a=n(162);e.exports=function toString(e){return null==e?"":a(e)}},function(e,t,n){var a=n(47),r=n(163),i=n(53),s=n(58),o=1/0,c=a?a.prototype:void 0,l=c?c.toString:void 0;e.exports=function baseToString(e){if("string"==typeof e)return e;if(i(e))return r(e,baseToString)+"";if(s(e))return l?l.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}},function(e,t){e.exports=function arrayMap(e,t){for(var n=-1,a=null==e?0:e.length,r=Array(a);++n<a;)r[n]=t(e[n],n,e);return r}},function(e,t,n){"use strict";var a=n(165),r=n(173),i=n(174),s=n(175);(e.exports=function(e,t){var n,i,o,c,l;return arguments.length<2||"string"!=typeof e?(c=t,t=e,e=null):c=arguments[2],null==e?(n=o=!0,i=!1):(n=s.call(e,"c"),i=s.call(e,"e"),o=s.call(e,"w")),l={value:t,configurable:n,enumerable:i,writable:o},c?a(r(c),l):l}).gs=function(e,t,n){var o,c,l,u;return"string"!=typeof e?(l=n,n=t,t=e,e=null):l=arguments[3],null==t?t=void 0:i(t)?null==n?n=void 0:i(n)||(l=n,n=void 0):(l=t,t=n=void 0),null==e?(o=!0,c=!1):(o=s.call(e,"c"),c=s.call(e,"e")),u={get:t,set:n,configurable:o,enumerable:c},l?a(r(l),u):u}},function(e,t,n){"use strict";e.exports=n(166)()?Object.assign:n(167)},function(e,t,n){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,n){"use strict";var a=n(168),r=n(172),i=Math.max;e.exports=function(e,t){var n,s,o,c=i(arguments.length,2);for(e=Object(r(e)),o=function(a){try{e[a]=t[a]}catch(e){n||(n=e)}},s=1;s<c;++s)t=arguments[s],a(t).forEach(o);if(void 0!==n)throw n;return e}},function(e,t,n){"use strict";e.exports=n(169)()?Object.keys:n(170)},function(e,t,n){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,n){"use strict";var a=n(62),r=Object.keys;e.exports=function(e){return r(a(e)?Object(e):e)}},function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){"use strict";var a=n(62);e.exports=function(e){if(!a(e))throw new TypeError("Cannot use null or undefined");return e}},function(e,t,n){"use strict";var a=n(62),r=Array.prototype.forEach,i=Object.create;e.exports=function(e){var t=i(null);return r.call(arguments,function(e){a(e)&&function(e,t){var n;for(n in e)t[n]=e[n]}(Object(e),t)}),t}},function(e,t,n){"use strict";e.exports=function(e){return"function"==typeof e}},function(e,t,n){"use strict";e.exports=n(176)()?String.prototype.contains:n(177)},function(e,t,n){"use strict";var a="razdwatrzy";e.exports=function(){return"function"==typeof a.contains&&(!0===a.contains("dwa")&&!1===a.contains("foo"))}},function(e,t,n){"use strict";var a=String.prototype.indexOf;e.exports=function(e){return a.call(this,e,arguments[1])>-1}},function(e,t,n){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=n},,,function(e,t,n){var a,r,i,s,o;a=n(324),r=n(235).utf8,i=n(325),s=n(235).bin,(o=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?s.stringToBytes(e):r.stringToBytes(e):i(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var n=a.bytesToWords(e),c=8*e.length,l=1732584193,u=-271733879,d=-1732584194,f=271733878,_=0;_<n.length;_++)n[_]=16711935&(n[_]<<8|n[_]>>>24)|4278255360&(n[_]<<24|n[_]>>>8);n[c>>>5]|=128<<c%32,n[14+(c+64>>>9<<4)]=c;var h=o._ff,m=o._gg,p=o._hh,b=o._ii;for(_=0;_<n.length;_+=16){var g=l,v=u,O=d,j=f;l=h(l,u,d,f,n[_+0],7,-680876936),f=h(f,l,u,d,n[_+1],12,-389564586),d=h(d,f,l,u,n[_+2],17,606105819),u=h(u,d,f,l,n[_+3],22,-1044525330),l=h(l,u,d,f,n[_+4],7,-176418897),f=h(f,l,u,d,n[_+5],12,1200080426),d=h(d,f,l,u,n[_+6],17,-1473231341),u=h(u,d,f,l,n[_+7],22,-45705983),l=h(l,u,d,f,n[_+8],7,1770035416),f=h(f,l,u,d,n[_+9],12,-1958414417),d=h(d,f,l,u,n[_+10],17,-42063),u=h(u,d,f,l,n[_+11],22,-1990404162),l=h(l,u,d,f,n[_+12],7,1804603682),f=h(f,l,u,d,n[_+13],12,-40341101),d=h(d,f,l,u,n[_+14],17,-1502002290),l=m(l,u=h(u,d,f,l,n[_+15],22,1236535329),d,f,n[_+1],5,-165796510),f=m(f,l,u,d,n[_+6],9,-1069501632),d=m(d,f,l,u,n[_+11],14,643717713),u=m(u,d,f,l,n[_+0],20,-373897302),l=m(l,u,d,f,n[_+5],5,-701558691),f=m(f,l,u,d,n[_+10],9,38016083),d=m(d,f,l,u,n[_+15],14,-660478335),u=m(u,d,f,l,n[_+4],20,-405537848),l=m(l,u,d,f,n[_+9],5,568446438),f=m(f,l,u,d,n[_+14],9,-1019803690),d=m(d,f,l,u,n[_+3],14,-187363961),u=m(u,d,f,l,n[_+8],20,1163531501),l=m(l,u,d,f,n[_+13],5,-1444681467),f=m(f,l,u,d,n[_+2],9,-51403784),d=m(d,f,l,u,n[_+7],14,1735328473),l=p(l,u=m(u,d,f,l,n[_+12],20,-1926607734),d,f,n[_+5],4,-378558),f=p(f,l,u,d,n[_+8],11,-2022574463),d=p(d,f,l,u,n[_+11],16,1839030562),u=p(u,d,f,l,n[_+14],23,-35309556),l=p(l,u,d,f,n[_+1],4,-1530992060),f=p(f,l,u,d,n[_+4],11,1272893353),d=p(d,f,l,u,n[_+7],16,-155497632),u=p(u,d,f,l,n[_+10],23,-1094730640),l=p(l,u,d,f,n[_+13],4,681279174),f=p(f,l,u,d,n[_+0],11,-358537222),d=p(d,f,l,u,n[_+3],16,-722521979),u=p(u,d,f,l,n[_+6],23,76029189),l=p(l,u,d,f,n[_+9],4,-640364487),f=p(f,l,u,d,n[_+12],11,-421815835),d=p(d,f,l,u,n[_+15],16,530742520),l=b(l,u=p(u,d,f,l,n[_+2],23,-995338651),d,f,n[_+0],6,-198630844),f=b(f,l,u,d,n[_+7],10,1126891415),d=b(d,f,l,u,n[_+14],15,-1416354905),u=b(u,d,f,l,n[_+5],21,-57434055),l=b(l,u,d,f,n[_+12],6,1700485571),f=b(f,l,u,d,n[_+3],10,-1894986606),d=b(d,f,l,u,n[_+10],15,-1051523),u=b(u,d,f,l,n[_+1],21,-2054922799),l=b(l,u,d,f,n[_+8],6,1873313359),f=b(f,l,u,d,n[_+15],10,-30611744),d=b(d,f,l,u,n[_+6],15,-1560198380),u=b(u,d,f,l,n[_+13],21,1309151649),l=b(l,u,d,f,n[_+4],6,-145523070),f=b(f,l,u,d,n[_+11],10,-1120210379),d=b(d,f,l,u,n[_+2],15,718787259),u=b(u,d,f,l,n[_+9],21,-343485551),l=l+g>>>0,u=u+v>>>0,d=d+O>>>0,f=f+j>>>0}return a.endian([l,u,d,f])})._ff=function(e,t,n,a,r,i,s){var o=e+(t&n|~t&a)+(r>>>0)+s;return(o<<i|o>>>32-i)+t},o._gg=function(e,t,n,a,r,i,s){var o=e+(t&a|n&~a)+(r>>>0)+s;return(o<<i|o>>>32-i)+t},o._hh=function(e,t,n,a,r,i,s){var o=e+(t^n^a)+(r>>>0)+s;return(o<<i|o>>>32-i)+t},o._ii=function(e,t,n,a,r,i,s){var o=e+(n^(t|~a))+(r>>>0)+s;return(o<<i|o>>>32-i)+t},o._blocksize=16,o._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=a.wordsToBytes(o(e,t));return t&&t.asBytes?n:t&&t.asString?s.bytesToString(n):a.bytesToHex(n)}},function(e,t,n){e.exports=n(21)(48)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){n(318),n(370),n(362),n(363),n(364),n(365),n(366),e.exports=n(367)},function(e,t,n){"use strict";n.r(t);n(319),n(320),n(321),n(322),n(323)},function(e,t,n){(function(e){!function(e){"use strict";var t,n=e.URLSearchParams?e.URLSearchParams:null,a=n&&"a=1"===new n({a:1}).toString(),r=n&&"+"===new n("s=%2B").get("s"),i="__URLSearchParams__",s=!n||((t=new n).append("s"," &"),"s=+%26"===t.toString()),o=URLSearchParamsPolyfill.prototype,c=!(!e.Symbol||!e.Symbol.iterator);if(!(n&&a&&r&&s)){o.append=function(e,t){appendTo(this[i],e,t)},o.delete=function(e){delete this[i][e]},o.get=function(e){var t=this[i];return e in t?t[e][0]:null},o.getAll=function(e){var t=this[i];return e in t?t[e].slice(0):[]},o.has=function(e){return e in this[i]},o.set=function set(e,t){this[i][e]=[""+t]},o.toString=function(){var e,t,n,a,r=this[i],s=[];for(t in r)for(n=encode(t),e=0,a=r[t];e<a.length;e++)s.push(n+"="+encode(a[e]));return s.join("&")};var l=!!r&&n&&!a&&e.Proxy;e.URLSearchParams=l?new Proxy(n,{construct:function(e,t){return new e(new URLSearchParamsPolyfill(t[0]).toString())}}):URLSearchParamsPolyfill;var u=e.URLSearchParams.prototype;u.polyfill=!0,u.forEach=u.forEach||function(e,t){var n=parseToDict(this.toString());Object.getOwnPropertyNames(n).forEach(function(a){n[a].forEach(function(n){e.call(t,n,a,this)},this)},this)},u.sort=u.sort||function(){var e,t,n,a=parseToDict(this.toString()),r=[];for(e in a)r.push(e);for(r.sort(),t=0;t<r.length;t++)this.delete(r[t]);for(t=0;t<r.length;t++){var i=r[t],s=a[i];for(n=0;n<s.length;n++)this.append(i,s[n])}},u.keys=u.keys||function(){var e=[];return this.forEach(function(t,n){e.push(n)}),makeIterator(e)},u.values=u.values||function(){var e=[];return this.forEach(function(t){e.push(t)}),makeIterator(e)},u.entries=u.entries||function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),makeIterator(e)},c&&(u[e.Symbol.iterator]=u[e.Symbol.iterator]||u.entries)}function URLSearchParamsPolyfill(e){((e=e||"")instanceof URLSearchParams||e instanceof URLSearchParamsPolyfill)&&(e=e.toString()),this[i]=parseToDict(e)}function encode(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,function(e){return t[e]})}function decode(e){return decodeURIComponent(e.replace(/\+/g," "))}function makeIterator(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return c&&(n[e.Symbol.iterator]=function(){return n}),n}function parseToDict(e){var t={};if("object"==typeof e)for(var n in e)e.hasOwnProperty(n)&&appendTo(t,n,e[n]);else{0===e.indexOf("?")&&(e=e.slice(1));for(var a=e.split("&"),r=0;r<a.length;r++){var i=a[r],s=i.indexOf("=");-1<s?appendTo(t,decode(i.slice(0,s)),decode(i.slice(s+1))):i&&appendTo(t,decode(i),"")}}return t}function appendTo(e,t,n){var a="string"==typeof n?n:null!=n&&"function"==typeof n.toString?n.toString():JSON.stringify(n);t in e?e[t].push(a):e[t]=[a]}}(void 0!==e?e:"undefined"!=typeof window?window:this)}).call(this,n(33))},function(e,t){
/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */
"document"in window.self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||function(e){"use strict";if("Element"in e){var t=e.Element.prototype,n=Object,a=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},r=Array.prototype.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},i=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},s=function(e,t){if(""===t)throw new i("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new i("INVALID_CHARACTER_ERR","String contains an invalid character");return r.call(e,t)},o=function(e){for(var t=a.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],r=0,i=n.length;r<i;r++)this.push(n[r]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},c=o.prototype=[],l=function(){return new o(this)};if(i.prototype=Error.prototype,c.item=function(e){return this[e]||null},c.contains=function(e){return-1!==s(this,e+="")},c.add=function(){var e,t=arguments,n=0,a=t.length,r=!1;do{e=t[n]+"",-1===s(this,e)&&(this.push(e),r=!0)}while(++n<a);r&&this._updateClassName()},c.remove=function(){var e,t,n=arguments,a=0,r=n.length,i=!1;do{for(e=n[a]+"",t=s(this,e);-1!==t;)this.splice(t,1),i=!0,t=s(this,e)}while(++a<r);i&&this._updateClassName()},c.toggle=function(e,t){e+="";var n=this.contains(e),a=n?!0!==t&&"remove":!1!==t&&"add";return a&&this[a](e),!0===t||!1===t?t:!n},c.toString=function(){return this.join(" ")},n.defineProperty){var u={get:l,enumerable:!0,configurable:!0};try{n.defineProperty(t,"classList",u)}catch(e){void 0!==e.number&&-2146823252!==e.number||(u.enumerable=!1,n.defineProperty(t,"classList",u))}}else n.prototype.__defineGetter__&&t.__defineGetter__("classList",l)}}(window.self),function(){"use strict";var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var n,a=arguments.length;for(n=0;n<a;n++)e=arguments[n],t.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:n.call(this,e)}}e=null}())},function(e,t){!NodeList.prototype.forEach&&Array.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),Array.prototype.forEach||(Array.prototype.forEach=function(e){var t,n;if(null==this)throw new TypeError("this is null or not defined");var a=Object(this),r=a.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(t=arguments[1]),n=0;n<r;){var i;n in a&&(i=a[n],e.call(t,i,n,a)),n++}})},function(e,t){[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){Object.prototype.hasOwnProperty.call(e,"remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function remove(){null!==this.parentNode&&this.parentNode.removeChild(this)}})})},function(e,t){!function(){if(function buggy(){var e=[1,2];return String(e)===String(e.reverse())}()){var e=Array.prototype.reverse;Array.prototype.reverse=function reverse(){return Array.isArray(this)&&(this.length=this.length),e.call(this)}}}()},function(e,t){var n,a;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&a.rotl(e,8)|4278255360&a.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=a.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,a=0;n<e.length;n++,a+=8)t[a>>>5]|=e[n]<<24-a%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var t=[],a=0;a<e.length;a+=3)for(var r=e[a]<<16|e[a+1]<<8|e[a+2],i=0;i<4;i++)8*a+6*i<=8*e.length?t.push(n.charAt(r>>>6*(3-i)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],a=0,r=0;a<e.length;r=++a%4)0!=r&&t.push((n.indexOf(e.charAt(a-1))&Math.pow(2,-2*r+8)-1)<<2*r|n.indexOf(e.charAt(a))>>>6-2*r);return t}},e.exports=a},function(e,t,n){e.exports=n(21)(24)},function(e,t,n){},function(e,t){window.onbeforeunload=function(){var e=document.getElementById("sb");e&&e.classList&&e.classList.add("hide-panels")}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){e.exports={component:"flair-component",inline:"flair-inline",large:"flair-large",responsive:"flair-responsive",diamond_traditional:"flair-diamond_traditional",diamond_blue:"flair-diamond_blue",diamond_purple:"flair-diamond_purple",diamond_red:"flair-diamond_red",diamond_orange:"flair-diamond_orange",diamond_gold:"flair-diamond_gold",diamond_pink:"flair-diamond_pink",diamond_rainbow:"flair-diamond_rainbow",diamond_white:"flair-diamond_white",diamond_black:"flair-diamond_black",crown_traditional:"flair-crown_traditional",crown_blue:"flair-crown_blue",crown_purple:"flair-crown_purple",crown_red:"flair-crown_red",crown_orange:"flair-crown_orange",crown_gold:"flair-crown_gold",crown_pink:"flair-crown_pink",crown_rainbow:"flair-crown_rainbow",crown_white:"flair-crown_white",crown_black:"flair-crown_black",star_traditional:"flair-star_traditional",star_blue:"flair-star_blue",star_purple:"flair-star_purple",star_red:"flair-star_red",star_orange:"flair-star_orange",star_gold:"flair-star_gold",star_pink:"flair-star_pink",star_rainbow:"flair-star_rainbow",star_white:"flair-star_white",star_black:"flair-star_black",smile:"flair-smile",sad:"flair-sad",angry:"flair-angry",ohno:"flair-ohno",worry:"flair-worry",wink:"flair-wink",cry:"flair-cry",sob:"flair-sob",delicious:"flair-delicious",hm:"flair-hm",happy:"flair-happy",eek:"flair-eek",grimace:"flair-grimace",gloat:"flair-gloat",nervous:"flair-nervous",fury:"flair-fury",blush:"flair-blush",shock:"flair-shock",dead:"flair-dead",zzz:"flair-zzz",tongue:"flair-tongue",laugh:"flair-laugh",river:"flair-river",horror:"flair-horror",peaceful:"flair-peaceful",love:"flair-love",smart:"flair-smart",cool:"flair-cool",mustache:"flair-mustache",ghost:"flair-ghost",scream:"flair-scream",devil:"flair-devil",sick:"flair-sick",kiss:"flair-kiss",clap:"flair-clap",thumbs_up:"flair-thumbs_up",thumbs_down:"flair-thumbs_down",pound:"flair-pound",praise:"flair-praise",flex:"flair-flex",hand_waving:"flair-hand_waving",troll:"flair-troll",rainbow:"flair-rainbow",unicorn:"flair-unicorn",coffee_cup:"flair-coffee_cup",donut:"flair-donut",earth:"flair-earth",sad_panda:"flair-sad_panda",skull:"flair-skull",bitcoin:"flair-bitcoin",play:"flair-play",draw:"flair-draw",resign:"flair-resign",board:"flair-board",white_pawn:"flair-white_pawn",white_knight:"flair-white_knight",white_bishop:"flair-white_bishop",white_rook:"flair-white_rook",white_queen:"flair-white_queen",white_king:"flair-white_king",medal:"flair-medal",mate:"flair-mate",sharp:"flair-sharp",clock:"flair-clock",black_pawn:"flair-black_pawn",black_knight:"flair-black_knight",black_bishop:"flair-black_bishop",black_rook:"flair-black_rook",black_queen:"flair-black_queen",black_king:"flair-black_king",bullet:"flair-bullet",blitz:"flair-blitz",live:"flair-live",castle:"flair-castle",skewer:"flair-skewer",fork:"flair-fork",pin:"flair-pin",fish:"flair-fish",trophy:"flair-trophy",battle:"flair-battle",rush:"flair-rush",doubles:"flair-doubles",daily:"flair-daily",chess_tv:"flair-chess_tv",fourp_chess:"flair-fourp_chess",chess_kid:"flair-chess_kid",friend:"flair-friend",club:"flair-club",leaderboard:"flair-leaderboard",computer:"flair-computer",settings:"flair-settings",messages:"flair-messages",arena_kings:"flair-arena_kings",speed_chess_champ:"flair-speed_chess_champ",titled_tuesday:"flair-titled_tuesday",birthday_cake:"flair-birthday_cake",celebration_cap:"flair-celebration_cap",celebration_glasses:"flair-celebration_glasses",valentine_bear:"flair-valentine_bear",valentine_heart:"flair-valentine_heart",valentine_envelope:"flair-valentine_envelope",clover:"flair-clover",gold:"flair-gold",palm_tree:"flair-palm_tree",fireworks:"flair-fireworks",halloween_ghost:"flair-halloween_ghost",halloween_pumpkin:"flair-halloween_pumpkin",halloween_grave:"flair-halloween_grave",leaf:"flair-leaf",thanksgiving:"flair-thanksgiving",gift:"flair-gift",hannukah:"flair-hannukah",christmas_tree:"flair-christmas_tree",christmas_santa:"flair-christmas_santa",christmas_wreath:"flair-christmas_wreath",danny_smile:"flair-danny_smile",danny_omg:"flair-danny_omg",hess:"flair-hess",luis:"flair-luis",hikaru:"flair-hikaru",anna:"flair-anna",alexandra:"flair-alexandra",levy:"flair-levy",eric:"flair-eric",aman:"flair-aman",computer_chess_champs:"flair-computer_chess_champs",stockfish:"flair-stockfish",lc0:"flair-lc0",komodo:"flair-komodo",houdini:"flair-houdini",etheral:"flair-etheral",fire:"flair-fire",leelenstein:"flair-leelenstein",allie:"flair-allie",boom:"flair-boom",pro_chess_league:"flair-pro_chess_league",mosquito:"flair-mosquito",eagle:"flair-eagle",kangaroo:"flair-kangaroo",snowball:"flair-snowball",raptor:"flair-raptor",bear:"flair-bear",blitzstream:"flair-blitzstream",panda:"flair-panda",dallas:"flair-dallas",dynamite:"flair-dynamite",horse:"flair-horse",turtle:"flair-turtle",lion:"flair-lion",migraines:"flair-migraines",champion:"flair-champion",soprano:"flair-soprano",chessbrah:"flair-chessbrah",phoenix:"flair-phoenix",wizard:"flair-wizard",mumbai:"flair-mumbai",marshall:"flair-marshall",gnome:"flair-gnome",surfer:"flair-surfer",mechanic:"flair-mechanic",hacker:"flair-hacker",slugger:"flair-slugger",bishops:"flair-bishops",windmills:"flair-windmills",gentlemen:"flair-gentlemen",pawngrabber:"flair-pawngrabber",blizzard:"flair-blizzard",strombringer:"flair-strombringer",pawn_traditional:"flair-pawn_traditional",pawn_white:"flair-pawn_white",pawn_black:"flair-pawn_black",pawn_blue:"flair-pawn_blue",blocked:"flair-blocked",clear:"flair-clear",clear_light:"flair-clear_light",nothing:"flair-nothing"}},function(e,t,n){e.exports={input:"form-input",label:"form-label",select:"form-select",switch:"form-switch"}},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){"use strict";n.r(t);var a=n(8),r={ADD_ACHIEVEMENT:"ADD_ACHIEVEMENT",DECREMENT_MESSAGE_COUNT:"DECREMENT_MESSAGE_COUNT",HIDE_USER_POPOVER:"HIDE_USER_POPOVER",LOAD_ACHIEVEMENTS_MODAL:"LOAD_ACHIEVEMENTS_MODAL",LOGIN_OR_REGISTER_MODAL:"LOGIN_OR_REGISTER_MODAL",NOTIFICATIONS_FETCHED:"NOTIFICATIONS_FETCHED",REMOVE_ACHIEVEMENTS_MODAL:"REMOVE_ACHIEVEMENTS_MODAL",REMOVE_CHECK_GAME_ALERT:"REMOVE_CHECK_GAME_ALERT",REMOVE_GAME_COMMENT_ALERT:"REMOVE_GAME_COMMENT_ALERT",REMOVE_READY_GAME_ALERT:"REMOVE_READY_GAME_ALERT",SHOW_MESSAGE_MODAL:"SHOW_MESSAGE_MODAL",SHOW_USER_POPOVER:"SHOW_USER_POPOVER",SOUND_ENABLED:"SOUND_ENABLED"},i=[];[function detectAchievements(e){e.headers["x-chesscom-achievement-award"]&&JSON.parse(e.headers["x-chesscom-achievement-award"]).forEach(function(e){-1===i.indexOf(e.code)&&(window.postMessage({key:r.ADD_ACHIEVEMENT,achievement:e},window.location.origin),i.push(e.code))});return e}].forEach(function(e){return a.default.interceptors.response.use(e,function(e){return Promise.reject(e)})});var s=n(16),o=n.n(s),l=n(37),u=n(5),f=n.n(u),_=n(6),h=n(3),b=n(17),g={},v=document.getElementById(b.c.NAV_ROOT),O=function hasFeatureAccess(e,t){var n=t||v;return g[e]||(g[e]=Boolean(n&&n.getAttribute(e))),g[e]},j={CHESS_TODAY:"data-feature-chess-today",CLEAR_ANALYSIS_ON_CONFIRM:"data-clear-analysis-on-confirm",IS_LIVE:"data-is-live",LEAGUES:"data-feature-leagues",LESSON_FOR_EVERYONE:"data-lesson-for-everyone",MULTI_PGN_VIEWER:"data-feature-multi-pgn-viewer",NAVIGATION_USER_CONNECTION:"data-feature-navigation-user-connection",PUZZLE_BATTLE:"data-feature-puzzle-battle",PUZZLE_BATTLE_DIRECT_CHALLENGE:"data-feature-puzzle-battle-direct-challenge",SHARE_MENU_RAW_PGN:"data-feature-share-menu-raw-pgn",USER_MESSAGES_OVERFLOW:"data-feature-user-messages-overflow",WORLD_CHESS_CHAMPIONSHIP:"data-feature-wcc"};function ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}var y=function deleteAchievements(){var e=h.default.generate("web_achievement_callback_delete_new_achievements");return a.default.delete(e)},w=function setPosition(e){var t=h.default.generate("web_user_callback_update_navigation_state",{state:e});return a.default.put(t)},k=function getData(e){var t=h.default.generate("web_user_callback_navigation_data");return a.default.get(t,{headers:{"if-none-match":e}})},E=function getWatchPanel(){var e=h.default.generate("pubapi_navbar_panels_watch");return a.default.get(e)},C=function getTvAnnouncement(){var e=h.default.generate("web_tv_callback_get_announcement");return a.default.get(e)},S=function getClubs(){var e=window.context.user.username,t=h.default.generate("pubapi_player_clubs",{username:e});return a.default.get(t)},N=function searchUsername(e){var t=h.default.generate("web_user_callback_username_search",{onlyFriendsOfMine:1,avatarSize:25,query:e});return a.default.get(t)},T=function sendMessage(e){var t=e.username,n=e.message,r=e.code,i=h.default.generate("web_message_callback_create",{username:t});return a.default.post(i,{message:n,code:r,_token:window.context.csrf.token}).catch(function(e){return e.response})},A=function getCaptcha(){var e=h.default.generate("web_message_callback_add_captcha");return a.default.get(e)},I=function sortClubs(e){return e.sort(function(e,t){return e.last_activity<t.last_activity?1:-1})},L=function transformEvents(e){return O(j.CHESS_TODAY)?e.slice(0,_.g):e},P=function transformPlayers(e){return null==e?[]:e.map(function(e){return function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach(function(t){f()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{title:e.title?e.title.toUpperCase():void 0})}).sort(function(e,t){return e.rating<t.rating?1:-1}).slice(0,_.h)},M=function transformStreamers(e){return e.slice(0,O(j.CHESS_TODAY)?_.i:_.h)},R=function collapse(){return w("vertical-collapsed")},x=function expand(){return w("vertical-expanded")},D="[".concat("data-dismissed-new-features","]"),U=(h.default.generate("web_user_callback_dismiss_new_feature"),h.default.generate("web_puzzles_mode",{mode:"battle"}),function shouldShowNewFeature(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"puzzleBattle",t=document.querySelector(D);return!!t&&!JSON.parse(t.getAttribute("data-dismissed-new-features")).includes(e)}),B=n(12),z=n(1),$=function getMessageFromErrorOrDefault(e){return function getMessageFromError(e){if(e.response&&401!==e.response.status)return(e.response.data&&e.response.data.message?e.response.data.message:B.a.badRequest)||e.response.statusText}(e)||z.default.trans("An error occurred")},F=15e3,H={achievement:"user_achievements",arenaTrophy:"user_arena_trophy",challenge:"game_seek",clubForum:"user_group_forum",clubForumUpdate:"user_group_forum_new",clubNews:"user_group_news",clubNewsUpdate:"user_group_news_new",clubNote:"user_group_note",comment:"new_comment",content:"has_new_content",friendRequest:"friend_request",game:"game",groupActivity:"user_group_activity",groupRequest:"user_group_request",note:"user_comment",offlineChallenge:"offline_challenges",teamMatch:"team_match_game",tournament:"tournament_game",trophy:"user_trophy",voteChessGame:"votechess_game"},G={achievements:function achievements(e){return h.default.generate("web_awards_achievements",{username:e})},activity:"".concat(h.default.generate("web_user_home",{alert:"content"}),"#new_content"),challenge:function challenge(e){return h.default.generate("web_daily_seek",{id:e})},challenges:h.default.generate("web_daily_index"),clubForum:function clubForum(e){return h.default.generate("web_club_forum",{url:e})},clubForumUpdate:function clubForumUpdate(e){return h.default.generate("web_forum_view",{url:e})},clubNews:function clubNews(e){return h.default.generate("web_club_news",{club:e})},clubNewsUpdate:function clubNewsUpdate(e){return h.default.generate("web_club_news",{club:e})},clubNote:function clubNote(e){return h.default.generate("web_club_profile",{url:e})},clubRequest:function clubRequest(e){return h.default.generate("web_club_pending_requests",{url:e})},clubs:h.default.generate("web_club"),comment:function comment(e){return e},comments:h.default.generate("web_user_home"),friendRequest:function friendRequest(e){return h.default.generate("web_member_view",{username:e})},friendRequests:h.default.generate("web_friends"),game:function game(e){return h.default.generate("web_daily_game",{id:e})},live:function live(e){return"".concat(h.default.generate("web_live"),"#accept-challenge=").concat(e)},liveSettings:h.default.generate("web_user_settings_livechess"),note:"".concat(h.default.generate("web_user_home",{alert:"notes"}),"#new-notes"),settings:h.default.generate("web_user_settings_notifications"),teamMatch:function teamMatch(e){return h.default.generate("web_daily_game",{id:e})},teamMaches:h.default.generate("web_club_open_matches"),tournament:function tournament(e){return h.default.generate("web_daily_game",{id:e})},trophies:function trophies(e){return h.default.generate("web_awards_trophies",{username:e})},trophy:function trophy(e,t){return h.default.generate("web_awards_view_trophy",{username:e,type:"trophy",userTrophyId:t})},arenaTrophy:function arenaTrophy(e,t){return h.default.generate("web_awards_view_trophy",{username:e,type:"arena",userTrophyId:t})},voteChess:h.default.generate("web_votechess"),voteChessGame:function voteChessGame(e){return h.default.generate("web_votechess_game",{id:e})}},q=n(10),V=n(2),W={allowTakebacks:Object(V.trans)("Allow Takebacks?"),apply:Object(V.trans)("Apply"),arena:function arena(e){return Object(V.trans)("%tournament% Arena",{"%tournament%":e})},avoidTimeOuts:Object(V.trans)("Avoid Time-Outs"),challengeFriend:Object(V.trans)("Challenge Friend"),challengeLink:Object(V.trans)("Challenge Link"),challengeViaEmail:Object(V.trans)("Challenge via Email"),chessboardPreview:Object(V.trans)("Chessboard Preview"),change:Object(V.trans)("Change"),choose:Object(V.trans)("Choose..."),chooseType:Object(V.trans)("Choose Type"),chooseMember:Object(V.trans)("Choose a Chess.com member."),computer:Object(V.trans)("Computer"),computerWithLevel:function computerWithLevel(e){return Object(V.trans)("Computer %level%",{"%level%":e})},createChallenge:Object(V.trans)("Create Challenge"),createChallengeLink:Object(V.trans)("Create Challenge Link"),customChallenge:Object(V.trans)("Custom Challenge"),customTime:Object(V.trans)("Custom Time"),daily:Object(V.trans)("Daily"),dailyChallenges:Object(V.trans)("Daily Challenges"),daysWithAmount:function daysWithAmount(e){return Object(V.transChoice)("{0} 0 days|{1} 1 day|]1,Inf] %1$s% days",e,{"%1$s%":e})},email:Object(V.trans)("Email"),friends:Object(V.trans)("Friends"),inc:Object(V.trans)("inc"),iPlayAs:Object(V.trans)("I Play As"),joinATournament:Object(V.trans)("Join a Tournament"),loginOrJoinToPlay:function loginOrJoinToPlay(e,t){return Object(V.trans)("Login or join to play %username%!",{"%username%":'<img alt="'.concat(e,'" class="avatar" src="').concat(t,'" height="30" width="30" /> ').concat(e)})},live:Object(V.trans)("Live"),liveChallenges:Object(V.trans)("Live Challenges"),maxTimePerMove:Object(V.trans)("Max time per move"),min:Object(V.trans)("min"),minimumGamesPlayed:Object(V.trans)("Minimum Games Played"),minWithAmount:function minWithAmount(e){return Object(V.trans)("%amount% min",{"%amount%":e})},more:Object(V.trans)("More"),moveSpeed:Object(V.trans)("Move Speed"),newGame:Object(V.trans)("New Game"),ok:Object(V.trans)("OK"),online:Object(V.trans)("Online"),openChallenges:Object(V.trans)("Open Challenges"),opponentRating:Object(V.trans)("Opponent Rating"),optional:Object(V.trans)("Optional"),option:function option(e){return Object(V.trans)("Option %option%",{"%option%":e})},options:Object(V.trans)("Options"),play:Object(V.trans)("Play"),players:Object(V.trans)("Players"),premiumMembersOnly:Object(V.trans)("Premium Members Only"),quickPlay:Object(V.trans)("Quick Play"),rated:Object(V.trans)("Rated"),recentOpponents:Object(V.trans)("Recent Opponents"),sec:Object(V.trans)("sec"),secsWithAmount:function secsWithAmount(e){return Object(V.trans)("%amount% sec",{"%amount%":e})},selectTime:Object(V.trans)("Select Time"),sendLinkForAnyone:Object(V.trans)("Send a link for anyone to play."),setup:Object(V.trans)("Setup"),starts:Object(V.trans)("Starts"),time:Object(V.trans)("Time"),title:Object(V.trans)("Title"),totalTimePerSide:Object(V.trans)("Total time per side"),tournamentMinsLeft:function tournamentMinsLeft(e){return Object(V.trans)("%mins% mins left",{"%mins%":e})},tournamentStartsIn:function tournamentStartsIn(e){return Object(V.trans)("in %mins% mins",{"%mins%":e})},type:Object(V.trans)("Type"),username:Object(V.trans)("Username"),usernameNameEmail:Object(V.trans)("Username, Name or Email"),vsRandom:Object(V.trans)("vs Random")},K=[{label:Object(V.trans)("Standard"),value:q.b.CHESS},{label:Object(V.trans)("Chess960"),value:q.b.CHESS_960},{label:Object(V.trans)("Book Opening"),value:q.b.BOOK},{label:Object(V.trans)("Custom FEN"),value:q.b.CUSTOM}],Y=[{description:Object(V.trans)("Normal rules of chess."),icon:"chess-board",isDaily:!0,isLive:!0,label:Object(V.trans)("Standard"),value:q.g.CHESS},{description:Object(V.trans)("Normal rules, but starting position is random."),icon:"chess960",isDaily:!0,isLive:!1,label:Object(V.trans)("Chess960"),value:q.g.CHESS_960},{description:Object(V.trans)("Normal rules, but starting position is random."),icon:"live960",isDaily:!1,isLive:!0,label:Object(V.trans)("Live960"),value:q.g.CHESS_960},{description:Object(V.trans)("First to check the other king 3 times wins."),icon:"threecheck",isDaily:!1,isLive:!0,label:Object(V.trans)("3 Check"),value:q.g.THREE_CHECK},{description:Object(V.trans)("First to get king to middle 4 squares wins."),icon:"kingofthehill",isDaily:!1,isLive:!0,label:Object(V.trans)("King of the Hill"),value:q.g.KING_OF_THE_HILL},{description:Object(V.trans)("When you capture a piece, you can drop it on your turn!"),icon:"crazyhouse",isDaily:!1,isLive:!0,label:Object(V.trans)("Crazyhouse"),value:q.g.CRAZYHOUSE},{description:Object(V.trans)("Team up with another player and you can drop the pieces that they capture."),icon:"bughouse",isDaily:!1,isLive:!0,label:Object(V.trans)("Bughouse"),value:q.g.BUGHOUSE},{description:Object(V.trans)("An interactive & graphical tool for analysing chess positions and games in real time."),icon:"chess-board-search",isDaily:!1,isLive:!0,label:Object(V.trans)("Live Analysis Board"),value:q.g.ANALYSIS}],J=[{label:Object(V.trans)("Random"),value:q.k.RANDOM},{label:Object(V.trans)("White"),value:q.k.WHITE},{label:Object(V.trans)("Black"),value:q.k.BLACK}],Q=[{displayType:q.m.LIVE,label:Object(V.trans)("Live")},{displayType:q.m.DAILY,label:Object(V.trans)("Daily")}],Z=[{label:Object(V.trans)("Any"),value:""},{label:Object(V.trans)("12 hours"),value:43200},{label:Object(V.trans)("6 hours"),value:21600},{label:Object(V.trans)("3 hours"),value:10800}],X=[{label:"50",value:50},{label:"100",value:100},{label:"150",value:150},{label:"200",value:200},{label:"400",value:400},{label:"Any",value:0}],ee=[{icon:"square-plus",label:Object(V.trans)("Quick Match"),views:{primary:q.l.QUICK_PLAY}},{icon:"chess-board-gear",label:Object(V.trans)("Custom Game"),views:{primary:q.l.CUSTOM_CHALLENGE}},{icon:"user",label:Object(V.trans)("Play a Friend"),views:{primary:q.l.PLAY_A_FRIEND}},{icon:"tournament",label:Object(V.trans)("Join a Tournament"),views:{primary:q.l.JOIN_A_TOURNAMENT}},{icon:"computer",label:Object(V.trans)("Play Computer"),views:{primary:q.l.PLAY_COMPUTER}},{icon:"chess-board-circle",label:Object(V.trans)("Open Challenges"),views:{primary:q.l.OPEN_CHALLENGES}}],te={difficulty:5},ne=[{label:W.daysWithAmount(1),days:1},{label:W.daysWithAmount(2),days:2},{label:W.daysWithAmount(3),days:3},{label:W.daysWithAmount(5),days:5},{label:W.daysWithAmount(7),days:7},{label:W.daysWithAmount(14),days:14}],ae=[{days:1,icon:"daily",isDaily:!0,label:W.daysWithAmount(1)},{days:3,icon:"daily",isDaily:!0,label:W.daysWithAmount(3)},{days:7,icon:"daily",isDaily:!0,label:W.daysWithAmount(7)}],re=[{inc:0,label:W.minWithAmount(5),mins:5,secs:0},{inc:0,label:W.minWithAmount(3),mins:3,secs:0},{inc:0,label:W.minWithAmount(1),mins:1,secs:0},{inc:5,label:"5 | 5",mins:5,secs:0},{inc:2,label:"3 | 2",mins:3,secs:0},{inc:1,label:"1 | 1",mins:1,secs:0},{inc:0,label:W.minWithAmount(30),mins:30,secs:0},{inc:10,label:"15 | 10",mins:15,secs:0},{inc:0,label:W.minWithAmount(10),mins:10,secs:0},{inc:1,label:"2 | 1",mins:2,secs:0}],ie=[{icon:"bullet",inc:0,isLive:!0,label:W.minWithAmount(1),mins:1,secs:0},{icon:"blitz",inc:0,isLive:!0,label:W.minWithAmount(3),mins:3,secs:0},{icon:"blitz",inc:2,isLive:!0,label:"3 | 2",mins:3,secs:0},{icon:"blitz",inc:0,isLive:!0,label:W.minWithAmount(5),mins:5,secs:0},{icon:"blitz",inc:0,isLive:!0,label:W.minWithAmount(10),mins:10,secs:0},{icon:"rapid",inc:0,isLive:!0,label:W.minWithAmount(30),mins:30,secs:0}],se=n(7),oe=n(22);function get_time_variant_ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function get_time_variant_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?get_time_variant_ownKeys(n,!0).forEach(function(t){f()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):get_time_variant_ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ce=function(){return{allowTakebacks:!1,avoidTimeOuts:!1,dailySettings:{maxRatingDelta:50,minRatingDelta:50},isDaily:oe.a.get(q.a.NEW_GAME_IS_DAILY,!1),isFriendChallenge:!1,isLive:oe.a.get(q.a.NEW_GAME_IS_LIVE,!0),isMobile:window.innerWidth<=960,isRated:!0,isUsingCustomLiveTimeVariant:oe.a.get(q.a.NEW_GAME_IS_USING_CUSTOM_LIVE_TIME_VARIANT,!1),liveSettings:{maxRatingDelta:50,minRatingDelta:50},minimumGamesPlayed:0,moveSpeed:"",opponent:null,playerColor:q.k.RANDOM,premiumMembersOnly:!1,previousPrimaryView:null,primaryView:q.l.QUICK_PLAY,setup:q.b.CHESS,show:!1,showGameTimes:!1,showGameTypes:!1,startingPosition:null,timeVariant:(e=oe.a.get(q.a.NEW_GAME_IS_DAILY,!1),t=oe.a.get(q.a.NEW_GAME_IS_LIVE,!0),n=oe.a.get(q.a.NEW_GAME_TIME_VARIANT_WITH_INCREMENT,get_time_variant_objectSpread({},q.d)),!e||null!=n&&0!==n.days?t&&(null==n||0===n.inc&&0===n.mins&&0===n.secs)&&(n=get_time_variant_objectSpread({},q.d)):n=get_time_variant_objectSpread({},q.c),n&&n.mins>0&&n.secs>0&&(n.inc=n.secs,n.secs=0),n),title:"",type:{icon:"chess-board",value:q.g.CHESS},userRating:0,userSearchType:q.n.CHESSCOM};var e,t,n},le={challengeShortUrl:function challengeShortUrl(e){return h.default.generate("web_game_seek_challenge",{shortUuid:e},!0)},cancelShareableChallengeUrl:function cancelShareableChallengeUrl(e){return h.default.generate("web_game_seek_callback_delete_live_challenge",{shortUuid:e})},createShareableChallengeUrl:h.default.generate("web_game_callback_shareable_chess_challenge"),dailyChallenge:function dailyChallenge(e){return h.default.generate("web_game_callback_daily_chess_challenge",{opponent:e})},dailySeek:function dailySeek(e){return h.default.generate("web_daily_seek",{id:e})},dynBoardImage:function dynBoardImage(e){return h.default.generate("web_dynboard",{board:"green",fen:e,piece:"neo",size:"3"})},getOpenChallenges:h.default.generate("web_game_seek_callback_open_seeks"),index:h.default.generate("web_index",{},!0),joinableTournaments:h.default.generate("web_tournaments_callback_joinable"),live:h.default.generate("web_live"),liveAnalysis:"".concat(h.default.generate("web_live"),"#examine"),liveArenaTournament:function liveArenaTournament(e){return"".concat(h.default.generate("web_live"),"#r=").concat(e)},liveTournament:function liveTournament(e){return"".concat(h.default.generate("web_live"),"#t=").concat(e)},playUrl:function playUrl(e){return"chess.com".concat(h.default.generate("web_member_play",{username:e}))},playVsComputer:function playVsComputer(e){return h.default.generate("web_play_computer",{difficulty:e})},randomDailyChallenge:h.default.generate("web_game_callback_random_daily_chess_challenge"),recentOpponents:h.default.generate("web_user_callback_recent_opponents"),startingPositions:h.default.generate("web_eco_callback_search_by_starting_position"),tournament:function tournament(e){return h.default.generate("web_tournament_view",{url:e})},usernameSearch:function usernameSearch(e){return h.default.generate("web_user_callback_username_search",{avatarSize:40,query:e})},userRatings:h.default.generate("web_game_callback_ratings")},ue=function(e){var t=e.isDaily,n=e.isLive,a=e.timeVariant,r=a.days,i=a.mins,s=a.secs,o=a.inc;return t?W.daysWithAmount(r):n?o?i>0?"".concat(i," | ").concat(o):"".concat(Number(s/100).toFixed(2)," | ").concat(o):i>0?W.minWithAmount(i):W.secsWithAmount(s):void 0},de=function getLiveTime(e){var t=e.baseTime,n=e.increment,a=Math.trunc(t/10),r=0;return a>=60&&(r=Math.trunc(a/60),a=0),{inc:n/10,mins:r,secs:a}},fe={achievements:z.default.trans("Achievements"),activity:function activity(e){return z.default.trans("New post from %user%",{"%user%":"<strong>".concat(e,"</strong>")})},activityTitle:z.default.trans("Activity"),addNotificationPanelToHome:z.default.trans("Add to sidebar"),arenaTrophy:function arenaTrophy(e){return z.default.trans("You earned <strong>".concat(e,"</strong> trophy"))},challenge:function challenge(e){return z.default.trans("%user% wants to play",{"%user%":"<strong>".concat(e,"</strong>")})},challenges:z.default.trans("Challenges"),clubActivity:z.default.trans("Club Activity"),clubForum:function clubForum(e){return z.default.trans("%club% has a new topic",{"%club%":"<strong>".concat(e,"</strong>")})},clubForumUpdate:function clubForumUpdate(e,t){return"".concat(z.default.trans("%club% has a new topic",{"%club%":"<strong>".concat(e,"</strong>")})," <strong>").concat(t,"</strong>")},clubNews:function clubNews(e){return z.default.trans("%club% posted news",{"%club%":"<strong>".concat(e,"</strong>")})},clubNewsUpdate:function clubNewsUpdate(e,t){var n=z.default.trans("%club% posted news",{"%club%":"<strong>".concat(e,"</strong>")});return"".concat(n," <strong>").concat(t,"</strong>")},clubNote:function clubNote(e){return z.default.trans("%club% has a new note",{"%club%":"<strong>".concat(e,"</strong>")})},clubRequest:function clubRequest(e,t){var n=z.default.trans("%user% wants to join",{"%user%":"<strong>".concat(t,"</strong>")});return"".concat(n," <strong>").concat(e,"</strong>")},clubRequests:z.default.trans("Club Requests"),comment:function comment(e){return"<strong>".concat(e,"</strong>")},commentCount:function commentCount(e){var t=z.default.transChoice("{0} 0 new |{1} 1 new |]1,Inf] %commentsCount% new",e,{"%commentsCount%":e});return"<span>(".concat(t,")</span>")},comments:z.default.trans("Comments"),friendRequest:function friendRequest(e,t){var n="<strong>".concat(e,"</strong>");return t!==se.b.code&&(n+=' <span class="flair-component flair-inline flair-'.concat(t,'"></span>')),z.default.trans("%user% wants to be friends",{"%user%":n})},friendRequests:z.default.trans("Friend Requests"),game:function game(e){return z.default.trans("Check your game vs %user%",{"%user%":"<strong>".concat(e,"</strong>")})},games:z.default.trans("Games"),matchedGames:z.default.trans("Matched Games"),note:function note(e){return z.default.trans("%user% left you a note",{"%user%":"<strong>".concat(e,"</strong>")})},notes:z.default.trans("Notes"),offlineChallenge:function offlineChallenge(e){var t=e.baseTime,n=e.flairCode,a=e.from,r=e.fromRating,i=e.gameType,s=e.increment,o=e.rated,c='<strong id="offline-challenge-toaster-'.concat(a,'">').concat(a,"</strong>");r&&(c+=' <span class="user-rating">('.concat(r,")</span>")),n!==se.b.code&&(c+=' <span class="flair-component flair-inline flair-'.concat(n,'"></span>'));var l=Y.find(function(e){return e.value===i}),u="".concat(i," ");l&&(u="".concat(l.value===q.g.CHESS?"":"".concat(l.label," ")));var d="".concat(o?"":" ".concat(z.default.trans("unrated"))),f="".concat(function getLiveTimeLabel(e){var t=e.baseTime,n=e.increment;return ue({isDaily:!1,isLive:!0,timeVariant:de({baseTime:t,increment:n})})}({baseTime:t,increment:s})),_='<span class="live-time-label">('.concat(u).concat(f).concat(d,")</span>");return z.default.trans("%user% wants to play %time%",{"%user%":c,"%time%":_})},removeNotificationPanelFromHome:z.default.trans("Remove from sidebar"),teamMatch:function teamMatch(e){return z.default.trans("Check your game vs %user%",{"%user%":"<strong>".concat(e,"</strong>")})},tournament:function tournament(e){return z.default.trans("%user% wants to join",{"%user%":"<strong>".concat(e,"</strong>")})},trophy:function trophy(e,t){var n=z.default.trans("%user% sent you a trophy",{"%user%":"<strong>".concat(t,"</strong>")});return"".concat(n," <strong>").concat(e,"</strong>")},trophies:z.default.trans("Trophies"),voteChess:z.default.trans("Vote Chess"),voteChessGame:function voteChessGame(e){return z.default.trans("Update in %game%",{"%game%":"<strong>".concat(e,"</strong>")})}},_e=n(101),he=n(49),me=n(238),pe=n.n(me),be=window.context,ge=function generateId(e){var t=[e.alertId,e.alertType,e.userId,e.contentId,e.contentType,e.alertSubType];return pe()(t.filter(Boolean).join("")).substr(0,10)},ve=function handleError(e){var t=$(e);window.postMessage({key:B.b,type:B.c.error,message:t},window.location.origin)},Oe=function isLoggedIn(){return Boolean(be&&be.user)&&!Object(he.a)()},je=function getNotificationPollingTime(){return F};var ye={name:"achievements",state:{achievements:[]},Store:class achievements_AchievementsStore extends l.a{constructor(){super(...arguments),Oe()&&window.addEventListener("message",this.respondToMessageEvents.bind(this))}add(e){var t=this.get().achievements;0===t.length&&(y(),U()||window.postMessage(r.LOAD_ACHIEVEMENTS_MODAL,window.location.origin)),this.set({achievements:[].concat(o()(t),[e])})}remove(e){var t=this.get().achievements.filter(function(t){return e.code!==t.code});0===t.length&&window.postMessage(r.REMOVE_ACHIEVEMENTS_MODAL,window.location.origin),this.set({achievements:t})}respondToMessageEvents(e){var t=e.data;t&&t.key===r.ADD_ACHIEVEMENT&&this.add(t.achievement)}}},we=function nl2br(e){return e?e.toString().replace(/(?:\r\n|\r|\n)/g,"<br>"):""};function enableMessageField(){var e=document.querySelector("#message-modal .form-textarea");e&&(e.classList.remove("disabled"),e.removeAttribute("readonly"))}var ke=function defaultState(){return{avatar_url:null,captcha:null,errorMessage:"",is_in_livechess:!1,is_online:!1,message:"",sending:!1,show:!1,success:!1,username:null}};var Ee={name:"message",state:ke(),Store:class message_MessageStore extends l.a{sendMessage(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.get(),a=n.username,r=n.message;this.set({sending:!0}),T({username:a,message:we(r),code:t}).then(function(t){200===t.status?(e.set({captcha:null,sending:!1,success:!0,errorMessage:""}),setTimeout(function(){enableMessageField(),e.set({message:""}),e.hide()},2e3)):(e.set({captcha:t.data.captcha,sending:!1,success:!1,errorMessage:t.data.message}),enableMessageField())}).catch(function(t){e.set({errorMessage:t.response.message,sending:!1})})}hide(){this.set(ke())}getCaptcha(){var e=this;A().then(function(t){e.set({captcha:t.data.captcha})})}}};function _async(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function _await(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function _awaitIgnored(e,t){if(!t)return e&&e.then?e.then(_empty):Promise.resolve()}function _call(e,t,n){if(n)return t?t(e()):e();try{var a=Promise.resolve(e());return t?a.then(t):a}catch(e){return Promise.reject(e)}}function _invoke(e,t){var n=e();return n&&n.then?n.then(t):t(n)}function _catch(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}function _empty(){}var Ce,Se={CREATED:"created",CANCELLED:"cancelled",DENIED:"denied"},Ne={challengeAccept:function challengeAccept(e){return"".concat(h.default.generate("web_puzzles_mode",{mode:"battle"}),"#accept=").concat(e)},challengeDecline:function challengeDecline(e){return h.default.generate("web_tactics_battle_callback_challenge_deny",{id:e})},challengeList:function challengeList(){return h.default.generate("web_tactics_battle_callback_challenge_list",{direction:"incoming"})},puzzleBattle:function puzzleBattle(){return h.default.generate("web_puzzles_mode",{mode:"battle"})}},Te={REGISTER_CHALLENGE_TOASTER_HANDLER:"register_challenge_toaster_handler",UNREGISTER_CHALLENGE_TOASTER_HANDLER:"unregister_challenge_toaster_handler"},Ae=function fetchChallenges(){return a.default.get(Ne.challengeList())},Ie=function declineChallenge(e){return a.default.post(Ne.challengeDecline(e))},Le=n(27),Pe=_async(function(){return window.PubSub&&window.PubSub.client?Promise.resolve(window.PubSub):_await(new Promise(function(e){return setTimeout(e,500)}),function(){return Pe()})}),Me=n(13),Re=function getUserChallengesChannel(){return"battle/challenges/".concat(function getUserUuid(){return Object(Me.c)("uuid")}())},xe=function hashParamsToObject(e){return e&&"#"===e[0]?e.match(/[^#&=]+/g).reduce(function(e,t,n,a){return n%2?e[a[n-1]]=t:e[t]=null,e},{}):{}},De=null;var Ue={name:"puzzleBattle",state:{challenges:[]},Store:class store_PuzzleBattleStore extends l.a{init(){var e=this;return _call(function(){return window.addEventListener("message",e.onWindowMessage.bind(e)),e.fetchChallenges(),_call(Pe,function(t){De=t,e.initPubsub()})})}initPubsub(){var e=De.getState();e.transport&&e.transport.isConnected?this.subscribe():De.on(Le.a.CONNECT,this.subscribe),De.on("".concat(Le.a.MESSAGE,":").concat(Re()),this.handleChallengeMessage.bind(this))}subscribe(){De.subscribe(Re())}fetchChallenges(){var e=this;return _call(function(){return _call(Ae,function(t){var n=t.data.challenges;e.set({challenges:n.filter(function(t){return t.id!==e.getExcludedChallengeId()})})})})}acceptChallenge(e){this.removeChallengeById(e.id),Ce&&Ce.accept?Ce.accept(e):window.location=Ne.challengeAccept(e.id)}declineChallenge(e){if(this.removeChallengeById(e.id),!Ce||!Ce.decline)return Ie(e.id);Ce.decline(e)}handleChallengeMessage(e){var t=e.message,n=t.event,a=t.challenge;switch(n){case Se.CANCELLED:this.removeChallengeById(a.id);break;case Se.CREATED:this.addChallenge(a)}}addChallenge(e){if(!Ce||!Ce.filter||Ce.filter(e)){var t=this.get().challenges;this.set({challenges:[].concat(o()(t),[e])})}}removeChallengeById(e){var t=this.get().challenges;this.set({challenges:o()(t.filter(function(t){return t.id!==e}))})}filterChallenges(){if(Ce&&Ce.filter){var e=this.get().challenges;this.set({challenges:e.filter(function(e){return Ce.filter(e)})})}}getExcludedChallengeId(){var e=xe(window.location.hash);if(e.accept&&window.location.href.includes(Ne.puzzleBattle()))return e.accept}onWindowMessage(e){var t=e.data;if(t&&t.event)switch(t.event){case Te.REGISTER_CHALLENGE_TOASTER_HANDLER:Ce=window.chesscom.puzzleBattleChallengeHandler,this.filterChallenges();break;case Te.UNREGISTER_CHALLENGE_TOASTER_HANDLER:Ce=null}}}},Be=n(24),ze=n.n(Be),$e=n(20),Fe=n(29),He=document.getElementById("sb"),Ge=He?o()(He.classList):[];var qe={state:{authenticated:Oe(),clubs:[],clubSearch:"",collapsed:Ge.includes("collapsed"),currentTab:Fe.b.FRIENDS_TAB,displayChatTab:!1,eTag:"",forceCollapse:Ge.includes("force-collapse"),friendSearch:"",friendSearchResults:[],navData:{friends:[]},searchingFriends:!1,searchingClubs:!1,tvAnnouncement:{hash:null,isHeadline:!1,title:null,language:"",defaultLanguage:""},watchPanels:{streamers:[],topEvents:[],topPlayers:[]}},name:"navigation",Store:class store_NavigationStore extends l.a{changeCurrentTab(e){this.set({currentTab:e})}collapse(){var e=this.get().authenticated;this.set({collapsed:!0}),e&&R()}expand(){var e=this.get(),t=e.authenticated;e.forceCollapse||(this.set({collapsed:!1}),t&&x())}getClubs(){var e=this;return S().then(function(t){var n=t.data;n.clubs&&n.clubs.length>0&&e.set({clubs:I(n.clubs)})})}getData(){var e=this,t=this.get().eTag;return k(t).then(function(t){var n=t.data;e.set({eTag:t.headers.etag,navData:n})})}getWatchPanel(){var e=this;return E().then(function(t){var n=t.data;e.set({watchPanels:{topPlayers:P(n.top_players||[]),streamers:M(n.streamers||[]),topEvents:L(n.top_events||[])}})})}getTvAnnouncement(){var e=this;return C().then(function(t){var n=t.data,a=Object($e.d)(n);"object"===ze()(a)&&e.set({tvAnnouncement:a})})}searchUsername(){var e=this,t=this.get().friendSearch;return this.set({searchingFriends:!0}),N(t).then(function(t){var n=t.data.length?t.data:[];e.set({friendSearchResults:n}),e.set({searchingFriends:!1})})}switchChatTab(e){this.set({displayChatTab:e})}}},Ve=function acceptFriendRequest(e){var t=h.default.generate("web_friend_accept_request_callback",{requestor:e});return a.default.put(t)},We=function acceptGroupRequest(e,t){var n=h.default.generate("web_club_callback_manage_user_group_request",{id:e,username:t,action:"approve"});return a.default.post(n)},Ke=function declineFriendRequest(e){var t=h.default.generate("web_friend_decline_request_callback",{requestor:e});return a.default.delete(t)},Ye=function declineGroupRequest(e,t){var n=h.default.generate("web_club_callback_manage_user_group_request",{id:e,username:t,action:"deny"});return a.default.post(n)},Je=function declineOfflineChallenge(e){var t=h.default.generate("web_alert_callback_ignore_offline_challenge",{id:e});return a.default.post(t,{_token:window.context.csrf.token})},Qe=function fetch(){var e=h.default.generate("web_alert_callback_alerts");return a.default.get(e)},Ze=function getNotificationCounts(e){var t=h.default.generate("pubapi_player_notices",{username:e.toLowerCase()});return a.default.get(t)},Xe=function ignore(e){var t=h.default.generate("web_alert_callback_ignore",{id:e});return a.default.post(t)},et=function ignoreAchievement(e){var t=h.default.generate("web_alert_callback_ignore_achievement",{code:e});return a.default.post(t)},tt=function ignoreComment(e,t){var n=h.default.generate("web_alert_callback_ignore_comment",{contentId:e,contentType:t});return a.default.post(n)},nt=function ignoreComments(){var e=h.default.generate("web_alert_callback_ignore_new_comments");return a.default.post(e)},at=function ignoreContent(){var e=h.default.generate("web_alert_callback_ignore_new_content");return a.default.post(e)},rt=function ignoreGroupActivity(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r={id:e,alertType:t};null!==n&&(r.clubContentId=n);var i=h.default.generate("web_alert_callback_ignore_group_activity",r);return a.default.post(i)},it=function ignoreNotifications(){var e=h.default.generate("web_alert_callback_ignore_all");return a.default.post(e)},st=function setShowNotificationsOnHome(e){var t=h.default.generate("web_user_callback_set_show_alerts_on_home");return a.default.post(t,{showAlertsOnHome:e})},ot=n(239),ct=n.n(ot),lt=function transformNotification(e){return Object.assign(e,{notificationId:ge(e)},function generateMessage(e){var t=e.alertSubType,n=e.alertType,a=window.context.user.username;switch(n===H.groupActivity?t:n){case H.achievement:return{content:e.title,route:G.achievements(a)};case H.content:return{content:fe.activity(e.username),route:e.viewUrl||G.activity};case H.challenge:return{content:fe.challenge(e.username),route:G.challenge(e.contentId)};case H.clubForum:return{content:fe.clubForum(e.groupName),route:G.clubForum(e.groupUrl)};case H.clubForumUpdate:return{content:fe.clubForumUpdate(e.groupName,e.title),route:G.clubForumUpdate(e.viewUrl)};case H.clubNews:return{content:fe.clubNews(e.groupName),route:G.clubNews(e.groupUrl)};case H.clubNewsUpdate:return{content:fe.clubNewsUpdate(e.groupName,e.title),route:G.clubNewsUpdate(e.groupUrl)};case H.clubNote:return{content:fe.clubNote(e.groupName),route:G.clubNote(e.groupUrl)};case H.groupRequest:return{content:fe.clubRequest(e.groupName,e.username),route:G.clubRequest(e.groupUrl)};case H.comment:return{content:"".concat(fe.comment(e.title)," ").concat(fe.commentCount(e.newCommentCount)),route:G.comment(e.viewUrl)};case H.friendRequest:return{content:fe.friendRequest(e.username,e.flairCode),route:G.friendRequest(e.username)};case H.game:return{content:fe.game(e.username),route:G.game(e.contentId)};case H.note:return{content:fe.note(e.username),route:G.note};case H.offlineChallenge:return{content:fe.offlineChallenge(e),from:e.from,route:G.live(e.id)};case H.teamMatch:return{content:fe.teamMatch(e.username),route:G.teamMatch(e.contentId)};case H.tournament:return{content:fe.tournament(e.username),route:G.tournament(e.contentId)};case H.trophy:return{content:fe.trophy(e.trophyName,e.username),route:G.trophy(a,e.userTrophyId)};case H.arenaTrophy:return{content:fe.arenaTrophy(e.trophyName),route:G.arenaTrophy(a,e.userTrophyId)};case H.voteChessGame:return{content:fe.voteChessGame(e.gameName),route:G.voteChessGame(e.contentId)}}}(e),function generateSrcSet(e){return e.image?{srcset:Object(_e.a)(e.image)}:{}}(e))},ut=function transformNotifications(e){return e.map(lt)},dt=function transformNotificationGroups(e){return Object.keys(e).reduce(function(t,n){var a=function transformNotificationGroup(e,t){e.data;var n=ct()(e,["data"]);return{type:Object.assign(n,{id:t}),notifications:ut(e.data)}}(e[n],n);return n===H.offlineChallenge?t.unshift(a):t.push(a),t},[])};function store_ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function store_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?store_ownKeys(n,!0).forEach(function(t){f()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):store_ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ft={state:{badges:{alerts:0,challenges:0,chatMessages:0,games:0,messages:0},fetched:!1,isFetching:!1,games:[],notifications:[],showNotificationsOnHome:function getShowNotificationsOnHome(){return Oe()&&be.user.showAlertsOnHome}()},name:"notifications",Store:class store_NotificationStore extends l.a{constructor(){super(...arguments),Oe()&&window.addEventListener("message",this.respondToMessageEvents.bind(this))}acceptFriendRequest(e){var t=e.username;return Ve(t)}acceptGroupRequest(e){var t=e.contentId,n=e.username;return We(t,n)}acceptRequest(e){var t=this;return _call(function(){var n,a=!1,r=(n={},f()(n,H.friendRequest,function(){return t.acceptFriendRequest(e)}),f()(n,H.groupRequest,function(){return t.acceptGroupRequest(e)}),n);return _invoke(function(){if(r[e.alertType])return _catch(function(){return _awaitIgnored(r[e.alertType]())},function(e){return a=!0,ve(e)})},function(n){if(a)return n;t.remove(e)})})}declineFriendRequest(e){var t=e.username;return Ke(t)}declineGroupRequest(e){var t=e.contentId,n=e.username;return Ye(t,n)}declineOfflineChallenge(e){var t=e.id;return Je(t)}declineRequest(e){var t=this;return _call(function(){var n,a=!1,r=(n={},f()(n,H.friendRequest,function(){return t.declineFriendRequest(e)}),f()(n,H.groupRequest,function(){return t.declineGroupRequest(e)}),f()(n,H.offlineChallenge,function(){return t.declineOfflineChallenge(e)}),n);return _invoke(function(){if(r[e.alertType])return _catch(function(){return _awaitIgnored(r[e.alertType]())},function(e){return a=!0,ve(e)})},function(n){if(a)return n;t.remove(e)})})}decrementAlertNotificationCount(){this.decrementNotificationCount("alerts")}decrementGamesNotificationCount(){this.decrementNotificationCount("games")}decrementMessagesNotificationCount(){this.decrementNotificationCount("messages")}decrementNotificationCount(e){var t=this.get().badges;this.set({badges:Object.assign(t,f()({},e,Math.max(t[e]-1,0)))})}getNotificationCounts(e){var t=this,n=window.context.user.username;return Ze(n).then(function(n){var a=n.data,r=t.get().badges,i=a.challenge_waiting,s=t.get().fetched,o=!1;r.alerts===a.notifications&&r.games===a.games_to_move&&r.challenges===a.challenge_waiting||(s=!1),r.challenges!==a.challenge_waiting&&(o=!0),r.games===a.games_to_move&&r.challenges===a.challenge_waiting||window.postMessage("game-notifications-change",window.location.origin),t.set({badges:{alerts:a.notifications+i,challenges:i,chatMessages:r.chatMessages,games:a.games_to_move,messages:a.new_messages},fetched:s}),o&&t.fetch(),e&&setTimeout(function(){return t.getNotificationCounts(!0)},je())})}fetch(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).forceReload,n=void 0!==t&&t,a=this.get(),i=a.fetched,s=a.isFetching;return i&&!n||s?Promise.resolve():(this.set({isFetching:!0}),Qe().then(function(e){return e.data||{}}).catch(function(){return e.set({isFetching:!1}),{}}).then(function(t){var n=t.alerts,a=void 0===n?{}:n,r=t.readyGames,i=void 0===r?[]:r;return e.getNotificationCounts(),e.set({games:i}),a}).then(dt).then(function(t){e.set({notifications:t}),window.postMessage(r.NOTIFICATIONS_FETCHED,window.location.origin),e.set({fetched:!0,isFetching:!1})}))}ignore(e){var t=this;return _call(function(){var n,a=!1,r=(n={},f()(n,H.comment,function(){return t.ignoreComment(e)}),f()(n,H.groupActivity,function(){return t.ignoreGroupActivity(e)}),f()(n,H.content,function(){return t.ignoreContent()}),f()(n,H.achievement,function(){return t.ignoreAchievement(e)}),n);return function _continue(e,t){return e&&e.then?e.then(t):t(e)}(_catch(function(){return function _invokeIgnored(e){var t=e();if(t&&t.then)return t.then(_empty)}(function(){return r[e.alertType]?_awaitIgnored(r[e.alertType]()):_awaitIgnored(Xe(e.alertId))})},function(e){return a=!0,ve(e)}),function(n){if(a)return n;t.remove(e)})})}ignoreAchievement(e){var t=e.code;return et(t)}ignoreAll(){var e=this.get().badges,t=this.get().notifications,n=(t=t.filter(function(e){return e.type.id===H.friendRequest})).reduce(function(e,t){return e+t.notifications.length},0);return this.set({badges:store_objectSpread({},e,{alerts:n}),notifications:t}),Promise.all([nt(),it()])}ignoreByTypesAndContentId(e){var t=this,n=e.contentId,a=e.notificationTypes;this.get().notifications.filter(function(e){return a.indexOf(e.type.id)>=0}).forEach(function(e){var a=e.notifications.find(function(e){return parseInt(e.contentId,10)===n});a&&t.ignore(a)})}ignoreComment(e){var t=e.contentId,n=e.contentType;return tt(t,n)}ignoreContent(){return at()}ignoreGroupActivity(e){var t=e.contentId,n=e.alertSubType,a=e.clubContentId;return rt(t,n,a)}remove(e){var t=e.alertType,n=e.notificationId;if("string"==typeof t&&"string"==typeof n){var a=this.get().notifications,r=a.findIndex(function(e){return e.type.id===t});if(-1!==r){var i=a[r].notifications.findIndex(function(e){return e.notificationId===n});-1!==i&&(a[r].notifications.splice(i,1),a[r].notifications.length||a.splice(r,1),this.decrementAlertNotificationCount(),this.set({notifications:a}))}}}removeGame(e){var t=this.get().games,n=t.findIndex(function(t){return t.id===e});n>=0&&(t.splice(n,1),this.set({games:t}),this.decrementGamesNotificationCount())}removeGameAlert(e,t){e===r.REMOVE_CHECK_GAME_ALERT?this.ignoreByTypesAndContentId({notificationTypes:[H.game,H.teamMatch],contentId:t}):e===r.REMOVE_GAME_COMMENT_ALERT&&this.ignoreByTypesAndContentId({notificationTypes:[H.comment],contentId:t})}respondToMessageEvents(e){var t=this,n=e.data,a=this.get().fetched;n&&[r.REMOVE_CHECK_GAME_ALERT,r.REMOVE_GAME_COMMENT_ALERT].includes(n.key)?a?this.removeGameAlert(n.key,n.gameId):this.fetch().then(function(){return t.removeGameAlert(n.key,n.gameId)}):n&&n.key===r.REMOVE_READY_GAME_ALERT?a?this.removeGame(n.gameId):this.fetch().then(function(){return t.removeGame(n.gameId)}):n===r.FETCH_NOTIFICATION_COUNT?this.getNotificationCounts():n===r.DECREMENT_MESSAGE_COUNT&&this.decrementMessagesNotificationCount()}setBadgeCount(e){var t=e.type,n=e.count,a=this.get().badges;this.set({badges:store_objectSpread({},a,f()({},t,n))})}toggleShowNotificationsOnHome(){var e=this.get().showNotificationsOnHome;Oe()&&st(!e),this.set({showNotificationsOnHome:!e})}}},_t=n(25);_t.default.register(ye),_t.default.register(qe),_t.default.register(ft),_t.default.register(Ee),O(j.PUZZLE_BATTLE_DIRECT_CHALLENGE)&&_t.default.register(Ue),Oe()&&(_t.default.stores.navigation.getData(),_t.default.stores.navigation.getWatchPanel(),_t.default.stores.navigation.getTvAnnouncement(),_t.default.stores.navigation.getClubs(),O(j.IS_LIVE)?window.addEventListener("message",function(e){"navAlertsUpdateCount"===e.data&&_t.default.stores.notifications.getNotificationCounts(!1)}):setTimeout(function(){return _t.default.stores.notifications.getNotificationCounts(!0)},je()),O(j.PUZZLE_BATTLE_DIRECT_CHALLENGE)&&_t.default.stores.puzzleBattle.init());var ht=n(0),mt=n(14);n(326);function achievementsRoute(){var e=window.context.user.username;return h.default.generate("web_awards_achievements",{username:e})}var pt={dismiss:function dismiss(){var e=this.get().achievement;this.store.remove(e)},handleKeyboard:function handleKeyboard(e){e.keyCode===Fe.d&&this.dismiss()}};function create_if_block(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g,v,O,j,y,w,k,E=t.achievement.name,C=t.achievement.description,S=t.translations.achievements;function click_handler(t){e.dismiss()}function click_handler_1(t){e.dismiss()}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.k)("\n\n      "),i=Object(ht.i)("div"),(s=Object(ht.i)("span")).innerHTML='<span class="icon-font-chess x svelte-1wvuz9i"></span>',o=Object(ht.k)("\n        "),l=Object(ht.i)("img"),f=Object(ht.k)("\n        "),_=Object(ht.i)("div"),h=Object(ht.i)("p"),b=Object(ht.k)(E),g=Object(ht.k)("\n          "),v=Object(ht.i)("p"),O=Object(ht.k)(C),j=Object(ht.k)("\n          "),y=Object(ht.i)("a"),w=Object(ht.k)(S),Object(ht.c)(a,"click",click_handler),a.className="core-modal-background svelte-1wvuz9i",Object(ht.c)(s,"click",click_handler_1),s.className="btn-modal-close svelte-1wvuz9i",l.width="300",l.height="300",l.src=u=t.achievement.image_url,h.className="achievement-title svelte-1wvuz9i",v.className="achievement-description svelte-1wvuz9i",y.href=k=achievementsRoute()+"#achievement_"+t.achievement.code,y.className="svelte-1wvuz9i",_.className="achievement-info svelte-1wvuz9i",i.className="core-modal svelte-1wvuz9i",n.className="core-modal-container is-active svelte-1wvuz9i"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(n,r),Object(ht.d)(n,i),Object(ht.d)(i,s),Object(ht.d)(i,o),Object(ht.d)(i,l),Object(ht.d)(i,f),Object(ht.d)(i,_),Object(ht.d)(_,h),Object(ht.d)(h,b),Object(ht.d)(_,g),Object(ht.d)(_,v),Object(ht.d)(v,O),Object(ht.d)(_,j),Object(ht.d)(_,y),Object(ht.d)(y,w)},p:function p(e,t){e.achievement&&u!==(u=t.achievement.image_url)&&(l.src=u),e.achievement&&E!==(E=t.achievement.name)&&Object(ht.E)(b,E),e.achievement&&C!==(C=t.achievement.description)&&Object(ht.E)(O,C),e.translations&&S!==(S=t.translations.achievements)&&Object(ht.E)(w,S),e.achievement&&k!==(k=achievementsRoute()+"#achievement_"+t.achievement.code)&&(y.href=k)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(a,"click",click_handler),Object(ht.A)(s,"click",click_handler_1)}}}function Achievements_modal_svelte(e){var t=this;Object(ht.t)(this,e),this._state=Object(ht.e)(Object(ht.e)(this.store._init(["achievements"]),function achievements_modal_svelte_data(){return{translations:mt.a}}()),e.data),this.store._add(this,["achievements"]),this._recompute({$achievements:1},this._state),this._intro=!0,this._handlers.destroy=[ht.z],this._fragment=function create_main_fragment(e,t){var n,a=t.show&&create_if_block(e,t);return{c:function c(){n=Object(ht.i)("div"),a&&a.c()},m:function m(e,t){Object(ht.u)(e,n,t),a&&a.m(n,null)},p:function p(t,r){r.show?a?a.p(t,r):((a=create_if_block(e,r)).c(),a.m(n,null)):a&&(a.d(1),a=null)},d:function d(e){e&&Object(ht.p)(n),a&&a.d()}}}(this,this._state),this.root._oncreate.push(function(){(function oncreate(){document.addEventListener("keyup",this.handleKeyboard.bind(this))}).call(t),t.fire("update",{changed:Object(ht.f)({},t._state),current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Achievements_modal_svelte.prototype,ht.x),Object(ht.e)(Achievements_modal_svelte.prototype,pt),Achievements_modal_svelte.prototype._recompute=function _recompute(e,t){e.$achievements&&(this._differs(t.achievement,t.achievement=function achievements_modal_svelte_achievement(e){var t=e.$achievements;if(t.length)return t[0]}(t))&&(e.achievement=!0),this._differs(t.show,t.show=function achievements_modal_svelte_show(e){return e.$achievements.length>0}(t))&&(e.show=!0))};var bt=Achievements_modal_svelte,gt=n(11),vt=document.querySelector("#achievements-modal"),Ot=null;window.addEventListener("message",function(e){var t=e.data;t===r.LOAD_ACHIEVEMENTS_MODAL?function loadAchievementsModal(){Ot=new bt({target:vt,store:gt.default.stores.achievements})}():t===r.REMOVE_ACHIEVEMENTS_MODAL&&function removeAchievementsModal(){Ot.destroy()}()});n(327);var jt=document.querySelectorAll(_.l.LOGOUT_TRIGGER);o()(jt).forEach(function(e){e.addEventListener("click",function(e){var t=document.querySelector(_.l.LOGOUT_FORM);e.preventDefault(),t.submit()})});var yt=function clickOutside(e){return new Promise(function(t){var n=function documentListener(n){(void 0===n.target.contains||n.target!==e&&!e.contains(n.target))&&(t(),document.removeEventListener("click",documentListener))};setTimeout(function(){document.addEventListener("click",n)})})};var wt=(new class Configuration{constructor(){var e=Object.assign({},window.Config);e.MainDomain||(e.MainDomain=e["domain.main"]),e.StaticDomain||(e.StaticDomain=e["domain.static"]),e.FilesDomain||(e.FilesDomain=e["domain.files"]),e.LiveDomain||(e.LiveDomain=e["domain.live"]),e.LiveWebSocketDomain||(e.LiveWebSocketDomain=e["domain.livews"]),e.LiveSecureWebSocketDomain||(e.LiveSecureWebSocketDomain=e["domain.livewss"]),e.VoiceDomain||(e.VoiceDomain=e["domain.voice"]),e.CssJsDomain||(e.CssJsDomain=e["domain.cssjs"]),e.ImagesDomain||(e.ImagesDomain=e["domain.images"]),e.AvatarsDomain||(e.AvatarsDomain=e["domain.avatars"]),e.ChessBoardAssetsDomain||(e.ChessBoardAssetsDomain="//images.chesscomfiles.com/chess-themes"),e.ChessBoardLocalAssetsDomain||(e.ChessBoardLocalAssetsDomain="bundles/web/images/chess-themes/pieces"),e.AppVersion||(e.AppVersion=e["application.version"]),e.AppVersion||(e.AppVersion=Math.floor(1e4*Math.random())+1e4),e.DocumentRoot||(e.DocumentRoot=""),void 0===e.oldThemes&&(e.oldThemes=!0),e.GfxUrl||(e.GfxUrl=e.ChessBoardAssetsDomain),e.GfxLocalUrl||(e.GfxLocalUrl=e.ChessBoardLocalAssetsDomain),e.ChessBoardPiecesPath||(e.ChessBoardPiecesPath="/pieces"),e.ChessBoardBackgroundsPath||(e.ChessBoardBackgroundsPath="/boards"),e.ChessBoardArrowsPath||(e.ChessBoardArrowsPath="/arrows"),e.AudioSet||(e.AudioSet="default"),e.AudioUrl||(e.AudioUrl="".concat(e.ChessBoardAssetsDomain,"/sounds/")),e.DiagramGetPostUrl||(e.DiagramGetPostUrl="/api/get_diagram"),e.DailyPuzzleGetUrl||(e.DailyPuzzleGetUrl="/api/get_puzzle"),this.config=e}}).config,kt=n(31),Et={ie:2592e5,default:6048e5},Ct={MOUNT_MESSAGE_MODAL:"mountSvelteMessageModal"},St={oldBrowserHeading:Object(V.trans)("Chess.com is Best with Updated, Modern Browsers"),oldBrowserText:Object(V.trans)("Please check to make sure you are using the latest versions of one of these browsers")};n(328);var Nt={show:function show(){this.set({display:!0})},hide:function hide(){this.set({display:!1})},checkStorage:function checkStorage(){var e=this.get(),t=e.localStorageName,n=e.todaysDate,a=oe.a.get(t);return Date.parse(a)<n||!a},setStorage:function setStorage(){var e=this.get(),t=e.localStorageName,n=e.timeFromNow,a=e.todaysDate,r=new Date;r.setTime(a.getTime()+n),oe.a.set(t,r)}};function create_if_block_1(e,t){var n,a,r,i,s;return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.i)("img"),i=Object(ht.k)("\n\n            "),(s=Object(ht.i)("label")).textContent="Safari",a.width="65",a.height="65",a.alt="Safari",a.src=r=t.images.safari,s.className="svelte-1o0fp2f",n.target="_blank",n.rel="noopener",n.className="browser svelte-1o0fp2f",n.href="https://support.apple.com/HT204416"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(n,i),Object(ht.d)(n,s)},p:function p(e,t){e.images&&r!==(r=t.images.safari)&&(a.src=r)},d:function d(e){e&&Object(ht.p)(n)}}}function old_browser_modal_svelte_create_if_block(e,t){var n,a,r,i,s;return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.i)("img"),i=Object(ht.k)("\n\n            "),(s=Object(ht.i)("label")).textContent="Edge",a.width="65",a.height="65",a.alt="Edge",a.src=r=t.images.edge,s.className="svelte-1o0fp2f",n.target="_blank",n.rel="noopener",n.className="browser svelte-1o0fp2f",n.href="https://www.microsoft.com/en-us/windows/microsoft-edge"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(n,i),Object(ht.d)(n,s)},p:function p(e,t){e.images&&r!==(r=t.images.edge)&&(a.src=r)},d:function d(e){e&&Object(ht.p)(n)}}}function Old_browser_modal_svelte(e){var t=this;Object(ht.t)(this,e),this.refs={},this._state=Object(ht.e)(function old_browser_modal_svelte_data(){return{translations:St,display:!1,images:{chrome:"".concat(wt.CssJsDomain,"/bundles/web/images/icons/chrome.png"),edge:"".concat(wt.CssJsDomain,"/bundles/web/images/icons/edge.png"),firefox:"".concat(wt.CssJsDomain,"/bundles/web/images/icons/firefox.png"),ie:"".concat(wt.CssJsDomain,"/bundles/web/images/icons/ie.png"),safari:"".concat(wt.CssJsDomain,"/bundles/web/images/icons/safari.png")},timeFromNow:0,todaysDate:new Date,localStorageName:"nobrowserupgrade",showEdge:!1,showSafari:!1}}(),e.data),this._recompute({display:1},this._state),this._intro=!0,this._fragment=function old_browser_modal_svelte_create_main_fragment(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g,v,O,j,y,w,k,E,C,S,N,T,A,I,L,P=t.translations.oldBrowserHeading,M=t.translations.oldBrowserText;function click_handler(t){e.hide()}var R=t.showSafari&&create_if_block_1(0,t),x=t.showEdge&&old_browser_modal_svelte_create_if_block(0,t);function click_handler_1(t){e.hide()}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.k)("\n\n  "),i=Object(ht.i)("div"),s=Object(ht.i)("div"),o=Object(ht.i)("h2"),l=Object(ht.k)(P),u=Object(ht.k)("\n      "),f=Object(ht.i)("p"),_=Object(ht.k)(M),h=Object(ht.k)("\n\n      "),b=Object(ht.i)("div"),g=Object(ht.i)("a"),v=Object(ht.i)("img"),j=Object(ht.k)("\n\n          "),(y=Object(ht.i)("label")).textContent="Chrome",w=Object(ht.k)("\n\n        "),k=Object(ht.i)("a"),E=Object(ht.i)("img"),S=Object(ht.k)("\n\n          "),(N=Object(ht.i)("label")).textContent="Firefox",T=Object(ht.k)("\n\n        "),R&&R.c(),A=Object(ht.k)("\n\n        "),x&&x.c(),I=Object(ht.k)("\n\n    "),(L=Object(ht.i)("div")).innerHTML='<span class="icon-font-chess x"></span>',Object(ht.c)(a,"click",click_handler),a.className="core-modal-background",f.className="ie-word-wrap svelte-1o0fp2f",v.width="65",v.height="65",v.alt="Chrome",v.src=O=t.images.chrome,y.className="svelte-1o0fp2f",g.target="_blank",g.rel="noopener",g.className="browser svelte-1o0fp2f",g.href="https://www.google.com/intl/en/chrome/browser/",E.width="65",E.height="65",E.alt="Firefox",E.src=C=t.images.firefox,N.className="svelte-1o0fp2f",k.target="_blank",k.rel="noopener",k.className="browser svelte-1o0fp2f",k.href="http://www.mozilla.org/en-US/firefox/new/",b.className="browsers svelte-1o0fp2f",s.className="component svelte-1o0fp2f",Object(ht.c)(L,"click",click_handler_1),L.className="icon-font close",i.className="old-browser-modal-container svelte-1o0fp2f",n.className=t.modalClasses+" svelte-1o0fp2f"},m:function m(t,c){Object(ht.u)(t,n,c),Object(ht.d)(n,a),Object(ht.d)(n,r),Object(ht.d)(n,i),Object(ht.d)(i,s),Object(ht.d)(s,o),Object(ht.d)(o,l),Object(ht.d)(s,u),Object(ht.d)(s,f),Object(ht.d)(f,_),Object(ht.d)(s,h),Object(ht.d)(s,b),Object(ht.d)(b,g),Object(ht.d)(g,v),Object(ht.d)(g,j),Object(ht.d)(g,y),Object(ht.d)(b,w),Object(ht.d)(b,k),Object(ht.d)(k,E),Object(ht.d)(k,S),Object(ht.d)(k,N),Object(ht.d)(b,T),R&&R.m(b,null),Object(ht.d)(b,A),x&&x.m(b,null),e.refs.modal=s,Object(ht.d)(i,I),Object(ht.d)(i,L)},p:function p(e,t){e.translations&&P!==(P=t.translations.oldBrowserHeading)&&Object(ht.E)(l,P),e.translations&&M!==(M=t.translations.oldBrowserText)&&Object(ht.E)(_,M),e.images&&O!==(O=t.images.chrome)&&(v.src=O),e.images&&C!==(C=t.images.firefox)&&(E.src=C),t.showSafari?R?R.p(e,t):((R=create_if_block_1(0,t)).c(),R.m(b,A)):R&&(R.d(1),R=null),t.showEdge?x?x.p(e,t):((x=old_browser_modal_svelte_create_if_block(0,t)).c(),x.m(b,null)):x&&(x.d(1),x=null),e.modalClasses&&(n.className=t.modalClasses+" svelte-1o0fp2f")},d:function d(t){t&&Object(ht.p)(n),Object(ht.A)(a,"click",click_handler),R&&R.d(),x&&x.d(),e.refs.modal===s&&(e.refs.modal=null),Object(ht.A)(L,"click",click_handler_1)}}}(this,this._state),this.root._oncreate.push(function(){(function old_browser_modal_svelte_oncreate(){var e=Object(kt.b)(),t=Object(kt.c)();this.set({showEdge:e.name===kt.a.edge||t>=8,showSafari:e.name===kt.a.safari,timeFromNow:e.name===kt.a.ie?Et.ie:Et.default}),this.checkStorage()&&(this.setStorage(),this.show(),yt(this.refs.modal).then(this.hide.bind(this)))}).call(t),t.fire("update",{changed:Object(ht.f)({},t._state),current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Old_browser_modal_svelte.prototype,ht.x),Object(ht.e)(Old_browser_modal_svelte.prototype,Nt),Old_browser_modal_svelte.prototype._recompute=function _recompute(e,t){e.display&&this._differs(t.modalClasses,t.modalClasses=function modalClasses(e){var t=["core-modal-container"];return e.display&&t.push("is-active"),t.join(" ")}(t))&&(e.modalClasses=!0)};var Tt=Old_browser_modal_svelte,At=document.getElementById("old-browser-modal");Object(kt.f)()&&new Tt({target:At});var It=200,Lt={false:It,true:1500};window.chesscom=Object.assign(window.chesscom||{},{isLongDelay:!1});var Pt,Mt=function getNavDropdownDelay(){return Lt[window.chesscom.isLongDelay]},Rt=n(44),xt=f()({},_.o.COLLAPSED_NAV,function(){return document.querySelector(_.l.MAIN_NAV).classList.contains(_.d.COLLAPSED)}),Dt=function getTooltip(){return Pt||(Pt=document.querySelector(_.l.TOOLTIP)),Pt},Ut=function hideTooltip(){var e=Dt();e.classList.remove("show"),Object(Rt.c)(e)},Bt=function mouseEnterEvent(e){var t=e.target;t.setAttribute("mousing-over",!0),setTimeout(function(){t.getAttribute("mousing-over")&&function shouldShow(e){var t=e.getAttribute("data-tooltip-show");return!t||!xt[t]||xt[t]()}(t)&&function showTooltip(e){var t=e.target.getAttribute("data-tooltip-content"),n=e.target.getAttribute("data-tooltip-position")||"right",a=Dt();a.classList.add("show"),a.innerHTML=t,Object(Rt.b)(e.target,a,n,_.j.TOOLTIP_OFFSET)}(e)},_.n.TOOLTIP_SHOW_DELAY)},zt=function mouseLeaveEvent(e){e.target.removeAttribute("mousing-over"),Ut()};n(329);var $t={mouseEnterEvent:Bt,mouseLeaveEvent:zt};function User_connection_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(function user_connection_svelte_data(){return{connectionQuality:window.PubSub&&window.PubSub.client.getQuality(),connectionLevelTranslations:Fe.c}}(),e.data),this._intro=!0,this._fragment=function user_connection_svelte_create_main_fragment(e,t){var n,a,r,i,s,o,l,u,f,_;function mouseenter_handler(t){e.mouseEnterEvent(t)}function mouseleave_handler(t){e.mouseLeaveEvent(t)}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("span"),r=Object(ht.k)("\n  "),i=Object(ht.i)("span"),s=Object(ht.k)("\n  "),o=Object(ht.i)("span"),l=Object(ht.k)("\n  "),u=Object(ht.i)("span"),a.className="icon-font-chess signal svelte-nsk01h",i.className="icon-font-chess signal svelte-nsk01h",o.className="icon-font-chess signal svelte-nsk01h",u.className="icon-font-chess signal svelte-nsk01h",Object(ht.c)(n,"mouseenter",mouseenter_handler),Object(ht.c)(n,"mouseleave",mouseleave_handler),n.className=f="user-connection-tooltip-listener component signal-".concat(t.connectionQuality)+" svelte-nsk01h",n.dataset.tooltipContent=_=t.connectionLevelTranslations[t.connectionQuality]},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(n,r),Object(ht.d)(n,i),Object(ht.d)(n,s),Object(ht.d)(n,o),Object(ht.d)(n,l),Object(ht.d)(n,u)},p:function p(e,t){e.connectionQuality&&f!==(f="user-connection-tooltip-listener component signal-".concat(t.connectionQuality)+" svelte-nsk01h")&&(n.className=f),(e.connectionLevelTranslations||e.connectionQuality)&&_!==(_=t.connectionLevelTranslations[t.connectionQuality])&&(n.dataset.tooltipContent=_)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(n,"mouseenter",mouseenter_handler),Object(ht.A)(n,"mouseleave",mouseleave_handler)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}Object(ht.e)(User_connection_svelte.prototype,ht.x),Object(ht.e)(User_connection_svelte.prototype,$t);var Ft=User_connection_svelte;n(330);function panel_svelte_create_if_block(e,t){var n,a=new Ft({root:e.root,store:e.store});return{c:function c(){n=Object(ht.i)("div"),a._fragment.c(),n.className="panel-footer svelte-199tut6"},m:function m(e,t){Object(ht.u)(e,n,t),a._mount(n,null)},d:function d(e){e&&Object(ht.p)(n),a.destroy()}}}function Panel_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(function panel_svelte_data(){return{user:window.context.user,userConnectionAccess:O(j.NAVIGATION_USER_CONNECTION)}}(),e.data),this._intro=!0,this._slotted=e.slots||{},this._fragment=function panel_svelte_create_main_fragment(e,t){var n,a,r,i,s,o=e._slotted.default,l=t.userConnectionAccess&&panel_svelte_create_if_block(e);return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.k)("\n"),r=Object(ht.i)("div"),s=Object(ht.k)("\n  \n  "),l&&l.c(),n.className="theme-bg svelte-199tut6",r.className="shade svelte-199tut6"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.u)(e,a,t),Object(ht.u)(e,r,t),o&&(Object(ht.d)(r,o),Object(ht.d)(r,i||(i=Object(ht.h)()))),Object(ht.d)(r,s),l&&l.m(r,null)},p:function p(t,n){n.userConnectionAccess?l||((l=panel_svelte_create_if_block(e)).c(),l.m(r,null)):l&&(l.d(1),l=null)},d:function d(e){e&&(Object(ht.p)(n),Object(ht.p)(a),Object(ht.p)(r)),o&&Object(ht.y)(i,o),l&&l.d()}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Panel_svelte.prototype,ht.x);var Ht=Panel_svelte,Gt=n(75);function helpers_ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function helpers_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?helpers_ownKeys(n,!0).forEach(function(t){f()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):helpers_ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var qt=document.querySelector(_.l.MAIN_NAV),Vt=function iconClass(e){return["icon-font-chess",e].join(" ")},Wt=function isActiveLinkPrimaryViewClassList(e,t){var n=["options-list-item is-hoverable"];return e===t&&n.push("is-active"),n.join(" ")},Kt=function joinUrl(e){var t=function getMainNav(){return null==qt&&(qt=document.querySelector(_.l.MAIN_NAV)),qt}(),n=new URLSearchParams;return n.set("returnUrl",window.location.href),n.set("title","play_username"),n.set("username",e),t?"".concat(t.getAttribute(_.a.registerRoute),"?").concat(n.toString()):"".concat(le.registerRoute(window.location.href),"&").concat(n.toString())},Yt=function openChallengeIcon(e){var t=["icon-font-chess"];return e.seekGameTypeCode===q.b.CHESS_960?t.push("chess960"):t.push("daily"),t.join(" ")},Jt=function tournamentRelativeTime(e,t){var n=null,a=1e3*e,r=1e3*t,i=+new Date;if(r&&(n=a<=i),!n){var s=Math.abs(a-i);return{mins:Math.ceil(s/1e3/60),started:!1}}var o=Math.abs(r-i);return{mins:Math.ceil(o/1e3/60),started:!0}},Qt=function tournamentRelativeTimeLabel(e,t){var n=Jt(e,t);return n.started?W.tournamentMinsLeft(n.mins):W.tournamentStartsIn(n.mins)},Zt=function isFenPlayable(e){if("string"!=typeof e||!e.length)return!1;var t=window.JCE.getPositionInfo(e);return t&&t.isValid&&!t.gameOver},Xt=function styleColor(e){return"color:".concat(e)},en=function transformCustomLiveVariantToUIValues(e){var t=helpers_objectSpread({},e);return Object.keys(t).map(function(e){return 0===t[e]&&(t[e]=""),t}),t},tn=function transformGameToLiveUrl(e){var t=window.location.origin,n=new URLSearchParams,a=!1;e.opponent&&e.opponent.username&&(a=!0);var r=["".concat(e.timeVariant.mins,"m"),"".concat(e.timeVariant.secs,"s"),"".concat(e.timeVariant.inc,"i")].join("");return n.set("time",r),n.set("game",e.type.value),n.set("rated",e.isRated?"rated":"unrated"),0!==e.liveSettings.minRatingDelta?n.set("minrating",-Math.abs(e.liveSettings.minRatingDelta)):n.set("minrating",""),e.liveSettings.maxRatingDelta>0?n.set("maxrating",e.liveSettings.maxRatingDelta):n.set("maxrating",""),n.set("color",function getColorStringFromNumber(e){var t=parseInt(e,10);if(t>q.k.RANDOM){var n=Object.keys(q.k).find(function(e){return q.k[e]===t});if(n)return n.toLowerCase()}return null}(e.playerColor)||""),n.set("member",a?e.opponent.username:""),"".concat(t).concat(le.live,"?#").concat(n.toString())},nn=function transformLiveChallengeToPayload(e){var t=helpers_objectSpread({},e,{baseTime:60*e.timeControl.baseTime+e.timeControl.baseSeconds,minRequiredGameCount:0,takeback:!1,timeIncrement:e.timeControl.timeIncrement});return delete t.timeControl,t.color=function getColorNumberFromString(e){return e&&q.k[e.toUpperCase()]||q.k.RANDOM}(t.color),Object(Gt.b)(t)},an=function transformGameToPayload(e){var t={color:e.playerColor,gameType:e.type.value,isRated:e.isRated,minRequiredGameCount:e.minimumGamesPlayed,takeback:e.allowTakebacks};return e.avoidTimeOuts&&(t.maxTimeoutPercent=0),e.premiumMembersOnly&&(t.minMembershipLevel=se.g.gold),e.isDaily?(t.maxRatingDelta=e.dailySettings.maxRatingDelta,t.minRatingDelta=e.dailySettings.minRatingDelta,t.daysPerMove=e.timeVariant.days,e.moveSpeed&&(t.maxTimePerMove=e.moveSpeed)):(t.maxRatingDelta=e.liveSettings.maxRatingDelta,t.minRatingDelta=e.liveSettings.minRatingDelta,t.baseTime=60*e.timeVariant.mins+e.timeVariant.secs,t.timeIncrement=e.timeVariant.inc),""!==e.title&&(t.name=e.title),e.opponent&&(t.opponent=e.opponent.username),e.isDaily&&(e.setup===q.b.BOOK&&"number"==typeof e.startingPosition||e.setup===q.b.CUSTOM&&"string"==typeof e.startingPosition)&&(t.startingPosition=e.startingPosition),t=Object(Gt.b)(t)},rn=function userStatusClass(e){var t=e.is_online,n=["status"];return e.is_in_livechess?n.push("live"):t&&n.push("online"),n.join(" ")},sn=function validateCustomLiveTimeVariant(e){var t=Number(e.inc),n=Number(e.mins),a=Number(e.secs),r=!Number.isNaN(t);return!(Number.isNaN(n)||!(n>0)||Number.isNaN(a)||0!==a||!r)||!(Number.isNaN(a)||!(a>0)||Number.isNaN(n)||0!==n||!r)},on=n(45),cn=n.n(on),ln=[],un=function createDailyChallenge(e,t){return cn.a.post(le.dailyChallenge(e),t)},dn=function createShareableChallenge(e){return cn.a.post(le.createShareableChallengeUrl,e).then(function(e){return e.data})},fn=function createRandomDailyChallenge(e){return cn.a.post(le.randomDailyChallenge,e)},_n=function getJoinableTournaments(){return cn.a.get(le.joinableTournaments).then(function(e){return function transformTournaments(e){var t,n=(t={},f()(t,q.m.DAILY,[]),f()(t,q.m.LIVE,[]),t);return Object.keys(e).forEach(function(t){e[t].forEach(function(e){[q.m.DAILY].includes(t)?n[q.m.DAILY].push(helpers_objectSpread({type:t},e)):[q.m.LIVE_ARENA,q.m.LIVE_SWISS].includes(t)&&(t===q.m.LIVE_ARENA&&(e.name=W.arena(e.name)),n[q.m.LIVE].push(helpers_objectSpread({type:t},e)))})}),n[q.m.LIVE]=n[q.m.LIVE].sort(function(e,t){var n=Jt(e.start_time,e.end_time),a=Jt(t.start_time,t.end_time);return n.started&&!a.started?-1:!n.started&&a.started?1:n.mins-a.mins}),n}(e.data)})},hn=function getRecentOpponents(){return cn.a.get(le.recentOpponents).then(function(e){return e.data})},mn=function getStartingPositions(){return ln.length>0?Promise.resolve(ln):cn.a.get(le.startingPositions).then(function(e){var t=function sortStartingPositions(e){return e.sort(function(e,t){var n=/\([A-Z]\d\d\)/g,a=e.name.match(n),r=t.name.match(n);return a&&r?a[0]<r[0]?-1:1:0})}(e.data);return ln=t,t})},pn=function getUserRatings(){return cn.a.get(le.userRatings).then(function(e){return e.data})},bn=n(100);n(331);function challenge_options_svelte_ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}var gn={ratingChange:function ratingChange(e,t){var n=this.store.get(),a=n.isDaily?"dailySettings":"liveSettings";this.store.set(f()({},a,function challenge_options_svelte_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?challenge_options_svelte_ownKeys(n,!0).forEach(function(t){f()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):challenge_options_svelte_ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n[a],f()({},e,parseInt(t.target.value,10)))))},onCustomFenInput:function onCustomFenInput(e){var t=this.get().isCustomFenPlayable?e.target.value:null;this.store.set({startingPosition:t})},onSetupChange:function onSetupChange(e){var t,n=e.target.value;t=n===q.b.CHESS_960?{icon:q.g.CHESS_960,value:q.g.CHESS_960}:{icon:q.g.CHESS,value:q.g.CHESS},n===q.b.CUSTOM&&function(){if(!document.getElementById("jschessengine")){var e=window.Config.pathToJCE,t={id:"jschessengine"};return bn.a.insert(e,t)}Promise.resolve()}(),this.store.set({setup:n,type:t})}};function get_each_context_3(e,t,n){var a=Object.create(e);return a.option=t[n],a}function get_each_context_2(e,t,n){var a=Object.create(e);return a.position=t[n],a}function get_each_context_1(e,t,n){var a=Object.create(e);return a.setup=t[n],a}function get_each1_context(e,t,n){var a=Object.create(e);return a.adjustment=t[n],a}function get_each0_context(e,t,n){var a=Object.create(e);return a.adjustment=t[n],a}function get_each_context(e,t,n){var a=Object.create(e);return a.option=t[n],a}function create_if_block_13(e,t){var n,a,r,i,s,o,l,u=t.translations.title,f=!1;function input_input_handler(){f=!0,e.store.set({title:o.value}),f=!1}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.k)(u),i=Object(ht.k)("\n\n      "),s=Object(ht.i)("div"),o=Object(ht.i)("input"),a.className="form-label svelte-12yubzq",Object(ht.c)(o,"input",input_input_handler),o.placeholder=l=t.translations.optional,Object(ht.D)(o,"type","text"),s.className="form-input",n.className="form-group svelte-12yubzq"},m:function m(e,c){Object(ht.u)(e,n,c),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(n,i),Object(ht.d)(n,s),Object(ht.d)(s,o),o.value=t.$title},p:function p(e,t){e.translations&&u!==(u=t.translations.title)&&Object(ht.E)(r,u),!f&&e.$title&&(o.value=t.$title),e.translations&&l!==(l=t.translations.optional)&&(o.placeholder=l)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(o,"input",input_input_handler)}}}function create_if_block_12(e,t){for(var n,a,r,i,s,o,l,u,f=t.translations.iPlayAs,_=!1,h=t.iPlayAsOptions,b=[],g=0;g<h.length;g+=1)b[g]=create_each_block_5(e,get_each_context(t,h,g));function select_change_handler(){_=!0,e.store.set({playerColor:Object(ht.C)(o)}),_=!1}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.k)(f),i=Object(ht.k)("\n\n      "),s=Object(ht.i)("div"),o=Object(ht.i)("select");for(var d=0;d<b.length;d+=1)b[d].c();l=Object(ht.k)("\n\n        "),(u=Object(ht.i)("div")).innerHTML='<span class="icon-font-chess caret-down"></span>',a.className="form-label svelte-12yubzq",Object(ht.c)(o,"change",select_change_handler),"$playerColor"in t||e.root._beforecreate.push(select_change_handler),u.className="icon-font right-icon",s.className="form-select",n.className="form-group svelte-12yubzq"},m:function m(e,c){Object(ht.u)(e,n,c),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(n,i),Object(ht.d)(n,s),Object(ht.d)(s,o);for(var d=0;d<b.length;d+=1)b[d].m(o,null);Object(ht.B)(o,t.$playerColor),Object(ht.d)(s,l),Object(ht.d)(s,u)},p:function p(t,n){if(t.translations&&f!==(f=n.translations.iPlayAs)&&Object(ht.E)(r,f),t.iPlayAsOptions){h=n.iPlayAsOptions;for(var a=0;a<h.length;a+=1){var i=get_each_context(n,h,a);b[a]?b[a].p(t,i):(b[a]=create_each_block_5(e,i),b[a].c(),b[a].m(o,null))}for(;a<b.length;a+=1)b[a].d(1);b.length=h.length}!_&&t.$playerColor&&Object(ht.B)(o,n.$playerColor)},d:function d(e){e&&Object(ht.p)(n),Object(ht.m)(b,e),Object(ht.A)(o,"change",select_change_handler)}}}function create_each_block_5(e,t){var n,a,r,i=t.option.label;return{c:function c(){n=Object(ht.i)("option"),a=Object(ht.k)(i),n.__value=r=t.option.value,n.value=n.__value},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.iPlayAsOptions&&i!==(i=t.option.label)&&Object(ht.E)(a,i),e.iPlayAsOptions&&r!==(r=t.option.value)&&(n.__value=r),n.value=n.__value},d:function d(e){e&&Object(ht.p)(n)}}}function create_if_block_11(e,t){for(var n,a,r,i,s,o,l,u,f,_,h,b,g,v,O,j,y=t.translations.opponentRating,w=!1,k=!1,E=t.opponentRatingAdjustments,C=[],S=0;S<E.length;S+=1)C[S]=create_each_block_4(e,get_each0_context(t,E,S));function select0_change_handler(){w=!0,e.set({minRating:Object(ht.C)(l)}),w=!1}function change_handler(t){e.ratingChange("minRatingDelta",t)}var N=t.opponentRatingAdjustments,T=[];for(S=0;S<N.length;S+=1)T[S]=create_each_block_3(e,get_each1_context(t,N,S));function select1_change_handler(){k=!0,e.set({maxRating:Object(ht.C)(v)}),k=!1}function change_handler_1(t){e.ratingChange("maxRatingDelta",t)}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.k)(y),i=Object(ht.k)("\n\n      "),s=Object(ht.i)("div"),o=Object(ht.i)("div"),l=Object(ht.i)("select");for(var d=0;d<C.length;d+=1)C[d].c();u=Object(ht.k)("\n\n          "),(f=Object(ht.i)("div")).innerHTML='<span class="icon-font-chess caret-down"></span>',_=Object(ht.k)("\n\n        "),(h=Object(ht.i)("strong")).textContent="< >",b=Object(ht.k)("\n\n        "),g=Object(ht.i)("div"),v=Object(ht.i)("select");for(d=0;d<T.length;d+=1)T[d].c();O=Object(ht.k)("\n\n          "),(j=Object(ht.i)("div")).innerHTML='<span class="icon-font-chess caret-down"></span>',a.className="form-label svelte-12yubzq",Object(ht.c)(l,"change",select0_change_handler),"minRating"in t||e.root._beforecreate.push(select0_change_handler),Object(ht.c)(l,"change",change_handler),f.className="icon-font right-icon",o.className="form-select svelte-12yubzq",h.className="svelte-12yubzq",Object(ht.c)(v,"change",select1_change_handler),"maxRating"in t||e.root._beforecreate.push(select1_change_handler),Object(ht.c)(v,"change",change_handler_1),j.className="icon-font right-icon",g.className="form-select svelte-12yubzq",s.className="opponent-rating svelte-12yubzq",n.className="form-group svelte-12yubzq"},m:function m(e,c){Object(ht.u)(e,n,c),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(n,i),Object(ht.d)(n,s),Object(ht.d)(s,o),Object(ht.d)(o,l);for(var d=0;d<C.length;d+=1)C[d].m(l,null);Object(ht.B)(l,t.minRating),Object(ht.d)(o,u),Object(ht.d)(o,f),Object(ht.d)(s,_),Object(ht.d)(s,h),Object(ht.d)(s,b),Object(ht.d)(s,g),Object(ht.d)(g,v);for(d=0;d<T.length;d+=1)T[d].m(v,null);Object(ht.B)(v,t.maxRating),Object(ht.d)(g,O),Object(ht.d)(g,j)},p:function p(t,n){if(t.translations&&y!==(y=n.translations.opponentRating)&&Object(ht.E)(r,y),t.opponentRatingAdjustments){E=n.opponentRatingAdjustments;for(var a=0;a<E.length;a+=1){var i=get_each0_context(n,E,a);C[a]?C[a].p(t,i):(C[a]=create_each_block_4(e,i),C[a].c(),C[a].m(l,null))}for(;a<C.length;a+=1)C[a].d(1);C.length=E.length}if(!w&&t.minRating&&Object(ht.B)(l,n.minRating),t.opponentRatingAdjustments){N=n.opponentRatingAdjustments;for(a=0;a<N.length;a+=1){var s=get_each1_context(n,N,a);T[a]?T[a].p(t,s):(T[a]=create_each_block_3(e,s),T[a].c(),T[a].m(v,null))}for(;a<T.length;a+=1)T[a].d(1);T.length=N.length}!k&&t.maxRating&&Object(ht.B)(v,n.maxRating)},d:function d(e){e&&Object(ht.p)(n),Object(ht.m)(C,e),Object(ht.A)(l,"change",select0_change_handler),Object(ht.A)(l,"change",change_handler),Object(ht.m)(T,e),Object(ht.A)(v,"change",select1_change_handler),Object(ht.A)(v,"change",change_handler_1)}}}function create_each_block_4(e,t){var n,a,r,i,s="Any"===t.adjustment.label?"":"-",o=t.adjustment.label;return{c:function c(){n=Object(ht.i)("option"),a=Object(ht.k)(s),r=Object(ht.k)(o),n.__value=i=t.adjustment.value,n.value=n.__value},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(n,r)},p:function p(e,t){e.opponentRatingAdjustments&&s!==(s="Any"===t.adjustment.label?"":"-")&&Object(ht.E)(a,s),e.opponentRatingAdjustments&&o!==(o=t.adjustment.label)&&Object(ht.E)(r,o),e.opponentRatingAdjustments&&i!==(i=t.adjustment.value)&&(n.__value=i),n.value=n.__value},d:function d(e){e&&Object(ht.p)(n)}}}function create_each_block_3(e,t){var n,a,r,i,s="Any"===t.adjustment.label?"":"+",o=t.adjustment.label;return{c:function c(){n=Object(ht.i)("option"),a=Object(ht.k)(s),r=Object(ht.k)(o),n.__value=i=t.adjustment.value,n.value=n.__value},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(n,r)},p:function p(e,t){e.opponentRatingAdjustments&&s!==(s="Any"===t.adjustment.label?"":"+")&&Object(ht.E)(a,s),e.opponentRatingAdjustments&&o!==(o=t.adjustment.label)&&Object(ht.E)(r,o),e.opponentRatingAdjustments&&i!==(i=t.adjustment.value)&&(n.__value=i),n.value=n.__value},d:function d(e){e&&Object(ht.p)(n)}}}function create_if_block_7(e,t){for(var n,a,r,i,s,o,l,u,f,_,h=t.translations.setup,b=!1,g=t.challengeSetupOptions,v=[],O=0;O<g.length;O+=1)v[O]=create_each_block_2(e,get_each_context_1(t,g,O));function select_change_handler(){b=!0,e.store.set({setup:Object(ht.C)(o)}),b=!1}function change_handler(t){e.onSetupChange(t)}var j=(t.$setup===t.challengeSetups.BOOK||t.$setup===t.challengeSetups.CUSTOM)&&create_if_block_8(e,t);return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.k)(h),i=Object(ht.k)("\n\n      "),s=Object(ht.i)("div"),o=Object(ht.i)("select");for(var d=0;d<v.length;d+=1)v[d].c();l=Object(ht.k)("\n\n        "),(u=Object(ht.i)("div")).innerHTML='<span class="icon-font-chess caret-down"></span>',f=Object(ht.k)("\n\n    "),j&&j.c(),_=Object(ht.h)(),a.className="form-label svelte-12yubzq",Object(ht.c)(o,"change",select_change_handler),"$setup"in t||e.root._beforecreate.push(select_change_handler),Object(ht.c)(o,"change",change_handler),u.className="icon-font right-icon",s.className="form-select",n.className="form-group svelte-12yubzq"},m:function m(e,c){Object(ht.u)(e,n,c),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(n,i),Object(ht.d)(n,s),Object(ht.d)(s,o);for(var d=0;d<v.length;d+=1)v[d].m(o,null);Object(ht.B)(o,t.$setup),Object(ht.d)(s,l),Object(ht.d)(s,u),Object(ht.u)(e,f,c),j&&j.m(e,c),Object(ht.u)(e,_,c)},p:function p(t,n){if(t.translations&&h!==(h=n.translations.setup)&&Object(ht.E)(r,h),t.challengeSetupOptions){g=n.challengeSetupOptions;for(var a=0;a<g.length;a+=1){var i=get_each_context_1(n,g,a);v[a]?v[a].p(t,i):(v[a]=create_each_block_2(e,i),v[a].c(),v[a].m(o,null))}for(;a<v.length;a+=1)v[a].d(1);v.length=g.length}!b&&t.$setup&&Object(ht.B)(o,n.$setup),n.$setup===n.challengeSetups.BOOK||n.$setup===n.challengeSetups.CUSTOM?j?j.p(t,n):((j=create_if_block_8(e,n)).c(),j.m(_.parentNode,_)):j&&(j.d(1),j=null)},d:function d(e){e&&Object(ht.p)(n),Object(ht.m)(v,e),Object(ht.A)(o,"change",select_change_handler),Object(ht.A)(o,"change",change_handler),e&&Object(ht.p)(f),j&&j.d(e),e&&Object(ht.p)(_)}}}function create_each_block_2(e,t){var n,a,r,i=t.setup.label;return{c:function c(){n=Object(ht.i)("option"),a=Object(ht.k)(i),n.__value=r=t.setup.value,n.value=n.__value},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.challengeSetupOptions&&i!==(i=t.setup.label)&&Object(ht.E)(a,i),e.challengeSetupOptions&&r!==(r=t.setup.value)&&(n.__value=r),n.value=n.__value},d:function d(e){e&&Object(ht.p)(n)}}}function create_if_block_8(e,t){var n,a,r,i,s,o,l=t.$setup===t.challengeSetups.BOOK&&create_if_block_10(e,t),u=t.$setup===t.challengeSetups.CUSTOM&&create_if_block_9(e,t);return{c:function c(){n=Object(ht.i)("div"),l&&l.c(),a=Object(ht.k)("\n\n        "),u&&u.c(),r=Object(ht.k)("\n\n        "),i=Object(ht.i)("div"),(s=Object(ht.i)("img")).alt=o=t.translations.chessboardPreview,s.src=t.dynBoardImageUrl,s.className="svelte-12yubzq",i.className="board-preview svelte-12yubzq",n.className="form-group is-full-width svelte-12yubzq"},m:function m(e,t){Object(ht.u)(e,n,t),l&&l.m(n,null),Object(ht.d)(n,a),u&&u.m(n,null),Object(ht.d)(n,r),Object(ht.d)(n,i),Object(ht.d)(i,s)},p:function p(t,i){i.$setup===i.challengeSetups.BOOK?l?l.p(t,i):((l=create_if_block_10(e,i)).c(),l.m(n,a)):l&&(l.d(1),l=null),i.$setup===i.challengeSetups.CUSTOM?u?u.p(t,i):((u=create_if_block_9(e,i)).c(),u.m(n,r)):u&&(u.d(1),u=null),t.translations&&o!==(o=i.translations.chessboardPreview)&&(s.alt=o),t.dynBoardImageUrl&&(s.src=i.dynBoardImageUrl)},d:function d(e){e&&Object(ht.p)(n),l&&l.d(),u&&u.d()}}}function create_if_block_10(e,t){for(var n,a,r,i,s,o,l=t.translations.choose,u=!1,f=t.startingPositions,_=[],h=0;h<f.length;h+=1)_[h]=create_each_block_1(e,get_each_context_2(t,f,h));function select_change_handler(){u=!0,e.store.set({startingPosition:Object(ht.C)(a)}),u=!1}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("select"),r=Object(ht.i)("option"),i=Object(ht.k)(l);for(var u=0;u<_.length;u+=1)_[u].c();s=Object(ht.k)("\n\n            "),(o=Object(ht.i)("div")).innerHTML='<span class="icon-font-chess caret-down"></span>',r.__value="",r.value=r.__value,Object(ht.c)(a,"change",select_change_handler),"$startingPosition"in t||e.root._beforecreate.push(select_change_handler),o.className="icon-font right-icon",n.className="form-select"},m:function m(e,c){Object(ht.u)(e,n,c),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(r,i);for(var l=0;l<_.length;l+=1)_[l].m(a,null);Object(ht.B)(a,t.$startingPosition),Object(ht.d)(n,s),Object(ht.d)(n,o)},p:function p(t,n){if(t.translations&&l!==(l=n.translations.choose)&&Object(ht.E)(i,l),t.startingPositions){f=n.startingPositions;for(var r=0;r<f.length;r+=1){var s=get_each_context_2(n,f,r);_[r]?_[r].p(t,s):(_[r]=create_each_block_1(e,s),_[r].c(),_[r].m(a,null))}for(;r<_.length;r+=1)_[r].d(1);_.length=f.length}!u&&t.$startingPosition&&Object(ht.B)(a,n.$startingPosition)},d:function d(e){e&&Object(ht.p)(n),Object(ht.m)(_,e),Object(ht.A)(a,"change",select_change_handler)}}}function create_each_block_1(e,t){var n,a,r,i=t.position.name;return{c:function c(){n=Object(ht.i)("option"),a=Object(ht.k)(i),n.__value=r=t.position.id,n.value=n.__value},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.startingPositions&&i!==(i=t.position.name)&&Object(ht.E)(a,i),e.startingPositions&&r!==(r=t.position.id)&&(n.__value=r),n.value=n.__value},d:function d(e){e&&Object(ht.p)(n)}}}function create_if_block_9(e,t){var n,a,r=!1;function input_input_handler(){r=!0,e.set({customFen:a.value}),r=!1}function input_handler(t){e.onCustomFenInput(t)}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("input"),Object(ht.c)(a,"input",input_input_handler),Object(ht.c)(a,"input",input_handler),Object(ht.D)(a,"type","text"),n.className="form-input"},m:function m(e,r){Object(ht.u)(e,n,r),Object(ht.d)(n,a),a.value=t.customFen},p:function p(e,t){!r&&e.customFen&&(a.value=t.customFen)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(a,"input",input_input_handler),Object(ht.A)(a,"input",input_handler)}}}function create_if_block_4(e,t){var n,a,r=null===t.$opponent&&create_if_block_6(e,t),i=null===t.$opponent&&create_if_block_5(e,t);return{c:function c(){r&&r.c(),n=Object(ht.k)("\n\n    "),i&&i.c(),a=Object(ht.h)()},m:function m(e,t){r&&r.m(e,t),Object(ht.u)(e,n,t),i&&i.m(e,t),Object(ht.u)(e,a,t)},p:function p(t,s){null===s.$opponent?r?r.p(t,s):((r=create_if_block_6(e,s)).c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null),null===s.$opponent?i?i.p(t,s):((i=create_if_block_5(e,s)).c(),i.m(a.parentNode,a)):i&&(i.d(1),i=null)},d:function d(e){r&&r.d(e),e&&Object(ht.p)(n),i&&i.d(e),e&&Object(ht.p)(a)}}}function create_if_block_6(e,t){for(var n,a,r,i,s,o,l,u,f=t.translations.moveSpeed,_=!1,h=t.moveSpeedOptions,b=[],g=0;g<h.length;g+=1)b[g]=create_each_block(e,get_each_context_3(t,h,g));function select_change_handler(){_=!0,e.store.set({moveSpeed:Object(ht.C)(o)}),_=!1}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.k)(f),i=Object(ht.k)("\n\n        "),s=Object(ht.i)("div"),o=Object(ht.i)("select");for(var d=0;d<b.length;d+=1)b[d].c();l=Object(ht.k)("\n\n          "),(u=Object(ht.i)("div")).innerHTML='<span class="icon-font-chess caret-down"></span>',a.className="form-label svelte-12yubzq",Object(ht.c)(o,"change",select_change_handler),"$moveSpeed"in t||e.root._beforecreate.push(select_change_handler),u.className="icon-font right-icon",s.className="form-select",n.className="form-group svelte-12yubzq"},m:function m(e,c){Object(ht.u)(e,n,c),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(n,i),Object(ht.d)(n,s),Object(ht.d)(s,o);for(var d=0;d<b.length;d+=1)b[d].m(o,null);Object(ht.B)(o,t.$moveSpeed),Object(ht.d)(s,l),Object(ht.d)(s,u)},p:function p(t,n){if(t.translations&&f!==(f=n.translations.moveSpeed)&&Object(ht.E)(r,f),t.moveSpeedOptions){h=n.moveSpeedOptions;for(var a=0;a<h.length;a+=1){var i=get_each_context_3(n,h,a);b[a]?b[a].p(t,i):(b[a]=create_each_block(e,i),b[a].c(),b[a].m(o,null))}for(;a<b.length;a+=1)b[a].d(1);b.length=h.length}!_&&t.$moveSpeed&&Object(ht.B)(o,n.$moveSpeed)},d:function d(e){e&&Object(ht.p)(n),Object(ht.m)(b,e),Object(ht.A)(o,"change",select_change_handler)}}}function create_each_block(e,t){var n,a,r,i=t.option.label;return{c:function c(){n=Object(ht.i)("option"),a=Object(ht.k)(i),n.__value=r=t.option.value,n.value=n.__value},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.moveSpeedOptions&&i!==(i=t.option.label)&&Object(ht.E)(a,i),e.moveSpeedOptions&&r!==(r=t.option.value)&&(n.__value=r),n.value=n.__value},d:function d(e){e&&Object(ht.p)(n)}}}function create_if_block_5(e,t){var n,a,r,i,s,o,l=t.translations.minimumGamesPlayed,u=!1;function input_input_handler(){u=!0,e.store.set({minimumGamesPlayed:o.value}),u=!1}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.k)(l),i=Object(ht.k)("\n\n        "),s=Object(ht.i)("div"),o=Object(ht.i)("input"),a.className="form-label svelte-12yubzq",Object(ht.c)(o,"input",input_input_handler),Object(ht.D)(o,"type","text"),s.className="form-input",n.className="form-group svelte-12yubzq"},m:function m(e,c){Object(ht.u)(e,n,c),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(n,i),Object(ht.d)(n,s),Object(ht.d)(s,o),o.value=t.$minimumGamesPlayed},p:function p(e,t){e.translations&&l!==(l=t.translations.minimumGamesPlayed)&&Object(ht.E)(r,l),!u&&e.$minimumGamesPlayed&&(o.value=t.$minimumGamesPlayed)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(o,"input",input_input_handler)}}}function challenge_options_svelte_create_if_block(e,t){var n,a,r,i=!t.$isRated&&create_if_block_3(e,t),s=null===t.$opponent&&create_if_block_2(e,t),o=null===t.$opponent&&challenge_options_svelte_create_if_block_1(e,t);return{c:function c(){n=Object(ht.i)("div"),i&&i.c(),a=Object(ht.k)("\n\n    "),s&&s.c(),r=Object(ht.k)("\n\n    "),o&&o.c(),n.className="options-list svelte-12yubzq"},m:function m(e,t){Object(ht.u)(e,n,t),i&&i.m(n,null),Object(ht.d)(n,a),s&&s.m(n,null),Object(ht.d)(n,r),o&&o.m(n,null)},p:function p(t,c){c.$isRated?i&&(i.d(1),i=null):i?i.p(t,c):((i=create_if_block_3(e,c)).c(),i.m(n,a)),null===c.$opponent?s?s.p(t,c):((s=create_if_block_2(e,c)).c(),s.m(n,r)):s&&(s.d(1),s=null),null===c.$opponent?o?o.p(t,c):((o=challenge_options_svelte_create_if_block_1(e,c)).c(),o.m(n,null)):o&&(o.d(1),o=null)},d:function d(e){e&&Object(ht.p)(n),i&&i.d(),s&&s.d(),o&&o.d()}}}function create_if_block_3(e,t){var n,a,r,i,s,o,l,u,f=t.translations.allowTakebacks;function input_change_handler(){e.store.set({allowTakebacks:o.checked})}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.k)(f),i=Object(ht.k)("\n\n        "),s=Object(ht.i)("div"),o=Object(ht.i)("input"),l=Object(ht.k)("\n\n          "),(u=Object(ht.i)("label")).innerHTML='<div class="handle"></div>',a.className="new-game-label svelte-12yubzq",Object(ht.c)(o,"change",input_change_handler),o.className="checkbox",o.id="allow-takebacks",Object(ht.D)(o,"type","checkbox"),u.className="track",u.htmlFor="allow-takebacks",s.className="form-switch",n.className="options-list-item svelte-12yubzq"},m:function m(e,c){Object(ht.u)(e,n,c),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(n,i),Object(ht.d)(n,s),Object(ht.d)(s,o),o.checked=t.$allowTakebacks,Object(ht.d)(s,l),Object(ht.d)(s,u)},p:function p(e,t){e.translations&&f!==(f=t.translations.allowTakebacks)&&Object(ht.E)(r,f),e.$allowTakebacks&&(o.checked=t.$allowTakebacks)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(o,"change",input_change_handler)}}}function create_if_block_2(e,t){var n,a,r,i,s,o,l,u,f=t.translations.avoidTimeOuts;function input_change_handler(){e.store.set({avoidTimeOuts:o.checked})}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.k)(f),i=Object(ht.k)("\n\n        "),s=Object(ht.i)("div"),o=Object(ht.i)("input"),l=Object(ht.k)("\n\n          "),(u=Object(ht.i)("label")).innerHTML='<div class="handle"></div>',a.className="new-game-label svelte-12yubzq",Object(ht.c)(o,"change",input_change_handler),o.className="checkbox",o.id="time-outs",Object(ht.D)(o,"type","checkbox"),u.className="track",u.htmlFor="time-outs",s.className="form-switch",n.className="options-list-item svelte-12yubzq"},m:function m(e,c){Object(ht.u)(e,n,c),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(n,i),Object(ht.d)(n,s),Object(ht.d)(s,o),o.checked=t.$avoidTimeOuts,Object(ht.d)(s,l),Object(ht.d)(s,u)},p:function p(e,t){e.translations&&f!==(f=t.translations.avoidTimeOuts)&&Object(ht.E)(r,f),e.$avoidTimeOuts&&(o.checked=t.$avoidTimeOuts)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(o,"change",input_change_handler)}}}function challenge_options_svelte_create_if_block_1(e,t){var n,a,r,i,s,o,l,u,f=t.translations.premiumMembersOnly;function input_change_handler(){e.store.set({premiumMembersOnly:o.checked})}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.k)(f),i=Object(ht.k)("\n\n        "),s=Object(ht.i)("div"),o=Object(ht.i)("input"),l=Object(ht.k)("\n\n          "),(u=Object(ht.i)("label")).innerHTML='<div class="handle"></div>',a.className="new-game-label svelte-12yubzq",Object(ht.c)(o,"change",input_change_handler),o.className="checkbox",o.id="premium-members",Object(ht.D)(o,"type","checkbox"),u.className="track",u.htmlFor="premium-members",s.className="form-switch",n.className="options-list-item svelte-12yubzq"},m:function m(e,c){Object(ht.u)(e,n,c),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(n,i),Object(ht.d)(n,s),Object(ht.d)(s,o),o.checked=t.$premiumMembersOnly,Object(ht.d)(s,l),Object(ht.d)(s,u)},p:function p(e,t){e.translations&&f!==(f=t.translations.premiumMembersOnly)&&Object(ht.E)(r,f),e.$premiumMembersOnly&&(o.checked=t.$premiumMembersOnly)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(o,"change",input_change_handler)}}}function Challenge_options_svelte(e){var t=this;Object(ht.t)(this,e),this._state=Object(ht.e)(Object(ht.e)(this.store._init(["setup","startingPosition","dailySettings","isDaily","liveSettings","isRated","opponent","title","playerColor","moveSpeed","minimumGamesPlayed","allowTakebacks","avoidTimeOuts","premiumMembersOnly"]),function challenge_options_svelte_data(){return{challengeSetups:q.b,challengeSetupOptions:K,customFen:"",iPlayAsOptions:J,moveSpeedOptions:Z,opponentRatingAdjustments:X,startingPositions:[],translations:W}}()),e.data),this.store._add(this,["setup","startingPosition","dailySettings","isDaily","liveSettings","isRated","opponent","title","playerColor","moveSpeed","minimumGamesPlayed","allowTakebacks","avoidTimeOuts","premiumMembersOnly"]),this._recompute({customFen:1,$setup:1,$startingPosition:1,isCustomFenPlayable:1,startingPositions:1,$dailySettings:1,$isDaily:1,$liveSettings:1,$isRated:1,$opponent:1},this._state),this._intro=!0,this._handlers.destroy=[ht.z],this._fragment=function challenge_options_svelte_create_main_fragment(e,t){var n,a,r,i,s,o,l,u=t.$isDaily&&create_if_block_13(e,t),f=t.showIPlayAs&&create_if_block_12(e,t),_=null===t.$opponent&&null!==t.userRating&&create_if_block_11(e,t),h=t.$isDaily&&create_if_block_7(e,t),b=t.$isDaily&&create_if_block_4(e,t),g=t.$isDaily&&challenge_options_svelte_create_if_block(e,t);return{c:function c(){n=Object(ht.i)("div"),u&&u.c(),a=Object(ht.k)("\n\n  "),f&&f.c(),r=Object(ht.k)("\n\n  "),_&&_.c(),i=Object(ht.k)("\n\n  "),h&&h.c(),s=Object(ht.k)("\n\n  "),b&&b.c(),o=Object(ht.k)("\n\n"),g&&g.c(),l=Object(ht.h)(),n.className="challenge-options svelte-12yubzq"},m:function m(e,t){Object(ht.u)(e,n,t),u&&u.m(n,null),Object(ht.d)(n,a),f&&f.m(n,null),Object(ht.d)(n,r),_&&_.m(n,null),Object(ht.d)(n,i),h&&h.m(n,null),Object(ht.d)(n,s),b&&b.m(n,null),Object(ht.u)(e,o,t),g&&g.m(e,t),Object(ht.u)(e,l,t)},p:function p(t,o){o.$isDaily?u?u.p(t,o):((u=create_if_block_13(e,o)).c(),u.m(n,a)):u&&(u.d(1),u=null),o.showIPlayAs?f?f.p(t,o):((f=create_if_block_12(e,o)).c(),f.m(n,r)):f&&(f.d(1),f=null),null===o.$opponent&&null!==o.userRating?_?_.p(t,o):((_=create_if_block_11(e,o)).c(),_.m(n,i)):_&&(_.d(1),_=null),o.$isDaily?h?h.p(t,o):((h=create_if_block_7(e,o)).c(),h.m(n,s)):h&&(h.d(1),h=null),o.$isDaily?b?b.p(t,o):((b=create_if_block_4(e,o)).c(),b.m(n,null)):b&&(b.d(1),b=null),o.$isDaily?g?g.p(t,o):((g=challenge_options_svelte_create_if_block(e,o)).c(),g.m(l.parentNode,l)):g&&(g.d(1),g=null)},d:function d(e){e&&Object(ht.p)(n),u&&u.d(),f&&f.d(),_&&_.d(),h&&h.d(),b&&b.d(),e&&Object(ht.p)(o),g&&g.d(e),e&&Object(ht.p)(l)}}}(this,this._state),this.root._oncreate.push(function(){(function challenge_options_svelte_oncreate(){var e=this,t=this.store.get().startingPosition;this.set({customFen:t}),mn().then(function(t){e.set({startingPositions:t})})}).call(t),t.fire("update",{changed:Object(ht.f)({},t._state),current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Challenge_options_svelte.prototype,ht.x),Object(ht.e)(Challenge_options_svelte.prototype,gn),Challenge_options_svelte.prototype._recompute=function _recompute(e,t){e.customFen&&this._differs(t.isCustomFenPlayable,t.isCustomFenPlayable=function challenge_options_svelte_isCustomFenPlayable(e){var t=e.customFen;return""!==t&&Zt(t)}(t))&&(e.isCustomFenPlayable=!0),(e.$setup||e.$startingPosition||e.customFen||e.isCustomFenPlayable||e.startingPositions)&&this._differs(t.dynBoardImageUrl,t.dynBoardImageUrl=function dynBoardImageUrl(e){var t=e.$setup,n=e.$startingPosition,a=e.customFen,r=e.isCustomFenPlayable,i=e.startingPositions,s=q.h;if(t===q.b.BOOK&&"number"==typeof n){var o=i.find(function(e){return e.id===n});s=o&&o.fen}return t===q.b.CUSTOM&&(s=r?a:q.e),le.dynBoardImage(s)}(t))&&(e.dynBoardImageUrl=!0),(e.$dailySettings||e.$isDaily||e.$liveSettings)&&(this._differs(t.maxRating,t.maxRating=function maxRating(e){var t=e.$dailySettings,n=e.$isDaily,a=e.$liveSettings;return n?t.maxRatingDelta:a.maxRatingDelta}(t))&&(e.maxRating=!0),this._differs(t.minRating,t.minRating=function minRating(e){var t=e.$dailySettings,n=e.$isDaily,a=e.$liveSettings;return n?t.minRatingDelta:a.minRatingDelta}(t))&&(e.minRating=!0)),(e.$isRated||e.$opponent)&&this._differs(t.showIPlayAs,t.showIPlayAs=function showIPlayAs(e){var t=e.$isRated,n=e.$opponent;return!t||null!==n}(t))&&(e.showIPlayAs=!0)};var vn=Challenge_options_svelte;n(332);function game_times_svelte_ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function isActiveDailyOptionClassList(e,t,n){var a=["button"];return t&&n.days===e.days&&a.push("is-active"),a.join(" ")}function isActiveLiveOptionClassList(e,t,n){var a=["button"];return t&&n.inc===e.inc&&n.mins===e.mins&&n.secs===e.secs&&a.push("is-active"),a.join(" ")}var On={clearCustomLiveTimeVariant:function clearCustomLiveTimeVariant(){this.set({customLiveVariant:{inc:"",mins:"",secs:""},showTimeInputs:!1}),this.store.set({isUsingCustomLiveTimeVariant:!1})},onCustomIncInput:function onCustomIncInput(){var e=this.get().customLiveVariant,t=sn(e);this.set({validCustomLiveVariant:t})},onCustomMinInput:function onCustomMinInput(){var e=this.get().customLiveVariant;e.mins&&e.secs&&(e.secs=null);var t=sn(e);this.set({customLiveVariant:e,validCustomLiveVariant:t})},onCustomSecInput:function onCustomSecInput(){var e=this.get().customLiveVariant;e.mins&&e.secs&&(e.mins=null);var t=sn(e);this.set({customLiveVariant:e,validCustomLiveVariant:t})},saveCutomTime:function saveCutomTime(){var e=this.get().customLiveVariant;if(sn(e)){var t=function handleCustomLiveTimeVariant(e){var t={inc:0,mins:0,secs:0},n=Number(e.inc),a=Number(e.mins),r=Number(e.secs);return!Number.isNaN(a)&&a>0?t.mins=a<=q.i.MINS?a:q.i.MINS:!Number.isNaN(r)&&r>0&&(t.secs=r<=q.i.SECS?r:q.i.SECS),!Number.isNaN(n)&&n>0&&(t.inc=n<=q.i.INC?n:0),t}(e);t&&(this.set({customLiveVariant:en(t),validCustomLiveVariant:!0}),this.store.set({isUsingCustomLiveTimeVariant:!0}),this.setLiveOptions(function game_times_svelte_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?game_times_svelte_ownKeys(n,!0).forEach(function(t){f()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):game_times_svelte_ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{clear:!1})))}},setDailyOption:function setDailyOption(e){var t=e.days,n=this.store.get(),a=n.isLive,r=n.type;if(a){var i=Y.filter(function(e){return e.isDaily}).find(function(e){return e.value===r.value});i&&r.value===q.g.CHESS_960&&this.store.set({type:{icon:"chess960",value:q.g.CHESS_960}}),i||this.store.set({type:{icon:"chess-board",value:q.g.CHESS}})}this.store.set({isDaily:!0,isLive:!1,showGameTimes:!1,timeVariant:{days:t}}),this.clearCustomLiveTimeVariant()},setLiveOptions:function setLiveOptions(e){var t=e.clear,n=void 0===t||t,a=e.inc,r=e.mins,i=e.secs,s=this.store.get(),o=s.isDaily,c=s.type;if(o){var l=Y.filter(function(e){return e.isLive}).find(function(e){return e.value===c.value});l&&c.value===q.g.CHESS_960&&this.store.set({type:{icon:"live960",value:q.g.CHESS_960}}),l||this.store.set({type:{icon:"chess-board",value:q.g.CHESS}})}this.store.set({isDaily:!1,isLive:!0,showGameTimes:!1,timeVariant:{inc:a,mins:r,secs:i}}),n&&this.clearCustomLiveTimeVariant()},showCustomTimeInputs:function showCustomTimeInputs(){this.set({showTimeInputs:!0})},showMoreTimes:function showMoreTimes(){this.set({showMoreTimes:!0})}};function game_times_svelte_click_handler_1(e){var t=this._svelte,n=t.component,a=t.ctx;n.setDailyOption(a.option)}function game_times_svelte_get_each1_context(e,t,n){var a=Object.create(e);return a.option=t[n],a}function game_times_svelte_click_handler(e){var t=this._svelte,n=t.component,a=t.ctx;n.setLiveOptions(a.option)}function game_times_svelte_get_each0_context(e,t,n){var a=Object.create(e);return a.option=t[n],a}function game_times_svelte_create_each_block_1(e,t){var n,a,r,i=t.option.label;return{c:function c(){n=Object(ht.i)("button"),a=Object(ht.k)(i),n._svelte={component:e,ctx:t},Object(ht.c)(n,"click",game_times_svelte_click_handler),n.className=r=isActiveLiveOptionClassList(t.option,t.$isLive,t.$timeVariant)+" svelte-d63ztr"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,s){t=s,e.slicedLiveChallengeTimeOptions&&i!==(i=t.option.label)&&Object(ht.E)(a,i),n._svelte.ctx=t,(e.slicedLiveChallengeTimeOptions||e.$isLive||e.$timeVariant)&&r!==(r=isActiveLiveOptionClassList(t.option,t.$isLive,t.$timeVariant)+" svelte-d63ztr")&&(n.className=r)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(n,"click",game_times_svelte_click_handler)}}}function create_else_block(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g=!1,v=!1,O=!1,j=t.translations.ok;function input0_input_handler(){g=!0,t.customLiveVariant.mins=a.value,e.set({customLiveVariant:t.customLiveVariant}),g=!1}function input_handler(t){e.onCustomMinInput()}function input1_input_handler(){v=!0,t.customLiveVariant.secs=s.value,e.set({customLiveVariant:t.customLiveVariant}),v=!1}function input_handler_1(t){e.onCustomSecInput()}function input2_input_handler(){O=!0,t.customLiveVariant.inc=u.value,e.set({customLiveVariant:t.customLiveVariant}),O=!1}function input_handler_2(t){e.onCustomIncInput()}function click_handler_1(t){e.saveCutomTime()}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("input"),i=Object(ht.k)("\n\n            "),s=Object(ht.i)("input"),l=Object(ht.k)("\n\n            "),u=Object(ht.i)("input"),_=Object(ht.k)("\n\n            "),h=Object(ht.i)("button"),b=Object(ht.k)(j),Object(ht.c)(a,"input",input0_input_handler),Object(ht.c)(a,"input",input_handler),a.className=t.customLiveTimeClass+" svelte-d63ztr",a.placeholder=r=t.translations.min,Object(ht.D)(a,"type","text"),Object(ht.c)(s,"input",input1_input_handler),Object(ht.c)(s,"input",input_handler_1),s.className=t.customLiveTimeClass+" svelte-d63ztr",s.placeholder=o=t.translations.sec,Object(ht.D)(s,"type","text"),Object(ht.c)(u,"input",input2_input_handler),Object(ht.c)(u,"input",input_handler_2),u.className=t.customLiveTimeClass+" svelte-d63ztr",u.placeholder=f=t.translations.inc,Object(ht.D)(u,"type","text"),Object(ht.c)(h,"click",click_handler_1),h.className="button form-input svelte-d63ztr",n.className="custom-time-variant svelte-d63ztr"},m:function m(e,r){Object(ht.u)(e,n,r),Object(ht.d)(n,a),a.value=t.customLiveVariant.mins,Object(ht.d)(n,i),Object(ht.d)(n,s),s.value=t.customLiveVariant.secs,Object(ht.d)(n,l),Object(ht.d)(n,u),u.value=t.customLiveVariant.inc,Object(ht.d)(n,_),Object(ht.d)(n,h),Object(ht.d)(h,b)},p:function p(e,n){t=n,!g&&e.customLiveVariant&&(a.value=t.customLiveVariant.mins),e.customLiveTimeClass&&(a.className=t.customLiveTimeClass+" svelte-d63ztr"),e.translations&&r!==(r=t.translations.min)&&(a.placeholder=r),!v&&e.customLiveVariant&&(s.value=t.customLiveVariant.secs),e.customLiveTimeClass&&(s.className=t.customLiveTimeClass+" svelte-d63ztr"),e.translations&&o!==(o=t.translations.sec)&&(s.placeholder=o),!O&&e.customLiveVariant&&(u.value=t.customLiveVariant.inc),e.customLiveTimeClass&&(u.className=t.customLiveTimeClass+" svelte-d63ztr"),e.translations&&f!==(f=t.translations.inc)&&(u.placeholder=f),e.translations&&j!==(j=t.translations.ok)&&Object(ht.E)(b,j)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(a,"input",input0_input_handler),Object(ht.A)(a,"input",input_handler),Object(ht.A)(s,"input",input1_input_handler),Object(ht.A)(s,"input",input_handler_1),Object(ht.A)(u,"input",input2_input_handler),Object(ht.A)(u,"input",input_handler_2),Object(ht.A)(h,"click",click_handler_1)}}}function game_times_svelte_create_if_block_1(e,t){var n,a,r=t.translations.customTime;function click_handler_1(t){e.showCustomTimeInputs()}return{c:function c(){n=Object(ht.i)("button"),a=Object(ht.k)(r),Object(ht.c)(n,"click",click_handler_1),n.className="button double svelte-d63ztr"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.translations&&r!==(r=t.translations.customTime)&&Object(ht.E)(a,r)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(n,"click",click_handler_1)}}}function game_times_svelte_create_if_block(e,t){var n,a,r=t.translations.more;function click_handler_1(t){e.showMoreTimes()}return{c:function c(){n=Object(ht.i)("button"),a=Object(ht.k)(r),Object(ht.c)(n,"click",click_handler_1),n.className="button svelte-d63ztr"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.translations&&r!==(r=t.translations.more)&&Object(ht.E)(a,r)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(n,"click",click_handler_1)}}}function game_times_svelte_create_each_block(e,t){var n,a,r,i,s=t.option.label;return{c:function c(){n=Object(ht.i)("button"),a=Object(ht.k)(s),r=Object(ht.k)("\n        "),n._svelte={component:e,ctx:t},Object(ht.c)(n,"click",game_times_svelte_click_handler_1),n.className=i=isActiveDailyOptionClassList(t.option,t.$isDaily,t.$timeVariant)+" svelte-d63ztr"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(n,r)},p:function p(e,r){t=r,e.dailyChallengeTimeOptions&&s!==(s=t.option.label)&&Object(ht.E)(a,s),n._svelte.ctx=t,(e.dailyChallengeTimeOptions||e.$isDaily||e.$timeVariant)&&i!==(i=isActiveDailyOptionClassList(t.option,t.$isDaily,t.$timeVariant)+" svelte-d63ztr")&&(n.className=i)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(n,"click",game_times_svelte_click_handler_1)}}}function Game_times_svelte(e){var t=this;Object(ht.t)(this,e),this._state=Object(ht.e)(Object(ht.e)(this.store._init(["isLive","timeVariant","isDaily"]),function game_times_svelte_data(){return{customLiveVariant:{inc:"",mins:"",secs:""},dailyChallengeTimeOptions:ne,liveChallengeTimeOptions:re,showMoreTimes:!1,showTimeInputs:!1,translations:W,validCustomLiveVariant:!0}}()),e.data),this.store._add(this,["isLive","timeVariant","isDaily"]),this._recompute({showMoreTimes:1,validCustomLiveVariant:1},this._state),this._intro=!0,this._handlers.destroy=[ht.z],this._fragment=function game_times_svelte_create_main_fragment(e,t){for(var n,a,r,i,s,o,l,u,f,_,h,b,g,v,O,j,y,w,k,E,C,S,N,T,A,I=t.translations.live,L=t.translations.totalTimePerSide,P=t.translations.daily,M=t.translations.maxTimePerMove,R=t.slicedLiveChallengeTimeOptions,x=[],D=0;D<R.length;D+=1)x[D]=game_times_svelte_create_each_block_1(e,game_times_svelte_get_each0_context(t,R,D));function select_block_type(e){return e.showMoreTimes?e.showTimeInputs?create_else_block:game_times_svelte_create_if_block_1:game_times_svelte_create_if_block}var U=select_block_type(t),B=U(e,t),z=t.dailyChallengeTimeOptions,$=[];for(D=0;D<z.length;D+=1)$[D]=game_times_svelte_create_each_block(e,game_times_svelte_get_each1_context(t,z,D));return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.i)("div"),i=Object(ht.i)("div"),s=Object(ht.k)(I),o=Object(ht.k)("\n\n      "),l=Object(ht.i)("div"),u=Object(ht.k)("("),f=Object(ht.k)(L),_=Object(ht.k)(")"),h=Object(ht.k)("\n\n    "),b=Object(ht.i)("div");for(var e=0;e<x.length;e+=1)x[e].c();for(g=Object(ht.k)("\n\n      "),B.c(),v=Object(ht.k)("\n\n  "),O=Object(ht.i)("div"),j=Object(ht.i)("div"),y=Object(ht.i)("div"),w=Object(ht.k)(P),k=Object(ht.k)("\n\n      "),E=Object(ht.i)("div"),C=Object(ht.k)("("),S=Object(ht.k)(M),N=Object(ht.k)(")"),T=Object(ht.k)("\n\n    "),A=Object(ht.i)("div"),e=0;e<$.length;e+=1)$[e].c();i.className="title",l.className="subtitle",r.className="time-options-header sprite live",b.className="section-buttons svelte-d63ztr",a.className="section svelte-d63ztr",y.className="title",E.className="subtitle",j.className="time-options-header sprite daily",A.className="section-buttons svelte-d63ztr",O.className="section svelte-d63ztr",n.className="game-times-container svelte-d63ztr"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(r,i),Object(ht.d)(i,s),Object(ht.d)(r,o),Object(ht.d)(r,l),Object(ht.d)(l,u),Object(ht.d)(l,f),Object(ht.d)(l,_),Object(ht.d)(a,h),Object(ht.d)(a,b);for(var c=0;c<x.length;c+=1)x[c].m(b,null);for(Object(ht.d)(b,g),B.m(b,null),Object(ht.d)(n,v),Object(ht.d)(n,O),Object(ht.d)(O,j),Object(ht.d)(j,y),Object(ht.d)(y,w),Object(ht.d)(j,k),Object(ht.d)(j,E),Object(ht.d)(E,C),Object(ht.d)(E,S),Object(ht.d)(E,N),Object(ht.d)(O,T),Object(ht.d)(O,A),c=0;c<$.length;c+=1)$[c].m(A,null)},p:function p(t,n){if(t.translations&&I!==(I=n.translations.live)&&Object(ht.E)(s,I),t.translations&&L!==(L=n.translations.totalTimePerSide)&&Object(ht.E)(f,L),t.slicedLiveChallengeTimeOptions||t.$isLive||t.$timeVariant){R=n.slicedLiveChallengeTimeOptions;for(var a=0;a<R.length;a+=1){var r=game_times_svelte_get_each0_context(n,R,a);x[a]?x[a].p(t,r):(x[a]=game_times_svelte_create_each_block_1(e,r),x[a].c(),x[a].m(b,g))}for(;a<x.length;a+=1)x[a].d(1);x.length=R.length}if(U===(U=select_block_type(n))&&B?B.p(t,n):(B.d(1),(B=U(e,n)).c(),B.m(b,null)),t.translations&&P!==(P=n.translations.daily)&&Object(ht.E)(w,P),t.translations&&M!==(M=n.translations.maxTimePerMove)&&Object(ht.E)(S,M),t.dailyChallengeTimeOptions||t.$isDaily||t.$timeVariant){for(z=n.dailyChallengeTimeOptions,a=0;a<z.length;a+=1){var i=game_times_svelte_get_each1_context(n,z,a);$[a]?$[a].p(t,i):($[a]=game_times_svelte_create_each_block(e,i),$[a].c(),$[a].m(A,null))}for(;a<$.length;a+=1)$[a].d(1);$.length=z.length}},d:function d(e){e&&Object(ht.p)(n),Object(ht.m)(x,e),B.d(),Object(ht.m)($,e)}}}(this,this._state),this.root._oncreate.push(function(){(function game_times_svelte_oncreate(){var e=this.store.get(),t=e.isUsingCustomLiveTimeVariant,n=e.timeVariant;t&&(delete n.days,this.set({customLiveVariant:n,showTimeInputs:!0}))}).call(t),t.fire("update",{changed:Object(ht.f)({},t._state),current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Game_times_svelte.prototype,ht.x),Object(ht.e)(Game_times_svelte.prototype,On),Game_times_svelte.prototype._recompute=function _recompute(e,t){e.showMoreTimes&&this._differs(t.slicedLiveChallengeTimeOptions,t.slicedLiveChallengeTimeOptions=function slicedLiveChallengeTimeOptions(e){return e.showMoreTimes?re:re.slice(0,5)}(t))&&(e.slicedLiveChallengeTimeOptions=!0),e.validCustomLiveVariant&&this._differs(t.customLiveTimeClass,t.customLiveTimeClass=function customLiveTimeClass(e){return e.validCustomLiveVariant?"form-input":"form-input invalid"}(t))&&(e.customLiveTimeClass=!0)};var jn=Game_times_svelte;n(333);function isActiveTypeClassList(e,t){var n=["options-list-item","is-hoverable"];return e===t.value&&n.push("is-active"),n.join(" ")}var yn={mouseEnterEvent:Bt,mouseLeaveEvent:zt,setGameType:function setGameType(e){var t=e.icon,n=e.value;n!==q.g.ANALYSIS?this.store.set({showGameTypes:!1,type:{icon:t,value:n}}):window.location=le.liveAnalysis}};function game_types_svelte_click_handler(e){var t=this._svelte,n=t.component,a=t.ctx;n.setGameType(a.type)}function game_types_svelte_mouseleave_handler(e){this._svelte.component.mouseLeaveEvent(e)}function game_types_svelte_mouseenter_handler(e){this._svelte.component.mouseEnterEvent(e)}function game_types_svelte_get_each_context(e,t,n){var a=Object.create(e);return a.type=t[n],a}function game_types_svelte_create_each_block(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g,v,O=t.type.label;return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.i)("span"),o=Object(ht.k)("\n\n      "),l=Object(ht.i)("div"),u=Object(ht.k)(O),f=Object(ht.k)("\n\n      "),_=Object(ht.i)("div"),h=Object(ht.i)("span"),g=Object(ht.k)("\n    "),r.className=i=Vt(t.type.icon)+" svelte-v9ki8f",r.style.cssText=s=Xt(t.gameTypeColors[t.type.icon]),a.className="icon-font left-icon",l.className="new-game-label",h.className="icon-font-chess circle-question",_._svelte={component:e},Object(ht.c)(_,"mouseenter",game_types_svelte_mouseenter_handler),Object(ht.c)(_,"mouseleave",game_types_svelte_mouseleave_handler),_.className="icon-font right-icon is-large game-types game-types-tooltip-listener",_.dataset.tooltipContent=b=t.type.description,n._svelte={component:e,ctx:t},Object(ht.c)(n,"click",game_types_svelte_click_handler),n.className=v=isActiveTypeClassList(t.type.value,t.$type)+" svelte-v9ki8f"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(n,o),Object(ht.d)(n,l),Object(ht.d)(l,u),Object(ht.d)(n,f),Object(ht.d)(n,_),Object(ht.d)(_,h),Object(ht.d)(n,g)},p:function p(e,a){t=a,e.gameTypes&&i!==(i=Vt(t.type.icon)+" svelte-v9ki8f")&&(r.className=i),(e.gameTypeColors||e.gameTypes)&&s!==(s=Xt(t.gameTypeColors[t.type.icon]))&&(r.style.cssText=s),e.gameTypes&&O!==(O=t.type.label)&&Object(ht.E)(u,O),e.gameTypes&&b!==(b=t.type.description)&&(_.dataset.tooltipContent=b),n._svelte.ctx=t,(e.gameTypes||e.$type)&&v!==(v=isActiveTypeClassList(t.type.value,t.$type)+" svelte-v9ki8f")&&(n.className=v)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(_,"mouseenter",game_types_svelte_mouseenter_handler),Object(ht.A)(_,"mouseleave",game_types_svelte_mouseleave_handler),Object(ht.A)(n,"click",game_types_svelte_click_handler)}}}function Game_types_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(Object(ht.e)(this.store._init(["isDaily","isLive","type"]),function game_types_svelte_data(){return{gameTypeColors:q.f,translations:W}}()),e.data),this.store._add(this,["isDaily","isLive","type"]),this._recompute({$isDaily:1,$isLive:1},this._state),this._intro=!0,this._handlers.destroy=[ht.z],this._fragment=function game_types_svelte_create_main_fragment(e,t){for(var n,a=t.gameTypes,r=[],i=0;i<a.length;i+=1)r[i]=game_types_svelte_create_each_block(e,game_types_svelte_get_each_context(t,a,i));return{c:function c(){n=Object(ht.i)("div");for(var e=0;e<r.length;e+=1)r[e].c();n.className="options-list svelte-v9ki8f"},m:function m(e,t){Object(ht.u)(e,n,t);for(var a=0;a<r.length;a+=1)r[a].m(n,null)},p:function p(t,i){if(t.gameTypes||t.$type||t.gameTypeColors){a=i.gameTypes;for(var s=0;s<a.length;s+=1){var o=game_types_svelte_get_each_context(i,a,s);r[s]?r[s].p(t,o):(r[s]=game_types_svelte_create_each_block(e,o),r[s].c(),r[s].m(n,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=a.length}},d:function d(e){e&&Object(ht.p)(n),Object(ht.m)(r,e)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}Object(ht.e)(Game_types_svelte.prototype,ht.x),Object(ht.e)(Game_types_svelte.prototype,yn),Game_types_svelte.prototype._recompute=function _recompute(e,t){(e.$isDaily||e.$isLive)&&this._differs(t.gameTypes,t.gameTypes=function gameTypes_1(e){var t=e.$isDaily,n=e.$isLive;return t?Y.filter(function(e){return e.isDaily}):n?Y.filter(function(e){return e.isLive}):[]}(t))&&(e.gameTypes=!0)};var wn=Game_types_svelte;n(334);var kn={createChallenge:function createChallenge(){this.store.createChallenge()},createChallengeLink:function createChallengeLink(){this.store.createChallengeLink()},onToggleRated:function onToggleRated(){this.store.resetColor()},removeOpponent:function removeOpponent(){this.store.resetOpponent()},showOpponentSelection:function showOpponentSelection(){this.store.setPrimaryView(q.l.PLAY_A_FRIEND)},showOptions:function showOptions(e){e.preventDefault(),this.set({showOptions:!0})},showTimeOptions:function showTimeOptions(){this.store.toggleShowTimeOptions()},showTypeOptions:function showTypeOptions(){this.store.toggleShowTypeOptions()}};function ondestroy(){this.store.set({showGameTimes:!1,showGameTypes:!1})}function custom_challenge_svelte_create_if_block_4(e,t){var n=new jn({root:e.root,store:e.store});return{c:function c(){n._fragment.c()},m:function m(e,t){n._mount(e,t)},d:function d(e){n.destroy(e)}}}function custom_challenge_svelte_create_if_block_3(e,t){var n=new wn({root:e.root,store:e.store});return{c:function c(){n._fragment.c()},m:function m(e,t){n._mount(e,t)},d:function d(e){n.destroy(e)}}}function custom_challenge_svelte_create_else_block(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g,v,O,j,y=t.$opponent.username;function click_handler(t){e.removeOpponent()}function click_handler_1(t){e.showOpponentSelection()}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.i)("img"),o=Object(ht.k)("\n\n        "),l=Object(ht.i)("span"),f=Object(ht.k)("\n\n      "),_=Object(ht.i)("div"),h=Object(ht.k)(y),b=Object(ht.k)("\n\n        "),g=Object(ht.i)("span"),O=Object(ht.k)("\n\n      "),(j=Object(ht.i)("div")).innerHTML='<span class="icon-font-chess x svelte-1824qhh"></span>',r.alt=i=t.$opponent.username,r.src=s=t.$opponent.avatar_url,r.className="svelte-1824qhh",l.className=u=rn(t.$opponent)+" svelte-1824qhh",a.className="avatar svelte-1824qhh",g.className=v="flair-component flair-inline flair-"+t.$opponent.flair_code+" svelte-1824qhh",_.className="new-game-label svelte-1824qhh",Object(ht.c)(j,"click",click_handler),j.className="icon-font right-icon",Object(ht.c)(n,"click",click_handler_1),n.className="options-list-item change-opponent-item svelte-1824qhh"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(a,o),Object(ht.d)(a,l),Object(ht.d)(n,f),Object(ht.d)(n,_),Object(ht.d)(_,h),Object(ht.d)(_,b),Object(ht.d)(_,g),Object(ht.d)(n,O),Object(ht.d)(n,j)},p:function p(e,t){e.$opponent&&i!==(i=t.$opponent.username)&&(r.alt=i),e.$opponent&&s!==(s=t.$opponent.avatar_url)&&(r.src=s),e.$opponent&&u!==(u=rn(t.$opponent)+" svelte-1824qhh")&&(l.className=u),e.$opponent&&y!==(y=t.$opponent.username)&&Object(ht.E)(h,y),e.$opponent&&v!==(v="flair-component flair-inline flair-"+t.$opponent.flair_code+" svelte-1824qhh")&&(g.className=v)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(j,"click",click_handler),Object(ht.A)(n,"click",click_handler_1)}}}function custom_challenge_svelte_create_if_block_2(e,t){var n,a,r,i,s,o,l,u,f=t.translations.vsRandom,_=t.translations.change;function click_handler(t){e.showOpponentSelection(t)}function click_handler_1(t){e.showOpponentSelection()}return{c:function c(){n=Object(ht.i)("div"),(a=Object(ht.i)("div")).innerHTML='<div class="icon-font svelte-1824qhh"><span class="icon-font-chess user-question svelte-1824qhh"></span></div>',r=Object(ht.k)("\n\n      "),i=Object(ht.i)("div"),s=Object(ht.k)(f),o=Object(ht.k)("\n\n      "),l=Object(ht.i)("a"),u=Object(ht.k)(_),a.className="random svelte-1824qhh",i.className="new-game-label svelte-1824qhh",Object(ht.c)(l,"click",click_handler),l.className="change-link svelte-1824qhh",l.href="#",Object(ht.c)(n,"click",click_handler_1),n.className="options-list-item change-opponent-item svelte-1824qhh"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(n,r),Object(ht.d)(n,i),Object(ht.d)(i,s),Object(ht.d)(n,o),Object(ht.d)(n,l),Object(ht.d)(l,u)},p:function p(e,t){e.translations&&f!==(f=t.translations.vsRandom)&&Object(ht.E)(s,f),e.translations&&_!==(_=t.translations.change)&&Object(ht.E)(u,_)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(l,"click",click_handler),Object(ht.A)(n,"click",click_handler_1)}}}function custom_challenge_svelte_create_if_block_1(e,t){var n,a,r,i=t.translations.options;function click_handler(t){e.showOptions(t)}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("a"),r=Object(ht.k)(i),Object(ht.c)(a,"click",click_handler),a.className="options-link svelte-1824qhh",n.className="options-list-item svelte-1824qhh"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(a,r)},p:function p(e,t){e.translations&&i!==(i=t.translations.options)&&Object(ht.E)(r,i)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(a,"click",click_handler)}}}function custom_challenge_svelte_create_if_block(e,t){var n=new vn({root:e.root,store:e.store});return{c:function c(){n._fragment.c()},m:function m(e,t){n._mount(e,t)},d:function d(e){n.destroy(e)}}}function Custom_challenge_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(Object(ht.e)(this.store._init(["isDaily","isRated","opponent","timeVariantLabel","type","showGameTimes","showGameTypes"]),function custom_challenge_svelte_data(){return{primaryViews:q.l,translations:W,showOptions:!1}}()),e.data),this.store._add(this,["isDaily","isRated","opponent","timeVariantLabel","type","showGameTimes","showGameTypes"]),this._recompute({$isDaily:1,$isRated:1,$opponent:1,showOptions:1},this._state),this._intro=!0,this._handlers.destroy=[ondestroy,ht.z],this._fragment=function custom_challenge_svelte_create_main_fragment(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g,v,O,j,y,w,k,E,C,S,N,T,A,I,L,P,M,R,x,D,U,B,z,$,F,H,G=t.translations.time,q=t.translations.type,V=t.translations.rated,W=t.translations.play,K=t.translations.challengeLink;function click_handler(t){e.showTimeOptions()}function click_handler_1(t){e.showTypeOptions()}var Y=t.$showGameTimes&&custom_challenge_svelte_create_if_block_4(e),J=t.$showGameTypes&&custom_challenge_svelte_create_if_block_3(e);function select_block_type(e){return null===e.$opponent?custom_challenge_svelte_create_if_block_2:custom_challenge_svelte_create_else_block}var Q=select_block_type(t),Z=Q(e,t);function input_change_handler(){e.store.set({isRated:L.checked})}function click_handler_2(t){e.onToggleRated()}var X=t.showOptionsLink&&custom_challenge_svelte_create_if_block_1(e,t),ee=t.showOptions&&custom_challenge_svelte_create_if_block(e);function click_handler_3(t){e.createChallenge()}function click_handler_4(t){e.createChallengeLink()}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.i)("div"),i=Object(ht.k)(G),s=Object(ht.k)("\n\n    "),o=Object(ht.i)("button"),l=Object(ht.k)(t.$timeVariantLabel),u=Object(ht.k)("\n\n  "),f=Object(ht.i)("div"),_=Object(ht.i)("div"),h=Object(ht.k)(q),b=Object(ht.k)("\n\n    "),g=Object(ht.i)("button"),v=Object(ht.i)("span"),O=Object(ht.i)("span"),y=Object(ht.k)("\n\n  "),Y&&Y.c(),w=Object(ht.k)("\n\n  "),J&&J.c(),k=Object(ht.k)("\n\n"),E=Object(ht.i)("div"),Z.c(),C=Object(ht.k)("\n\n  "),S=Object(ht.i)("div"),N=Object(ht.i)("div"),T=Object(ht.k)(V),A=Object(ht.k)("\n\n    "),I=Object(ht.i)("div"),L=Object(ht.i)("input"),P=Object(ht.k)("\n\n      "),(M=Object(ht.i)("label")).innerHTML='<div class="handle"></div>',R=Object(ht.k)("\n  "),X&&X.c(),x=Object(ht.k)("\n  "),ee&&ee.c(),D=Object(ht.k)("\n\n"),U=Object(ht.i)("div"),B=Object(ht.i)("button"),z=Object(ht.k)(W),$=Object(ht.k)("\n\n  "),F=Object(ht.i)("button"),H=Object(ht.k)(K),r.className="settings-label svelte-1824qhh",Object(ht.c)(o,"click",click_handler),o.className="button main-button svelte-1824qhh",a.className="settings-option time svelte-1824qhh",_.className="settings-label svelte-1824qhh",O.className=j=Vt(t.$type.icon)+" svelte-1824qhh",v.className="icon-font icon",Object(ht.c)(g,"click",click_handler_1),g.className="button main-button svelte-1824qhh",f.className="settings-option type svelte-1824qhh",n.className="settings svelte-1824qhh",N.className="new-game-label svelte-1824qhh",Object(ht.c)(L,"change",input_change_handler),Object(ht.c)(L,"click",click_handler_2),L.className="checkbox",L.id="rated",Object(ht.D)(L,"type","checkbox"),M.className="track",M.htmlFor="rated",I.className="form-switch",S.className="options-list-item svelte-1824qhh",E.className="options-list",Object(ht.c)(B,"click",click_handler_3),B.className="button is-large is-primary no-padding",Object(ht.c)(F,"click",click_handler_4),F.className="button is-large no-padding",U.className="play svelte-1824qhh"},m:function m(e,c){Object(ht.u)(e,n,c),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(r,i),Object(ht.d)(a,s),Object(ht.d)(a,o),Object(ht.d)(o,l),Object(ht.d)(n,u),Object(ht.d)(n,f),Object(ht.d)(f,_),Object(ht.d)(_,h),Object(ht.d)(f,b),Object(ht.d)(f,g),Object(ht.d)(g,v),Object(ht.d)(v,O),Object(ht.d)(n,y),Y&&Y.m(n,null),Object(ht.d)(n,w),J&&J.m(n,null),Object(ht.u)(e,k,c),Object(ht.u)(e,E,c),Z.m(E,null),Object(ht.d)(E,C),Object(ht.d)(E,S),Object(ht.d)(S,N),Object(ht.d)(N,T),Object(ht.d)(S,A),Object(ht.d)(S,I),Object(ht.d)(I,L),L.checked=t.$isRated,Object(ht.d)(I,P),Object(ht.d)(I,M),Object(ht.d)(E,R),X&&X.m(E,null),Object(ht.d)(E,x),ee&&ee.m(E,null),Object(ht.u)(e,D,c),Object(ht.u)(e,U,c),Object(ht.d)(U,B),Object(ht.d)(B,z),Object(ht.d)(U,$),Object(ht.d)(U,F),Object(ht.d)(F,H)},p:function p(t,a){t.translations&&G!==(G=a.translations.time)&&Object(ht.E)(i,G),t.$timeVariantLabel&&Object(ht.E)(l,a.$timeVariantLabel),t.translations&&q!==(q=a.translations.type)&&Object(ht.E)(h,q),t.$type&&j!==(j=Vt(a.$type.icon)+" svelte-1824qhh")&&(O.className=j),a.$showGameTimes?Y||((Y=custom_challenge_svelte_create_if_block_4(e)).c(),Y.m(n,w)):Y&&(Y.d(1),Y=null),a.$showGameTypes?J||((J=custom_challenge_svelte_create_if_block_3(e)).c(),J.m(n,null)):J&&(J.d(1),J=null),Q===(Q=select_block_type(a))&&Z?Z.p(t,a):(Z.d(1),(Z=Q(e,a)).c(),Z.m(E,C)),t.translations&&V!==(V=a.translations.rated)&&Object(ht.E)(T,V),t.$isRated&&(L.checked=a.$isRated),a.showOptionsLink?X?X.p(t,a):((X=custom_challenge_svelte_create_if_block_1(e,a)).c(),X.m(E,x)):X&&(X.d(1),X=null),a.showOptions?ee||((ee=custom_challenge_svelte_create_if_block(e)).c(),ee.m(E,null)):ee&&(ee.d(1),ee=null),t.translations&&W!==(W=a.translations.play)&&Object(ht.E)(z,W),t.translations&&K!==(K=a.translations.challengeLink)&&Object(ht.E)(H,K)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(o,"click",click_handler),Object(ht.A)(g,"click",click_handler_1),Y&&Y.d(),J&&J.d(),e&&(Object(ht.p)(k),Object(ht.p)(E)),Z.d(),Object(ht.A)(L,"change",input_change_handler),Object(ht.A)(L,"click",click_handler_2),X&&X.d(),ee&&ee.d(),e&&(Object(ht.p)(D),Object(ht.p)(U)),Object(ht.A)(B,"click",click_handler_3),Object(ht.A)(F,"click",click_handler_4)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Custom_challenge_svelte.prototype,ht.x),Object(ht.e)(Custom_challenge_svelte.prototype,kn),Custom_challenge_svelte.prototype._recompute=function _recompute(e,t){(e.$isDaily||e.$isRated||e.$opponent||e.showOptions)&&this._differs(t.showOptionsLink,t.showOptionsLink=function showOptionsLink(e){var t=e.$isDaily,n=e.$isRated,a=e.$opponent,r=e.showOptions;return(t||n||null!=a)&&!r}(t))&&(e.showOptionsLink=!0)};var En=Custom_challenge_svelte;n(335);var Cn={getOpenChallenges:function getOpenChallenges(){var e=this;this.get().isFetchingChallenges||(this.set({isFetchingChallenges:!0}),function getOpenChallenges(){return cn.a.get(le.getOpenChallenges).then(function(e){return e.data})}().then(function(t){e.set({challenges:t,isFetchingChallenges:!1})}))}};function open_challenges_svelte_get_each_context(e,t,n){var a=Object.create(e);return a.challenge=t[n],a}function open_challenges_svelte_create_each_block(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g,v,O,j,y,w,k,E,C,S,N,T,A,I,L,P,M=t.challenge.seekerUsername,R=t.challenge.seekerRating,x=t.translations.daysWithAmount(t.challenge.daysPerMove);return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("a"),r=Object(ht.i)("div"),i=Object(ht.i)("span"),o=Object(ht.k)("\n\n      "),l=Object(ht.i)("img"),_=Object(ht.k)("\n\n      "),h=Object(ht.i)("div"),b=Object(ht.i)("span"),g=Object(ht.k)(M),v=Object(ht.k)("\n\n        "),O=Object(ht.i)("span"),j=Object(ht.k)("("),y=Object(ht.k)(R),w=Object(ht.k)(")‎"),k=Object(ht.k)("\n\n        "),E=Object(ht.i)("br"),C=Object(ht.k)("\n\n        "),S=Object(ht.i)("span"),N=Object(ht.k)(x),T=Object(ht.k)("\n\n      "),(A=Object(ht.i)("div")).innerHTML='<span class="icon-font-chess chevron-right svelte-skyqau"></span>',L=Object(ht.k)("\n  "),i.className=s=Yt(t.challenge)+" svelte-skyqau",r.className="icon-font icon svelte-skyqau",l.alt=u=t.challenge.seekerUsername,l.className="avatar svelte-skyqau",l.height="30",l.src=f=t.challenge.seekerAvatar,l.width="30",b.className="username svelte-skyqau",O.className="rating svelte-skyqau",S.className="time svelte-skyqau",h.className="info svelte-skyqau",A.className="icon-font icon arrow svelte-skyqau",a.className="seek-link svelte-skyqau",a.href=I=t.routes.dailySeek(t.challenge.seekId),n.className=P="challenge-list-item "+(t.isFetchingChallenges?"fetching":"")+" svelte-skyqau"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(r,i),Object(ht.d)(a,o),Object(ht.d)(a,l),Object(ht.d)(a,_),Object(ht.d)(a,h),Object(ht.d)(h,b),Object(ht.d)(b,g),Object(ht.d)(h,v),Object(ht.d)(h,O),Object(ht.d)(O,j),Object(ht.d)(O,y),Object(ht.d)(O,w),Object(ht.d)(h,k),Object(ht.d)(h,E),Object(ht.d)(h,C),Object(ht.d)(h,S),Object(ht.d)(S,N),Object(ht.d)(a,T),Object(ht.d)(a,A),Object(ht.d)(n,L)},p:function p(e,t){e.challenges&&s!==(s=Yt(t.challenge)+" svelte-skyqau")&&(i.className=s),e.challenges&&u!==(u=t.challenge.seekerUsername)&&(l.alt=u),e.challenges&&f!==(f=t.challenge.seekerAvatar)&&(l.src=f),e.challenges&&M!==(M=t.challenge.seekerUsername)&&Object(ht.E)(g,M),e.challenges&&R!==(R=t.challenge.seekerRating)&&Object(ht.E)(y,R),(e.translations||e.challenges)&&x!==(x=t.translations.daysWithAmount(t.challenge.daysPerMove))&&Object(ht.E)(N,x),(e.routes||e.challenges)&&I!==(I=t.routes.dailySeek(t.challenge.seekId))&&(a.href=I),e.isFetchingChallenges&&P!==(P="challenge-list-item "+(t.isFetchingChallenges?"fetching":"")+" svelte-skyqau")&&(n.className=P)},d:function d(e){e&&Object(ht.p)(n)}}}function Open_challenges_svelte(e){var t=this;Object(ht.t)(this,e),this._state=Object(ht.e)(function open_challenges_svelte_data(){return{isDaily:!0,isFetchingChallenges:!1,isLive:!1,challenges:[],routes:le,translations:W}}(),e.data),this._intro=!0,this._fragment=function open_challenges_svelte_create_main_fragment(e,t){var n,a,r,i,s,o,l,u=t.translations.openChallenges;function click_handler(t){e.getOpenChallenges()}for(var f=t.challenges,_=[],h=0;h<f.length;h+=1)_[h]=open_challenges_svelte_create_each_block(0,open_challenges_svelte_get_each_context(t,f,h));return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.k)(u),i=Object(ht.k)("\n\n  "),(s=Object(ht.i)("div")).innerHTML='<span class="icon-font-chess undo svelte-skyqau"></span>',o=Object(ht.k)("\n\n");for(var e=0;e<_.length;e+=1)_[e].c();l=Object(ht.h)(),a.className="is-mobile-centered",Object(ht.c)(s,"click",click_handler),s.className="icon-font icon refresh-challenges svelte-skyqau",n.className="panel-title svelte-skyqau"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(n,i),Object(ht.d)(n,s),Object(ht.u)(e,o,t);for(var c=0;c<_.length;c+=1)_[c].m(e,t);Object(ht.u)(e,l,t)},p:function p(e,t){if(e.translations&&u!==(u=t.translations.openChallenges)&&Object(ht.E)(r,u),e.isFetchingChallenges||e.routes||e.challenges||e.translations){f=t.challenges;for(var n=0;n<f.length;n+=1){var a=open_challenges_svelte_get_each_context(t,f,n);_[n]?_[n].p(e,a):(_[n]=open_challenges_svelte_create_each_block(0,a),_[n].c(),_[n].m(l.parentNode,l))}for(;n<_.length;n+=1)_[n].d(1);_.length=f.length}},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(s,"click",click_handler),e&&Object(ht.p)(o),Object(ht.m)(_,e),e&&Object(ht.p)(l)}}}(this,this._state),this.root._oncreate.push(function(){(function open_challenges_svelte_oncreate(){this.getOpenChallenges()}).call(t),t.fire("update",{changed:Object(ht.f)({},t._state),current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Open_challenges_svelte.prototype,ht.x),Object(ht.e)(Open_challenges_svelte.prototype,Cn);var Sn=Open_challenges_svelte;n(336);function new_game_svelte_click_handler(e){var t=this._svelte,n=t.component,a=t.ctx;n.setViews(a.link.views)}function new_game_svelte_get_each_context(e,t,n){var a=Object.create(e);return a.link=t[n],a}function new_game_svelte_create_each_block(e,t){var n,a,r,i,s,o,l,u,f,_,h,b=t.link.label;return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.i)("span"),s=Object(ht.k)("\n\n        "),o=Object(ht.i)("div"),l=Object(ht.k)(b),u=Object(ht.k)("\n\n        "),(f=Object(ht.i)("div")).innerHTML='<span class="icon-font-chess chevron-right"></span>',_=Object(ht.k)("\n      "),r.className=i=Vt(t.link.icon)+" svelte-1xjd96o",a.className="icon-font left-icon",o.className="new-game-label",f.className="icon-font right-icon",n._svelte={component:e,ctx:t},Object(ht.c)(n,"click",new_game_svelte_click_handler),n.className=h=Wt(t.link.views.primary,t.$primaryView)+" svelte-1xjd96o"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(n,s),Object(ht.d)(n,o),Object(ht.d)(o,l),Object(ht.d)(n,u),Object(ht.d)(n,f),Object(ht.d)(n,_)},p:function p(e,a){t=a,e.newGameLinks&&i!==(i=Vt(t.link.icon)+" svelte-1xjd96o")&&(r.className=i),e.newGameLinks&&b!==(b=t.link.label)&&Object(ht.E)(l,b),n._svelte.ctx=t,(e.newGameLinks||e.$primaryView)&&h!==(h=Wt(t.link.views.primary,t.$primaryView)+" svelte-1xjd96o")&&(n.className=h)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(n,"click",new_game_svelte_click_handler)}}}function New_game_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(Object(ht.e)(this.store._init(["primaryView"]),function new_game_svelte_data(){return{newGameLinks:ee,primaryViews:q.l,translations:W}}()),e.data),this.store._add(this,["primaryView"]),this._intro=!0,this._handlers.destroy=[ht.z],this._fragment=function new_game_svelte_create_main_fragment(e,t){for(var n,a,r=t.newGameLinks,i=[],s=0;s<r.length;s+=1)i[s]=new_game_svelte_create_each_block(e,new_game_svelte_get_each_context(t,r,s));return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div");for(var e=0;e<i.length;e+=1)i[e].c();a.className="options-list new-game-links svelte-1xjd96o",n.className="settings"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a);for(var r=0;r<i.length;r+=1)i[r].m(a,null)},p:function p(t,n){if(t.newGameLinks||t.$primaryView){r=n.newGameLinks;for(var s=0;s<r.length;s+=1){var o=new_game_svelte_get_each_context(n,r,s);i[s]?i[s].p(t,o):(i[s]=new_game_svelte_create_each_block(e,o),i[s].c(),i[s].m(a,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=r.length}},d:function d(e){e&&Object(ht.p)(n),Object(ht.m)(i,e)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}Object(ht.e)(New_game_svelte.prototype,ht.x),Object(ht.e)(New_game_svelte.prototype,{setViews:function setViews(e){var t=e.primary;this.store.setPrimaryView(t)}});var Nn=New_game_svelte,Tn=n(38);n(337);var An={challengeMember:function challengeMember(e){var t=this.get().friends;this.store.setOpponent(e,t),this.store.setPrimaryView(q.l.CUSTOM_CHALLENGE)}};function member_results_svelte_click_handler(e){var t=this._svelte,n=t.component,a=t.ctx;n.challengeMember(a.member)}function member_results_svelte_get_each_context(e,t,n){var a=Object.create(e);return a.member=t[n],a}function member_results_svelte_create_if_block_3(e,t){var n,a,r=t.member.chess_title;return{c:function c(){n=Object(ht.i)("span"),a=Object(ht.k)(r),n.className="chess-title svelte-h06qz6"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.results&&r!==(r=t.member.chess_title)&&Object(ht.E)(a,r)},d:function d(e){e&&Object(ht.p)(n)}}}function member_results_svelte_create_if_block_2(e,t){var n,a;return{c:function c(){(n=Object(ht.i)("span")).className=a="country-flags-component country-"+t.member.country_id+" svelte-h06qz6"},m:function m(e,t){Object(ht.u)(e,n,t)},p:function p(e,t){e.results&&a!==(a="country-flags-component country-"+t.member.country_id+" svelte-h06qz6")&&(n.className=a)},d:function d(e){e&&Object(ht.p)(n)}}}function member_results_svelte_create_if_block_1(e,t){var n,a;return{c:function c(){(n=Object(ht.i)("span")).className=a="flair-component flair-"+t.member.flair_code+" svelte-h06qz6"},m:function m(e,t){Object(ht.u)(e,n,t)},p:function p(e,t){e.results&&a!==(a="flair-component flair-"+t.member.flair_code+" svelte-h06qz6")&&(n.className=a)},d:function d(e){e&&Object(ht.p)(n)}}}function member_results_svelte_create_if_block(e,t){var n,a,r=t.translations.online;return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.k)(r),n.className="online-status svelte-h06qz6"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.translations&&r!==(r=t.translations.online)&&Object(ht.E)(a,r)},d:function d(e){e&&Object(ht.p)(n)}}}function member_results_svelte_create_each_block(e,t){var n,a,r,i,s,o,l,u,f,_,h,b=t.member.username,g={size:"30",src:t.member.avatar_url,live:t.member.is_in_livechess,online:t.member.is_online,username:t.member.username},v=new Tn.a({root:e.root,store:e.store,data:g}),O=t.member.chess_title&&member_results_svelte_create_if_block_3(0,t),j=t.member.country_id&&member_results_svelte_create_if_block_2(0,t),y=t.member.flair_code!==t.NOTHING_FLAIR.code&&member_results_svelte_create_if_block_1(0,t),w=(t.member.is_online||t.member.is_in_livechess)&&member_results_svelte_create_if_block(0,t);return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),v._fragment.c(),r=Object(ht.k)("\n\n      "),i=Object(ht.i)("div"),O&&O.c(),s=Object(ht.k)("\n\n        "),o=Object(ht.i)("span"),l=Object(ht.k)(b),u=Object(ht.k)("\n\n        "),j&&j.c(),f=Object(ht.k)("\n\n        "),y&&y.c(),_=Object(ht.k)("\n\n      "),w&&w.c(),h=Object(ht.k)("\n    "),a.className="avatar svelte-h06qz6",o.className="svelte-h06qz6",i.className="username-container svelte-h06qz6",n._svelte={component:e,ctx:t},Object(ht.c)(n,"click",member_results_svelte_click_handler),n.className="result-item svelte-h06qz6"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),v._mount(a,null),Object(ht.d)(n,r),Object(ht.d)(n,i),O&&O.m(i,null),Object(ht.d)(i,s),Object(ht.d)(i,o),Object(ht.d)(o,l),Object(ht.d)(i,u),j&&j.m(i,null),Object(ht.d)(i,f),y&&y.m(i,null),Object(ht.d)(n,_),w&&w.m(n,null),Object(ht.d)(n,h)},p:function p(e,a){t=a;var r={};e.results&&(r.src=t.member.avatar_url),e.results&&(r.live=t.member.is_in_livechess),e.results&&(r.online=t.member.is_online),e.results&&(r.username=t.member.username),v._set(r),t.member.chess_title?O?O.p(e,t):((O=member_results_svelte_create_if_block_3(0,t)).c(),O.m(i,s)):O&&(O.d(1),O=null),e.results&&b!==(b=t.member.username)&&Object(ht.E)(l,b),t.member.country_id?j?j.p(e,t):((j=member_results_svelte_create_if_block_2(0,t)).c(),j.m(i,f)):j&&(j.d(1),j=null),t.member.flair_code!==t.NOTHING_FLAIR.code?y?y.p(e,t):((y=member_results_svelte_create_if_block_1(0,t)).c(),y.m(i,null)):y&&(y.d(1),y=null),t.member.is_online||t.member.is_in_livechess?w?w.p(e,t):((w=member_results_svelte_create_if_block(0,t)).c(),w.m(n,h)):w&&(w.d(1),w=null),n._svelte.ctx=t},d:function d(e){e&&Object(ht.p)(n),v.destroy(),O&&O.d(),j&&j.d(),y&&y.d(),w&&w.d(),Object(ht.A)(n,"click",member_results_svelte_click_handler)}}}function Member_results_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(function member_results_svelte_data(){return{NOTHING_FLAIR:se.b,translations:W}}(),e.data),this._intro=!0,this._fragment=function member_results_svelte_create_main_fragment(e,t){for(var n,a=t.results,r=[],i=0;i<a.length;i+=1)r[i]=member_results_svelte_create_each_block(e,member_results_svelte_get_each_context(t,a,i));return{c:function c(){n=Object(ht.i)("div");for(var e=0;e<r.length;e+=1)r[e].c();n.className="results"},m:function m(e,t){Object(ht.u)(e,n,t);for(var a=0;a<r.length;a+=1)r[a].m(n,null)},p:function p(t,i){if(t.results||t.translations||t.NOTHING_FLAIR){a=i.results;for(var s=0;s<a.length;s+=1){var o=member_results_svelte_get_each_context(i,a,s);r[s]?r[s].p(t,o):(r[s]=member_results_svelte_create_each_block(e,o),r[s].c(),r[s].m(n,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=a.length}},d:function d(e){e&&Object(ht.p)(n),Object(ht.m)(r,e)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Member_results_svelte.prototype,ht.x),Object(ht.e)(Member_results_svelte.prototype,An);var In=Member_results_svelte,Ln=n(42);n(338);var Pn={changeChallengeLink:function changeChallengeLink(){this.store.setPrimaryView(q.l.CUSTOM_CHALLENGE)},createChallengeLink:function createChallengeLink(){this.store.createChallengeLink()},fetchUsers:Object(Ln.a)(function fetchUsers(){var e=this,t=this.get(),n=t.friendsList,a=t.query;""!==a?function usernameSearch(e){return cn.a.get(le.usernameSearch(e)).then(function(e){return e.data})}(a).then(function(t){var a=t.filter(function(e){var t=e.username;return!n.find(function(e){return e.username===t})});e.set({userSearchResults:a})}):this.set({userSearchResults:[]})},250),onSearchInput:function onSearchInput(e){var t=e.target.value.toLowerCase();this.set({query:t}),t.length>0?this.set({userSearchType:q.n.CHESSCOM}):this.set({userSearchType:q.n.FRIENDS}),this.fetchUsers()},setUserSearchType:function setUserSearchType(e){this.set({userSearchType:e})}};function play_a_friend_svelte_create_if_block_2(e,t){var n,a,r,i,s,o,l=t.translations.friends,u=t.translations.recentOpponents;function click_handler(n){e.setUserSearchType(t.userSearchTypes.FRIENDS)}function click_handler_1(n){e.setUserSearchType(t.userSearchTypes.RECENT_OPPONENTS)}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.k)(l),i=Object(ht.k)("\n\n    "),s=Object(ht.i)("div"),o=Object(ht.k)(u),Object(ht.c)(a,"click",click_handler),a.className=t.friendsTabClass+" svelte-1dy49ni",Object(ht.c)(s,"click",click_handler_1),s.className=t.recentOpponentsTabClass+" svelte-1dy49ni",n.className="tab-container is-header"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(n,i),Object(ht.d)(n,s),Object(ht.d)(s,o)},p:function p(e,n){t=n,e.translations&&l!==(l=t.translations.friends)&&Object(ht.E)(r,l),e.friendsTabClass&&(a.className=t.friendsTabClass+" svelte-1dy49ni"),e.translations&&u!==(u=t.translations.recentOpponents)&&Object(ht.E)(o,u),e.recentOpponentsTabClass&&(s.className=t.recentOpponentsTabClass+" svelte-1dy49ni")},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(a,"click",click_handler),Object(ht.A)(s,"click",click_handler_1)}}}function play_a_friend_svelte_create_if_block_1(e,t){var n;return{c:function c(){(n=Object(ht.i)("div")).className="line svelte-1dy49ni"},m:function m(e,t){Object(ht.u)(e,n,t)},d:function d(e){e&&Object(ht.p)(n)}}}function play_a_friend_svelte_create_if_block(e,t){var n={results:t.userSearchResults,friends:!1},a=new In({root:e.root,store:e.store,data:n});return{c:function c(){a._fragment.c()},m:function m(e,t){a._mount(e,t)},p:function p(e,t){var n={};e.userSearchResults&&(n.results=t.userSearchResults),a._set(n)},d:function d(e){a.destroy(e)}}}function Play_a_friend_svelte(e){var t=this;Object(ht.t)(this,e),this._state=Object(ht.e)(Object(ht.e)(this.store._init(["type","timeVariantLabel"]),function play_a_friend_svelte_data(){return{friendsList:gt.default.stores.navigation.get().navData.friends,query:"",recentOpponents:[],translations:W,userSearchResults:[],userSearchType:q.n.FRIENDS,userSearchTypes:q.n}}()),e.data),this.store._add(this,["type","timeVariantLabel"]),this._recompute({userSearchType:1,query:1,friendsList:1,recentOpponents:1,listResults:1,userSearchResults:1},this._state),this._intro=!0,this._handlers.destroy=[ht.z],this._fragment=function play_a_friend_svelte_create_main_fragment(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g,v,O,j,y,w,k,E,C,S,N,T,A,I,L,P,M,R,x,D,U,B,z,$,F,H,G,q,V,W,K,Y,J=t.translations.option(1),Q=t.translations.sendLinkForAnyone,Z=t.translations.createChallengeLink,X=t.translations.change,ee=t.translations.option(2),te=t.translations.chooseMember;function click_handler(t){e.createChallengeLink()}function click_handler_1(t){e.changeChallengeLink()}function input_handler(t){e.onSearchInput(t)}var ne=t.userSearchTypes.CHESSCOM!==t.userSearchType&&play_a_friend_svelte_create_if_block_2(e,t),ae={results:t.listResults,friends:t.isFriendsList},re=new In({root:e.root,store:e.store,data:ae}),ie=t.showDividingLine&&play_a_friend_svelte_create_if_block_1(),se=t.userSearchResults&&t.userSearchResults.length>0&&play_a_friend_svelte_create_if_block(e,t);return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("span"),r=Object(ht.k)(J),i=Object(ht.k)(" -"),s=Object(ht.k)("\n\n  "),o=Object(ht.i)("span"),l=Object(ht.k)(Q),u=Object(ht.k)("\n\n"),f=Object(ht.i)("div"),_=Object(ht.i)("button"),h=Object(ht.i)("span"),b=Object(ht.k)("\n\n    "),g=Object(ht.k)(Z),v=Object(ht.k)("\n\n  "),O=Object(ht.i)("div"),j=Object(ht.i)("span"),w=Object(ht.k)("\n\n    "),k=Object(ht.i)("span"),E=Object(ht.k)(t.$timeVariantLabel),C=Object(ht.k)("\n\n    "),S=Object(ht.i)("span"),N=Object(ht.i)("a"),T=Object(ht.k)(X),A=Object(ht.k)("\n\n"),I=Object(ht.i)("div"),L=Object(ht.i)("div"),P=Object(ht.i)("span"),M=Object(ht.k)(ee),R=Object(ht.k)(" -"),x=Object(ht.k)("\n\n    "),D=Object(ht.i)("span"),U=Object(ht.k)(te),B=Object(ht.k)("\n\n  "),z=Object(ht.i)("div"),$=Object(ht.i)("input"),H=Object(ht.k)("\n\n    "),(G=Object(ht.i)("div")).innerHTML='<span class="icon-font-chess magnifying-glass svelte-1dy49ni"></span>',q=Object(ht.k)("\n\n"),ne&&ne.c(),V=Object(ht.k)("\n\n"),re._fragment.c(),W=Object(ht.k)("\n\n"),ie&&ie.c(),K=Object(ht.k)("\n\n"),se&&se.c(),Y=Object(ht.h)(),a.className="choose-option svelte-1dy49ni",o.className="choose svelte-1dy49ni",n.className="title svelte-1dy49ni",h.className="icon icon-font icon-font-chess icon-link link svelte-1dy49ni",Object(ht.c)(_,"click",click_handler),_.className="button challenge-button svelte-1dy49ni",j.className=y="icon icon-font "+Vt(t.$type.icon)+" svelte-1dy49ni",Object(ht.c)(N,"click",click_handler_1),S.className="change-link svelte-1dy49ni",O.className="variant-type svelte-1dy49ni",f.className="challenge-link-container svelte-1dy49ni",P.className="choose-option svelte-1dy49ni",D.className="choose svelte-1dy49ni",L.className="title svelte-1dy49ni",Object(ht.c)($,"input",input_handler),Object(ht.D)($,"type","text"),$.placeholder=F=t.translations.usernameNameEmail,$.className="svelte-1dy49ni",G.className="icon-font icon svelte-1dy49ni",z.className="search-input svelte-1dy49ni",I.className="section-username svelte-1dy49ni"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(a,i),Object(ht.d)(n,s),Object(ht.d)(n,o),Object(ht.d)(o,l),Object(ht.u)(e,u,t),Object(ht.u)(e,f,t),Object(ht.d)(f,_),Object(ht.d)(_,h),Object(ht.d)(_,b),Object(ht.d)(_,g),Object(ht.d)(f,v),Object(ht.d)(f,O),Object(ht.d)(O,j),Object(ht.d)(O,w),Object(ht.d)(O,k),Object(ht.d)(k,E),Object(ht.d)(O,C),Object(ht.d)(O,S),Object(ht.d)(S,N),Object(ht.d)(N,T),Object(ht.u)(e,A,t),Object(ht.u)(e,I,t),Object(ht.d)(I,L),Object(ht.d)(L,P),Object(ht.d)(P,M),Object(ht.d)(P,R),Object(ht.d)(L,x),Object(ht.d)(L,D),Object(ht.d)(D,U),Object(ht.d)(I,B),Object(ht.d)(I,z),Object(ht.d)(z,$),Object(ht.d)(z,H),Object(ht.d)(z,G),Object(ht.u)(e,q,t),ne&&ne.m(e,t),Object(ht.u)(e,V,t),re._mount(e,t),Object(ht.u)(e,W,t),ie&&ie.m(e,t),Object(ht.u)(e,K,t),se&&se.m(e,t),Object(ht.u)(e,Y,t)},p:function p(t,n){t.translations&&J!==(J=n.translations.option(1))&&Object(ht.E)(r,J),t.translations&&Q!==(Q=n.translations.sendLinkForAnyone)&&Object(ht.E)(l,Q),t.translations&&Z!==(Z=n.translations.createChallengeLink)&&Object(ht.E)(g,Z),t.$type&&y!==(y="icon icon-font "+Vt(n.$type.icon)+" svelte-1dy49ni")&&(j.className=y),t.$timeVariantLabel&&Object(ht.E)(E,n.$timeVariantLabel),t.translations&&X!==(X=n.translations.change)&&Object(ht.E)(T,X),t.translations&&ee!==(ee=n.translations.option(2))&&Object(ht.E)(M,ee),t.translations&&te!==(te=n.translations.chooseMember)&&Object(ht.E)(U,te),t.translations&&F!==(F=n.translations.usernameNameEmail)&&($.placeholder=F),n.userSearchTypes.CHESSCOM!==n.userSearchType?ne?ne.p(t,n):((ne=play_a_friend_svelte_create_if_block_2(e,n)).c(),ne.m(V.parentNode,V)):ne&&(ne.d(1),ne=null);var a={};t.listResults&&(a.results=n.listResults),t.isFriendsList&&(a.friends=n.isFriendsList),re._set(a),n.showDividingLine?ie||((ie=play_a_friend_svelte_create_if_block_1()).c(),ie.m(K.parentNode,K)):ie&&(ie.d(1),ie=null),n.userSearchResults&&n.userSearchResults.length>0?se?se.p(t,n):((se=play_a_friend_svelte_create_if_block(e,n)).c(),se.m(Y.parentNode,Y)):se&&(se.d(1),se=null)},d:function d(e){e&&(Object(ht.p)(n),Object(ht.p)(u),Object(ht.p)(f)),Object(ht.A)(_,"click",click_handler),Object(ht.A)(N,"click",click_handler_1),e&&(Object(ht.p)(A),Object(ht.p)(I)),Object(ht.A)($,"input",input_handler),e&&Object(ht.p)(q),ne&&ne.d(e),e&&Object(ht.p)(V),re.destroy(e),e&&Object(ht.p)(W),ie&&ie.d(e),e&&Object(ht.p)(K),se&&se.d(e),e&&Object(ht.p)(Y)}}}(this,this._state),this.root._oncreate.push(function(){(function play_a_friend_svelte_oncreate(){var e=this;Oe()&&gt.default.stores.navigation.getData(),hn().then(function(t){return e.set({recentOpponents:t})})}).call(t),t.fire("update",{changed:Object(ht.f)({},t._state),current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Play_a_friend_svelte.prototype,ht.x),Object(ht.e)(Play_a_friend_svelte.prototype,Pn),Play_a_friend_svelte.prototype._recompute=function _recompute(e,t){e.userSearchType&&(this._differs(t.friendsTabClass,t.friendsTabClass=function friendsTabClass(e){var t=e.userSearchType,n=["tab-item"];return q.n.FRIENDS===t&&n.push("active"),n.join(" ")}(t))&&(e.friendsTabClass=!0),this._differs(t.isFriendsList,t.isFriendsList=function isFriendsList(e){var t=e.userSearchType;return[q.n.FRIENDS,q.n.CHESSCOM].includes(t)}(t))&&(e.isFriendsList=!0)),(e.userSearchType||e.query||e.friendsList||e.recentOpponents)&&this._differs(t.listResults,t.listResults=function play_a_friend_svelte_listResults(e){var t=e.userSearchType,n=e.query,a=e.friendsList,r=e.recentOpponents;return q.n.FRIENDS===t?a:q.n.RECENT_OPPONENTS===t?r:a.filter(function(e){var t=e.username;return new RegExp(n,"gi").test(t)})}(t))&&(e.listResults=!0),e.userSearchType&&this._differs(t.recentOpponentsTabClass,t.recentOpponentsTabClass=function recentOpponentsTabClass(e){var t=e.userSearchType,n=["tab-item"];return q.n.RECENT_OPPONENTS===t&&n.push("active"),n.join(" ")}(t))&&(e.recentOpponentsTabClass=!0),(e.listResults||e.userSearchResults||e.userSearchType)&&this._differs(t.showDividingLine,t.showDividingLine=function showDividingLine(e){var t=e.listResults,n=e.userSearchResults,a=e.userSearchType;return q.n.CHESSCOM===a&&t&&t.length>0&&n&&n.length>0}(t))&&(e.showDividingLine=!0)};var Mn=Play_a_friend_svelte;n(339);function quick_play_svelte_click_handler_1(e){var t=this._svelte,n=t.component,a=t.ctx;n.createQuickChallenge(a.option)}function quick_play_svelte_get_each1_context(e,t,n){var a=Object.create(e);return a.option=t[n],a}function quick_play_svelte_click_handler(e){var t=this._svelte,n=t.component,a=t.ctx;n.createQuickChallenge(a.option)}function quick_play_svelte_get_each0_context(e,t,n){var a=Object.create(e);return a.option=t[n],a}function quick_play_svelte_create_each_block_1(e,t){var n,a,r,i,s,o,l=t.option.label;return{c:function c(){n=Object(ht.i)("button"),a=Object(ht.i)("span"),r=Object(ht.k)(l),i=Object(ht.k)("\n            "),s=Object(ht.i)("span"),a.className="svelte-g6mkgj",s.className=o="icon-font icon-font-chess icon-"+t.option.icon+" "+t.option.icon+" svelte-g6mkgj",n._svelte={component:e,ctx:t},Object(ht.c)(n,"click",quick_play_svelte_click_handler),n.className="button svelte-g6mkgj"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(n,i),Object(ht.d)(n,s)},p:function p(e,a){t=a,e.liveOptions&&l!==(l=t.option.label)&&Object(ht.E)(r,l),e.liveOptions&&o!==(o="icon-font icon-font-chess icon-"+t.option.icon+" "+t.option.icon+" svelte-g6mkgj")&&(s.className=o),n._svelte.ctx=t},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(n,"click",quick_play_svelte_click_handler)}}}function quick_play_svelte_create_each_block(e,t){var n,a,r,i,s,o,l,u=t.option.label;return{c:function c(){n=Object(ht.i)("button"),a=Object(ht.i)("span"),r=Object(ht.k)(u),i=Object(ht.k)("\n            "),s=Object(ht.i)("span"),l=Object(ht.k)("\n          "),a.className="svelte-g6mkgj",s.className=o="icon-font icon-font-chess icon-"+t.option.icon+" "+t.option.icon+" svelte-g6mkgj",n._svelte={component:e,ctx:t},Object(ht.c)(n,"click",quick_play_svelte_click_handler_1),n.className="button svelte-g6mkgj"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(n,i),Object(ht.d)(n,s),Object(ht.d)(n,l)},p:function p(e,a){t=a,e.dailyOptions&&u!==(u=t.option.label)&&Object(ht.E)(r,u),e.dailyOptions&&o!==(o="icon-font icon-font-chess icon-"+t.option.icon+" "+t.option.icon+" svelte-g6mkgj")&&(s.className=o),n._svelte.ctx=t},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(n,"click",quick_play_svelte_click_handler_1)}}}function Quick_play_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(Object(ht.e)(this.store._init(["isMobile"]),function quick_play_svelte_data(){return{computerOptions:te,dailyOptions:ae,liveOptions:ie,routes:le,translations:W}}()),e.data),this.store._add(this,["isMobile"]),this._intro=!0,this._handlers.destroy=[ht.z],this._fragment=function quick_play_svelte_create_main_fragment(e,t){for(var n,a,r,i,s,o,l,u,f,_,h,b,g,v,O,j,y,w,k,E,C,S,N,T,A,I,L,P=t.translations.live,M=t.translations.totalTimePerSide,R=t.translations.daily,x=t.translations.maxTimePerMove,D=t.liveOptions,U=[],B=0;B<D.length;B+=1)U[B]=quick_play_svelte_create_each_block_1(e,quick_play_svelte_get_each0_context(t,D,B));var z=t.dailyOptions,$=[];for(B=0;B<z.length;B+=1)$[B]=quick_play_svelte_create_each_block(e,quick_play_svelte_get_each1_context(t,z,B));return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.i)("div"),i=Object(ht.i)("div"),s=Object(ht.i)("div"),o=Object(ht.k)(P),l=Object(ht.k)("\n\n        "),u=Object(ht.i)("div"),f=Object(ht.k)("("),_=Object(ht.k)(M),h=Object(ht.k)(")"),b=Object(ht.k)("\n\n      "),g=Object(ht.i)("div");for(var e=0;e<U.length;e+=1)U[e].c();for(v=Object(ht.k)("\n\n  "),O=Object(ht.i)("div"),j=Object(ht.i)("div"),y=Object(ht.i)("div"),w=Object(ht.i)("div"),k=Object(ht.k)(R),E=Object(ht.k)("\n\n        "),C=Object(ht.i)("div"),S=Object(ht.k)("("),N=Object(ht.k)(x),T=Object(ht.k)(")"),A=Object(ht.k)("\n\n      "),I=Object(ht.i)("div"),e=0;e<$.length;e+=1)$[e].c();s.className="title svelte-g6mkgj",u.className="subtitle svelte-g6mkgj",i.className="time-options-header sprite live svelte-g6mkgj",g.className="section-buttons svelte-g6mkgj",r.className="section svelte-g6mkgj",a.className="line svelte-g6mkgj",w.className="title svelte-g6mkgj",C.className="subtitle svelte-g6mkgj",y.className="time-options-header sprite daily svelte-g6mkgj",I.className="section-buttons svelte-g6mkgj",j.className="section svelte-g6mkgj",O.className="line svelte-g6mkgj",n.className=L="no-scroll "+(t.$isMobile?"is-mobile":"")+" svelte-g6mkgj"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(r,i),Object(ht.d)(i,s),Object(ht.d)(s,o),Object(ht.d)(i,l),Object(ht.d)(i,u),Object(ht.d)(u,f),Object(ht.d)(u,_),Object(ht.d)(u,h),Object(ht.d)(r,b),Object(ht.d)(r,g);for(var c=0;c<U.length;c+=1)U[c].m(g,null);for(Object(ht.d)(n,v),Object(ht.d)(n,O),Object(ht.d)(O,j),Object(ht.d)(j,y),Object(ht.d)(y,w),Object(ht.d)(w,k),Object(ht.d)(y,E),Object(ht.d)(y,C),Object(ht.d)(C,S),Object(ht.d)(C,N),Object(ht.d)(C,T),Object(ht.d)(j,A),Object(ht.d)(j,I),c=0;c<$.length;c+=1)$[c].m(I,null)},p:function p(t,a){if(t.translations&&P!==(P=a.translations.live)&&Object(ht.E)(o,P),t.translations&&M!==(M=a.translations.totalTimePerSide)&&Object(ht.E)(_,M),t.liveOptions){D=a.liveOptions;for(var r=0;r<D.length;r+=1){var i=quick_play_svelte_get_each0_context(a,D,r);U[r]?U[r].p(t,i):(U[r]=quick_play_svelte_create_each_block_1(e,i),U[r].c(),U[r].m(g,null))}for(;r<U.length;r+=1)U[r].d(1);U.length=D.length}if(t.translations&&R!==(R=a.translations.daily)&&Object(ht.E)(k,R),t.translations&&x!==(x=a.translations.maxTimePerMove)&&Object(ht.E)(N,x),t.dailyOptions){for(z=a.dailyOptions,r=0;r<z.length;r+=1){var s=quick_play_svelte_get_each1_context(a,z,r);$[r]?$[r].p(t,s):($[r]=quick_play_svelte_create_each_block(e,s),$[r].c(),$[r].m(I,null))}for(;r<$.length;r+=1)$[r].d(1);$.length=z.length}t.$isMobile&&L!==(L="no-scroll "+(a.$isMobile?"is-mobile":"")+" svelte-g6mkgj")&&(n.className=L)},d:function d(e){e&&Object(ht.p)(n),Object(ht.m)(U,e),Object(ht.m)($,e)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}Object(ht.e)(Quick_play_svelte.prototype,ht.x),Object(ht.e)(Quick_play_svelte.prototype,{createQuickChallenge:function createQuickChallenge(e){this.store.resetState();var t=this.store.get().timeVariant;e.isDaily&&(t.days=e.days,this.store.set({isDaily:!0,isLive:!1,timeVariant:t}),this.store.createDailyChallenge(),this.fire("closeModal")),e.isLive&&(t.inc=e.inc,t.mins=e.mins,t.secs=e.secs,this.store.set({isDaily:!1,isLive:!0,timeVariant:t}),this.store.createLiveChallenge())}});var Rn=Quick_play_svelte;n(340);function relativeTime(e){var t=e.start_time,n=e.end_time;return Qt(t,void 0===n?null:n)}function tournamentIconColor(e){var t;return t=e.game_type===q.g.CHESS&&e.game_time_class?q.f[e.game_time_class]:q.f[e.game_type],Xt(t)}function tournamentIcon(e){var t=["icon-font-chess"];return e.game_type===q.g.CHESS&&e.game_time_class?t.push(e.game_time_class):t.push(e.game_type),t.join(" ")}function tournamentUrl(e,t){switch(e){case q.m.DAILY:return le.tournament(t.url);case q.m.LIVE_SWISS:return le.liveTournament(t.id);case q.m.LIVE_ARENA:default:return le.liveArenaTournament(t.id)}}function tournaments_svelte_click_handler_1(e){this._svelte.component.store.resetState()}function tournaments_svelte_get_each1_context(e,t,n){var a=Object.create(e);return a.tournament=t[n],a}function tournaments_svelte_click_handler(e){var t=this._svelte,n=t.component,a=t.ctx;n.setTournamentDisplayType(a.tournamentOption.displayType)}function tournaments_svelte_get_each0_context(e,t,n){var a=Object.create(e);return a.tournamentOption=t[n],a}function tournaments_svelte_create_each_block_1(e,t){var n,a,r,i=t.tournamentOption.label;return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.k)(i),n._svelte={component:e,ctx:t},Object(ht.c)(n,"click",tournaments_svelte_click_handler),n.className=r="tab-item "+(t.tournamentOption.displayType===t.tournamentDisplayType?"active":"")+" svelte-5spzs0"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,s){t=s,e.joinATournamentOptions&&i!==(i=t.tournamentOption.label)&&Object(ht.E)(a,i),n._svelte.ctx=t,(e.joinATournamentOptions||e.tournamentDisplayType)&&r!==(r="tab-item "+(t.tournamentOption.displayType===t.tournamentDisplayType?"active":"")+" svelte-5spzs0")&&(n.className=r)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(n,"click",tournaments_svelte_click_handler)}}}function tournaments_svelte_create_if_block_1(e,t){var n,a,r=t.translations.starts;return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.k)(r),n.className="cell svelte-5spzs0"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.translations&&r!==(r=t.translations.starts)&&Object(ht.E)(a,r)},d:function d(e){e&&Object(ht.p)(n)}}}function tournaments_svelte_create_if_block(e,t){var n,a,r=relativeTime(t.tournament);return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.k)(r),n.className="cell svelte-5spzs0"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.tournaments&&r!==(r=relativeTime(t.tournament))&&Object(ht.E)(a,r)},d:function d(e){e&&Object(ht.p)(n)}}}function tournaments_svelte_create_each_block(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g,v,O,j,y,w,k,E=t.tournament.name,C=t.tournament.registered_user_count,S=t.tournamentDisplayType!==t.tournamentTypes.DAILY&&tournaments_svelte_create_if_block(0,t);return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.i)("div"),r=Object(ht.i)("div"),i=Object(ht.i)("span"),l=Object(ht.k)("\n\n        "),u=Object(ht.i)("span"),f=Object(ht.k)(E),h=Object(ht.k)("\n\n      "),S&&S.c(),b=Object(ht.k)("\n\n      "),g=Object(ht.i)("div"),v=Object(ht.i)("span"),O=Object(ht.k)(C),j=Object(ht.k)("\n\n        "),(y=Object(ht.i)("div")).innerHTML='<span class="icon-font-chess user svelte-5spzs0"></span>',w=Object(ht.k)("\n    "),i.className=s=tournamentIcon(t.tournament)+" svelte-5spzs0",i.style.cssText=o=tournamentIconColor(t.tournament),r.className="icon-font type-icon svelte-5spzs0",u.className="truncate svelte-5spzs0",a.className=_="cell"+(t.tournamentDisplayType===t.tournamentTypes.DAILY?" is-wide":"")+" svelte-5spzs0",y.className="icon-font user-icon svelte-5spzs0",g.className="cell svelte-5spzs0",n._svelte={component:e},Object(ht.c)(n,"click",tournaments_svelte_click_handler_1),n.className="line is-result svelte-5spzs0",n.href=k=tournamentUrl(t.tournamentDisplayType,t.tournament)},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(r,i),Object(ht.d)(a,l),Object(ht.d)(a,u),Object(ht.d)(u,f),Object(ht.d)(n,h),S&&S.m(n,null),Object(ht.d)(n,b),Object(ht.d)(n,g),Object(ht.d)(g,v),Object(ht.d)(v,O),Object(ht.d)(g,j),Object(ht.d)(g,y),Object(ht.d)(n,w)},p:function p(e,t){e.tournaments&&s!==(s=tournamentIcon(t.tournament)+" svelte-5spzs0")&&(i.className=s),e.tournaments&&o!==(o=tournamentIconColor(t.tournament))&&(i.style.cssText=o),e.tournaments&&E!==(E=t.tournament.name)&&Object(ht.E)(f,E),(e.tournamentDisplayType||e.tournamentTypes)&&_!==(_="cell"+(t.tournamentDisplayType===t.tournamentTypes.DAILY?" is-wide":"")+" svelte-5spzs0")&&(a.className=_),t.tournamentDisplayType!==t.tournamentTypes.DAILY?S?S.p(e,t):((S=tournaments_svelte_create_if_block(0,t)).c(),S.m(n,b)):S&&(S.d(1),S=null),e.tournaments&&C!==(C=t.tournament.registered_user_count)&&Object(ht.E)(O,C),(e.tournamentDisplayType||e.tournaments)&&k!==(k=tournamentUrl(t.tournamentDisplayType,t.tournament))&&(n.href=k)},d:function d(e){e&&Object(ht.p)(n),S&&S.d(),Object(ht.A)(n,"click",tournaments_svelte_click_handler_1)}}}function Tournaments_svelte(e){var t=this;Object(ht.t)(this,e),this._state=Object(ht.e)(function tournaments_svelte_data(){return{allTournaments:{},gameTypeColors:q.f,joinATournamentOptions:Q,routes:le,tournamentDisplayType:q.m.LIVE,tournamentTypes:q.m,translations:W}}(),e.data),this._recompute({tournamentDisplayType:1,allTournaments:1},this._state),this._intro=!0,this._fragment=function tournaments_svelte_create_main_fragment(e,t){for(var n,a,r,i,s,o,l,u,f,_,h,b=t.translations.type,g=t.translations.players,v=t.joinATournamentOptions,O=[],j=0;j<v.length;j+=1)O[j]=tournaments_svelte_create_each_block_1(e,tournaments_svelte_get_each0_context(t,v,j));var y=t.tournamentDisplayType!==t.tournamentTypes.DAILY&&tournaments_svelte_create_if_block_1(0,t),w=t.tournaments,k=[];for(j=0;j<w.length;j+=1)k[j]=tournaments_svelte_create_each_block(e,tournaments_svelte_get_each1_context(t,w,j));return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div");for(var e=0;e<O.length;e+=1)O[e].c();for(r=Object(ht.k)("\n  "),i=Object(ht.i)("div"),s=Object(ht.i)("div"),o=Object(ht.k)(b),l=Object(ht.k)("\n\n    "),y&&y.c(),u=Object(ht.k)("\n\n    "),f=Object(ht.i)("div"),_=Object(ht.k)(g),h=Object(ht.k)("\n\n  "),e=0;e<k.length;e+=1)k[e].c();a.className="tab-container is-header",s.className="cell svelte-5spzs0",f.className="cell svelte-5spzs0",i.className="line is-header svelte-5spzs0",n.className="tournaments svelte-5spzs0"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a);for(var c=0;c<O.length;c+=1)O[c].m(a,null);for(Object(ht.d)(n,r),Object(ht.d)(n,i),Object(ht.d)(i,s),Object(ht.d)(s,o),Object(ht.d)(i,l),y&&y.m(i,null),Object(ht.d)(i,u),Object(ht.d)(i,f),Object(ht.d)(f,_),Object(ht.d)(n,h),c=0;c<k.length;c+=1)k[c].m(n,null)},p:function p(t,r){if(t.joinATournamentOptions||t.tournamentDisplayType){v=r.joinATournamentOptions;for(var s=0;s<v.length;s+=1){var c=tournaments_svelte_get_each0_context(r,v,s);O[s]?O[s].p(t,c):(O[s]=tournaments_svelte_create_each_block_1(e,c),O[s].c(),O[s].m(a,null))}for(;s<O.length;s+=1)O[s].d(1);O.length=v.length}if(t.translations&&b!==(b=r.translations.type)&&Object(ht.E)(o,b),r.tournamentDisplayType!==r.tournamentTypes.DAILY?y?y.p(t,r):((y=tournaments_svelte_create_if_block_1(0,r)).c(),y.m(i,u)):y&&(y.d(1),y=null),t.translations&&g!==(g=r.translations.players)&&Object(ht.E)(_,g),t.tournamentDisplayType||t.tournaments||t.tournamentTypes){for(w=r.tournaments,s=0;s<w.length;s+=1){var l=tournaments_svelte_get_each1_context(r,w,s);k[s]?k[s].p(t,l):(k[s]=tournaments_svelte_create_each_block(e,l),k[s].c(),k[s].m(n,null))}for(;s<k.length;s+=1)k[s].d(1);k.length=w.length}},d:function d(e){e&&Object(ht.p)(n),Object(ht.m)(O,e),y&&y.d(),Object(ht.m)(k,e)}}}(this,this._state),this.root._oncreate.push(function(){(function tournaments_svelte_oncreate(){var e=this;_n().then(function(t){e.set({allTournaments:t})})}).call(t),t.fire("update",{changed:Object(ht.f)({},t._state),current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Tournaments_svelte.prototype,ht.x),Object(ht.e)(Tournaments_svelte.prototype,{setTournamentDisplayType:function setTournamentDisplayType(e){this.set({tournamentDisplayType:e})}}),Tournaments_svelte.prototype._recompute=function _recompute(e,t){(e.tournamentDisplayType||e.allTournaments)&&this._differs(t.tournaments,t.tournaments=function tournaments_svelte_tournaments(e){var t=e.tournamentDisplayType;return e.allTournaments[t]||[]}(t))&&(e.tournaments=!0)};var xn=Tournaments_svelte;n(341);var Dn={createChallenge:function createChallenge(){var e=this;this.store.getUserRating().then(function(){return e.store.createChallenge()})},show:function show(e){switch(this.store.resetState(),e){case q.j.GAME_TIME:this.store.set({showGameTimes:!0}),this.store.setPrimaryView(q.l.CUSTOM_CHALLENGE);break;case q.j.GAME_TYPE:this.store.set({showGameTypes:!0}),this.store.setPrimaryView(q.l.CUSTOM_CHALLENGE);break;case q.j.PLAY_FRIEND:this.store.setPrimaryView(q.l.PLAY_A_FRIEND);break;case q.j.CUSTOM_CHALLENGE:this.store.setPrimaryView(q.l.CUSTOM_CHALLENGE);break;case q.j.OPEN_CHALLENGES:this.store.setPrimaryView(q.l.OPEN_CHALLENGES);break;case q.j.TOURNAMENTS:this.store.setPrimaryView(q.l.JOIN_A_TOURNAMENT)}this.store.set({show:!0})},showChallengeUser:function showChallengeUser(e){this.store.setOpponent(e),this.store.setPrimaryView(q.l.CUSTOM_CHALLENGE),this.store.set({show:!0})},hide:function hide(){this.store.resetState()}};function new_game_modal_svelte_create_if_block(e,t){var n,a,r,i,s,o,l,u,f,_,h,b;function click_handler(t){e.hide()}var g=new Nn({root:e.root,store:e.store});g.on("closeModal",function(t){e.hide()});var v=t.primaryView;function switch_props(t){return{root:e.root,store:e.store}}if(v)var O=new v(switch_props());function switch_instance_closeModal(t){e.hide()}function click_handler_1(t){e.hide()}return O&&O.on("closeModal",switch_instance_closeModal),{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.k)("\n\n    "),i=Object(ht.i)("div"),s=Object(ht.i)("div"),o=Object(ht.i)("div"),g._fragment.c(),l=Object(ht.k)("\n\n        "),u=Object(ht.i)("div"),O&&O._fragment.c(),f=Object(ht.k)("\n\n      "),_=Object(ht.i)("div"),h=Object(ht.i)("span"),Object(ht.c)(a,"click",click_handler),a.className="core-modal-background",o.className="new-game-panel panel-aside",u.className="new-game-panel panel-primary",s.className="new-game-content",h.className="icon-font-chess x svelte-mevqed",Object(ht.c)(_,"click",click_handler_1),_.className=b="icon-font close "+(t.$isMobile?"is-dark":"")+" svelte-mevqed",i.className="new-game-container",n.className="core-modal-container is-active"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(n,r),Object(ht.d)(n,i),Object(ht.d)(i,s),Object(ht.d)(s,o),g._mount(o,null),Object(ht.d)(s,l),Object(ht.d)(s,u),O&&O._mount(u,null),Object(ht.d)(i,f),Object(ht.d)(i,_),Object(ht.d)(_,h)},p:function p(e,t){v!==(v=t.primaryView)&&(O&&O.destroy(),v?((O=new v(switch_props()))._fragment.c(),O._mount(u,null),O.on("closeModal",switch_instance_closeModal)):O=null),e.$isMobile&&b!==(b="icon-font close "+(t.$isMobile?"is-dark":"")+" svelte-mevqed")&&(_.className=b)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(a,"click",click_handler),g.destroy(),O&&O.destroy(),Object(ht.A)(_,"click",click_handler_1)}}}function New_game_modal_svelte(e){var t=this;Object(ht.t)(this,e),this._state=Object(ht.e)(Object(ht.e)(this.store._init(["primaryView","show","isMobile"]),function new_game_modal_svelte_data(){return{views:{primary:q.l.CHALLENGES}}}()),e.data),this.store._add(this,["primaryView","show","isMobile"]),this._recompute({$primaryView:1},this._state),this._intro=!0,this._handlers.destroy=[ht.z],this._fragment=function new_game_modal_svelte_create_main_fragment(e,t){var n,a=t.$show&&new_game_modal_svelte_create_if_block(e,t);return{c:function c(){a&&a.c(),n=Object(ht.h)()},m:function m(e,t){a&&a.m(e,t),Object(ht.u)(e,n,t)},p:function p(t,r){r.$show?a?a.p(t,r):((a=new_game_modal_svelte_create_if_block(e,r)).c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d:function d(e){a&&a.d(e),e&&Object(ht.p)(n)}}}(this,this._state),this.root._oncreate.push(function(){(function new_game_modal_svelte_oncreate(){this.store.getUserRating()}).call(t),t.fire("update",{changed:Object(ht.f)({},t._state),current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(New_game_modal_svelte.prototype,ht.x),Object(ht.e)(New_game_modal_svelte.prototype,Dn),New_game_modal_svelte.prototype._recompute=function _recompute(e,t){e.$primaryView&&this._differs(t.primaryView,t.primaryView=function primaryView(e){var t,n=e.$primaryView;return(t={},f()(t,q.l.CUSTOM_CHALLENGE,En),f()(t,q.l.OPEN_CHALLENGES,Sn),f()(t,q.l.PLAY_A_FRIEND,Mn),f()(t,q.l.QUICK_PLAY,Rn),f()(t,q.l.JOIN_A_TOURNAMENT,xn),t)[n]}(t))&&(e.primaryView=!0)};var Un=New_game_modal_svelte;n(342);function login_modal_svelte_ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function login_modal_svelte_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?login_modal_svelte_ownKeys(n,!0).forEach(function(t){f()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):login_modal_svelte_ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Bn={show:function show(){this.store.set({show:!0})},showChallengeUser:function showChallengeUser(e){this.set({avatar:e.avatar_url,username:e.username,urls:{join:Kt(e.username),login:Object($e.i)()}}),this.show()},hide:function hide(){this.store.resetState()}};function login_modal_svelte_create_if_block(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g,v,O,j,y,w,k,E,C,S,N,T=t.translations.login,A=t.translations.or,I=t.translations.join;function click_handler(t){e.hide()}function select_block_type(e){return e.username&&e.avatar?login_modal_svelte_create_if_block_1:login_modal_svelte_create_else_block}var L=select_block_type(t),P=L(e,t);function click_handler_1(t){e.hide()}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.k)("\n\n    "),i=Object(ht.i)("div"),s=Object(ht.i)("div"),o=Object(ht.i)("div"),l=Object(ht.i)("h1"),P.c(),u=Object(ht.k)("\n        "),f=Object(ht.i)("div"),_=Object(ht.i)("a"),h=Object(ht.k)(T),g=Object(ht.k)("\n          "),v=Object(ht.i)("span"),O=Object(ht.k)(A),j=Object(ht.k)("\n          "),y=Object(ht.i)("a"),w=Object(ht.k)(I),E=Object(ht.k)("\n      "),C=Object(ht.i)("div"),S=Object(ht.i)("span"),Object(ht.c)(a,"click",click_handler),a.className="core-modal-background",o.className="login-header",_.className="form-button svelte-1muf7tv",_.rel="nofollow",_.href=b=t.urls.login,y.className="form-button svelte-1muf7tv",y.rel="nofollow",y.href=k=t.urls.join,f.className="login-buttons",s.className="default-modal-content",S.className="icon-font-chess x svelte-1muf7tv",Object(ht.c)(C,"click",click_handler_1),C.className=N="icon-font close "+(t.$isMobile?"is-dark":"")+" svelte-1muf7tv",i.className="default-modal-container",n.className="core-modal-container is-active"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(n,r),Object(ht.d)(n,i),Object(ht.d)(i,s),Object(ht.d)(s,o),Object(ht.d)(o,l),P.m(l,null),Object(ht.d)(s,u),Object(ht.d)(s,f),Object(ht.d)(f,_),Object(ht.d)(_,h),Object(ht.d)(f,g),Object(ht.d)(f,v),Object(ht.d)(v,O),Object(ht.d)(f,j),Object(ht.d)(f,y),Object(ht.d)(y,w),Object(ht.d)(i,E),Object(ht.d)(i,C),Object(ht.d)(C,S)},p:function p(t,n){L===(L=select_block_type(n))&&P?P.p(t,n):(P.d(1),(P=L(e,n)).c(),P.m(l,null)),t.translations&&T!==(T=n.translations.login)&&Object(ht.E)(h,T),t.urls&&b!==(b=n.urls.login)&&(_.href=b),t.translations&&A!==(A=n.translations.or)&&Object(ht.E)(O,A),t.translations&&I!==(I=n.translations.join)&&Object(ht.E)(w,I),t.urls&&k!==(k=n.urls.join)&&(y.href=k),t.$isMobile&&N!==(N="icon-font close "+(n.$isMobile?"is-dark":"")+" svelte-1muf7tv")&&(C.className=N)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(a,"click",click_handler),P.d(),Object(ht.A)(C,"click",click_handler_1)}}}function login_modal_svelte_create_else_block(e,t){var n,a=t.translations.loginOrJoin;return{c:function c(){n=Object(ht.k)(a)},m:function m(e,t){Object(ht.u)(e,n,t)},p:function p(e,t){e.translations&&a!==(a=t.translations.loginOrJoin)&&Object(ht.E)(n,a)},d:function d(e){e&&Object(ht.p)(n)}}}function login_modal_svelte_create_if_block_1(e,t){var n,a,r=t.translations.loginOrJoinToPlay(t.username,t.avatar);return{c:function c(){n=Object(ht.i)("noscript"),a=Object(ht.i)("noscript")},m:function m(e,t){Object(ht.u)(e,n,t),n.insertAdjacentHTML("afterend",r),Object(ht.u)(e,a,t)},p:function p(e,t){(e.translations||e.username||e.avatar)&&r!==(r=t.translations.loginOrJoinToPlay(t.username,t.avatar))&&(Object(ht.o)(n,a),n.insertAdjacentHTML("afterend",r))},d:function d(e){e&&(Object(ht.o)(n,a),Object(ht.p)(n),Object(ht.p)(a))}}}function Login_modal_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(Object(ht.e)(this.store._init(["show","isMobile"]),function login_modal_svelte_data(){return{avatar:"",translations:login_modal_svelte_objectSpread({},W,{},mt.a),urls:{},username:""}}()),e.data),this.store._add(this,["show","isMobile"]),this._intro=!0,this._handlers.destroy=[ht.z],this._fragment=function login_modal_svelte_create_main_fragment(e,t){var n,a=t.$show&&login_modal_svelte_create_if_block(e,t);return{c:function c(){a&&a.c(),n=Object(ht.h)()},m:function m(e,t){a&&a.m(e,t),Object(ht.u)(e,n,t)},p:function p(t,r){r.$show?a?a.p(t,r):((a=login_modal_svelte_create_if_block(e,r)).c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d:function d(e){a&&a.d(e),e&&Object(ht.p)(n)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}Object(ht.e)(Login_modal_svelte.prototype,ht.x),Object(ht.e)(Login_modal_svelte.prototype,Bn);var zn=Login_modal_svelte;function new_game_store_ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function new_game_store_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?new_game_store_ownKeys(n,!0).forEach(function(t){f()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):new_game_store_ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var $n={computed:[["timeVariantLabel",["isDaily","isLive","timeVariant"],function(e,t,n){return ue({isDaily:e,isLive:t,timeVariant:n})}]],name:"newGame",state:new_game_store_objectSpread({},ce()),Store:class store_NewGameStore extends l.a{createChallenge(){this.get().isDaily?this.createDailyChallenge():this.createLiveChallenge()}createChallengeLink(){this.get().isDaily?this.createDailyChallengeLink():this.createLiveChallengeLink()}createDailyChallenge(){this.persistNewGameSettings();var e=this.get(),t=an(e);e.opponent?un(e.opponent.username,t).then(function(e){var t=e.data;window.postMessage({key:B.b,type:B.c.success,message:t.message},window.location.origin)}).catch(function(e){var t=e.response;window.postMessage({key:B.b,type:B.c.error,message:t.data.message[0]},window.location.origin)}):fn(t).then(function(t){var n=t.data;window.postMessage({key:B.b,type:B.c.success,message:n.message},window.location.origin),window.postMessage({key:_.e.SEND_NEW_GAME_SEEK_SUCCESS,isDaily:e.isDaily,isLive:e.isLive,timeVariant:e.timeVariant},window.location.origin)}).catch(function(e){var t=e.response;window.postMessage({key:B.b,type:B.c.error,message:t.data.message[0]},window.location.origin)}),this.resetState()}createDailyChallengeLink(){this.persistNewGameSettings();var e=this.get(),t=an(e);t.baseTime=24*t.daysPerMove*60*60*10,delete t.daysPerMove,delete t.maxRatingDelta,delete t.minRatingDelta,dn(t).then(function(e){var t=e.gameSeek;window.location.href=le.dailySeek(t.id)}).catch(function(e){var t=e.response;window.postMessage({key:B.b,type:B.c.error,message:t.data.message[0]},window.location.origin)})}createLiveChallenge(){this.persistNewGameSettings();var e=this.get(),t=tn(e);window.location.href=t,O(j.IS_LIVE)&&this.resetState()}createLiveChallengeLink(){this.persistNewGameSettings();var e=this.get(),t=tn(e);this.set({show:!1}),window.location.href="".concat(t,"&shareable=1")}goToPreviousPrimaryView(){var e=this.get().previousPrimaryView;e&&this.set({primaryView:e,previousPrimaryView:null})}getUserRating(e){var t=this;return pn().then(function(n){if((null==n||null==n.dailySettings)&&!e)return t.getUserRating(!0);t.set({userRating:n.dailyRating.chess}),t.set({dailySettings:new_game_store_objectSpread({},n.dailySettings,{minRatingDelta:n.dailySettings.minRatingDelta||0,maxRatingDelta:n.dailySettings.maxRatingDelta||0})}),t.set({liveSettings:new_game_store_objectSpread({},n.liveSettings,{minRatingDelta:Math.abs(n.liveSettings.minRatingDelta),maxRatingDelta:n.liveSettings.maxRatingDelta||0})})})}persistNewGameSettings(){var e=this.get(),t=e.isDaily,n=e.isLive,a=e.isUsingCustomLiveTimeVariant,r=e.timeVariant;oe.a.set(q.a.NEW_GAME_IS_DAILY,t),oe.a.set(q.a.NEW_GAME_IS_LIVE,n),oe.a.set(q.a.NEW_GAME_IS_USING_CUSTOM_LIVE_TIME_VARIANT,a),oe.a.set(q.a.NEW_GAME_TIME_VARIANT_WITH_INCREMENT,r)}resetColor(){this.set({playerColor:q.k.RANDOM})}resetOpponent(){this.set({opponent:null}),this.resetColor()}resetState(){var e=this.get(),t=e.dailySettings,n=e.liveSettings;this.set(new_game_store_objectSpread({},ce(),{liveSettings:n,dailySettings:t}))}returnHome(){this.resetState(),this.set({show:!0})}setOpponent(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.set({opponent:e}),t?this.set({isFriendChallenge:!0}):this.set({isFriendChallenge:!1})}setPrimaryView(e){if(e===q.l.PLAY_COMPUTER)return this.set({show:!1}),void(window.location.href=le.playVsComputer(te.difficulty));this.set({primaryView:e})}toggleShowTimeOptions(){var e=this.get().showGameTimes;this.set({showGameTimes:!e,showGameTypes:!1})}toggleShowTypeOptions(){var e=this.get().showGameTypes;this.set({showGameTimes:!1,showGameTypes:!e})}}},Fn=n(63);gt.default.register($n);var Hn=document.getElementById("new-game-modal"),Gn=function(){return function createResizeListener(){window.addEventListener("resize",Object(Fn.a)(function(){var e=gt.default.stores.newGame.get().isMobile,t=window.innerWidth<=_.j.MOBILE_WIDTH;e!==t&&gt.default.stores.newGame.set({isMobile:t})},200))}(),Oe()?new Un({target:Hn,store:gt.default.stores.newGame}):new zn({target:Hn,store:gt.default.stores.newGame})},qn=document.querySelector(_.l.MAIN_NAV),Vn=null,Wn=function createComponent(){Vn||(Vn=Gn())},Kn=function setupNewGameModal(){Wn(),Vn.show()},Yn=n(64),Jn=function handleMobileHover(e){var t=e.targets,n=e.hideOnClickOutside;Yn.a&&t.filter(function(e){return Boolean(e.attributes.href)}).forEach(function(e){return e.addEventListener("click",function(t){e.classList.contains(_.d.HOVER)||(e.classList.add(_.d.HOVER),n&&yt(e).then(function(){e.classList.remove(_.d.HOVER)}),t.preventDefault())})})},Qn=n(4),Zn=n(18),Xn=n(65);n(343);function Connect_search_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)({},e.data),this._intro=!0,this._fragment=function connect_search_svelte_create_main_fragment(e,t){var n,a,r,i,s=!1;function input_input_handler(){s=!0,e.set({value:a.value}),s=!1}function input_handler(t){e.fire("input",t)}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("input"),r=Object(ht.k)("\n\n  "),i=Object(ht.i)("span"),Object(ht.c)(a,"input",input_input_handler),Object(ht.c)(a,"input",input_handler),a.className="field svelte-152k943",a.placeholder=t.placeholder,Object(ht.D)(a,"type","text"),i.className="icon-font-chess magnifying-glass svelte-152k943",n.className="search svelte-152k943"},m:function m(e,s){Object(ht.u)(e,n,s),Object(ht.d)(n,a),a.value=t.value,Object(ht.d)(n,r),Object(ht.d)(n,i)},p:function p(e,t){!s&&e.value&&(a.value=t.value),e.placeholder&&(a.placeholder=t.placeholder)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(a,"input",input_input_handler),Object(ht.A)(a,"input",input_handler)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}Object(ht.e)(Connect_search_svelte.prototype,ht.x);var ea=Connect_search_svelte;n(344);var ta={openChat:function openChat(e,t){e.preventDefault(),sr(document.querySelector(_.l.MAIN_NAV_CONNECT_LINK)),Ut(),this.store.openChat(t)},toggleInactive:function toggleInactive(){Zn.d.list.toggleInactive()}};function panel_chats_list_svelte_click_handler(e){var t=this._svelte,n=t.component,a=t.ctx;n.openChat(e,a.chat.id)}function panel_chats_list_svelte_get_each_context(e,t,n){var a=Object.create(e);return a.chat=t[n],a}function panel_chats_list_svelte_create_if_block_1(e,t){var n,a,r,i,s,o=t.chat.name,l={chat:t.chat,size:"25"},u=new Xn.a({root:e.root,store:e.store,data:l}),f=t.chat.newMessages&&panel_chats_list_svelte_create_if_block_2(e,t);return{c:function c(){n=Object(ht.i)("div"),u._fragment.c(),a=Object(ht.k)("\n\n      "),r=Object(ht.i)("span"),i=Object(ht.k)(o),s=Object(ht.k)("\n\n      "),f&&f.c(),r.className="chat-list-name svelte-2r9iv5",n._svelte={component:e,ctx:t},Object(ht.c)(n,"click",panel_chats_list_svelte_click_handler),n.className="chat-list-item svelte-2r9iv5"},m:function m(e,t){Object(ht.u)(e,n,t),u._mount(n,null),Object(ht.d)(n,a),Object(ht.d)(n,r),Object(ht.d)(r,i),Object(ht.d)(n,s),f&&f.m(n,null)},p:function p(a,r){t=r;var s={};a.$filteredList&&(s.chat=t.chat),u._set(s),a.$filteredList&&o!==(o=t.chat.name)&&Object(ht.E)(i,o),t.chat.newMessages?f?f.p(a,t):((f=panel_chats_list_svelte_create_if_block_2(e,t)).c(),f.m(n,null)):f&&(f.d(1),f=null),n._svelte.ctx=t},d:function d(e){e&&Object(ht.p)(n),u.destroy(),f&&f.d(),Object(ht.A)(n,"click",panel_chats_list_svelte_click_handler)}}}function panel_chats_list_svelte_create_if_block_2(e,t){var n,a,r=t.chat.newMessages;return{c:function c(){n=Object(ht.i)("span"),a=Object(ht.k)(r),n.className="chat-list-counter svelte-2r9iv5"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.$filteredList&&r!==(r=t.chat.newMessages)&&Object(ht.E)(a,r)},d:function d(e){e&&Object(ht.p)(n)}}}function panel_chats_list_svelte_create_each_block(e,t){var n,a=(t.chat.isActive||t.$showInactiveChats)&&panel_chats_list_svelte_create_if_block_1(e,t);return{c:function c(){a&&a.c(),n=Object(ht.h)()},m:function m(e,t){a&&a.m(e,t),Object(ht.u)(e,n,t)},p:function p(t,r){r.chat.isActive||r.$showInactiveChats?a?a.p(t,r):((a=panel_chats_list_svelte_create_if_block_1(e,r)).c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d:function d(e){a&&a.d(e),e&&Object(ht.p)(n)}}}function panel_chats_list_svelte_create_if_block(e,t){var n,a;function click_handler_1(t){e.toggleInactive()}return{c:function c(){n=Object(ht.i)("button"),a=Object(ht.k)(t.togglerText),Object(ht.c)(n,"click",click_handler_1),n.className="chat-list-inactive-toggler svelte-2r9iv5",n.type="button"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.togglerText&&Object(ht.E)(a,t.togglerText)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(n,"click",click_handler_1)}}}function Panel_chats_list_svelte(e){Object(ht.t)(this,e),this.store=function store_1(){return gt.default.stores.chat}(),this._state=Object(ht.e)(Object(ht.e)(this.store._init(["inactiveChatsCounter","showInactiveChats","searchQuery","filteredList"]),function panel_chats_list_svelte_data(){return{chatTranslations:Qn.f,translations:mt.a}}()),e.data),this.store._add(this,["inactiveChatsCounter","showInactiveChats","searchQuery","filteredList"]),this._recompute({$inactiveChatsCounter:1,$showInactiveChats:1},this._state),this._intro=!0,this._handlers.destroy=[ht.z],this._fragment=function panel_chats_list_svelte_create_main_fragment(e,t){var n,a,r,i={},s={placeholder:t.translations.searchUsername};void 0!==t.$searchQuery&&(s.value=t.$searchQuery,i.value=!0);var o=new ea({root:e.root,store:e.store,data:s,_bind:function _bind(t,n){var a={};!i.value&&t.value&&(a.searchQuery=n.value),e.store.set(a),i={}}});e.root._beforecreate.push(function(){o._bind({value:1},o.get())}),o.on("input",function(t){e.store.filterList()});for(var l=t.$filteredList,u=[],f=0;f<l.length;f+=1)u[f]=panel_chats_list_svelte_create_each_block(e,panel_chats_list_svelte_get_each_context(t,l,f));var _=t.$inactiveChatsCounter&&panel_chats_list_svelte_create_if_block(e,t);return{c:function c(){o._fragment.c(),n=Object(ht.k)("\n\n");for(var e=0;e<u.length;e+=1)u[e].c();a=Object(ht.k)("\n\n"),_&&_.c(),r=Object(ht.h)()},m:function m(e,t){o._mount(e,t),Object(ht.u)(e,n,t);for(var i=0;i<u.length;i+=1)u[i].m(e,t);Object(ht.u)(e,a,t),_&&_.m(e,t),Object(ht.u)(e,r,t)},p:function p(n,s){t=s;var c={};if(n.translations&&(c.placeholder=t.translations.searchUsername),!i.value&&n.$searchQuery&&(c.value=t.$searchQuery,i.value=void 0!==t.$searchQuery),o._set(c),i={},n.$filteredList||n.$showInactiveChats){l=t.$filteredList;for(var d=0;d<l.length;d+=1){var f=panel_chats_list_svelte_get_each_context(t,l,d);u[d]?u[d].p(n,f):(u[d]=panel_chats_list_svelte_create_each_block(e,f),u[d].c(),u[d].m(a.parentNode,a))}for(;d<u.length;d+=1)u[d].d(1);u.length=l.length}t.$inactiveChatsCounter?_?_.p(n,t):((_=panel_chats_list_svelte_create_if_block(e,t)).c(),_.m(r.parentNode,r)):_&&(_.d(1),_=null)},d:function d(e){o.destroy(e),e&&Object(ht.p)(n),Object(ht.m)(u,e),e&&Object(ht.p)(a),_&&_.d(e),e&&Object(ht.p)(r)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Panel_chats_list_svelte.prototype,ht.x),Object(ht.e)(Panel_chats_list_svelte.prototype,ta),Panel_chats_list_svelte.prototype._recompute=function _recompute(e,t){(e.$inactiveChatsCounter||e.$showInactiveChats)&&this._differs(t.togglerText,t.togglerText=function togglerText(e){var t=e.$inactiveChatsCounter;return e.$showInactiveChats?Qn.f.hideInactiveChats(t):Qn.f.showInactiveChats(t)}(t))&&(e.togglerText=!0)};var na=Panel_chats_list_svelte;n(345);function Three_loader_bounce_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)({},e.data),this._intro=!0,this._fragment=function three_loader_bounce_svelte_create_main_fragment(e,t){var n,a,r,i,s,o,l;return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.k)("\n  "),i=Object(ht.i)("div"),s=Object(ht.k)("\n  "),o=Object(ht.i)("div"),a.className="dot bounce1 svelte-1oyt1y8",i.className="dot bounce2 svelte-1oyt1y8",o.className="dot svelte-1oyt1y8",n.className=l="component "+t.style+" svelte-1oyt1y8"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(n,r),Object(ht.d)(n,i),Object(ht.d)(n,s),Object(ht.d)(n,o)},p:function p(e,t){e.style&&l!==(l="component "+t.style+" svelte-1oyt1y8")&&(n.className=l)},d:function d(e){e&&Object(ht.p)(n)}}}(0,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}Object(ht.e)(Three_loader_bounce_svelte.prototype,ht.x);var aa=Three_loader_bounce_svelte;n(346);function profileUrl(e){return h.default.generate("web_member_view",{username:e})}var ra={clubSearch:Object(Ln.a)(function clubSearch(){this.store.searchClub()},250),friendSearch:Object(Ln.a)(function friendSearch(){this.store.searchUsername().then(function(){Jn({targets:Array.from(document.querySelectorAll(_.l.FRIEND_RESULTS)),hideOnClickOutside:!0})})},250),friendChange:function friendChange(e){e.target.value.length&&(this.store.set({searchingFriends:!0}),this.store.set({friendSearchResults:[]}),this.friendSearch())},mouseEnterEvent:Bt,mouseLeaveEvent:zt,sendChallenge:function sendChallenge(e,t){e.preventDefault(),sr(document.querySelector(_.l.MAIN_NAV_CONNECT_LINK)),Ut(),Kn(),gt.default.stores.newGame.setOpponent(t),gt.default.stores.newGame.setPrimaryView(q.l.CUSTOM_CHALLENGE),gt.default.stores.newGame.set({show:!0})},startDirectChat:function startDirectChat(e,t){e.preventDefault(),sr(document.querySelector(_.l.MAIN_NAV_CONNECT_LINK)),Ut(),gt.default.stores.chat.startDirectChat({avatarUrl:t.avatar_url,id:String(t.uuid),username:t.username})}};function players_clubs_svelte_get_each_context_1(e,t,n){var a=Object.create(e);return a.club=t[n],a}function mouseleave_handler_1(e){this._svelte.component.mouseLeaveEvent(e)}function mouseenter_handler_1(e){this._svelte.component.mouseEnterEvent(e)}function players_clubs_svelte_click_handler_1(e){var t=this._svelte,n=t.component,a=t.ctx;n.startDirectChat(e,a.friend)}function players_clubs_svelte_mouseleave_handler(e){this._svelte.component.mouseLeaveEvent(e)}function players_clubs_svelte_mouseenter_handler(e){this._svelte.component.mouseEnterEvent(e)}function players_clubs_svelte_click_handler(e){var t=this._svelte,n=t.component,a=t.ctx;n.sendChallenge(e,a.friend)}function players_clubs_svelte_get_each_context(e,t,n){var a=Object.create(e);return a.friend=t[n],a}function players_clubs_svelte_create_if_block(e,t){var n,a,r,i=t.showTabs&&players_clubs_svelte_create_if_block_10(e,t);function select_block_type(e){return e.showContentFriends?players_clubs_svelte_create_if_block_1:e.showContentClubs?players_clubs_svelte_create_if_block_6:e.showContentChat?players_clubs_svelte_create_if_block_8:void 0}var s=select_block_type(t),o=s&&s(e,t);return{c:function c(){n=Object(ht.i)("div"),i&&i.c(),a=Object(ht.k)("\n    "),r=Object(ht.i)("div"),o&&o.c(),r.className="tab-content svelte-1rbtdnt",n.className="component svelte-1rbtdnt"},m:function m(e,t){Object(ht.u)(e,n,t),i&&i.m(n,null),Object(ht.d)(n,a),Object(ht.d)(n,r),o&&o.m(r,null)},p:function p(t,c){c.showTabs?i?i.p(t,c):((i=players_clubs_svelte_create_if_block_10(e,c)).c(),i.m(n,a)):i&&(i.d(1),i=null),s===(s=select_block_type(c))&&o?o.p(t,c):(o&&o.d(1),(o=s&&s(e,c))&&o.c(),o&&o.m(r,null))},d:function d(e){e&&Object(ht.p)(n),i&&i.d(),o&&o.d()}}}function players_clubs_svelte_create_if_block_10(e,t){var n,a,r,i=t.$navData.friends.length&&players_clubs_svelte_create_if_block_13(e,t),s=t.$clubs.length&&players_clubs_svelte_create_if_block_12(e,t),o=t.$displayChatTab&&players_clubs_svelte_create_if_block_11(e,t);return{c:function c(){n=Object(ht.i)("div"),i&&i.c(),a=Object(ht.k)("\n\n      "),s&&s.c(),r=Object(ht.k)("\n\n      "),o&&o.c(),n.className="tabs svelte-1rbtdnt"},m:function m(e,t){Object(ht.u)(e,n,t),i&&i.m(n,null),Object(ht.d)(n,a),s&&s.m(n,null),Object(ht.d)(n,r),o&&o.m(n,null)},p:function p(t,c){c.$navData.friends.length?i?i.p(t,c):((i=players_clubs_svelte_create_if_block_13(e,c)).c(),i.m(n,a)):i&&(i.d(1),i=null),c.$clubs.length?s?s.p(t,c):((s=players_clubs_svelte_create_if_block_12(e,c)).c(),s.m(n,r)):s&&(s.d(1),s=null),c.$displayChatTab?o?o.p(t,c):((o=players_clubs_svelte_create_if_block_11(e,c)).c(),o.m(n,null)):o&&(o.d(1),o=null)},d:function d(e){e&&Object(ht.p)(n),i&&i.d(),s&&s.d(),o&&o.d()}}}function players_clubs_svelte_create_if_block_13(e,t){var n,a,r,i=t.translations.friends;function click_handler(n){e.store.set({currentTab:t.tabs.FRIENDS_TAB})}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.k)(i),Object(ht.c)(n,"click",click_handler),n.className=r="tab "+(t.currentTab===t.tabs.FRIENDS_TAB?"active":"")+" svelte-1rbtdnt"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,s){t=s,e.translations&&i!==(i=t.translations.friends)&&Object(ht.E)(a,i),(e.currentTab||e.tabs)&&r!==(r="tab "+(t.currentTab===t.tabs.FRIENDS_TAB?"active":"")+" svelte-1rbtdnt")&&(n.className=r)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(n,"click",click_handler)}}}function players_clubs_svelte_create_if_block_12(e,t){var n,a,r,i=t.translations.clubs;function click_handler(n){e.store.set({currentTab:t.tabs.CLUBS_TAB})}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.k)(i),Object(ht.c)(n,"click",click_handler),n.className=r="tab "+(t.currentTab===t.tabs.CLUBS_TAB?"active":"")+" svelte-1rbtdnt"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,s){t=s,e.translations&&i!==(i=t.translations.clubs)&&Object(ht.E)(a,i),(e.currentTab||e.tabs)&&r!==(r="tab "+(t.currentTab===t.tabs.CLUBS_TAB?"active":"")+" svelte-1rbtdnt")&&(n.className=r)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(n,"click",click_handler)}}}function players_clubs_svelte_create_if_block_11(e,t){var n,a,r,i=t.translations.chat;function click_handler(n){e.store.set({currentTab:t.tabs.CHATS_TAB})}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.k)(i),Object(ht.c)(n,"click",click_handler),n.className=r="tab "+(t.currentTab===t.tabs.CHATS_TAB?"active":"")+" svelte-1rbtdnt"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,s){t=s,e.translations&&i!==(i=t.translations.chat)&&Object(ht.E)(a,i),(e.currentTab||e.tabs)&&r!==(r="tab "+(t.currentTab===t.tabs.CHATS_TAB?"active":"")+" svelte-1rbtdnt")&&(n.className=r)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(n,"click",click_handler)}}}function players_clubs_svelte_create_if_block_8(e,t){var n,a=!t.showTabs&&players_clubs_svelte_create_if_block_9(e,t),r=new na({root:e.root,store:e.store});return{c:function c(){a&&a.c(),n=Object(ht.k)("\n\n        "),r._fragment.c()},m:function m(e,t){a&&a.m(e,t),Object(ht.u)(e,n,t),r._mount(e,t)},p:function p(t,r){r.showTabs?a&&(a.d(1),a=null):a?a.p(t,r):((a=players_clubs_svelte_create_if_block_9(e,r)).c(),a.m(n.parentNode,n))},d:function d(e){a&&a.d(e),e&&Object(ht.p)(n),r.destroy(e)}}}function players_clubs_svelte_create_if_block_6(e,t){var n,a,r,i={},s=!t.showTabs&&players_clubs_svelte_create_if_block_7(e,t),o={placeholder:t.translations.typeClubName};void 0!==t.$clubSearch&&(o.value=t.$clubSearch,i.value=!0);var l=new ea({root:e.root,store:e.store,data:o,_bind:function _bind(t,n){var a={};!i.value&&t.value&&(a.clubSearch=n.value),e.store.set(a),i={}}});e.root._beforecreate.push(function(){l._bind({value:1},l.get())});for(var u=t.clubs,f=[],_=0;_<u.length;_+=1)f[_]=players_clubs_svelte_create_each_block_1(e,players_clubs_svelte_get_each_context_1(t,u,_));return{c:function c(){s&&s.c(),n=Object(ht.k)("\n        "),l._fragment.c(),a=Object(ht.k)("\n\n        ");for(var e=0;e<f.length;e+=1)f[e].c();r=Object(ht.h)()},m:function m(e,t){s&&s.m(e,t),Object(ht.u)(e,n,t),l._mount(e,t),Object(ht.u)(e,a,t);for(var i=0;i<f.length;i+=1)f[i].m(e,t);Object(ht.u)(e,r,t)},p:function p(a,o){(t=o).showTabs?s&&(s.d(1),s=null):s?s.p(a,t):((s=players_clubs_svelte_create_if_block_7(e,t)).c(),s.m(n.parentNode,n));var c={};if(a.translations&&(c.placeholder=t.translations.typeClubName),!i.value&&a.$clubSearch&&(c.value=t.$clubSearch,i.value=void 0!==t.$clubSearch),l._set(c),i={},a.clubs){u=t.clubs;for(var d=0;d<u.length;d+=1){var _=players_clubs_svelte_get_each_context_1(t,u,d);f[d]?f[d].p(a,_):(f[d]=players_clubs_svelte_create_each_block_1(e,_),f[d].c(),f[d].m(r.parentNode,r))}for(;d<f.length;d+=1)f[d].d(1);f.length=u.length}},d:function d(e){s&&s.d(e),e&&Object(ht.p)(n),l.destroy(e),e&&Object(ht.p)(a),Object(ht.m)(f,e),e&&Object(ht.p)(r)}}}function players_clubs_svelte_create_if_block_1(e,t){var n,a,r,i,s={},o=!t.showTabs&&players_clubs_svelte_create_if_block_5(e,t),l={placeholder:t.translations.typeFriendName};void 0!==t.$friendSearch&&(l.value=t.$friendSearch,s.value=!0);var u=new ea({root:e.root,store:e.store,data:l,_bind:function _bind(t,n){var a={};!s.value&&t.value&&(a.friendSearch=n.value),e.store.set(a),s={}}});e.root._beforecreate.push(function(){u._bind({value:1},u.get())}),u.on("input",function(t){e.friendChange(t)});for(var f=t.$friendSearch.length>0&&players_clubs_svelte_create_if_block_2(e,t),_=t.friends,h=[],b=0;b<_.length;b+=1)h[b]=players_clubs_svelte_create_each_block(e,players_clubs_svelte_get_each_context(t,_,b));return{c:function c(){o&&o.c(),n=Object(ht.k)("\n        "),u._fragment.c(),a=Object(ht.k)("\n\n        "),f&&f.c(),r=Object(ht.k)("\n        ");for(var e=0;e<h.length;e+=1)h[e].c();i=Object(ht.h)()},m:function m(e,t){o&&o.m(e,t),Object(ht.u)(e,n,t),u._mount(e,t),Object(ht.u)(e,a,t),f&&f.m(e,t),Object(ht.u)(e,r,t);for(var s=0;s<h.length;s+=1)h[s].m(e,t);Object(ht.u)(e,i,t)},p:function p(a,c){(t=c).showTabs?o&&(o.d(1),o=null):o?o.p(a,t):((o=players_clubs_svelte_create_if_block_5(e,t)).c(),o.m(n.parentNode,n));var l={};if(a.translations&&(l.placeholder=t.translations.typeFriendName),!s.value&&a.$friendSearch&&(l.value=t.$friendSearch,s.value=void 0!==t.$friendSearch),u._set(l),s={},t.$friendSearch.length>0?f?f.p(a,t):((f=players_clubs_svelte_create_if_block_2(e,t)).c(),f.m(r.parentNode,r)):f&&(f.d(1),f=null),a.friends||a.translations){_=t.friends;for(var d=0;d<_.length;d+=1){var m=players_clubs_svelte_get_each_context(t,_,d);h[d]?h[d].p(a,m):(h[d]=players_clubs_svelte_create_each_block(e,m),h[d].c(),h[d].m(i.parentNode,i))}for(;d<h.length;d+=1)h[d].d(1);h.length=_.length}},d:function d(e){o&&o.d(e),e&&Object(ht.p)(n),u.destroy(e),e&&Object(ht.p)(a),f&&f.d(e),e&&Object(ht.p)(r),Object(ht.m)(h,e),e&&Object(ht.p)(i)}}}function players_clubs_svelte_create_if_block_9(e,t){var n,a,r=t.translations.chat;return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.k)(r),n.className="tabless-label svelte-1rbtdnt"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.translations&&r!==(r=t.translations.chat)&&Object(ht.E)(a,r)},d:function d(e){e&&Object(ht.p)(n)}}}function players_clubs_svelte_create_if_block_7(e,t){var n,a,r=t.translations.clubs;return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.k)(r),n.className="tabless-label svelte-1rbtdnt"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.translations&&r!==(r=t.translations.clubs)&&Object(ht.E)(a,r)},d:function d(e){e&&Object(ht.p)(n)}}}function players_clubs_svelte_create_each_block_1(e,t){var n,a,r,i,s,o,l,u,f,_=t.club.name;return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.i)("img"),s=Object(ht.k)("\n            "),o=Object(ht.i)("div"),l=Object(ht.k)(_),u=Object(ht.k)("\n          "),a.alt=r=t.club.name,a.src=i=t.club.icon,a.className="avatar svelte-1rbtdnt",a.width="25",a.height="25",o.className="name svelte-1rbtdnt",n.className="svelte-result sub-link svelte-1rbtdnt",n.href=f=t.club.url,n.target="_self"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(n,s),Object(ht.d)(n,o),Object(ht.d)(o,l),Object(ht.d)(n,u)},p:function p(e,t){e.clubs&&r!==(r=t.club.name)&&(a.alt=r),e.clubs&&i!==(i=t.club.icon)&&(a.src=i),e.clubs&&_!==(_=t.club.name)&&Object(ht.E)(l,_),e.clubs&&f!==(f=t.club.url)&&(n.href=f)},d:function d(e){e&&Object(ht.p)(n)}}}function players_clubs_svelte_create_if_block_5(e,t){var n,a,r=t.translations.friends;return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.k)(r),n.className="tabless-label svelte-1rbtdnt"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.translations&&r!==(r=t.translations.friends)&&Object(ht.E)(a,r)},d:function d(e){e&&Object(ht.p)(n)}}}function players_clubs_svelte_create_if_block_2(e,t){var n;function select_block_type_1(e){return e.$friendSearch.length<3?players_clubs_svelte_create_if_block_3:e.$searchingFriends?players_clubs_svelte_create_if_block_4:void 0}var a=select_block_type_1(t),r=a&&a(e,t);return{c:function c(){r&&r.c(),n=Object(ht.h)()},m:function m(e,t){r&&r.m(e,t),Object(ht.u)(e,n,t)},p:function p(t,i){a===(a=select_block_type_1(i))&&r?r.p(t,i):(r&&r.d(1),(r=a&&a(e,i))&&r.c(),r&&r.m(n.parentNode,n))},d:function d(e){r&&r.d(e),e&&Object(ht.p)(n)}}}function players_clubs_svelte_create_if_block_4(e,t){var n,a=new aa({root:e.root,store:e.store,data:{style:"light"}});return{c:function c(){n=Object(ht.i)("span"),a._fragment.c(),n.className="svelte-1rbtdnt"},m:function m(e,t){Object(ht.u)(e,n,t),a._mount(n,null)},p:ht.v,d:function d(e){e&&Object(ht.p)(n),a.destroy()}}}function players_clubs_svelte_create_if_block_3(e,t){var n,a,r=t.translations.pleaseEnter;return{c:function c(){n=Object(ht.i)("span"),a=Object(ht.k)(r),n.className="svelte-1rbtdnt"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.translations&&r!==(r=t.translations.pleaseEnter)&&Object(ht.E)(a,r)},d:function d(e){e&&Object(ht.p)(n)}}}function players_clubs_svelte_create_each_block(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g,v=t.friend.username,O={size:"25",src:t.friend.avatar_url,live:t.friend.is_in_livechess,online:t.friend.is_online,username:t.friend.username},j=new Tn.a({root:e.root,store:e.store,data:O});return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.i)("span"),j._fragment.c(),r=Object(ht.k)("\n\n            "),i=Object(ht.i)("div"),s=Object(ht.k)(v),o=Object(ht.k)("\n\n            "),l=Object(ht.i)("div"),f=Object(ht.k)("\n\n            "),_=Object(ht.i)("div"),b=Object(ht.k)("\n          "),a.className="avatar svelte-1rbtdnt",i.className="name svelte-1rbtdnt",l._svelte={component:e,ctx:t},Object(ht.c)(l,"click",players_clubs_svelte_click_handler),Object(ht.c)(l,"mouseenter",players_clubs_svelte_mouseenter_handler),Object(ht.c)(l,"mouseleave",players_clubs_svelte_mouseleave_handler),l.className="connect-tooltip-listener friend-action icon-font icon-font-chess sub-link chess-board-plus svelte-1rbtdnt",l.dataset.tooltipContent=u=t.translations.newGame,_._svelte={component:e,ctx:t},Object(ht.c)(_,"click",players_clubs_svelte_click_handler_1),Object(ht.c)(_,"mouseenter",mouseenter_handler_1),Object(ht.c)(_,"mouseleave",mouseleave_handler_1),_.className="connect-tooltip-listener friend-action icon-font icon-font-chess sub-link chat svelte-1rbtdnt",_.dataset.tooltipContent=h=t.translations.chat,n.className="svelte-result svelte-friend-result sub-link svelte-1rbtdnt",n.href=g=profileUrl(t.friend.username),n.target="_self"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),j._mount(a,null),Object(ht.d)(n,r),Object(ht.d)(n,i),Object(ht.d)(i,s),Object(ht.d)(n,o),Object(ht.d)(n,l),Object(ht.d)(n,f),Object(ht.d)(n,_),Object(ht.d)(n,b)},p:function p(e,a){t=a;var r={};e.friends&&(r.src=t.friend.avatar_url),e.friends&&(r.live=t.friend.is_in_livechess),e.friends&&(r.online=t.friend.is_online),e.friends&&(r.username=t.friend.username),j._set(r),e.friends&&v!==(v=t.friend.username)&&Object(ht.E)(s,v),l._svelte.ctx=t,e.translations&&u!==(u=t.translations.newGame)&&(l.dataset.tooltipContent=u),_._svelte.ctx=t,e.translations&&h!==(h=t.translations.chat)&&(_.dataset.tooltipContent=h),e.friends&&g!==(g=profileUrl(t.friend.username))&&(n.href=g)},d:function d(e){e&&Object(ht.p)(n),j.destroy(),Object(ht.A)(l,"click",players_clubs_svelte_click_handler),Object(ht.A)(l,"mouseenter",players_clubs_svelte_mouseenter_handler),Object(ht.A)(l,"mouseleave",players_clubs_svelte_mouseleave_handler),Object(ht.A)(_,"click",players_clubs_svelte_click_handler_1),Object(ht.A)(_,"mouseenter",mouseenter_handler_1),Object(ht.A)(_,"mouseleave",mouseleave_handler_1)}}}function Players_clubs_svelte(e){var t=this;Object(ht.t)(this,e),this._state=Object(ht.e)(Object(ht.e)(this.store._init(["friendSearch","friendSearchResults","navData","clubs","clubSearch","currentTab","displayChatTab","searchingFriends"]),function players_clubs_svelte_data(){return{selectors:_.l,tabs:Fe.b,translations:mt.a}}()),e.data),this.store._add(this,["friendSearch","friendSearchResults","navData","clubs","clubSearch","currentTab","displayChatTab","searchingFriends"]),this._recompute({$friendSearch:1,$friendSearchResults:1,$navData:1,$clubs:1,$clubSearch:1,$currentTab:1,tabs:1,$displayChatTab:1,currentTab:1,showTabs:1},this._state),this._intro=!0,this._handlers.destroy=[ht.z],this._fragment=function players_clubs_svelte_create_main_fragment(e,t){var n,a=t.showComponent&&players_clubs_svelte_create_if_block(e,t);return{c:function c(){a&&a.c(),n=Object(ht.h)()},m:function m(e,t){a&&a.m(e,t),Object(ht.u)(e,n,t)},p:function p(t,r){r.showComponent?a?a.p(t,r):((a=players_clubs_svelte_create_if_block(e,r)).c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d:function d(e){a&&a.d(e),e&&Object(ht.p)(n)}}}(this,this._state),this.root._oncreate.push(function(){(function players_clubs_svelte_oncreate(){Jn({targets:Array.from(document.querySelectorAll(_.l.FRIEND_RESULTS)),hideOnClickOutside:!0})}).call(t),t.fire("update",{changed:Object(ht.f)({},t._state),current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Players_clubs_svelte.prototype,ht.x),Object(ht.e)(Players_clubs_svelte.prototype,ra),Players_clubs_svelte.prototype._recompute=function _recompute(e,t){(e.$friendSearch||e.$friendSearchResults||e.$navData)&&this._differs(t.friends,t.friends=function players_clubs_svelte_friends(e){var t=e.$friendSearch,n=e.$friendSearchResults,a=e.$navData;return t.length?n:a.friends}(t))&&(e.friends=!0),(e.$clubs||e.$clubSearch)&&this._differs(t.clubs,t.clubs=function clubs(e){var t=e.$clubs,n=e.$clubSearch;return n.length?t.filter(function(e){return e.name.toLowerCase().indexOf(n.toLowerCase())>=0}):t}(t))&&(e.clubs=!0),(e.$clubs||e.$currentTab||e.$navData||e.tabs)&&this._differs(t.currentTab,t.currentTab=function currentTab(e){var t=e.$clubs,n=e.$currentTab,a=e.$navData,r=e.tabs,i=n;return n!==r.FRIENDS_TAB||a.friends.length||(i=r.CLUBS_TAB),n!==r.CLUBS_TAB||t.length||(i=r.FRIENDS_TAB),i}(t))&&(e.currentTab=!0),(e.$clubs||e.$navData||e.$displayChatTab)&&this._differs(t.showComponent,t.showComponent=function showComponent(e){var t=e.$clubs,n=e.$navData,a=e.$displayChatTab;return Oe()&&(n.friends&&n.friends.length||t.length||a)}(t))&&(e.showComponent=!0),(e.$navData||e.$clubs||e.$displayChatTab)&&this._differs(t.showTabs,t.showTabs=function showTabs(e){var t=e.$navData,n=e.$clubs,a=e.$displayChatTab;return[t.friends.length,n.length,a].filter(function(e){return e}).length>1}(t))&&(e.showTabs=!0),(e.$navData||e.currentTab||e.showTabs||e.tabs)&&this._differs(t.showContentFriends,t.showContentFriends=function showContentFriends(e){var t=e.$navData,n=e.currentTab,a=e.showTabs,r=e.tabs;return a&&n===r.FRIENDS_TAB||!a&&t.friends.length}(t))&&(e.showContentFriends=!0),(e.$clubs||e.currentTab||e.showTabs||e.tabs)&&this._differs(t.showContentClubs,t.showContentClubs=function showContentClubs(e){var t=e.$clubs,n=e.currentTab,a=e.showTabs,r=e.tabs;return a&&n===r.CLUBS_TAB||!a&&t.length}(t))&&(e.showContentClubs=!0),(e.$displayChatTab||e.currentTab||e.showTabs||e.tabs)&&this._differs(t.showContentChat,t.showContentChat=function showContentChat(e){var t=e.$displayChatTab,n=e.currentTab,a=e.showTabs,r=e.tabs;return a&&n===r.CHATS_TAB||!a&&t}(t))&&(e.showContentChat=!0)};var ia=Players_clubs_svelte;function connect_panel_svelte_create_if_block_3(e,t){var n,a,r,i,s,o,l,u=t.translations.articles,f=t.translations.news;return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.k)(u),i=Object(ht.k)("\n\n  "),s=Object(ht.i)("a"),o=Object(ht.k)(f),n.href=r=t.routes.articles,n.className="link main-link sprite articles",s.href=l=t.routes.news,s.className="link main-link sprite news"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.u)(e,i,t),Object(ht.u)(e,s,t),Object(ht.d)(s,o)},p:function p(e,t){e.translations&&u!==(u=t.translations.articles)&&Object(ht.E)(a,u),e.routes&&r!==(r=t.routes.articles)&&(n.href=r),e.translations&&f!==(f=t.translations.news)&&Object(ht.E)(o,f),e.routes&&l!==(l=t.routes.news)&&(s.href=l)},d:function d(e){e&&(Object(ht.p)(n),Object(ht.p)(i),Object(ht.p)(s))}}}function connect_panel_svelte_create_if_block_2(e,t){var n,a,r,i=t.translations.blogs;return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.k)(i),n.href=r=t.routes.blogs,n.className="link main-link sprite blogs"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.translations&&i!==(i=t.translations.blogs)&&Object(ht.E)(a,i),e.routes&&r!==(r=t.routes.blogs)&&(n.href=r)},d:function d(e){e&&Object(ht.p)(n)}}}function connect_panel_svelte_create_if_block_1(e,t){var n,a,r,i=t.translations.friends;return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.k)(i),n.href=r=t.routes.friends,n.className="link main-link sprite friends"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.translations&&i!==(i=t.translations.friends)&&Object(ht.E)(a,i),e.routes&&r!==(r=t.routes.friends)&&(n.href=r)},d:function d(e){e&&Object(ht.p)(n)}}}function connect_panel_svelte_create_if_block(e,t){var n,a,r,i=t.translations.blogs;return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.k)(i),n.href=r=t.routes.blogs,n.className="link main-link sprite blogs"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.translations&&i!==(i=t.translations.blogs)&&Object(ht.E)(a,i),e.routes&&r!==(r=t.routes.blogs)&&(n.href=r)},d:function d(e){e&&Object(ht.p)(n)}}}function Connect_panel_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(function connect_panel_svelte_data(){return{isLoggedIn:Oe(),translations:mt.a}}(),e.data),this._intro=!0,this._fragment=function connect_panel_svelte_create_main_fragment(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g,v,O,j,y,w,k,E,C=t.translations.forums,S=t.translations.clubs,N=t.translations.members,T=t.translations.coaches,A=!t.chessTodayAccess&&connect_panel_svelte_create_if_block_3(0,t),I=!t.chessTodayAccess&&connect_panel_svelte_create_if_block_2(0,t),L=t.isLoggedIn&&connect_panel_svelte_create_if_block_1(0,t),P=t.chessTodayAccess&&connect_panel_svelte_create_if_block(0,t),M=new ia({root:e.root,store:e.store}),R=new Ht({root:e.root,store:e.store,slots:{default:Object(ht.j)()}});return{c:function c(){A&&A.c(),n=Object(ht.k)("\n\n  "),a=Object(ht.i)("a"),r=Object(ht.k)(C),s=Object(ht.k)("\n\n  "),I&&I.c(),o=Object(ht.k)("\n\n  "),l=Object(ht.i)("a"),u=Object(ht.k)(S),_=Object(ht.k)("\n\n  "),L&&L.c(),h=Object(ht.k)("\n\n  "),P&&P.c(),b=Object(ht.k)("\n\n  "),g=Object(ht.i)("a"),v=Object(ht.k)(N),j=Object(ht.k)("\n\n  "),y=Object(ht.i)("a"),w=Object(ht.k)(T),E=Object(ht.k)("\n\n  "),M._fragment.c(),R._fragment.c(),a.href=i=t.routes.forums,a.className="link main-link sprite connect",l.href=f=t.routes.clubs,l.className="link main-link sprite clubs",g.href=O=t.routes.members,g.className="link main-link sprite members",y.href=k=t.routes.coaches,y.className="link main-link sprite coaches"},m:function m(e,t){A&&A.m(R._slotted.default,null),Object(ht.d)(R._slotted.default,n),Object(ht.d)(R._slotted.default,a),Object(ht.d)(a,r),Object(ht.d)(R._slotted.default,s),I&&I.m(R._slotted.default,null),Object(ht.d)(R._slotted.default,o),Object(ht.d)(R._slotted.default,l),Object(ht.d)(l,u),Object(ht.d)(R._slotted.default,_),L&&L.m(R._slotted.default,null),Object(ht.d)(R._slotted.default,h),P&&P.m(R._slotted.default,null),Object(ht.d)(R._slotted.default,b),Object(ht.d)(R._slotted.default,g),Object(ht.d)(g,v),Object(ht.d)(R._slotted.default,j),Object(ht.d)(R._slotted.default,y),Object(ht.d)(y,w),Object(ht.d)(R._slotted.default,E),M._mount(R._slotted.default,null),R._mount(e,t)},p:function p(e,t){t.chessTodayAccess?A&&(A.d(1),A=null):A?A.p(e,t):((A=connect_panel_svelte_create_if_block_3(0,t)).c(),A.m(n.parentNode,n)),e.translations&&C!==(C=t.translations.forums)&&Object(ht.E)(r,C),e.routes&&i!==(i=t.routes.forums)&&(a.href=i),t.chessTodayAccess?I&&(I.d(1),I=null):I?I.p(e,t):((I=connect_panel_svelte_create_if_block_2(0,t)).c(),I.m(o.parentNode,o)),e.translations&&S!==(S=t.translations.clubs)&&Object(ht.E)(u,S),e.routes&&f!==(f=t.routes.clubs)&&(l.href=f),t.isLoggedIn?L?L.p(e,t):((L=connect_panel_svelte_create_if_block_1(0,t)).c(),L.m(h.parentNode,h)):L&&(L.d(1),L=null),t.chessTodayAccess?P?P.p(e,t):((P=connect_panel_svelte_create_if_block(0,t)).c(),P.m(b.parentNode,b)):P&&(P.d(1),P=null),e.translations&&N!==(N=t.translations.members)&&Object(ht.E)(v,N),e.routes&&O!==(O=t.routes.members)&&(g.href=O),e.translations&&T!==(T=t.translations.coaches)&&Object(ht.E)(w,T),e.routes&&k!==(k=t.routes.coaches)&&(y.href=k)},d:function d(e){A&&A.d(),I&&I.d(),L&&L.d(),P&&P.d(),M.destroy(),R.destroy(e)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Connect_panel_svelte.prototype,ht.x);var sa=Connect_panel_svelte,oa=document.querySelector(".connect.nav-panel"),ca=null,la=n(32);n(347);function notification_controls_svelte_ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function notification_controls_svelte_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?notification_controls_svelte_ownKeys(n,!0).forEach(function(t){f()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):notification_controls_svelte_ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ua={clearAll:function clearAll(e){e.stopPropagation(),this.store.ignoreAll()},mouseEnterEvent:Bt,mouseLeaveEvent:zt,toggleShowNotificationsOnHome:function toggleShowNotificationsOnHome(e){e.preventDefault(),Ut(),this.store.toggleShowNotificationsOnHome()}};function notification_controls_svelte_create_if_block_3(e,t){var n,a,r=t.translations.clearAll;function click_handler(t){e.clearAll(t)}return{c:function c(){n=Object(ht.i)("span"),a=Object(ht.k)(r),Object(ht.c)(n,"click",click_handler),n.className="clear-all"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.translations&&r!==(r=t.translations.clearAll)&&Object(ht.E)(a,r)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(n,"click",click_handler)}}}function notification_controls_svelte_create_if_block_2(e,t){var n,a=new aa({root:e.root,store:e.store,data:{style:"light"}});return{c:function c(){n=Object(ht.i)("div"),a._fragment.c(),n.className="loading-container svelte-1u1h7mz"},m:function m(e,t){Object(ht.u)(e,n,t),a._mount(n,null)},d:function d(e){e&&Object(ht.p)(n),a.destroy()}}}function notification_controls_svelte_create_if_block_1(e,t){var n,a,r;function click_handler(t){e.toggleShowNotificationsOnHome(t)}function mouseenter_handler(t){e.mouseEnterEvent(t)}function mouseleave_handler(t){e.mouseLeaveEvent(t)}return{c:function c(){n=Object(ht.i)("a"),(a=Object(ht.i)("span")).innerHTML='<span class="icon-font-chess square-out"></span>',a.className="icon-font",Object(ht.c)(n,"click",click_handler),Object(ht.c)(n,"mouseenter",mouseenter_handler),Object(ht.c)(n,"mouseleave",mouseleave_handler),n.className="notifications-tooltip-listener",n.dataset.tooltipContent=r=t.translations.addNotificationPanelToHome,n.href=!0},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.translations&&r!==(r=t.translations.addNotificationPanelToHome)&&(n.dataset.tooltipContent=r)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(n,"click",click_handler),Object(ht.A)(n,"mouseenter",mouseenter_handler),Object(ht.A)(n,"mouseleave",mouseleave_handler)}}}function notification_controls_svelte_create_if_block(e,t){var n,a,r;function click_handler(t){e.toggleShowNotificationsOnHome(t)}function mouseenter_handler(t){e.mouseEnterEvent(t)}function mouseleave_handler(t){e.mouseLeaveEvent(t)}return{c:function c(){n=Object(ht.i)("a"),(a=Object(ht.i)("span")).innerHTML='<span class="icon-font-chess square-in"></span>',a.className="icon-font",Object(ht.c)(n,"click",click_handler),Object(ht.c)(n,"mouseenter",mouseenter_handler),Object(ht.c)(n,"mouseleave",mouseleave_handler),n.className="notifications-tooltip-listener",n.dataset.tooltipContent=r=t.translations.removeNotificationPanelFromHome,n.href=!0},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.translations&&r!==(r=t.translations.removeNotificationPanelFromHome)&&(n.dataset.tooltipContent=r)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(n,"click",click_handler),Object(ht.A)(n,"mouseenter",mouseenter_handler),Object(ht.A)(n,"mouseleave",mouseleave_handler)}}}function Notification_controls_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(Object(ht.e)(this.store._init(["showNotificationsOnHome","notifications","isFetching"]),function notification_controls_svelte_data(){return{routes:G,translations:notification_controls_svelte_objectSpread({},mt.a,{},fe)}}()),e.data),this.store._add(this,["showNotificationsOnHome","notifications","isFetching"]),this._recompute({$showNotificationsOnHome:1,homeWidget:1},this._state),this._intro=!0,this._handlers.destroy=[ht.z],this._fragment=function notification_controls_svelte_create_main_fragment(e,t){var n,a,r,i,s,o,l,u,f,_=t.$notifications.length>0&&notification_controls_svelte_create_if_block_3(e,t),h=t.$isFetching&&notification_controls_svelte_create_if_block_2(e),b=t.showToggleInNavWidget&&notification_controls_svelte_create_if_block_1(e,t),g=t.showToggleInHomeWidget&&notification_controls_svelte_create_if_block(e,t);return{c:function c(){n=Object(ht.i)("div"),_&&_.c(),a=Object(ht.k)("\n\n  "),h&&h.c(),r=Object(ht.k)("\n\n  "),i=Object(ht.i)("span"),b&&b.c(),s=Object(ht.k)("\n\n    "),g&&g.c(),o=Object(ht.k)("\n\n    "),l=Object(ht.i)("a"),(u=Object(ht.i)("span")).innerHTML='<span class="icon-font-chess circle-gearwheel"></span>',u.className="icon-font",l.href=f=t.routes.settings,l.target="_self",l.className="settings",i.className="settings-container svelte-1u1h7mz",n.className="controls"},m:function m(e,t){Object(ht.u)(e,n,t),_&&_.m(n,null),Object(ht.d)(n,a),h&&h.m(n,null),Object(ht.d)(n,r),Object(ht.d)(n,i),b&&b.m(i,null),Object(ht.d)(i,s),g&&g.m(i,null),Object(ht.d)(i,o),Object(ht.d)(i,l),Object(ht.d)(l,u)},p:function p(t,c){c.$notifications.length>0?_?_.p(t,c):((_=notification_controls_svelte_create_if_block_3(e,c)).c(),_.m(n,a)):_&&(_.d(1),_=null),c.$isFetching?h||((h=notification_controls_svelte_create_if_block_2(e)).c(),h.m(n,r)):h&&(h.d(1),h=null),c.showToggleInNavWidget?b?b.p(t,c):((b=notification_controls_svelte_create_if_block_1(e,c)).c(),b.m(i,s)):b&&(b.d(1),b=null),c.showToggleInHomeWidget?g?g.p(t,c):((g=notification_controls_svelte_create_if_block(e,c)).c(),g.m(i,o)):g&&(g.d(1),g=null),t.routes&&f!==(f=c.routes.settings)&&(l.href=f)},d:function d(e){e&&Object(ht.p)(n),_&&_.d(),h&&h.d(),b&&b.d(),g&&g.d()}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Notification_controls_svelte.prototype,ht.x),Object(ht.e)(Notification_controls_svelte.prototype,ua),Notification_controls_svelte.prototype._recompute=function _recompute(e,t){(e.$showNotificationsOnHome||e.homeWidget)&&(this._differs(t.showToggleInHomeWidget,t.showToggleInHomeWidget=function showToggleInHomeWidget(e){var t=e.$showNotificationsOnHome,n=e.homeWidget;return t&&n}(t))&&(e.showToggleInHomeWidget=!0),this._differs(t.showToggleInNavWidget,t.showToggleInNavWidget=function showToggleInNavWidget(e){var t=e.$showNotificationsOnHome,n=e.homeWidget;return!t&&!n}(t))&&(e.showToggleInNavWidget=!0))};var da=Notification_controls_svelte;n(348);var fa={accept:_async(function(e,t){var n=this;if(e.stopPropagation(),e.preventDefault(),n.set({disappearing:!0}),t.alertType!==H.offlineChallenge)return _await(n.store.acceptRequest(t),function(){n.set({disappearing:!1})});window.location=G.live(t.id)}),decline:_async(function(e,t){var n=this;return e.stopPropagation(),e.preventDefault(),n.set({disappearing:!0}),_await(n.store.declineRequest(t),function(){n.set({disappearing:!1})})}),ignore:_async(function(e,t){var n=this;return e.stopPropagation(),e.preventDefault(),n.set({disappearing:!0}),_await(n.store.ignore(t),function(){n.set({disappearing:!1})})})};function create_else_block_1(e,t){var n,a,r,i;return{c:function c(){(n=Object(ht.i)("img")).alt=a=t.notification.alertType,n.className="notification-image",n.src=r=t.notification.image,n.srcset=i=t.notification.srcset,n.height="32",n.width="32"},m:function m(e,t){Object(ht.u)(e,n,t)},p:function p(e,t){e.notification&&a!==(a=t.notification.alertType)&&(n.alt=a),e.notification&&r!==(r=t.notification.image)&&(n.src=r),e.notification&&i!==(i=t.notification.srcset)&&(n.srcset=i)},d:function d(e){e&&Object(ht.p)(n)}}}function notification_item_svelte_create_if_block_1(e,t){var n,a,r;return{c:function c(){n=Object(ht.i)("div"),(a=Object(ht.i)("span")).className=r="icon-font-chess "+Object($e.a)(t.notification.contentType)+" svelte-11zdfcx",n.className="icon-font notification-icon svelte-11zdfcx"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.notification&&r!==(r="icon-font-chess "+Object($e.a)(t.notification.contentType)+" svelte-11zdfcx")&&(a.className=r)},d:function d(e){e&&Object(ht.p)(n)}}}function notification_item_svelte_create_else_block(e,t){var n;function click_handler(n){e.ignore(n,t.notification)}return{c:function c(){(n=Object(ht.i)("div")).innerHTML='<span class="icon-font-chess x"></span>',Object(ht.c)(n,"click",click_handler),n.className="icon-font close"},m:function m(e,t){Object(ht.u)(e,n,t)},p:function p(e,n){t=n},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(n,"click",click_handler)}}}function notification_item_svelte_create_if_block(e,t){var n,a,r;function click_handler(n){e.accept(n,t.notification)}function click_handler_1(n){e.decline(n,t.notification)}return{c:function c(){(n=Object(ht.i)("div")).innerHTML='<span class="icon-font-chess checkmark"></span>',a=Object(ht.k)("\n\n    "),(r=Object(ht.i)("div")).innerHTML='<span class="icon-font-chess x"></span>',Object(ht.c)(n,"click",click_handler),n.className="icon-font request accept",Object(ht.c)(r,"click",click_handler_1),r.className="icon-font request decline"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.u)(e,a,t),Object(ht.u)(e,r,t)},p:function p(e,n){t=n},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(n,"click",click_handler),e&&(Object(ht.p)(a),Object(ht.p)(r)),Object(ht.A)(r,"click",click_handler_1)}}}function Notification_item_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(function notification_item_svelte_data(){return{disappearing:!1,noAvatar:window.Config?window.Config.noAvatar:"",types:H}}(),e.data),this._intro=!0,this._fragment=function notification_item_svelte_create_main_fragment(e,t){var n,a,r,i,s,o,l=t.notification.content;function select_block_type(e){return e.notification.alertType===e.types.comment?notification_item_svelte_create_if_block_1:create_else_block_1}var u=select_block_type(t),f=u(e,t);function select_block_type_1(e){return["friend_request","offline_challenges","user_group_request"].includes(e.notification.alertType)?notification_item_svelte_create_if_block:notification_item_svelte_create_else_block}var _=select_block_type_1(t),h=_(e,t);return{c:function c(){n=Object(ht.i)("a"),f.c(),a=Object(ht.k)("\n\n  "),r=Object(ht.i)("div"),i=Object(ht.k)("\n\n  "),h.c(),r.className="notification-content",n.className=s="sb-notification "+(t.disappearing?"disappearing":"")+" svelte-11zdfcx",n.href=o=t.notification.route,n.target="_self"},m:function m(e,t){Object(ht.u)(e,n,t),f.m(n,null),Object(ht.d)(n,a),Object(ht.d)(n,r),r.innerHTML=l,Object(ht.d)(n,i),h.m(n,null)},p:function p(t,i){u===(u=select_block_type(i))&&f?f.p(t,i):(f.d(1),(f=u(e,i)).c(),f.m(n,a)),t.notification&&l!==(l=i.notification.content)&&(r.innerHTML=l),_===(_=select_block_type_1(i))&&h?h.p(t,i):(h.d(1),(h=_(e,i)).c(),h.m(n,null)),t.disappearing&&s!==(s="sb-notification "+(i.disappearing?"disappearing":"")+" svelte-11zdfcx")&&(n.className=s),t.notification&&o!==(o=i.notification.route)&&(n.href=o)},d:function d(e){e&&Object(ht.p)(n),f.d(),h.d()}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}Object(ht.e)(Notification_item_svelte.prototype,ht.x),Object(ht.e)(Notification_item_svelte.prototype,fa);var _a=Notification_item_svelte;n(349);function notifications_svelte_ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function notifications_svelte_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?notifications_svelte_ownKeys(n,!0).forEach(function(t){f()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):notifications_svelte_ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function notifications_svelte_get_each_context_1(e,t,n){var a=Object.create(e);return a.notification=t[n],a.each_value_1=t,a.notification_index=n,a}function notifications_svelte_get_each_context(e,t,n){var a=Object.create(e);return a.group=t[n],a.each_value=t,a.group_index=n,a}function notifications_svelte_create_if_block_3(e,t){var n={homeWidget:t.homeWidget},a=new da({root:e.root,store:e.store,data:n});return{c:function c(){a._fragment.c()},m:function m(e,t){a._mount(e,t)},p:function p(e,t){var n={};e.homeWidget&&(n.homeWidget=t.homeWidget),a._set(n)},d:function d(e){a.destroy(e)}}}function notifications_svelte_create_else_block(e,t){for(var n,a=t.$notifications,r=[],i=0;i<a.length;i+=1)r[i]=notifications_svelte_create_each_block(e,notifications_svelte_get_each_context(t,a,i));return{c:function c(){for(var e=0;e<r.length;e+=1)r[e].c();n=Object(ht.h)()},m:function m(e,t){for(var a=0;a<r.length;a+=1)r[a].m(e,t);Object(ht.u)(e,n,t)},p:function p(t,i){if(t.$notifications){a=i.$notifications;for(var s=0;s<a.length;s+=1){var o=notifications_svelte_get_each_context(i,a,s);r[s]?r[s].p(t,o):(r[s]=notifications_svelte_create_each_block(e,o),r[s].c(),r[s].m(n.parentNode,n))}for(;s<r.length;s+=1)r[s].d(1);r.length=a.length}},d:function d(e){Object(ht.m)(r,e),e&&Object(ht.p)(n)}}}function notifications_svelte_create_if_block_1(e,t){var n,a=t.translations.noAlerts;return{c:function c(){n=Object(ht.k)(a)},m:function m(e,t){Object(ht.u)(e,n,t)},p:function p(e,t){e.translations&&a!==(a=t.translations.noAlerts)&&Object(ht.E)(n,a)},d:function d(e){e&&Object(ht.p)(n)}}}function notifications_svelte_create_else_block_1(e,t){var n,a,r,i=t.group.type.title;return{c:function c(){n=Object(ht.i)("header"),a=Object(ht.i)("span"),r=Object(ht.k)(i),n.className="notification-group-heading"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(a,r)},p:function p(e,t){e.$notifications&&i!==(i=t.group.type.title)&&Object(ht.E)(r,i)},d:function d(e){e&&Object(ht.p)(n)}}}function notifications_svelte_create_if_block_2(e,t){var n,a,r,i,s,o,l,u=t.group.type.title;return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.i)("header"),r=Object(ht.i)("span"),i=Object(ht.k)(u),s=Object(ht.k)("\n                "),(o=Object(ht.i)("span")).className="icon-font icon-font-chess chevron-right svelte-e93gn0",a.className="notification-group-heading",n.href=l=t.group.type.url,n.target="_self"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(r,i),Object(ht.d)(a,s),Object(ht.d)(a,o)},p:function p(e,t){e.$notifications&&u!==(u=t.group.type.title)&&Object(ht.E)(i,u),e.$notifications&&l!==(l=t.group.type.url)&&(n.href=l)},d:function d(e){e&&Object(ht.p)(n)}}}function notifications_svelte_create_each_block_1(e,t){var n={},a={};void 0!==t.group&&(a.group=t.group,n.group=!0),void 0!==t.notification&&(a.notification=t.notification,n.notification=!0);var r=new _a({root:e.root,store:e.store,data:a,_bind:function _bind(a,r){var i={};!n.group&&a.group&&(t.each_value[t.group_index]=r.group=r.group,i.notifications=t.$notifications),!n.notification&&a.notification&&(t.each_value_1[t.notification_index]=r.notification=r.notification,i.notifications=t.$notifications),e.store.set(i),n={}}});return e.root._beforecreate.push(function(){r._bind({group:1,notification:1},r.get())}),{c:function c(){r._fragment.c()},m:function m(e,t){r._mount(e,t)},p:function p(e,a){t=a;var i={};!n.group&&e.$notifications&&(i.group=t.group,n.group=void 0!==t.group),!n.notification&&e.$notifications&&(i.notification=t.notification,n.notification=void 0!==t.notification),r._set(i),n={}},d:function d(e){r.destroy(e)}}}function notifications_svelte_create_each_block(e,t){var n,a,r;function select_block_type_1(e){return e.group.type.url?notifications_svelte_create_if_block_2:notifications_svelte_create_else_block_1}for(var i=select_block_type_1(t),s=i(e,t),o=t.group.notifications,l=[],u=0;u<o.length;u+=1)l[u]=notifications_svelte_create_each_block_1(e,notifications_svelte_get_each_context_1(t,o,u));return{c:function c(){n=Object(ht.i)("div"),s.c(),a=Object(ht.k)("\n\n          ");for(var e=0;e<l.length;e+=1)l[e].c();n.className=r="notification-group "+t.group.type.id+" svelte-e93gn0"},m:function m(e,t){Object(ht.u)(e,n,t),s.m(n,null),Object(ht.d)(n,a);for(var r=0;r<l.length;r+=1)l[r].m(n,null)},p:function p(t,c){if(i===(i=select_block_type_1(c))&&s?s.p(t,c):(s.d(1),(s=i(e,c)).c(),s.m(n,a)),t.$notifications){o=c.group.notifications;for(var u=0;u<o.length;u+=1){var d=notifications_svelte_get_each_context_1(c,o,u);l[u]?l[u].p(t,d):(l[u]=notifications_svelte_create_each_block_1(e,d),l[u].c(),l[u].m(n,null))}for(;u<l.length;u+=1)l[u].d(1);l.length=o.length}t.$notifications&&r!==(r="notification-group "+c.group.type.id+" svelte-e93gn0")&&(n.className=r)},d:function d(e){e&&Object(ht.p)(n),s.d(),Object(ht.m)(l,e)}}}function notifications_svelte_create_if_block(e,t){var n={homeWidget:t.homeWidget},a=new da({root:e.root,store:e.store,data:n});return{c:function c(){a._fragment.c()},m:function m(e,t){a._mount(e,t)},p:function p(e,t){var n={};e.homeWidget&&(n.homeWidget=t.homeWidget),a._set(n)},d:function d(e){a.destroy(e)}}}function Notifications_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(Object(ht.e)(this.store._init(["isFetching","notifications","showNotificationsOnHome"]),function notifications_svelte_data(){return{routes:G,translations:notifications_svelte_objectSpread({},mt.a,{},fe)}}()),e.data),this.store._add(this,["isFetching","notifications","showNotificationsOnHome"]),this._recompute({$isFetching:1,$notifications:1,$showNotificationsOnHome:1,homeWidget:1},this._state),this._intro=!0,this._handlers.destroy=[ht.z],this._fragment=function notifications_svelte_create_main_fragment(e,t){var n,a,r,i,s,o,l=!t.homeWidget&&notifications_svelte_create_if_block_3(e,t);function select_block_type(e){return e.showNoAlerts?notifications_svelte_create_if_block_1:notifications_svelte_create_else_block}var u=select_block_type(t),f=u(e,t),_=t.homeWidget&&!t.isNewHome&&notifications_svelte_create_if_block(e,t);return{c:function c(){n=Object(ht.i)("div"),l&&l.c(),a=Object(ht.k)("\n\n  "),r=Object(ht.i)("div"),f.c(),s=Object(ht.k)("\n\n"),_&&_.c(),o=Object(ht.h)(),r.className=i=(t.$notifications.length?"":"no-notifications")+" svelte-e93gn0",n.className="notification-groups"},m:function m(e,t){Object(ht.u)(e,n,t),l&&l.m(n,null),Object(ht.d)(n,a),Object(ht.d)(n,r),f.m(r,null),Object(ht.u)(e,s,t),_&&_.m(e,t),Object(ht.u)(e,o,t)},p:function p(t,s){s.homeWidget?l&&(l.d(1),l=null):l?l.p(t,s):((l=notifications_svelte_create_if_block_3(e,s)).c(),l.m(n,a)),u===(u=select_block_type(s))&&f?f.p(t,s):(f.d(1),(f=u(e,s)).c(),f.m(r,null)),t.$notifications&&i!==(i=(s.$notifications.length?"":"no-notifications")+" svelte-e93gn0")&&(r.className=i),s.homeWidget&&!s.isNewHome?_?_.p(t,s):((_=notifications_svelte_create_if_block(e,s)).c(),_.m(o.parentNode,o)):_&&(_.d(1),_=null)},d:function d(e){e&&Object(ht.p)(n),l&&l.d(),f.d(),e&&Object(ht.p)(s),_&&_.d(e),e&&Object(ht.p)(o)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Notifications_svelte.prototype,ht.x),Notifications_svelte.prototype._recompute=function _recompute(e,t){(e.$isFetching||e.$notifications)&&this._differs(t.showNoAlerts,t.showNoAlerts=function showNoAlerts(e){var t=e.$isFetching,n=e.$notifications;return!t&&0===n.length}(t))&&(e.showNoAlerts=!0),(e.$showNotificationsOnHome||e.homeWidget)&&(this._differs(t.showToggleInHomeWidget,t.showToggleInHomeWidget=function notifications_svelte_showToggleInHomeWidget(e){var t=e.$showNotificationsOnHome,n=e.homeWidget;return t&&n}(t))&&(e.showToggleInHomeWidget=!0),this._differs(t.showToggleInNavWidget,t.showToggleInNavWidget=function notifications_svelte_showToggleInNavWidget(e){var t=e.$showNotificationsOnHome,n=e.homeWidget;return!t&&!n}(t))&&(e.showToggleInNavWidget=!0))};var ha=Notifications_svelte,ma={},pa=document.getElementById(b.c.NAV_ROOT),ba=function getConstant(e,t){return ma[e]||(pa&&pa.getAttribute(e)?ma[e]=Number(pa.getAttribute(e)):ma[e]=t),ma[e]},ga={MESSAGE_UNREAD_COUNT_MAX:"data-constant-message-unread-count-max"};function memberRoute(e){return h.default.generate("web_member_view",{username:e})}function trophiesRoute(e){return h.default.generate("web_awards_member",{username:e})}var va={logout:function logout(e){var t=document.querySelector(".form.logout");e.preventDefault(),t.submit()}};function home_panel_svelte_create_if_block_4(e,t){var n,a,r,i=t.translations.membership;return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.k)(i),n.href=r=t.routes.membership,n.target="_self",n.className="link main-link sprite diamond"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.translations&&i!==(i=t.translations.membership)&&Object(ht.E)(a,i),e.routes&&r!==(r=t.routes.membership)&&(n.href=r)},d:function d(e){e&&Object(ht.p)(n)}}}function home_panel_svelte_create_if_block_3(e,t){var n,a,r=t.translations.freeTrial;return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.k)(r),n.href=function membershipRouteWithCode(e){return h.default.generate("web_membership",{c:e})}("navHome"),n.target="_self",n.className="link main-link trial sprite diamond"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.translations&&r!==(r=t.translations.freeTrial)&&Object(ht.E)(a,r)},d:function d(e){e&&Object(ht.p)(n)}}}function home_panel_svelte_create_else_block(e,t){var n;return{c:function c(){(n=Object(ht.i)("span")).className="svelte-badge",n.dataset.badge="messages"},m:function m(e,t){Object(ht.u)(e,n,t)},p:ht.v,d:function d(e){e&&Object(ht.p)(n)}}}function home_panel_svelte_create_if_block_2(e,t){var n,a;return{c:function c(){n=Object(ht.i)("span"),a=Object(ht.k)(t.messages),n.className="svelte-badge badge",n.dataset.badge="messages"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.messages&&Object(ht.E)(a,t.messages)},d:function d(e){e&&Object(ht.p)(n)}}}function home_panel_svelte_create_if_block_1(e,t){var n,a,r,i=t.translations.membership;return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.k)(i),n.href=r=t.routes.membership,n.target="_self",n.className="link main-link sprite diamond"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.translations&&i!==(i=t.translations.membership)&&Object(ht.E)(a,i),e.routes&&r!==(r=t.routes.membership)&&(n.href=r)},d:function d(e){e&&Object(ht.p)(n)}}}function home_panel_svelte_create_if_block(e,t){var n,a=new ha({root:e.root,store:e.store,data:{homeWidget:!1}});return{c:function c(){n=Object(ht.i)("div"),a._fragment.c(),n.className="notifications"},m:function m(e,t){Object(ht.u)(e,n,t),a._mount(n,null)},d:function d(e){e&&Object(ht.p)(n),a.destroy()}}}function Home_panel_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(Object(ht.e)(this.store._init(["badges"]),function home_panel_svelte_data(){return{routes:la.b,translations:mt.a,user:window.context.user}}()),e.data),this.store._add(this,["badges"]),this._recompute({$badges:1},this._state),this._intro=!0,this._handlers.destroy=[ht.z],this._fragment=function home_panel_svelte_create_main_fragment(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g,v,O,j,y,w,k,E,C,S,N,T,A,I,L,P,M,R,x,D,U,B,z,$,F,H,G,q,V=t.translations.home,W=t.translations.messages,K=t.translations.stats,Y=t.translations.awards,J=t.translations.profile,Q=t.translations.theme,Z=t.translations.settings,X=t.translations.logOut;function select_block_type(e){return e.user.eligibleFirstTrial?home_panel_svelte_create_if_block_3:e.user.isPremium?void 0:home_panel_svelte_create_if_block_4}var ee=select_block_type(t),te=ee&&ee(e,t);function select_block_type_1(e){return e.$badges.messages>0?home_panel_svelte_create_if_block_2:home_panel_svelte_create_else_block}var ne=select_block_type_1(t),ae=ne(e,t),re=t.user.isPremium&&home_panel_svelte_create_if_block_1(0,t);function click_handler(t){e.logout(t)}var ie=t.chessTodayAccess&&home_panel_svelte_create_if_block(e),se=new Ht({root:e.root,store:e.store,slots:{default:Object(ht.j)()}});return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.i)("img"),s=Object(ht.k)("\n    "),o=Object(ht.i)("span"),l=Object(ht.k)(V),f=Object(ht.k)("\n\n  "),te&&te.c(),_=Object(ht.k)("\n\n  "),h=Object(ht.i)("a"),b=Object(ht.k)(W),g=Object(ht.k)("\n    "),ae.c(),O=Object(ht.k)("\n\n  "),j=Object(ht.i)("a"),y=Object(ht.k)(K),k=Object(ht.k)("\n\n  "),E=Object(ht.i)("a"),C=Object(ht.k)(Y),N=Object(ht.k)("\n\n  "),T=Object(ht.i)("a"),A=Object(ht.k)(J),L=Object(ht.k)("\n\n  "),re&&re.c(),P=Object(ht.k)("\n\n  "),M=Object(ht.i)("a"),R=Object(ht.k)(Q),D=Object(ht.k)("\n\n  "),U=Object(ht.i)("a"),B=Object(ht.k)(Z),$=Object(ht.k)("\n\n  "),F=Object(ht.i)("a"),H=Object(ht.k)(X),G=Object(ht.k)("\n\n  "),ie&&ie.c(),q=Object(ht.h)(),se._fragment.c(),a.className="image user-nav-avatar",a.height="25",a.width="25",a.src=r=t.user.avatarUrl,a.alt=i=t.translations.home,o.className="text",n.href=u=t.routes.home,n.target="_self",n.className="link main-link home",h.href=v=t.routes.messages,h.target="_self",h.className="link main-link sprite messages",j.href=w=t.routes.stats,j.target="_self",j.className="link main-link sprite stats",E.href=S=trophiesRoute(t.user.username),E.target="_self",E.className="link main-link sprite awards",T.href=I=memberRoute(t.user.username),T.target="_self",T.className="link main-link sprite profile",M.href=x=t.routes.themes,M.target="_self",M.className="link main-link sprite theme",U.href=z=t.routes.settings,U.target="_self",U.className="link main-link sprite settings",Object(ht.c)(F,"click",click_handler),F.href="#",F.className="link main-link logout sprite logout"},m:function m(e,t){Object(ht.d)(se._slotted.default,n),Object(ht.d)(n,a),Object(ht.d)(n,s),Object(ht.d)(n,o),Object(ht.d)(o,l),Object(ht.d)(se._slotted.default,f),te&&te.m(se._slotted.default,null),Object(ht.d)(se._slotted.default,_),Object(ht.d)(se._slotted.default,h),Object(ht.d)(h,b),Object(ht.d)(h,g),ae.m(h,null),Object(ht.d)(se._slotted.default,O),Object(ht.d)(se._slotted.default,j),Object(ht.d)(j,y),Object(ht.d)(se._slotted.default,k),Object(ht.d)(se._slotted.default,E),Object(ht.d)(E,C),Object(ht.d)(se._slotted.default,N),Object(ht.d)(se._slotted.default,T),Object(ht.d)(T,A),Object(ht.d)(se._slotted.default,L),re&&re.m(se._slotted.default,null),Object(ht.d)(se._slotted.default,P),Object(ht.d)(se._slotted.default,M),Object(ht.d)(M,R),Object(ht.d)(se._slotted.default,D),Object(ht.d)(se._slotted.default,U),Object(ht.d)(U,B),Object(ht.d)(se._slotted.default,$),Object(ht.d)(se._slotted.default,F),Object(ht.d)(F,H),Object(ht.d)(se._slotted.default,G),ie&&ie.m(se._slotted.default,null),Object(ht.d)(se._slotted.default,q),se._mount(e,t)},p:function p(t,s){t.user&&r!==(r=s.user.avatarUrl)&&(a.src=r),t.translations&&i!==(i=s.translations.home)&&(a.alt=i),t.translations&&V!==(V=s.translations.home)&&Object(ht.E)(l,V),t.routes&&u!==(u=s.routes.home)&&(n.href=u),ee===(ee=select_block_type(s))&&te?te.p(t,s):(te&&te.d(1),(te=ee&&ee(e,s))&&te.c(),te&&te.m(_.parentNode,_)),t.translations&&W!==(W=s.translations.messages)&&Object(ht.E)(b,W),ne===(ne=select_block_type_1(s))&&ae?ae.p(t,s):(ae.d(1),(ae=ne(e,s)).c(),ae.m(h,null)),t.routes&&v!==(v=s.routes.messages)&&(h.href=v),t.translations&&K!==(K=s.translations.stats)&&Object(ht.E)(y,K),t.routes&&w!==(w=s.routes.stats)&&(j.href=w),t.translations&&Y!==(Y=s.translations.awards)&&Object(ht.E)(C,Y),t.user&&S!==(S=trophiesRoute(s.user.username))&&(E.href=S),t.translations&&J!==(J=s.translations.profile)&&Object(ht.E)(A,J),t.user&&I!==(I=memberRoute(s.user.username))&&(T.href=I),s.user.isPremium?re?re.p(t,s):((re=home_panel_svelte_create_if_block_1(0,s)).c(),re.m(P.parentNode,P)):re&&(re.d(1),re=null),t.translations&&Q!==(Q=s.translations.theme)&&Object(ht.E)(R,Q),t.routes&&x!==(x=s.routes.themes)&&(M.href=x),t.translations&&Z!==(Z=s.translations.settings)&&Object(ht.E)(B,Z),t.routes&&z!==(z=s.routes.settings)&&(U.href=z),t.translations&&X!==(X=s.translations.logOut)&&Object(ht.E)(H,X),s.chessTodayAccess?ie||((ie=home_panel_svelte_create_if_block(e)).c(),ie.m(q.parentNode,q)):ie&&(ie.d(1),ie=null)},d:function d(e){te&&te.d(),ae.d(),re&&re.d(),Object(ht.A)(F,"click",click_handler),ie&&ie.d(),se.destroy(e)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Home_panel_svelte.prototype,ht.x),Object(ht.e)(Home_panel_svelte.prototype,va),Home_panel_svelte.prototype._recompute=function _recompute(e,t){e.$badges&&this._differs(t.messages,t.messages=function messages(e){var t=e.$badges;return O(j.USER_MESSAGES_OVERFLOW)&&t.messages>ba(ga.MESSAGE_UNREAD_COUNT_MAX,_.b)?"".concat(ba(ga.MESSAGE_UNREAD_COUNT_MAX,_.b),"+"):t.messages}(t))&&(e.messages=!0)};var Oa=Home_panel_svelte,ja=document.querySelector(".home.nav-panel"),ya=null;var wa={logAmplitudeEvent:function logAmplitudeEvent(e,t){var n={key:Fe.a.AMPLITUDE_LOG,event:e,eventProperties:t};window.postMessage(n,window.location.origin)}};function learn_panel_svelte_create_if_block_1(e,t){var n,a,r,i,s=t.translations.puzzles;function click_handler(n){e.logAmplitudeEvent(t.amplitudeEvents.TACTICS_NAV_EVENT,{source:t.amplitudeEvents.AMPLITUDE_SOURCE_NAV})}return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.k)(s),r=Object(ht.k)("‎"),Object(ht.c)(n,"click",click_handler),n.href=i=t.routes.tactics,n.target="_self",n.className="link main-link sprite tactics"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(n,r)},p:function p(e,r){t=r,e.translations&&s!==(s=t.translations.puzzles)&&Object(ht.E)(a,s),e.routes&&i!==(i=t.routes.tactics)&&(n.href=i)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(n,"click",click_handler)}}}function learn_panel_svelte_create_else_block(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g,v,O,j,y,w,k,E,C,S,N,T=t.translations.videos,A=t.translations.openings,I=t.translations.explorer,L=t.translations.drills,P=t.translations.vision,M=t.translations.analysis;function click_handler(n){e.logAmplitudeEvent(t.amplitudeEvents.VIDEOS_NAV_EVENT,{source:t.amplitudeEvents.AMPLITUDE_SOURCE_NAV})}function click_handler_1(n){e.logAmplitudeEvent(t.amplitudeEvents.DRILLS_NAV_EVENT)}function click_handler_2(n){e.logAmplitudeEvent(t.amplitudeEvents.VISION_NAV_EVENT)}return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.k)(T),i=Object(ht.k)("\n\n  "),s=Object(ht.i)("a"),o=Object(ht.k)(A),u=Object(ht.k)("\n\n  "),f=Object(ht.i)("a"),_=Object(ht.k)(I),b=Object(ht.k)("\n\n  "),g=Object(ht.i)("a"),v=Object(ht.k)(L),j=Object(ht.k)("\n\n  "),y=Object(ht.i)("a"),w=Object(ht.k)(P),E=Object(ht.k)("\n\n  "),C=Object(ht.i)("a"),S=Object(ht.k)(M),Object(ht.c)(n,"click",click_handler),n.href=r=t.routes.videos,n.target="_self",n.className="link main-link sprite videos",s.href=l=t.routes.openings,s.target="_self",s.className="link main-link sprite openings",f.href=h=t.routes.explorer,f.target="_self",f.className="link main-link sprite explorer",Object(ht.c)(g,"click",click_handler_1),g.href=O=t.routes.drills,g.target="_self",g.className="link main-link sprite drills",Object(ht.c)(y,"click",click_handler_2),y.href=k=t.routes.vision,y.target="_self",y.className="link main-link sprite vision",C.href=N=t.routes.analysis,C.target="_self",C.className="link main-link sprite analysis"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.u)(e,i,t),Object(ht.u)(e,s,t),Object(ht.d)(s,o),Object(ht.u)(e,u,t),Object(ht.u)(e,f,t),Object(ht.d)(f,_),Object(ht.u)(e,b,t),Object(ht.u)(e,g,t),Object(ht.d)(g,v),Object(ht.u)(e,j,t),Object(ht.u)(e,y,t),Object(ht.d)(y,w),Object(ht.u)(e,E,t),Object(ht.u)(e,C,t),Object(ht.d)(C,S)},p:function p(e,i){t=i,e.translations&&T!==(T=t.translations.videos)&&Object(ht.E)(a,T),e.routes&&r!==(r=t.routes.videos)&&(n.href=r),e.translations&&A!==(A=t.translations.openings)&&Object(ht.E)(o,A),e.routes&&l!==(l=t.routes.openings)&&(s.href=l),e.translations&&I!==(I=t.translations.explorer)&&Object(ht.E)(_,I),e.routes&&h!==(h=t.routes.explorer)&&(f.href=h),e.translations&&L!==(L=t.translations.drills)&&Object(ht.E)(v,L),e.routes&&O!==(O=t.routes.drills)&&(g.href=O),e.translations&&P!==(P=t.translations.vision)&&Object(ht.E)(w,P),e.routes&&k!==(k=t.routes.vision)&&(y.href=k),e.translations&&M!==(M=t.translations.analysis)&&Object(ht.E)(S,M),e.routes&&N!==(N=t.routes.analysis)&&(C.href=N)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(n,"click",click_handler),e&&(Object(ht.p)(i),Object(ht.p)(s),Object(ht.p)(u),Object(ht.p)(f),Object(ht.p)(b),Object(ht.p)(g)),Object(ht.A)(g,"click",click_handler_1),e&&(Object(ht.p)(j),Object(ht.p)(y)),Object(ht.A)(y,"click",click_handler_2),e&&(Object(ht.p)(E),Object(ht.p)(C))}}}function learn_panel_svelte_create_if_block(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g,v,O,j,y,w,k,E,C,S,N,T=t.translations.analysis,A=t.translations.articles,I=t.translations.videos,L=t.translations.vision,P=t.translations.openings,M=t.translations.explorer;function click_handler(n){e.logAmplitudeEvent(t.amplitudeEvents.VIDEOS_NAV_EVENT,{source:t.amplitudeEvents.AMPLITUDE_SOURCE_NAV})}function click_handler_1(n){e.logAmplitudeEvent(t.amplitudeEvents.VISION_NAV_EVENT)}return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.k)(T),i=Object(ht.k)("\n\n  "),s=Object(ht.i)("a"),o=Object(ht.k)(A),u=Object(ht.k)("\n\n  "),f=Object(ht.i)("a"),_=Object(ht.k)(I),b=Object(ht.k)("\n\n  "),g=Object(ht.i)("a"),v=Object(ht.k)(L),j=Object(ht.k)("\n\n  "),y=Object(ht.i)("a"),w=Object(ht.k)(P),E=Object(ht.k)("\n\n  "),C=Object(ht.i)("a"),S=Object(ht.k)(M),n.href=r=t.routes.analysis,n.target="_self",n.className="link main-link sprite analysis",s.href=l=t.routes.articles,s.className="link main-link sprite articles",Object(ht.c)(f,"click",click_handler),f.href=h=t.routes.videos,f.target="_self",f.className="link main-link sprite videos",Object(ht.c)(g,"click",click_handler_1),g.href=O=t.routes.vision,g.target="_self",g.className="link main-link sprite vision",y.href=k=t.routes.openings,y.target="_self",y.className="link main-link sprite openings",C.href=N=t.routes.explorer,C.target="_self",C.className="link main-link sprite explorer"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.u)(e,i,t),Object(ht.u)(e,s,t),Object(ht.d)(s,o),Object(ht.u)(e,u,t),Object(ht.u)(e,f,t),Object(ht.d)(f,_),Object(ht.u)(e,b,t),Object(ht.u)(e,g,t),Object(ht.d)(g,v),Object(ht.u)(e,j,t),Object(ht.u)(e,y,t),Object(ht.d)(y,w),Object(ht.u)(e,E,t),Object(ht.u)(e,C,t),Object(ht.d)(C,S)},p:function p(e,i){t=i,e.translations&&T!==(T=t.translations.analysis)&&Object(ht.E)(a,T),e.routes&&r!==(r=t.routes.analysis)&&(n.href=r),e.translations&&A!==(A=t.translations.articles)&&Object(ht.E)(o,A),e.routes&&l!==(l=t.routes.articles)&&(s.href=l),e.translations&&I!==(I=t.translations.videos)&&Object(ht.E)(_,I),e.routes&&h!==(h=t.routes.videos)&&(f.href=h),e.translations&&L!==(L=t.translations.vision)&&Object(ht.E)(v,L),e.routes&&O!==(O=t.routes.vision)&&(g.href=O),e.translations&&P!==(P=t.translations.openings)&&Object(ht.E)(w,P),e.routes&&k!==(k=t.routes.openings)&&(y.href=k),e.translations&&M!==(M=t.translations.explorer)&&Object(ht.E)(S,M),e.routes&&N!==(N=t.routes.explorer)&&(C.href=N)},d:function d(e){e&&(Object(ht.p)(n),Object(ht.p)(i),Object(ht.p)(s),Object(ht.p)(u),Object(ht.p)(f)),Object(ht.A)(f,"click",click_handler),e&&(Object(ht.p)(b),Object(ht.p)(g)),Object(ht.A)(g,"click",click_handler_1),e&&(Object(ht.p)(j),Object(ht.p)(y),Object(ht.p)(E),Object(ht.p)(C))}}}function Learn_panel_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(function learn_panel_svelte_data(){return{amplitudeEvents:Fe.a,translations:mt.a}}(),e.data),this._intro=!0,this._fragment=function learn_panel_svelte_create_main_fragment(e,t){var n,a,r,i,s,o,l=t.translations.lessons,u=!t.chessTodayAccess&&learn_panel_svelte_create_if_block_1(e,t);function click_handler(n){e.logAmplitudeEvent(t.amplitudeEvents.LESSONS_NAV_EVENT,{source:t.amplitudeEvents.AMPLITUDE_SOURCE_NAV})}function select_block_type(e){return e.chessTodayAccess?learn_panel_svelte_create_if_block:learn_panel_svelte_create_else_block}var f=select_block_type(t),_=f(e,t),h=new Ht({root:e.root,store:e.store,slots:{default:Object(ht.j)()}});return{c:function c(){u&&u.c(),n=Object(ht.k)("\n\n  "),a=Object(ht.i)("a"),r=Object(ht.k)(l),s=Object(ht.k)("\n\n  "),_.c(),o=Object(ht.h)(),h._fragment.c(),Object(ht.c)(a,"click",click_handler),a.href=i=t.routes.lessons,a.target="_self",a.className="link main-link sprite learn"},m:function m(e,t){u&&u.m(h._slotted.default,null),Object(ht.d)(h._slotted.default,n),Object(ht.d)(h._slotted.default,a),Object(ht.d)(a,r),Object(ht.d)(h._slotted.default,s),_.m(h._slotted.default,null),Object(ht.d)(h._slotted.default,o),h._mount(e,t)},p:function p(s,c){(t=c).chessTodayAccess?u&&(u.d(1),u=null):u?u.p(s,t):((u=learn_panel_svelte_create_if_block_1(e,t)).c(),u.m(n.parentNode,n)),s.translations&&l!==(l=t.translations.lessons)&&Object(ht.E)(r,l),s.routes&&i!==(i=t.routes.lessons)&&(a.href=i),f===(f=select_block_type(t))&&_?_.p(s,t):(_.d(1),(_=f(e,t)).c(),_.m(o.parentNode,o))},d:function d(e){u&&u.d(),Object(ht.A)(a,"click",click_handler),_.d(),h.destroy(e)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Learn_panel_svelte.prototype,ht.x),Object(ht.e)(Learn_panel_svelte.prototype,wa);var ka=Learn_panel_svelte,Ea=document.querySelector(".learn.nav-panel"),Ca=null;function more_panel_svelte_create_else_block(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g,v,O,j,y,w,k,E,C,S,N,T,A,I,L,P,M,R,x,D,U,B,z,$,F,H,G,q,V=t.translations.masterGames,W=t.translations.mobileApps,K=t.translations.shop,Y=t.translations.merch,J=t.translations.resources,Q=t.translations.voteChess,Z=t.translations.topPlayers,X=t.translations.liveRankings,ee=t.translations.rules,te=t.translations.chessKid,ne=t.translations.computerChampionship;function click_handler(t){e.logAmplitudeEvent("CCCC")}return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.k)(V),i=Object(ht.k)("\n\n  "),s=Object(ht.i)("a"),o=Object(ht.k)(W),u=Object(ht.k)("\n\n  "),f=Object(ht.i)("a"),_=Object(ht.k)(K),h=Object(ht.k)("\n\n  "),b=Object(ht.i)("a"),g=Object(ht.k)(Y),v=Object(ht.k)("\n\n  "),O=Object(ht.i)("a"),j=Object(ht.k)(J),w=Object(ht.k)("\n\n  "),k=Object(ht.i)("a"),E=Object(ht.k)(Q),S=Object(ht.k)("\n\n  "),N=Object(ht.i)("a"),T=Object(ht.k)(Z),I=Object(ht.k)("\n\n  "),L=Object(ht.i)("a"),P=Object(ht.k)(X),R=Object(ht.k)("\n\n  "),x=Object(ht.i)("a"),D=Object(ht.k)(ee),B=Object(ht.k)("\n\n  "),z=Object(ht.i)("a"),$=Object(ht.k)(te),F=Object(ht.k)("\n\n  "),H=Object(ht.i)("a"),G=Object(ht.k)(ne),n.href=r=t.routes.masterGames,n.target="_self",n.className="link main-link sprite more",s.href=l=t.routes.mobileApps,s.target="_self",s.className="link main-link sprite mobile-apps",f.href="https://shop.chess.com",f.target="_blank",f.rel="nofollow noreferrer noopener",f.className="link main-link sprite shop",b.href="https://merch.chess.com",b.target="_blank",b.rel="nofollow noreferrer noopener",b.className="link main-link sprite merch",O.href=y=t.routes.resourcesPage,O.target="_self",O.className="link main-link sprite resources",k.href=C=t.routes.voteChess,k.target="_self",k.className="link main-link sprite vote-chess",N.href=A=t.routes.topPlayers,N.target="_self",N.className="link main-link sprite top-players",L.href=M=t.routes.liveRankings,L.target="_self",L.className="link main-link sprite live-rankings",x.href=U=t.routes.rules,x.target="_self",x.className="link main-link sprite play",z.href="https://www.chesskid.com",z.target="_self",z.className="link main-link sprite chess-kid",Object(ht.c)(H,"click",click_handler),H.href=q=t.routes.computerChampionship,H.target="_self",H.className="link event sprite cpu-champs"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.u)(e,i,t),Object(ht.u)(e,s,t),Object(ht.d)(s,o),Object(ht.u)(e,u,t),Object(ht.u)(e,f,t),Object(ht.d)(f,_),Object(ht.u)(e,h,t),Object(ht.u)(e,b,t),Object(ht.d)(b,g),Object(ht.u)(e,v,t),Object(ht.u)(e,O,t),Object(ht.d)(O,j),Object(ht.u)(e,w,t),Object(ht.u)(e,k,t),Object(ht.d)(k,E),Object(ht.u)(e,S,t),Object(ht.u)(e,N,t),Object(ht.d)(N,T),Object(ht.u)(e,I,t),Object(ht.u)(e,L,t),Object(ht.d)(L,P),Object(ht.u)(e,R,t),Object(ht.u)(e,x,t),Object(ht.d)(x,D),Object(ht.u)(e,B,t),Object(ht.u)(e,z,t),Object(ht.d)(z,$),Object(ht.u)(e,F,t),Object(ht.u)(e,H,t),Object(ht.d)(H,G)},p:function p(e,t){e.translations&&V!==(V=t.translations.masterGames)&&Object(ht.E)(a,V),e.routes&&r!==(r=t.routes.masterGames)&&(n.href=r),e.translations&&W!==(W=t.translations.mobileApps)&&Object(ht.E)(o,W),e.routes&&l!==(l=t.routes.mobileApps)&&(s.href=l),e.translations&&K!==(K=t.translations.shop)&&Object(ht.E)(_,K),e.translations&&Y!==(Y=t.translations.merch)&&Object(ht.E)(g,Y),e.translations&&J!==(J=t.translations.resources)&&Object(ht.E)(j,J),e.routes&&y!==(y=t.routes.resourcesPage)&&(O.href=y),e.translations&&Q!==(Q=t.translations.voteChess)&&Object(ht.E)(E,Q),e.routes&&C!==(C=t.routes.voteChess)&&(k.href=C),e.translations&&Z!==(Z=t.translations.topPlayers)&&Object(ht.E)(T,Z),e.routes&&A!==(A=t.routes.topPlayers)&&(N.href=A),e.translations&&X!==(X=t.translations.liveRankings)&&Object(ht.E)(P,X),e.routes&&M!==(M=t.routes.liveRankings)&&(L.href=M),e.translations&&ee!==(ee=t.translations.rules)&&Object(ht.E)(D,ee),e.routes&&U!==(U=t.routes.rules)&&(x.href=U),e.translations&&te!==(te=t.translations.chessKid)&&Object(ht.E)($,te),e.translations&&ne!==(ne=t.translations.computerChampionship)&&Object(ht.E)(G,ne),e.routes&&q!==(q=t.routes.computerChampionship)&&(H.href=q)},d:function d(e){e&&(Object(ht.p)(n),Object(ht.p)(i),Object(ht.p)(s),Object(ht.p)(u),Object(ht.p)(f),Object(ht.p)(h),Object(ht.p)(b),Object(ht.p)(v),Object(ht.p)(O),Object(ht.p)(w),Object(ht.p)(k),Object(ht.p)(S),Object(ht.p)(N),Object(ht.p)(I),Object(ht.p)(L),Object(ht.p)(R),Object(ht.p)(x),Object(ht.p)(B),Object(ht.p)(z),Object(ht.p)(F),Object(ht.p)(H)),Object(ht.A)(H,"click",click_handler)}}}function more_panel_svelte_create_if_block(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g,v,O,j,y,w,k,E,C,S,N,T,A,I,L,P,M,R,x,D,U,B,z,$,F,H,G=t.translations.dailyPuzzle,q=t.translations.leaderboard,V=t.translations.masterGames,W=t.translations.voteChess,K=t.translations.soloChess,Y=t.translations.mobileApps,J=t.translations.rules,Q=t.translations.topPlayers,Z=t.translations.shop,X=t.translations.resources;return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.k)(G),i=Object(ht.k)("\n\n  "),s=Object(ht.i)("a"),o=Object(ht.k)(q),u=Object(ht.k)("\n\n  "),f=Object(ht.i)("a"),_=Object(ht.k)(V),b=Object(ht.k)("\n\n  "),g=Object(ht.i)("a"),v=Object(ht.k)(W),j=Object(ht.k)("\n\n  "),y=Object(ht.i)("a"),w=Object(ht.k)(K),E=Object(ht.k)("\n\n  "),C=Object(ht.i)("a"),S=Object(ht.k)(Y),T=Object(ht.k)("\n\n  "),A=Object(ht.i)("a"),I=Object(ht.k)(J),P=Object(ht.k)("\n\n  "),M=Object(ht.i)("a"),R=Object(ht.k)(Q),D=Object(ht.k)("\n\n  "),U=Object(ht.i)("a"),B=Object(ht.k)(Z),z=Object(ht.k)("\n\n  "),$=Object(ht.i)("a"),F=Object(ht.k)(X),n.href=r=t.routes.dailyPuzzle,n.target="_self",n.className="link main-link sprite daily-puzzle",s.href=l=t.routes.leaderboard,s.target="_self",s.className="link main-link sprite leaderboard",f.href=h=t.routes.masterGames,f.target="_self",f.className="link main-link sprite more",g.href=O=t.routes.voteChess,g.target="_self",g.className="link main-link sprite vote-chess",y.href=k=t.routes.soloChess,y.target="_self",y.className="link main-link sprite solo-chess",C.href=N=t.routes.mobileApps,C.target="_self",C.className="link main-link sprite mobile-apps",A.href=L=t.routes.rules,A.target="_self",A.className="link main-link sprite play",M.href=x=t.routes.topPlayers,M.target="_self",M.className="link main-link sprite top-players",U.href="https://merch.chess.com",U.target="_blank",U.rel="nofollow noreferrer noopener",U.className="link main-link sprite merch",$.href=H=t.routes.resourcesPage,$.target="_self",$.className="link main-link sprite resources"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.u)(e,i,t),Object(ht.u)(e,s,t),Object(ht.d)(s,o),Object(ht.u)(e,u,t),Object(ht.u)(e,f,t),Object(ht.d)(f,_),Object(ht.u)(e,b,t),Object(ht.u)(e,g,t),Object(ht.d)(g,v),Object(ht.u)(e,j,t),Object(ht.u)(e,y,t),Object(ht.d)(y,w),Object(ht.u)(e,E,t),Object(ht.u)(e,C,t),Object(ht.d)(C,S),Object(ht.u)(e,T,t),Object(ht.u)(e,A,t),Object(ht.d)(A,I),Object(ht.u)(e,P,t),Object(ht.u)(e,M,t),Object(ht.d)(M,R),Object(ht.u)(e,D,t),Object(ht.u)(e,U,t),Object(ht.d)(U,B),Object(ht.u)(e,z,t),Object(ht.u)(e,$,t),Object(ht.d)($,F)},p:function p(e,t){e.translations&&G!==(G=t.translations.dailyPuzzle)&&Object(ht.E)(a,G),e.routes&&r!==(r=t.routes.dailyPuzzle)&&(n.href=r),e.translations&&q!==(q=t.translations.leaderboard)&&Object(ht.E)(o,q),e.routes&&l!==(l=t.routes.leaderboard)&&(s.href=l),e.translations&&V!==(V=t.translations.masterGames)&&Object(ht.E)(_,V),e.routes&&h!==(h=t.routes.masterGames)&&(f.href=h),e.translations&&W!==(W=t.translations.voteChess)&&Object(ht.E)(v,W),e.routes&&O!==(O=t.routes.voteChess)&&(g.href=O),e.translations&&K!==(K=t.translations.soloChess)&&Object(ht.E)(w,K),e.routes&&k!==(k=t.routes.soloChess)&&(y.href=k),e.translations&&Y!==(Y=t.translations.mobileApps)&&Object(ht.E)(S,Y),e.routes&&N!==(N=t.routes.mobileApps)&&(C.href=N),e.translations&&J!==(J=t.translations.rules)&&Object(ht.E)(I,J),e.routes&&L!==(L=t.routes.rules)&&(A.href=L),e.translations&&Q!==(Q=t.translations.topPlayers)&&Object(ht.E)(R,Q),e.routes&&x!==(x=t.routes.topPlayers)&&(M.href=x),e.translations&&Z!==(Z=t.translations.shop)&&Object(ht.E)(B,Z),e.translations&&X!==(X=t.translations.resources)&&Object(ht.E)(F,X),e.routes&&H!==(H=t.routes.resourcesPage)&&($.href=H)},d:function d(e){e&&(Object(ht.p)(n),Object(ht.p)(i),Object(ht.p)(s),Object(ht.p)(u),Object(ht.p)(f),Object(ht.p)(b),Object(ht.p)(g),Object(ht.p)(j),Object(ht.p)(y),Object(ht.p)(E),Object(ht.p)(C),Object(ht.p)(T),Object(ht.p)(A),Object(ht.p)(P),Object(ht.p)(M),Object(ht.p)(D),Object(ht.p)(U),Object(ht.p)(z),Object(ht.p)($))}}}function More_panel_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(function more_panel_svelte_data(){return{translations:mt.a}}(),e.data),this._intro=!0,this._fragment=function more_panel_svelte_create_main_fragment(e,t){var n;function select_block_type(e){return e.chessTodayAccess?more_panel_svelte_create_else_block:more_panel_svelte_create_if_block}var a=select_block_type(t),r=a(e,t),i=new Ht({root:e.root,store:e.store,slots:{default:Object(ht.j)()}});return{c:function c(){r.c(),n=Object(ht.h)(),i._fragment.c()},m:function m(e,t){r.m(i._slotted.default,null),Object(ht.d)(i._slotted.default,n),i._mount(e,t)},p:function p(t,i){a===(a=select_block_type(i))&&r?r.p(t,i):(r.d(1),(r=a(e,i)).c(),r.m(n.parentNode,n))},d:function d(e){r.d(),i.destroy(e)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(More_panel_svelte.prototype,ht.x);var Sa=More_panel_svelte,Na=document.querySelector(".more.nav-panel"),Ta=null;function Notification_panel_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)({},e.data),this._intro=!0,this._fragment=function notification_panel_svelte_create_main_fragment(e,t){var n=new ha({root:e.root,store:e.store,data:{homeWidget:!1}}),a=new Ht({root:e.root,store:e.store,slots:{default:Object(ht.j)()}});return{c:function c(){n._fragment.c(),a._fragment.c()},m:function m(e,t){n._mount(a._slotted.default,null),a._mount(e,t)},p:ht.v,d:function d(e){n.destroy(),a.destroy(e)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Notification_panel_svelte.prototype,ht.x);var Aa=Notification_panel_svelte,Ia=document.querySelector(".notifications.nav-panel"),La=null;n(350);function my_turns_svelte_get_each_context(e,t,n){var a=Object.create(e);return a.game=t[n],a}function my_turns_svelte_create_if_block(e,t){for(var n,a,r,i,s,o,l,u=t.translations.myTurn,f=t.$games,_=[],h=0;h<f.length;h+=1)_[h]=my_turns_svelte_create_each_block(e,my_turns_svelte_get_each_context(t,f,h));return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.k)(u),r=Object(ht.k)("\n    "),(i=Object(ht.i)("div")).innerHTML='<span class="icon-font-chess chevron-right svelte-6zuozh"></span>',o=Object(ht.k)("\n\n  ");for(var e=0;e<_.length;e+=1)_[e].c();l=Object(ht.h)(),i.className="icon-font arrow",n.className="link heading my-turn",n.href=s=t.routes.daily,n.target="_self"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(n,r),Object(ht.d)(n,i),Object(ht.u)(e,o,t);for(var s=0;s<_.length;s+=1)_[s].m(e,t);Object(ht.u)(e,l,t)},p:function p(t,r){if(t.translations&&u!==(u=r.translations.myTurn)&&Object(ht.E)(a,u),t.routes&&s!==(s=r.routes.daily)&&(n.href=s),t.$games){f=r.$games;for(var i=0;i<f.length;i+=1){var o=my_turns_svelte_get_each_context(r,f,i);_[i]?_[i].p(t,o):(_[i]=my_turns_svelte_create_each_block(e,o),_[i].c(),_[i].m(l.parentNode,l))}for(;i<_.length;i+=1)_[i].d(1);_.length=f.length}},d:function d(e){e&&(Object(ht.p)(n),Object(ht.p)(o)),Object(ht.m)(_,e),e&&Object(ht.p)(l)}}}function my_turns_svelte_create_each_block(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g=t.game.opponent.username,v=t.game.timeLeftDisplay;return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.i)("img"),s=Object(ht.k)("\n\n      "),o=Object(ht.i)("span"),l=Object(ht.k)(g),u=Object(ht.k)("\n      "),f=Object(ht.i)("span"),_=Object(ht.k)(v),h=Object(ht.k)("\n    "),a.alt=r=t.game.opponent.username,a.src=i=t.game.opponent.image,o.className="svelte-username svelte-6zuozh",f.className="time-left svelte-6zuozh",n.className="my-turn sub-link",n.href=b=Object($e.c)(t.game.id),n.target="_self"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(n,s),Object(ht.d)(n,o),Object(ht.d)(o,l),Object(ht.d)(n,u),Object(ht.d)(n,f),Object(ht.d)(f,_),Object(ht.d)(n,h)},p:function p(e,t){e.$games&&r!==(r=t.game.opponent.username)&&(a.alt=r),e.$games&&i!==(i=t.game.opponent.image)&&(a.src=i),e.$games&&g!==(g=t.game.opponent.username)&&Object(ht.E)(l,g),e.$games&&v!==(v=t.game.timeLeftDisplay)&&Object(ht.E)(_,v),e.$games&&b!==(b=Object($e.c)(t.game.id))&&(n.href=b)},d:function d(e){e&&Object(ht.p)(n)}}}function My_turns_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(Object(ht.e)(this.store._init(["games"]),function my_turns_svelte_data(){return{translations:mt.a}}()),e.data),this.store._add(this,["games"]),this._intro=!0,this._handlers.destroy=[ht.z],this._fragment=function my_turns_svelte_create_main_fragment(e,t){var n,a=t.$games&&t.$games.length>0&&my_turns_svelte_create_if_block(e,t);return{c:function c(){a&&a.c(),n=Object(ht.h)()},m:function m(e,t){a&&a.m(e,t),Object(ht.u)(e,n,t)},p:function p(t,r){r.$games&&r.$games.length>0?a?a.p(t,r):((a=my_turns_svelte_create_if_block(e,r)).c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d:function d(e){a&&a.d(e),e&&Object(ht.p)(n)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}Object(ht.e)(My_turns_svelte.prototype,ht.x);var Pa=My_turns_svelte;var Ma={logAmplitudeEvent:function logAmplitudeEvent(e,t){var n={key:Fe.a.AMPLITUDE_LOG,event:e,eventProperties:t};window.postMessage(n,window.location.origin)},setupNewGameModal:function setupNewGameModal(){sr(document.querySelector(_.l.MAIN_NAV_PLAY_LINK)),Kn()}};function play_panel_svelte_create_if_block_4(e,t){var n,a,r=t.translations.newGame;function click_handler(t){e.setupNewGameModal()}return{c:function c(){n=Object(ht.i)("button"),a=Object(ht.k)(r),Object(ht.c)(n,"click",click_handler),n.className="button new-game"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.translations&&r!==(r=t.translations.newGame)&&Object(ht.E)(a,r)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(n,"click",click_handler)}}}function play_panel_svelte_create_if_block_3(e,t){var n,a,r,i,s,o,l,u,f,_,h=t.translations.puzzleBattle,b=t.translations.new,g=t.translations.puzzleRush;function click_handler(n){e.logAmplitudeEvent(t.amplitudeEvents.TACTICS_NAV_EVENT,{source:t.amplitudeEvents.AMPLITUDE_SOURCE_NAV})}return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.k)(h),r=Object(ht.k)("\n    "),i=Object(ht.i)("span"),s=Object(ht.k)(b),l=Object(ht.k)("\n\n  "),u=Object(ht.i)("a"),f=Object(ht.k)(g),i.className="svelte-badge badge svelte-new",n.href=o=t.routes.puzzleBattle,n.target="_self",n.className="link main-link sprite puzzle-battle",Object(ht.c)(u,"click",click_handler),u.href=_=t.routes.puzzles,u.target="_self",u.className="link main-link sprite puzzles"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(n,r),Object(ht.d)(n,i),Object(ht.d)(i,s),Object(ht.u)(e,l,t),Object(ht.u)(e,u,t),Object(ht.d)(u,f)},p:function p(e,r){t=r,e.translations&&h!==(h=t.translations.puzzleBattle)&&Object(ht.E)(a,h),e.translations&&b!==(b=t.translations.new)&&Object(ht.E)(s,b),e.routes&&o!==(o=t.routes.puzzleBattle)&&(n.href=o),e.translations&&g!==(g=t.translations.puzzleRush)&&Object(ht.E)(f,g),e.routes&&_!==(_=t.routes.puzzles)&&(u.href=_)},d:function d(e){e&&(Object(ht.p)(n),Object(ht.p)(l),Object(ht.p)(u)),Object(ht.A)(u,"click",click_handler)}}}function play_panel_svelte_create_if_block_2(e,t){var n,a,r,i=t.translations.leagues;return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.k)(i),n.href=r=t.routes.leagues,n.target="_self",n.className="link main-link sprite leagues"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.translations&&i!==(i=t.translations.leagues)&&Object(ht.E)(a,i),e.routes&&r!==(r=t.routes.leagues)&&(n.href=r)},d:function d(e){e&&Object(ht.p)(n)}}}function play_panel_svelte_create_if_block_1(e,t){var n,a,r,i=t.translations.leaderboard;return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.k)(i),n.href=r=t.routes.leaderboard,n.target="_self",n.className="link main-link sprite leaderboard"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.translations&&i!==(i=t.translations.leaderboard)&&Object(ht.E)(a,i),e.routes&&r!==(r=t.routes.leaderboard)&&(n.href=r)},d:function d(e){e&&Object(ht.p)(n)}}}function play_panel_svelte_create_if_block(e,t){var n,a,r,i,s=t.translations.archive,o={routes:t.routes},l=new Pa({root:e.root,store:e.store,data:o});return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.k)(s),i=Object(ht.k)("\n\n    "),l._fragment.c(),n.href=r=t.routes.gameArchive,n.target="_self",n.className="link main-link sprite archive"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.u)(e,i,t),l._mount(e,t)},p:function p(e,t){e.translations&&s!==(s=t.translations.archive)&&Object(ht.E)(a,s),e.routes&&r!==(r=t.routes.gameArchive)&&(n.href=r);var i={};e.routes&&(i.routes=t.routes),l._set(i)},d:function d(e){e&&(Object(ht.p)(n),Object(ht.p)(i)),l.destroy(e)}}}function Play_panel_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(function play_panel_svelte_data(){return{amplitudeEvents:Fe.a}}(),e.data),this._intro=!0,this._fragment=function play_panel_svelte_create_main_fragment(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g,v,O,j,y,w,k,E,C,S,N,T,A,I=t.translations.liveChess,L=t.translations.dailyChess,P=t.translations.computer,M=t.translations.tournaments,R=t.translations.fourPlayerChess,x=t.user&&play_panel_svelte_create_if_block_4(e,t),D=!t.chessTodayAccess&&play_panel_svelte_create_if_block_3(e,t),U=t.showLeagues&&play_panel_svelte_create_if_block_2(0,t),B=t.chessTodayAccess&&play_panel_svelte_create_if_block_1(0,t),z=t.user&&play_panel_svelte_create_if_block(e,t),$=new Ht({root:e.root,store:e.store,slots:{default:Object(ht.j)()}});return{c:function c(){x&&x.c(),n=Object(ht.k)("\n\n  "),a=Object(ht.i)("a"),r=Object(ht.k)(I),s=Object(ht.k)("\n\n  "),o=Object(ht.i)("a"),l=Object(ht.k)(L),f=Object(ht.k)("\n\n  "),_=Object(ht.i)("a"),h=Object(ht.k)(P),g=Object(ht.k)("\n\n  "),D&&D.c(),v=Object(ht.k)("\n\n  "),O=Object(ht.i)("a"),j=Object(ht.k)(M),w=Object(ht.k)("\n\n  "),U&&U.c(),k=Object(ht.k)("\n\n  "),E=Object(ht.i)("a"),C=Object(ht.k)(R),N=Object(ht.k)("\n\n  "),B&&B.c(),T=Object(ht.k)("\n\n  "),z&&z.c(),A=Object(ht.h)(),$._fragment.c(),a.href=i=t.routes.live,a.target="_self",a.className="link main-link sprite live",o.href=u=t.routes.daily,o.target="_self",o.className="link main-link sprite daily",_.href=b=t.routes.computer,_.target="_self",_.className="link main-link sprite computer",O.href=y=t.routes.tournaments,O.target="_self",O.className="link main-link sprite tournaments",E.href=S=t.routes.fourPlayer,E.target="_self",E.className="link main-link sprite four-player-chess"},m:function m(e,t){x&&x.m($._slotted.default,null),Object(ht.d)($._slotted.default,n),Object(ht.d)($._slotted.default,a),Object(ht.d)(a,r),Object(ht.d)($._slotted.default,s),Object(ht.d)($._slotted.default,o),Object(ht.d)(o,l),Object(ht.d)($._slotted.default,f),Object(ht.d)($._slotted.default,_),Object(ht.d)(_,h),Object(ht.d)($._slotted.default,g),D&&D.m($._slotted.default,null),Object(ht.d)($._slotted.default,v),Object(ht.d)($._slotted.default,O),Object(ht.d)(O,j),Object(ht.d)($._slotted.default,w),U&&U.m($._slotted.default,null),Object(ht.d)($._slotted.default,k),Object(ht.d)($._slotted.default,E),Object(ht.d)(E,C),Object(ht.d)($._slotted.default,N),B&&B.m($._slotted.default,null),Object(ht.d)($._slotted.default,T),z&&z.m($._slotted.default,null),Object(ht.d)($._slotted.default,A),$._mount(e,t)},p:function p(t,s){s.user?x?x.p(t,s):((x=play_panel_svelte_create_if_block_4(e,s)).c(),x.m(n.parentNode,n)):x&&(x.d(1),x=null),t.translations&&I!==(I=s.translations.liveChess)&&Object(ht.E)(r,I),t.routes&&i!==(i=s.routes.live)&&(a.href=i),t.translations&&L!==(L=s.translations.dailyChess)&&Object(ht.E)(l,L),t.routes&&u!==(u=s.routes.daily)&&(o.href=u),t.translations&&P!==(P=s.translations.computer)&&Object(ht.E)(h,P),t.routes&&b!==(b=s.routes.computer)&&(_.href=b),s.chessTodayAccess?D&&(D.d(1),D=null):D?D.p(t,s):((D=play_panel_svelte_create_if_block_3(e,s)).c(),D.m(v.parentNode,v)),t.translations&&M!==(M=s.translations.tournaments)&&Object(ht.E)(j,M),t.routes&&y!==(y=s.routes.tournaments)&&(O.href=y),s.showLeagues?U?U.p(t,s):((U=play_panel_svelte_create_if_block_2(0,s)).c(),U.m(k.parentNode,k)):U&&(U.d(1),U=null),t.translations&&R!==(R=s.translations.fourPlayerChess)&&Object(ht.E)(C,R),t.routes&&S!==(S=s.routes.fourPlayer)&&(E.href=S),s.chessTodayAccess?B?B.p(t,s):((B=play_panel_svelte_create_if_block_1(0,s)).c(),B.m(T.parentNode,T)):B&&(B.d(1),B=null),s.user?z?z.p(t,s):((z=play_panel_svelte_create_if_block(e,s)).c(),z.m(A.parentNode,A)):z&&(z.d(1),z=null)},d:function d(e){x&&x.d(),D&&D.d(),U&&U.d(),B&&B.d(),z&&z.d(),$.destroy(e)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Play_panel_svelte.prototype,ht.x),Object(ht.e)(Play_panel_svelte.prototype,Ma);var Ra=Play_panel_svelte,xa=document.querySelector(".play.nav-panel"),Da=null;function Puzzles_panel_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(function puzzles_panel_svelte_data(){return{translations:mt.a}}(),e.data),this._intro=!0,this._fragment=function puzzles_panel_svelte_create_main_fragment(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g,v,O,j,y,w,k,E,C,S,N,T,A=t.translations.puzzles,I=t.translations.puzzleRush,L=t.translations.puzzleBattle,P=t.translations.dailyPuzzle,M=t.translations.soloChess,R=t.translations.drills;function click_handler(n){e.logAmplitudeEvent(t.amplitudeEvents.TACTICS_NAV_EVENT,{source:t.amplitudeEvents.AMPLITUDE_SOURCE_NAV})}function click_handler_1(n){e.logAmplitudeEvent(t.amplitudeEvents.TACTICS_NAV_EVENT,{source:t.amplitudeEvents.AMPLITUDE_SOURCE_NAV})}function click_handler_2(n){e.logAmplitudeEvent(t.amplitudeEvents.DRILLS_NAV_EVENT)}var x=new Ht({root:e.root,store:e.store,slots:{default:Object(ht.j)()}});return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.k)(A),r=Object(ht.k)("‎"),s=Object(ht.k)("\n\n  "),o=Object(ht.i)("a"),l=Object(ht.k)(I),f=Object(ht.k)("\n\n  "),_=Object(ht.i)("a"),h=Object(ht.k)(L),g=Object(ht.k)("\n\n  "),v=Object(ht.i)("a"),O=Object(ht.k)(P),y=Object(ht.k)("\n\n  "),w=Object(ht.i)("a"),k=Object(ht.k)(M),C=Object(ht.k)("\n\n  "),S=Object(ht.i)("a"),N=Object(ht.k)(R),x._fragment.c(),Object(ht.c)(n,"click",click_handler),n.href=i=t.routes.tactics,n.target="_self",n.className="link main-link sprite tactics",Object(ht.c)(o,"click",click_handler_1),o.href=u=t.routes.puzzles,o.target="_self",o.className="link main-link sprite puzzles",_.href=b=t.routes.puzzleBattle,_.target="_self",_.className="link main-link sprite puzzle-battle",v.href=j=t.routes.dailyPuzzle,v.target="_self",v.className="link main-link sprite daily-puzzle",w.href=E=t.routes.soloChess,w.target="_self",w.className="link main-link sprite solo-chess",Object(ht.c)(S,"click",click_handler_2),S.href=T=t.routes.drills,S.target="_self",S.className="link main-link sprite drills"},m:function m(e,t){Object(ht.d)(x._slotted.default,n),Object(ht.d)(n,a),Object(ht.d)(n,r),Object(ht.d)(x._slotted.default,s),Object(ht.d)(x._slotted.default,o),Object(ht.d)(o,l),Object(ht.d)(x._slotted.default,f),Object(ht.d)(x._slotted.default,_),Object(ht.d)(_,h),Object(ht.d)(x._slotted.default,g),Object(ht.d)(x._slotted.default,v),Object(ht.d)(v,O),Object(ht.d)(x._slotted.default,y),Object(ht.d)(x._slotted.default,w),Object(ht.d)(w,k),Object(ht.d)(x._slotted.default,C),Object(ht.d)(x._slotted.default,S),Object(ht.d)(S,N),x._mount(e,t)},p:function p(e,r){t=r,e.translations&&A!==(A=t.translations.puzzles)&&Object(ht.E)(a,A),e.routes&&i!==(i=t.routes.tactics)&&(n.href=i),e.translations&&I!==(I=t.translations.puzzleRush)&&Object(ht.E)(l,I),e.routes&&u!==(u=t.routes.puzzles)&&(o.href=u),e.translations&&L!==(L=t.translations.puzzleBattle)&&Object(ht.E)(h,L),e.routes&&b!==(b=t.routes.puzzleBattle)&&(_.href=b),e.translations&&P!==(P=t.translations.dailyPuzzle)&&Object(ht.E)(O,P),e.routes&&j!==(j=t.routes.dailyPuzzle)&&(v.href=j),e.translations&&M!==(M=t.translations.soloChess)&&Object(ht.E)(k,M),e.routes&&E!==(E=t.routes.soloChess)&&(w.href=E),e.translations&&R!==(R=t.translations.drills)&&Object(ht.E)(N,R),e.routes&&T!==(T=t.routes.drills)&&(S.href=T)},d:function d(e){Object(ht.A)(n,"click",click_handler),Object(ht.A)(o,"click",click_handler_1),Object(ht.A)(S,"click",click_handler_2),x.destroy(e)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Puzzles_panel_svelte.prototype,ht.x);var Ua=Puzzles_panel_svelte,Ba=document.querySelector(".puzzles.nav-panel"),za=null;n(351);function watch_tv_svelte_create_if_block_1(e,t){var n;return{c:function c(){(n=Object(ht.i)("span")).className="icon-font-chess chevron-right icon-font-primary icon-font"},m:function m(e,t){Object(ht.u)(e,n,t)},d:function d(e){e&&Object(ht.p)(n)}}}function watch_tv_svelte_create_if_block(e,t){var n,a,r,i,s,o,l,u=t.$tvAnnouncement.title,f=t.translations.live;return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.i)("span"),r=Object(ht.k)(u),i=Object(ht.k)("\n    "),s=Object(ht.i)("span"),o=Object(ht.k)(f),a.className="title sub-link svelte-fz08s5",s.className="svelte-live badge icon svelte-fz08s5",n.href=l=t.routes.tv,n.target="_self",n.className="svelte-section svelte-fz08s5"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(n,i),Object(ht.d)(n,s),Object(ht.d)(s,o)},p:function p(e,t){e.$tvAnnouncement&&u!==(u=t.$tvAnnouncement.title)&&Object(ht.E)(r,u),e.translations&&f!==(f=t.translations.live)&&Object(ht.E)(o,f),e.routes&&l!==(l=t.routes.tv)&&(n.href=l)},d:function d(e){e&&Object(ht.p)(n)}}}function Watch_tv_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(Object(ht.e)(this.store._init(["tvAnnouncement"]),function watch_tv_svelte_data(){return{routes:la.b,translations:mt.a}}()),e.data),this.store._add(this,["tvAnnouncement"]),this._recompute({$tvAnnouncement:1},this._state),this._intro=!0,this._handlers.destroy=[ht.z],this._fragment=function watch_tv_svelte_create_main_fragment(e,t){var n,a,r,i,s,o,l,u,f=t.translations.chessTv,_=t.isLive&&watch_tv_svelte_create_if_block_1(),h=t.isLive&&watch_tv_svelte_create_if_block(0,t);return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.i)("span"),r=Object(ht.k)(f),i=Object(ht.k)("\n  "),_&&_.c(),l=Object(ht.k)("\n"),h&&h.c(),u=Object(ht.h)(),n.href=s=t.routes.tv,n.className=o="link main-link sprite tv "+(t.isLive&&"heading")+" svelte-fz08s5"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(n,i),_&&_.m(n,null),Object(ht.u)(e,l,t),h&&h.m(e,t),Object(ht.u)(e,u,t)},p:function p(e,t){e.translations&&f!==(f=t.translations.chessTv)&&Object(ht.E)(r,f),t.isLive?_||((_=watch_tv_svelte_create_if_block_1()).c(),_.m(n,null)):_&&(_.d(1),_=null),e.routes&&s!==(s=t.routes.tv)&&(n.href=s),e.isLive&&o!==(o="link main-link sprite tv "+(t.isLive&&"heading")+" svelte-fz08s5")&&(n.className=o),t.isLive?h?h.p(e,t):((h=watch_tv_svelte_create_if_block(0,t)).c(),h.m(u.parentNode,u)):h&&(h.d(1),h=null)},d:function d(e){e&&Object(ht.p)(n),_&&_.d(),e&&Object(ht.p)(l),h&&h.d(e),e&&Object(ht.p)(u)}}}(0,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}Object(ht.e)(Watch_tv_svelte.prototype,ht.x),Watch_tv_svelte.prototype._recompute=function _recompute(e,t){e.$tvAnnouncement&&this._differs(t.isLive,t.isLive=function watch_tv_svelte_isLive(e){var t=e.$tvAnnouncement;return!!t.title&&t}(t))&&(e.isLive=!0)};var $a=Watch_tv_svelte;n(352);function watch_streamers_svelte_get_each_context(e,t,n){var a=Object.create(e);return a.avatar=t[n].avatar,a.twitch_url=t[n].twitch_url,a.username=t[n].username,a}function watch_streamers_svelte_create_if_block(e,t){for(var n,a=t.$watchPanels.streamers,r=[],i=0;i<a.length;i+=1)r[i]=watch_streamers_svelte_create_each_block(e,watch_streamers_svelte_get_each_context(t,a,i));return{c:function c(){n=Object(ht.i)("div");for(var e=0;e<r.length;e+=1)r[e].c();n.className="svelte-section streamer-container svelte-md8xgb"},m:function m(e,t){Object(ht.u)(e,n,t);for(var a=0;a<r.length;a+=1)r[a].m(n,null)},p:function p(t,i){if(t.$watchPanels){a=i.$watchPanels.streamers;for(var s=0;s<a.length;s+=1){var o=watch_streamers_svelte_get_each_context(i,a,s);r[s]?r[s].p(t,o):(r[s]=watch_streamers_svelte_create_each_block(e,o),r[s].c(),r[s].m(n,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=a.length}},d:function d(e){e&&Object(ht.p)(n),Object(ht.m)(r,e)}}}function watch_streamers_svelte_create_each_block(e,t){var n,a,r,i,s,o,l,u,f,_=t.username,h={size:"25",src:t.avatar,username:t.username},b=new Tn.a({root:e.root,store:e.store,data:h});return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.i)("span"),b._fragment.c(),r=Object(ht.k)("\n      "),i=Object(ht.i)("span"),s=Object(ht.k)(_),o=Object(ht.k)("\n      "),(l=Object(ht.i)("span")).innerHTML='<span class="icon-font-chess tracked-content svelte-md8xgb"></span>',u=Object(ht.k)("\n    "),a.className="avatar",i.className="name svelte-md8xgb",l.className="svelte-icon badge icon",n.className="svelte-result sub-link svelte-md8xgb",n.href=f=t.twitch_url,n.target="_blank"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),b._mount(a,null),Object(ht.d)(n,r),Object(ht.d)(n,i),Object(ht.d)(i,s),Object(ht.d)(n,o),Object(ht.d)(n,l),Object(ht.d)(n,u)},p:function p(e,t){var a={};e.$watchPanels&&(a.src=t.avatar),e.$watchPanels&&(a.username=t.username),b._set(a),e.$watchPanels&&_!==(_=t.username)&&Object(ht.E)(s,_),e.$watchPanels&&f!==(f=t.twitch_url)&&(n.href=f)},d:function d(e){e&&Object(ht.p)(n),b.destroy()}}}function Watch_streamers_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(Object(ht.e)(this.store._init(["watchPanels"]),function watch_streamers_svelte_data(){return{translations:mt.a}}()),e.data),this.store._add(this,["watchPanels"]),this._intro=!0,this._handlers.destroy=[ht.z],this._fragment=function watch_streamers_svelte_create_main_fragment(e,t){var n,a,r,i,s,o,l,u,f=t.translations.streamers,_=t.$watchPanels.streamers&&t.$watchPanels.streamers.length&&watch_streamers_svelte_create_if_block(e,t);return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.i)("span"),r=Object(ht.k)(f),i=Object(ht.k)("\n  "),s=Object(ht.i)("span"),l=Object(ht.k)("\n"),_&&_.c(),u=Object(ht.h)(),s.className="icon-font-chess chevron-right icon-font-primary icon-font",n.href=o=t.routes.streamers,n.className="link main-link sprite streamers heading"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(n,i),Object(ht.d)(n,s),Object(ht.u)(e,l,t),_&&_.m(e,t),Object(ht.u)(e,u,t)},p:function p(t,a){t.translations&&f!==(f=a.translations.streamers)&&Object(ht.E)(r,f),t.routes&&o!==(o=a.routes.streamers)&&(n.href=o),a.$watchPanels.streamers&&a.$watchPanels.streamers.length?_?_.p(t,a):((_=watch_streamers_svelte_create_if_block(e,a)).c(),_.m(u.parentNode,u)):_&&(_.d(1),_=null)},d:function d(e){e&&(Object(ht.p)(n),Object(ht.p)(l)),_&&_.d(e),e&&Object(ht.p)(u)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Watch_streamers_svelte.prototype,ht.x);var Fa=Watch_streamers_svelte;n(353);function watch_playing_now_svelte_get_each_context(e,t,n){var a=Object.create(e);return a.player=t[n],a}function watch_playing_now_svelte_create_if_block(e,t){for(var n,a,r,i,s=t.translations.playingNow,o=t.$watchPanels.topPlayers,l=[],u=0;u<o.length;u+=1)l[u]=watch_playing_now_svelte_create_each_block(e,watch_playing_now_svelte_get_each_context(t,o,u));return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.k)(s),r=Object(ht.k)("\n\n  "),i=Object(ht.i)("div");for(var e=0;e<l.length;e+=1)l[e].c();n.className="link heading small svelte-1850f4v",i.className="svelte-section svelte-1850f4v"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.u)(e,r,t),Object(ht.u)(e,i,t);for(var s=0;s<l.length;s+=1)l[s].m(i,null)},p:function p(t,n){if(t.translations&&s!==(s=n.translations.playingNow)&&Object(ht.E)(a,s),t.routes||t.$watchPanels){o=n.$watchPanels.topPlayers;for(var r=0;r<o.length;r+=1){var c=watch_playing_now_svelte_get_each_context(n,o,r);l[r]?l[r].p(t,c):(l[r]=watch_playing_now_svelte_create_each_block(e,c),l[r].c(),l[r].m(i,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=o.length}},d:function d(e){e&&(Object(ht.p)(n),Object(ht.p)(r),Object(ht.p)(i)),Object(ht.m)(l,e)}}}function watch_playing_now_svelte_create_if_block_1(e,t){var n,a,r=t.player.title;return{c:function c(){n=Object(ht.i)("span"),a=Object(ht.k)(r),n.className="svelte-icon left badge svelte-1850f4v"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.$watchPanels&&r!==(r=t.player.title)&&Object(ht.E)(a,r)},d:function d(e){e&&Object(ht.p)(n)}}}function watch_playing_now_svelte_create_each_block(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g,v,O,j,y,w=t.player.username,k=t.player.rating,E={live:!0,size:"25",src:t.player.avatar,username:t.player.username},C=new Tn.a({root:e.root,store:e.store,data:E}),S=t.player.title&&watch_playing_now_svelte_create_if_block_1(0,t);return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.i)("span"),C._fragment.c(),r=Object(ht.k)("\n        "),S&&S.c(),i=Object(ht.k)("\n        "),s=Object(ht.i)("span"),o=Object(ht.k)(w),l=Object(ht.k)(" "),u=Object(ht.k)("\n        "),f=Object(ht.i)("span"),_=Object(ht.k)("("),h=Object(ht.k)(k),b=Object(ht.k)(")"),g=Object(ht.k)("\n        "),v=Object(ht.i)("span"),j=Object(ht.k)("\n      "),a.className="avatar",s.className="watch-name svelte-1850f4v",f.className="svelte-rating svelte-1850f4v",v.className=O="country-flags-component country-"+Object($e.b)(t.player)+" svelte-1850f4v",n.className="svelte-result sub-link",n.href=y=t.routes.topPlayerObserve(t.player.username),n.target="_blank"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),C._mount(a,null),Object(ht.d)(n,r),S&&S.m(n,null),Object(ht.d)(n,i),Object(ht.d)(n,s),Object(ht.d)(s,o),Object(ht.d)(s,l),Object(ht.d)(n,u),Object(ht.d)(n,f),Object(ht.d)(f,_),Object(ht.d)(f,h),Object(ht.d)(f,b),Object(ht.d)(n,g),Object(ht.d)(n,v),Object(ht.d)(n,j)},p:function p(e,t){var a={};e.$watchPanels&&(a.src=t.player.avatar),e.$watchPanels&&(a.username=t.player.username),C._set(a),t.player.title?S?S.p(e,t):((S=watch_playing_now_svelte_create_if_block_1(0,t)).c(),S.m(n,i)):S&&(S.d(1),S=null),e.$watchPanels&&w!==(w=t.player.username)&&Object(ht.E)(o,w),e.$watchPanels&&k!==(k=t.player.rating)&&Object(ht.E)(h,k),e.$watchPanels&&O!==(O="country-flags-component country-"+Object($e.b)(t.player)+" svelte-1850f4v")&&(v.className=O),(e.routes||e.$watchPanels)&&y!==(y=t.routes.topPlayerObserve(t.player.username))&&(n.href=y)},d:function d(e){e&&Object(ht.p)(n),C.destroy(),S&&S.d()}}}function Watch_playing_now_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(Object(ht.e)(this.store._init(["watchPanels"]),function watch_playing_now_svelte_data(){return{routes:la.b,translations:mt.a}}()),e.data),this.store._add(this,["watchPanels"]),this._intro=!0,this._handlers.destroy=[ht.z],this._fragment=function watch_playing_now_svelte_create_main_fragment(e,t){var n,a=t.$watchPanels.topPlayers&&t.$watchPanels.topPlayers.length&&watch_playing_now_svelte_create_if_block(e,t);return{c:function c(){a&&a.c(),n=Object(ht.h)()},m:function m(e,t){a&&a.m(e,t),Object(ht.u)(e,n,t)},p:function p(t,r){r.$watchPanels.topPlayers&&r.$watchPanels.topPlayers.length?a?a.p(t,r):((a=watch_playing_now_svelte_create_if_block(e,r)).c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d:function d(e){a&&a.d(e),e&&Object(ht.p)(n)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Watch_playing_now_svelte.prototype,ht.x);var Ha=Watch_playing_now_svelte,Ga={logAmplitudeEvent:function logAmplitudeEvent(e){var t={key:Fe.a.AMPLITUDE_LOG,event:Fe.a.SOCIAL_VIEW_EVENT,eventProperties:{event:e}};window.postMessage(t,window.location.origin)}};function today_panel_svelte_get_each_context(e,t,n){var a=Object.create(e);return a.title=t[n].title,a.url=t[n].url,a}function today_panel_svelte_create_if_block_3(e,t){var n,a,r,i,s,o,l,u=t.translations.chessToday,f=t.translations.news;return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.k)(u),i=Object(ht.k)("\n\n    "),s=Object(ht.i)("a"),o=Object(ht.k)(f),n.href=r=t.routes.chessToday,n.className="link main-link sprite chess-today",s.href=l=t.routes.news,s.className="link main-link sprite news"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.u)(e,i,t),Object(ht.u)(e,s,t),Object(ht.d)(s,o)},p:function p(e,t){e.translations&&u!==(u=t.translations.chessToday)&&Object(ht.E)(a,u),e.routes&&r!==(r=t.routes.chessToday)&&(n.href=r),e.translations&&f!==(f=t.translations.news)&&Object(ht.E)(o,f),e.routes&&l!==(l=t.routes.news)&&(s.href=l)},d:function d(e){e&&(Object(ht.p)(n),Object(ht.p)(i),Object(ht.p)(s))}}}function today_panel_svelte_create_if_block_2(e,t){for(var n,a=t.$watchPanels.topEvents,r=[],i=0;i<a.length;i+=1)r[i]=today_panel_svelte_create_each_block(e,today_panel_svelte_get_each_context(t,a,i));return{c:function c(){for(var e=0;e<r.length;e+=1)r[e].c();n=Object(ht.h)()},m:function m(e,t){for(var a=0;a<r.length;a+=1)r[a].m(e,t);Object(ht.u)(e,n,t)},p:function p(t,i){if(t.$watchPanels){a=i.$watchPanels.topEvents;for(var s=0;s<a.length;s+=1){var o=today_panel_svelte_get_each_context(i,a,s);r[s]?r[s].p(t,o):(r[s]=today_panel_svelte_create_each_block(e,o),r[s].c(),r[s].m(n.parentNode,n))}for(;s<r.length;s+=1)r[s].d(1);r.length=a.length}},d:function d(e){Object(ht.m)(r,e),e&&Object(ht.p)(n)}}}function today_panel_svelte_create_each_block(e,t){var n,a,r,i,s,o=t.title;return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.i)("div"),r=Object(ht.k)(o),a.className="top-event-title",n.className="link event sprite top-event",n.href=i=t.url,n.target="_self",n.title=s=t.title},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(a,r)},p:function p(e,t){e.$watchPanels&&o!==(o=t.title)&&Object(ht.E)(r,o),e.$watchPanels&&i!==(i=t.url)&&(n.href=i),e.$watchPanels&&s!==(s=t.title)&&(n.title=s)},d:function d(e){e&&Object(ht.p)(n)}}}function today_panel_svelte_create_if_block_1(e,t){var n,a,r,i=t.translations.worldChessChampionship;function click_handler(t){e.logAmplitudeEvent("WCC")}return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.k)(i),Object(ht.c)(n,"click",click_handler),n.href=r=t.routes.worldChessChampionship,n.target="_self",n.className="link event sprite wcc"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.translations&&i!==(i=t.translations.worldChessChampionship)&&Object(ht.E)(a,i),e.routes&&r!==(r=t.routes.worldChessChampionship)&&(n.href=r)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(n,"click",click_handler)}}}function today_panel_svelte_create_if_block(e,t){var n,a,r,i=t.translations.computerChampionship;function click_handler(t){e.logAmplitudeEvent("CCCC")}return{c:function c(){n=Object(ht.i)("a"),a=Object(ht.k)(i),Object(ht.c)(n,"click",click_handler),n.href=r=t.routes.computerChampionship,n.target="_self",n.className="link event sprite cpu-champs"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.translations&&i!==(i=t.translations.computerChampionship)&&Object(ht.E)(a,i),e.routes&&r!==(r=t.routes.computerChampionship)&&(n.href=r)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(n,"click",click_handler)}}}function Today_panel_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(this.store._init(["watchPanels"]),e.data),this.store._add(this,["watchPanels"]),this._intro=!0,this._handlers.destroy=[ht.z],this._fragment=function today_panel_svelte_create_main_fragment(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g,v,O,j,y,w,k,E=t.translations.events,C=t.translations.proChessLeague,S=t.translations.speedChessChampionship,N=t.chessTodayAccess&&today_panel_svelte_create_if_block_3(0,t),T=new $a({root:e.root,store:e.store}),A={routes:t.routes},I=new Fa({root:e.root,store:e.store,data:A}),L=t.$watchPanels.topEvents&&today_panel_svelte_create_if_block_2(e,t),P=t.hasWCCAccess&&today_panel_svelte_create_if_block_1(e,t);function click_handler(t){e.logAmplitudeEvent("PCL")}function click_handler_1(t){e.logAmplitudeEvent("SCC")}var M=!t.chessTodayAccess&&today_panel_svelte_create_if_block(e,t),R=new Ha({root:e.root,store:e.store}),x=new Ht({root:e.root,store:e.store,slots:{default:Object(ht.j)()}});return{c:function c(){N&&N.c(),n=Object(ht.k)("\n\n  "),T._fragment.c(),a=Object(ht.k)("\n\n  "),I._fragment.c(),r=Object(ht.k)("\n\n  "),i=Object(ht.i)("a"),s=Object(ht.i)("span"),o=Object(ht.k)(E),l=Object(ht.k)("\n    "),u=Object(ht.i)("span"),f=Object(ht.k)("\n\n  "),L&&L.c(),_=Object(ht.k)("\n\n  "),P&&P.c(),h=Object(ht.k)("\n\n  "),b=Object(ht.i)("a"),g=Object(ht.k)(C),v=Object(ht.k)("\n\n  "),O=Object(ht.i)("a"),j=Object(ht.k)(S),w=Object(ht.k)("\n\n  "),M&&M.c(),k=Object(ht.k)("\n\n  "),R._fragment.c(),x._fragment.c(),u.className="icon-font-chess chevron-right icon-font-primary icon-font",i.className="link main-link heading sprite events",i.href="/events/",i.target="_self",Object(ht.c)(b,"click",click_handler),b.href="http://www.prochessleague.com",b.target="_blank",b.className="link event sprite proleague",Object(ht.c)(O,"click",click_handler_1),O.href=y=t.routes.speedChessChampionship,O.target="_self",O.className="link event sprite speed-champs"},m:function m(e,t){N&&N.m(x._slotted.default,null),Object(ht.d)(x._slotted.default,n),T._mount(x._slotted.default,null),Object(ht.d)(x._slotted.default,a),I._mount(x._slotted.default,null),Object(ht.d)(x._slotted.default,r),Object(ht.d)(x._slotted.default,i),Object(ht.d)(i,s),Object(ht.d)(s,o),Object(ht.d)(i,l),Object(ht.d)(i,u),Object(ht.d)(x._slotted.default,f),L&&L.m(x._slotted.default,null),Object(ht.d)(x._slotted.default,_),P&&P.m(x._slotted.default,null),Object(ht.d)(x._slotted.default,h),Object(ht.d)(x._slotted.default,b),Object(ht.d)(b,g),Object(ht.d)(x._slotted.default,v),Object(ht.d)(x._slotted.default,O),Object(ht.d)(O,j),Object(ht.d)(x._slotted.default,w),M&&M.m(x._slotted.default,null),Object(ht.d)(x._slotted.default,k),R._mount(x._slotted.default,null),x._mount(e,t)},p:function p(t,a){a.chessTodayAccess?N?N.p(t,a):((N=today_panel_svelte_create_if_block_3(0,a)).c(),N.m(n.parentNode,n)):N&&(N.d(1),N=null);var r={};t.routes&&(r.routes=a.routes),I._set(r),t.translations&&E!==(E=a.translations.events)&&Object(ht.E)(o,E),a.$watchPanels.topEvents?L?L.p(t,a):((L=today_panel_svelte_create_if_block_2(e,a)).c(),L.m(_.parentNode,_)):L&&(L.d(1),L=null),a.hasWCCAccess?P?P.p(t,a):((P=today_panel_svelte_create_if_block_1(e,a)).c(),P.m(h.parentNode,h)):P&&(P.d(1),P=null),t.translations&&C!==(C=a.translations.proChessLeague)&&Object(ht.E)(g,C),t.translations&&S!==(S=a.translations.speedChessChampionship)&&Object(ht.E)(j,S),t.routes&&y!==(y=a.routes.speedChessChampionship)&&(O.href=y),a.chessTodayAccess?M&&(M.d(1),M=null):M?M.p(t,a):((M=today_panel_svelte_create_if_block(e,a)).c(),M.m(k.parentNode,k))},d:function d(e){N&&N.d(),T.destroy(),I.destroy(),L&&L.d(),P&&P.d(),Object(ht.A)(b,"click",click_handler),Object(ht.A)(O,"click",click_handler_1),M&&M.d(),R.destroy(),x.destroy(e)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Today_panel_svelte.prototype,ht.x),Object(ht.e)(Today_panel_svelte.prototype,Ga);var qa,Va,Wa=Today_panel_svelte,Ka=document.querySelector(".today.nav-panel"),Ya=null,Ja="connect",Qa="home",Za="learn",Xa="more",er="notifications",tr="play",nr="puzzles",ar="today",rr=(qa={},f()(qa,Ja,{load:function loadConnectPanel(){ca=new sa({target:oa,store:gt.default.stores.navigation,data:{chessTodayAccess:O(j.CHESS_TODAY),routes:JSON.parse(oa.getAttribute(_.a.routes))}})},remove:function removeConnectPanel(){ca.destroy()}}),f()(qa,Qa,{load:function loadHomePanel(){O(j.CHESS_TODAY)&&gt.default.stores.notifications.fetch(),ya=new Oa({target:ja,store:gt.default.stores.notifications,data:{chessTodayAccess:O(j.CHESS_TODAY)}})},remove:function removeHomePanel(){ya.destroy()}}),f()(qa,Za,{load:function loadLearnPanel(){Ca=new ka({target:Ea,data:{chessTodayAccess:O(j.CHESS_TODAY),routes:JSON.parse(Ea.getAttribute(_.a.routes))}})},remove:function removeLearnPanel(){Ca.destroy()}}),f()(qa,Xa,{load:function loadMorePanel(){Ta=new Sa({target:Na,data:{chessTodayAccess:O(j.CHESS_TODAY),routes:JSON.parse(Na.getAttribute(_.a.routes))}})},remove:function removeMorePanel(){Ta.destroy()}}),f()(qa,er,{load:function loadNotificationsPanel(){!La&&Oe()&&(gt.default.stores.notifications.fetch(),La=new Aa({target:Ia,store:gt.default.stores.notifications}))},remove:function removeNotificationsPanel(){null!==La&&(La.destroy(),La=null)}}),f()(qa,tr,{load:function loadPlayPanel(){Oe()&&gt.default.stores.notifications.fetch(),Da=new Ra({target:xa,store:gt.default.stores.notifications,data:{routes:JSON.parse(xa.getAttribute(_.a.routes)),showLeagues:O(j.LEAGUES),chessTodayAccess:O(j.CHESS_TODAY),translations:mt.a,user:window.context.user}})},remove:function removePlayPanel(){Da.destroy()}}),f()(qa,nr,{load:function loadPuzzlePanel(){za=new Ua({target:Ba,data:{routes:JSON.parse(Ba.getAttribute(_.a.routes)),translations:mt.a}})},remove:function removePuzzlePanel(){za.destroy()}}),f()(qa,ar,{load:function loadTodayPanel(){Ya=new Wa({target:Ka,store:gt.default.stores.navigation,data:{chessTodayAccess:O(j.CHESS_TODAY),routes:JSON.parse(Ka.getAttribute(_.a.routes)),hasWCCAccess:O(j.WORLD_CHESS_CHAMPIONSHIP),translations:mt.a}})},remove:function removeTodayPanel(){Ya.destroy()}}),qa),ir=o()(document.querySelectorAll(_.l.MAIN_TOP_NAV_LINKS)),sr=function hidePanel(e){e.classList.remove(_.d.HOVER),function panelWillDisappear(e){rr[e]&&rr[e].remove()}(e.getAttribute("data-panel"))},or=function hidePanels(){ir.forEach(function(e){e.classList&&e.classList.contains(_.d.HOVER)&&sr(e)})},cr=function showPanel(e){null!=e&&(!function panelWillAppear(e){rr[e]&&rr[e].load()}(e.getAttribute("data-panel")),e.classList.add(_.d.HOVER))},lr=0,ur=function mouseEnterEvent(e){var t=e.target;Va=t,lr++,setTimeout(function(){lr--,Va!==t||t.classList.contains(_.l.HOVER_CLASS)||(or(),cr(t))},Mt())},dr=function mouseLeaveEvent(){Va=null,setTimeout(function(){var e=document.querySelector(".nav-panel:hover");e?e.addEventListener("mouseleave",mouseLeaveEvent):(0===lr||Mt()>It)&&or()},It)};function Popover_notifications_svelte(e){var t=this;Object(ht.t)(this,e),this._state=Object(ht.e)({},e.data),this._intro=!0,this._fragment=function popover_notifications_svelte_create_main_fragment(e,t){var n,a,r,i=new ha({root:e.root,store:e.store,data:{homeWidget:!1}});return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.k)("\n  "),i._fragment.c(),a.className="chevron",n.className="popover-notifications is-active"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(n,r),i._mount(n,null)},p:ht.v,d:function d(e){e&&Object(ht.p)(n),i.destroy()}}}(this,this._state),this.root._oncreate.push(function(){(function popover_notifications_svelte_oncreate(){br()}).call(t),t.fire("update",{changed:Object(ht.f)({},t._state),current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}!function handlePointerEvents(){$e.f&&function handleMobileTouch(){var e=Array.from(document.querySelectorAll(_.l.MAIN_NAV_LINKS)),t=document.querySelector(_.l.MAIN_TOP_NAV);e.filter(function(e){return Boolean(e.attributes.href)}).forEach(function(e){return e.addEventListener("click",function(n){e.classList.contains(_.d.HOVER)||(or(),cr(e),yt(t).then(or),n.preventDefault())})})}(),function handleMouseHover(){ir.forEach(function(e){e.addEventListener("mouseenter",ur),e.addEventListener("mouseleave",dr)})}()}(),Object(ht.e)(Popover_notifications_svelte.prototype,ht.x);var fr=Popover_notifications_svelte,_r=document.getElementById("popover-notifications"),hr=null,mr=document.querySelector("#tb .action.notifications"),pr=function listener(){!function loadPopoverNotificationsPanel(){gt.default.stores.notifications.fetch(),hr||(hr=new fr({target:_r,store:gt.default.stores.notifications}))}(),mr.removeEventListener("click",listener)},br=function clickOutsideListener(){yt(document.querySelector("#tb .popover-notifications")).then(function(){!function removePopoverNotificationsPanel(){hr.destroy(),hr=null}(),mr.addEventListener("click",pr)})},gr=document.querySelector("#tb .action.notifications");gr&&gr.addEventListener("click",pr);var vr={csrfToken:function csrfToken(){return window.context?window.context.csrf.token:""},show:function show(){this.set({show:!0})},hide:function hide(){this.set({show:!1})},logout:function logout(){this.refs.logout.submit()}};function popover_settings_svelte_create_if_block(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g,v,O,j,y,w,k,E,C,S,N,T,A,I,L,P,M,R,x,D,U=t.translations.settings,B=t.translations.themes,z=t.translations.help,$=t.translations.logOut;function click_handler(t){e.logout()}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.k)("\n\n    "),i=Object(ht.i)("a"),(s=Object(ht.i)("div")).innerHTML='<span class="icon-font-chess circle-gearwheel"></span>',o=Object(ht.k)("\n      "),l=Object(ht.i)("span"),u=Object(ht.k)(U),_=Object(ht.k)("\n\n    "),h=Object(ht.i)("a"),(b=Object(ht.i)("div")).innerHTML='<span class="icon-font-chess square-brush"></span>',g=Object(ht.k)("\n      "),v=Object(ht.i)("span"),O=Object(ht.k)(B),y=Object(ht.k)("\n\n    "),w=Object(ht.i)("a"),(k=Object(ht.i)("div")).innerHTML='<span class="icon-font-chess circle-question"></span>',E=Object(ht.k)("\n      "),C=Object(ht.i)("span"),S=Object(ht.k)(z),T=Object(ht.k)("\n\n    "),A=Object(ht.i)("form"),I=Object(ht.i)("input"),L=Object(ht.k)("\n      "),(P=Object(ht.i)("div")).innerHTML='<span class="icon-font-chess link"></span>',M=Object(ht.k)("\n      "),R=Object(ht.i)("span"),x=Object(ht.k)($),a.className="chevron",s.className="icon-font icon",l.className="title",i.className="item",i.href=f=t.routes.settings,i.target="_self",b.className="icon-font icon",v.className="title",h.className="item",h.href=j=t.routes.themes,h.target="_self",k.className="icon-font icon",C.className="title",w.className="item",w.href=N=t.routes.support,w.target="_self",I.name="_csrf_token",Object(ht.D)(I,"type","hidden"),I.value=t.csrfToken,P.className="icon-font icon",R.className="title",Object(ht.c)(A,"click",click_handler),A.className="item",A.method="post",A.action=D=t.routes.logout,n.className=t.componentClasses},m:function m(t,c){Object(ht.u)(t,n,c),Object(ht.d)(n,a),Object(ht.d)(n,r),Object(ht.d)(n,i),Object(ht.d)(i,s),Object(ht.d)(i,o),Object(ht.d)(i,l),Object(ht.d)(l,u),Object(ht.d)(n,_),Object(ht.d)(n,h),Object(ht.d)(h,b),Object(ht.d)(h,g),Object(ht.d)(h,v),Object(ht.d)(v,O),Object(ht.d)(n,y),Object(ht.d)(n,w),Object(ht.d)(w,k),Object(ht.d)(w,E),Object(ht.d)(w,C),Object(ht.d)(C,S),Object(ht.d)(n,T),Object(ht.d)(n,A),Object(ht.d)(A,I),Object(ht.d)(A,L),Object(ht.d)(A,P),Object(ht.d)(A,M),Object(ht.d)(A,R),Object(ht.d)(R,x),e.refs.logout=A},p:function p(e,t){e.translations&&U!==(U=t.translations.settings)&&Object(ht.E)(u,U),e.routes&&f!==(f=t.routes.settings)&&(i.href=f),e.translations&&B!==(B=t.translations.themes)&&Object(ht.E)(O,B),e.routes&&j!==(j=t.routes.themes)&&(h.href=j),e.translations&&z!==(z=t.translations.help)&&Object(ht.E)(S,z),e.routes&&N!==(N=t.routes.support)&&(w.href=N),e.csrfToken&&(I.value=t.csrfToken),e.translations&&$!==($=t.translations.logOut)&&Object(ht.E)(x,$),e.routes&&D!==(D=t.routes.logout)&&(A.action=D),e.componentClasses&&(n.className=t.componentClasses)},d:function d(t){t&&Object(ht.p)(n),Object(ht.A)(A,"click",click_handler),e.refs.logout===A&&(e.refs.logout=null)}}}function Popover_settings_svelte(e){Object(ht.t)(this,e),this.refs={},this._state=Object(ht.e)(function popover_settings_svelte_data(){return{translations:mt.a,routes:la.b,show:!1}}(),e.data),this._recompute({show:1},this._state),this._intro=!0,this._fragment=function popover_settings_svelte_create_main_fragment(e,t){var n,a=t.show&&popover_settings_svelte_create_if_block(e,t);return{c:function c(){a&&a.c(),n=Object(ht.h)()},m:function m(e,t){a&&a.m(e,t),Object(ht.u)(e,n,t)},p:function p(t,r){r.show?a?a.p(t,r):((a=popover_settings_svelte_create_if_block(e,r)).c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d:function d(e){a&&a.d(e),e&&Object(ht.p)(n)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}Object(ht.e)(Popover_settings_svelte.prototype,ht.x),Object(ht.e)(Popover_settings_svelte.prototype,vr),Popover_settings_svelte.prototype._recompute=function _recompute(e,t){e.show&&this._differs(t.componentClasses,t.componentClasses=function componentClasses(e){var t=["popover-settings"];return e.show&&t.push("is-active"),t.join(" ")}(t))&&(e.componentClasses=!0)};var Or=Popover_settings_svelte,jr=document.querySelector("#popover-settings"),yr=document.querySelector("#tb .action.settings"),wr=null;yr&&yr.addEventListener("click",function listener(){(wr=wr||new Or({target:jr})).show(),yr.removeEventListener("click",listener),yt(document.querySelector("#tb .popover-settings")).then(function(){wr.hide(),yr.addEventListener("click",listener)})});var kr=n(56),Er=document.getElementById("sb"),Cr=document.querySelector(".action.resize");Cr&&Cr.addEventListener("click",function handleResize(){gt.default.stores.navigation.get().collapsed?(document.body.classList.remove("nav-collapsed"),Er.classList.remove("collapsed"),gt.default.stores.navigation.expand()):(document.body.classList.add("nav-collapsed"),Er.classList.add("collapsed"),gt.default.stores.navigation.collapse()),window.postMessage("doBoardResize",window.location.origin),window.postMessage("navToggleInitiated",window.location.origin),window.dispatchEvent(Object(kr.a)())});var Sr=n(39),Nr=document.querySelector(".action.search"),Tr=document.querySelector(".toggle-search-box"),Ar=document.querySelector(".popover.search"),Ir=document.querySelector(".popover.search input");Nr&&Nr.addEventListener("click",function(e){$e.f||e.preventDefault()}),Tr&&Tr.addEventListener("click",function(){$e.f||Ar.classList.contains("open")||(Ar.classList.add("open"),Ir.focus(),yt(Ar).then(function(){Ar.classList.remove("open")}))}),function logSearchToAmplitude(){o()(document.querySelectorAll('input[name="q"]')).forEach(function(e){e.form.addEventListener("submit",function(){Sr.a.logEvent("Search",{searchTerm:e.value})})})}();var Lr=document.getElementById(b.c.NAV_ROOT),Pr=function updateSidebarState(){if(null==Lr&&(Lr=document.getElementById(b.c.NAV_ROOT)),null!=Lr){var e=gt.default.stores.navigation.get().collapsed,t=window.innerWidth,n=t<1250&&t>959,a=Lr.classList.contains("collapsed")&&document.body.classList.contains("nav-collapsed");!n&&!e||a||(Lr.classList.add("collapsed"),document.body.classList.add("nav-collapsed")),n||!a||e||(Lr.classList.remove("collapsed"),document.body.classList.remove("nav-collapsed"))}};Pr(),window.addEventListener("resize",Object(Fn.a)(Pr,16.6667));var Mr=document.getElementById("sb"),Rr=document.querySelectorAll(".action.toggle"),xr=document.getElementById("tb");Array.from(Rr).forEach(function(e){e.addEventListener("click",function(){e.classList.contains(_.d.CLOSE)?or():cr(document.querySelector(_.l.MAIN_NAV_HOME_LINK)),Mr.classList.toggle(_.d.OPEN),xr.classList.toggle(_.d.OPEN)})}),function insertTooltipElement(){var e=document.createElement("div");e.classList.add("svelte-tooltip"),document.body.appendChild(e)}(),function registerTooltips(e){o()(e).forEach(function(e){e.addEventListener("mouseenter",Bt),e.addEventListener("mouseleave",zt)})}(document.querySelectorAll(_.l.TOOLTIP_TRIGGER));var Dr="f5e62c4f-e67c-4a7e-84fb-ff86cff9ceac",Ur={GUEST_USER:"Guest"},Br=17218,zr=17219,$r=function titleize(e){return"string"==typeof e?e.toLowerCase().replace(/(?:^|\s|-)\S/g,function(e){return e.toUpperCase()}):e};var Fr=function configureHelpScout(){var e=window.context.user;window.Beacon("init",Dr),window.Beacon("open"),window.BeaconVisible=!0,e&&window.Beacon("identify",{email:e.email,name:e.username}),window.Beacon("prefill",{fields:[{id:Br,value:e?$r(Object(Me.e)(e.membershipLevel)):Ur.GUEST_USERNAME},{id:zr,value:e?e.username:Ur.GUEST_USERNAME}]}),window.Beacon("on","close",function(){window.Beacon("destroy"),window.BeaconVisible=!1})},Hr=function showHelpScout(){if(void 0===window.Beacon){window.Beacon=function(e,t,n){window.Beacon.readyQueue.push({method:e,options:t,data:n})},window.Beacon.readyQueue=[];var e=document.getElementsByTagName("head")[0],t=document.createElement("script");t.type="text/javascript",t.src="//beacon-v2.helpscout.net",e.appendChild(t),Fr()}else window.BeaconVisible||Fr()},Gr=document.querySelectorAll(".help-scout");o()(Gr).forEach(function(e){return e.addEventListener("click",Hr)});var qr=function showUserSnap(){(function fetchTraceData(){return a.default.get("https://www.chess.com/cdn-cgi/trace")})().then(function(e){window.traceData=e.data}).finally(function(){if(void 0===window.Usersnap){var e=document.getElementsByTagName("head")[0],t=document.createElement("script");t.type="text/javascript",t.src="//api.usersnap.com/load/68ad20f3-db9a-4f8c-84ef-a967706f08a3.js?onload=onUsersnapLoad",e.appendChild(t)}else window.Usersnap.open()})};!function configureUserSnap(){null==window.onUsersnapLoad&&(window.onUsersnapLoad=function(e){var t=Date.now();e.on("open",function(e){var n="",a={cookies:window.context.cookies,environment:window.context.environment,version:window.context.version,branch:window.context.branch,commit:window.context.commit,requestId:window.context.requestId,server:window.context.server,locale:window.context.locale,ip:window.context.ip};if(window.context.user){if(window.Sentry){var r=window.context.live?"207506":"198358";n="SentryLink: https://sentry.io/organizations/chesscom/issues/?project=".concat(r,"&query=").concat(t)}a.user={username:window.context.user.username,optedBeta:window.context.user.optedBeta,isStaff:window.context.user.isStaff,isPremium:window.context.user.isPremium},window.context.user.cohort&&(a.user.cohort=window.context.user.cohort),window.context.live&&(a.live=window.context.live)}window.chesscom&&window.chesscom.logData&&(a.logData=window.chesscom.logData),window.traceData&&(a.traceData=window.traceData.trim().split("\n")),e.api.setValue("customData",n.concat("\n\n",JSON.stringify(a,null,4)))}),e.on("submit",function(){setTimeout(function(){window.Usersnap.close(),window.Sentry&&window.Sentry.captureException(new Error('usersnap report submitted: https://chesscom.atlassian.net/issues/?jql=text+~+"'.concat(t,'"+AND+reporter+in+(usersnap)+ORDER+BY+created+DESC')))},1e3)}),e.init({button:null,label:null,assignee:null,title:null,colors:{primary:"#769656",secondary:"#878787"},fields:{email:{label:"Your email address",required:!1},comment:{label:"Your suggestion or bug report",multiline:!0,required:!0}}}),window.Usersnap=e,window.Usersnap.open()})}();var Vr=document.querySelectorAll(".user-snap");Array.from(Vr).forEach(function(e){return e.addEventListener("click",qr)});var Wr=n(76),Kr="dark-mode-scrollbars",Yr="apple",Jr="ios",Qr=function selectInputText(e){var t=window.getSelection();t.removeAllRanges();var n=document.createRange();n.selectNode(e),t.addRange(n)};n(354);var Zr={cancelSeek:function cancelSeek(){!function cancelShareableChallenge(e){cn.a.post(le.cancelShareableChallengeUrl(e)).then(function(e){return e.data})}(this.get().shortUuid),this.hide()},copyToClipboard:function copyToClipboard(e){e.preventDefault();var t=this.get().shortUrlTextId;!function copyFromInputToClipboard(e){Qr(e);try{document.execCommand("copy")}catch(e){}}(document.getElementById(t))},email:function email(e){e.preventDefault();var t=this.get().shortUuid;Object($e.k)(le.challengeShortUrl(t))},hide:function hide(){var e=this.get().timerInterval;e&&clearInterval(e),this.set({minutesLeft:"15",secondsLeft:"00",show:!1,timerInterval:null})},share:function share(e,t){e.preventDefault();var n=this.get().shortUuid;Object($e.l)({shareUrl:le.challengeShortUrl(n),network:t,username:window.context.user.username})},show:function show(e){var t=this,n=e.id,a=e.shortUuid;Object($e.e)()&&this.startTimer(),this.set({id:n,shortUuid:a,show:!0}),setTimeout(function(){var e=t.get().shortUrlTextId,n=document.getElementById(e);Qr(n)})},startTimer:function startTimer(){var e=this;this.set({startTime:Date.now()});var t=setInterval(function(){var t=e.get(),n=t.timerDuration,a=t.startTime,r=n-Math.floor((Date.now()-a)/1e3),i=Math.floor(r/60),s=Math.floor(r%60);e.set({minutesLeft:i<10?"0".concat(i):i,secondsLeft:s<10?"0".concat(s):s}),0===i&&0===s&&e.hide()},1e3);this.set({timerInterval:t})}};function shareable_game_url_svelte_create_if_block(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g,v,O,j,y,w,k,E,C,S,N,T,A,I,L,P,M,R=t.translations.shareLink,x=t.translations.copy,D=t.translations.challengeAnytime(t.playUrl);function click_handler(t){e.copyToClipboard(t)}var U=t.isLive&&shareable_game_url_svelte_create_if_block_3(e,t);function click_handler_1(n){e.share(n,t.socialNetworks.FACEBOOK)}function click_handler_2(n){e.share(n,t.socialNetworks.TWITTER)}function click_handler_3(t){e.email(t)}var B=t.isLive&&shareable_game_url_svelte_create_if_block_2(e,t),z=!t.isLive&&shareable_game_url_svelte_create_if_block_1(e,t);return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.k)("\n\n    "),i=Object(ht.i)("div"),s=Object(ht.i)("div"),o=Object(ht.i)("h1"),l=Object(ht.k)(R),u=Object(ht.k)("\n\n        "),f=Object(ht.i)("div"),_=Object(ht.i)("div"),h=Object(ht.k)("\n\n          "),b=Object(ht.i)("input"),v=Object(ht.k)("\n\n          "),O=Object(ht.i)("a"),j=Object(ht.k)(x),y=Object(ht.k)("\n\n        "),U&&U.c(),w=Object(ht.k)("\n\n        "),k=Object(ht.i)("div"),E=Object(ht.i)("a"),C=Object(ht.k)("\n\n            "),S=Object(ht.i)("a"),N=Object(ht.k)("\n\n            "),T=Object(ht.i)("a"),A=Object(ht.k)("\n\n        "),B&&B.c(),I=Object(ht.k)("\n\n        "),L=Object(ht.i)("div"),P=Object(ht.i)("div"),M=Object(ht.k)("\n\n      "),z&&z.c(),a.className="core-modal-background",o.className="svelte-1r2lh7j",_.className="icon-font icon-font-chess link svelte-1r2lh7j",b.id=t.shortUrlTextId,Object(ht.D)(b,"type","text"),b.value=g=t.routes.challengeShortUrl(t.shortUuid),b.readOnly="readonly",b.className="svelte-1r2lh7j",Object(ht.c)(O,"click",click_handler),O.className="svelte-1r2lh7j",f.className="link-container svelte-1r2lh7j",Object(ht.c)(E,"click",click_handler_1),E.className="icon-font icon-font-chess facebook svelte-1r2lh7j",Object(ht.c)(S,"click",click_handler_2),S.className="icon-font icon-font-chess twitter svelte-1r2lh7j",Object(ht.c)(T,"click",click_handler_3),T.className="icon-font icon-font-chess mail-alt svelte-1r2lh7j",k.className="social-share-container svelte-1r2lh7j",L.className="play-url-container svelte-1r2lh7j",s.className="default-modal-content svelte-1r2lh7j",i.className="default-modal-container",n.className="core-modal-container is-active"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(n,r),Object(ht.d)(n,i),Object(ht.d)(i,s),Object(ht.d)(s,o),Object(ht.d)(o,l),Object(ht.d)(s,u),Object(ht.d)(s,f),Object(ht.d)(f,_),Object(ht.d)(f,h),Object(ht.d)(f,b),Object(ht.d)(f,v),Object(ht.d)(f,O),Object(ht.d)(O,j),Object(ht.d)(s,y),U&&U.m(s,null),Object(ht.d)(s,w),Object(ht.d)(s,k),Object(ht.d)(k,E),Object(ht.d)(k,C),Object(ht.d)(k,S),Object(ht.d)(k,N),Object(ht.d)(k,T),Object(ht.d)(s,A),B&&B.m(s,null),Object(ht.d)(s,I),Object(ht.d)(s,L),Object(ht.d)(L,P),P.innerHTML=D,Object(ht.d)(i,M),z&&z.m(i,null)},p:function p(n,a){t=a,n.translations&&R!==(R=t.translations.shareLink)&&Object(ht.E)(l,R),n.shortUrlTextId&&(b.id=t.shortUrlTextId),(n.routes||n.shortUuid)&&g!==(g=t.routes.challengeShortUrl(t.shortUuid))&&(b.value=g),n.translations&&x!==(x=t.translations.copy)&&Object(ht.E)(j,x),t.isLive?U?U.p(n,t):((U=shareable_game_url_svelte_create_if_block_3(e,t)).c(),U.m(s,w)):U&&(U.d(1),U=null),t.isLive?B?B.p(n,t):((B=shareable_game_url_svelte_create_if_block_2(e,t)).c(),B.m(s,I)):B&&(B.d(1),B=null),(n.translations||n.playUrl)&&D!==(D=t.translations.challengeAnytime(t.playUrl))&&(P.innerHTML=D),t.isLive?z&&(z.d(1),z=null):z||((z=shareable_game_url_svelte_create_if_block_1(e,t)).c(),z.m(i,null))},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(O,"click",click_handler),U&&U.d(),Object(ht.A)(E,"click",click_handler_1),Object(ht.A)(S,"click",click_handler_2),Object(ht.A)(T,"click",click_handler_3),B&&B.d(),z&&z.d()}}}function shareable_game_url_svelte_create_if_block_3(e,t){var n,a,r,i,s,o,l,u,f,_,h=t.translations.waitHere,b=t.translations.linkExpires;return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.k)(h),i=Object(ht.k)("\n            "),s=Object(ht.i)("div"),o=Object(ht.k)(b),l=Object(ht.k)(" "),u=Object(ht.k)(t.minutesLeft),f=Object(ht.k)(":"),_=Object(ht.k)(t.secondsLeft),n.className="live-timer svelte-1r2lh7j"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(n,i),Object(ht.d)(n,s),Object(ht.d)(s,o),Object(ht.d)(s,l),Object(ht.d)(s,u),Object(ht.d)(s,f),Object(ht.d)(s,_)},p:function p(e,t){e.translations&&h!==(h=t.translations.waitHere)&&Object(ht.E)(r,h),e.translations&&b!==(b=t.translations.linkExpires)&&Object(ht.E)(o,b),e.minutesLeft&&Object(ht.E)(u,t.minutesLeft),e.secondsLeft&&Object(ht.E)(_,t.secondsLeft)},d:function d(e){e&&Object(ht.p)(n)}}}function shareable_game_url_svelte_create_if_block_2(e,t){var n,a,r,i,s=t.translations.cancel;function click_handler(t){e.cancelSeek()}return{c:function c(){n=Object(ht.i)("button"),a=Object(ht.i)("span"),r=Object(ht.k)("\n            "),i=Object(ht.k)(s),a.className="icon-font icon-font-chess x svelte-1r2lh7j",Object(ht.c)(n,"click",click_handler),n.className="button cancel svelte-1r2lh7j"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(n,r),Object(ht.d)(n,i)},p:function p(e,t){e.translations&&s!==(s=t.translations.cancel)&&Object(ht.E)(i,s)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(n,"click",click_handler)}}}function shareable_game_url_svelte_create_if_block_1(e,t){var n;function click_handler(t){e.hide()}return{c:function c(){(n=Object(ht.i)("div")).innerHTML='<span class="icon-font-chess x svelte-1r2lh7j"></span>',Object(ht.c)(n,"click",click_handler),n.className="icon-font close svelte-1r2lh7j"},m:function m(e,t){Object(ht.u)(e,n,t)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(n,"click",click_handler)}}}function Shareable_game_url_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(function shareable_game_url_svelte_data(){return{id:-1,isLive:Object($e.e)(),playUrl:"<strong>".concat(le.playUrl(window.context.user.username),"</strong>"),minutesLeft:"15",secondsLeft:"00",routes:le,shortUrlTextId:"short-url-text",shortUuid:"",show:!1,socialNetworks:_.m,startTime:null,timerInterval:null,timerDuration:900,translations:mt.a}}(),e.data),this._intro=!0,this._fragment=function shareable_game_url_svelte_create_main_fragment(e,t){var n,a=t.show&&shareable_game_url_svelte_create_if_block(e,t);return{c:function c(){a&&a.c(),n=Object(ht.h)()},m:function m(e,t){a&&a.m(e,t),Object(ht.u)(e,n,t)},p:function p(t,r){r.show?a?a.p(t,r):((a=shareable_game_url_svelte_create_if_block(e,r)).c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d:function d(e){a&&a.d(e),e&&Object(ht.p)(n)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}Object(ht.e)(Shareable_game_url_svelte.prototype,ht.x),Object(ht.e)(Shareable_game_url_svelte.prototype,Zr);var Xr=Shareable_game_url_svelte,ei=null;n(355);function login_register_svelte_create_if_block(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g,v,O,j,y,w,k,E,C,S,N,T,A,I,L,P,M=t.translations.loginOrJoin,R=t.translations.login,x=t.translations.or,D=t.translations.join;function click_handler(t){e.hide()}function click_handler_1(t){e.hide()}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.k)("\n\n    "),i=Object(ht.i)("div"),s=Object(ht.i)("div"),o=Object(ht.i)("div"),l=Object(ht.i)("div"),u=Object(ht.i)("span"),_=Object(ht.k)("\n\n          "),h=Object(ht.i)("h1"),b=Object(ht.k)(t.title),g=Object(ht.k)("\n\n        "),v=Object(ht.i)("div"),O=Object(ht.i)("div"),j=Object(ht.k)(M),y=Object(ht.k)("\n\n          "),w=Object(ht.i)("div"),k=Object(ht.i)("a"),E=Object(ht.k)(R),C=Object(ht.k)("\n\n            "),S=Object(ht.i)("span"),N=Object(ht.k)(x),T=Object(ht.k)("\n\n            "),A=Object(ht.i)("a"),I=Object(ht.k)(D),L=Object(ht.k)("\n\n      "),(P=Object(ht.i)("div")).innerHTML='<span class="icon-font-chess x"></span>',Object(ht.c)(a,"click",click_handler),a.className="core-modal-background",u.className=f="icon-font-chess "+t.icon+" svelte-14nzybc",l.className="icon-font svelte-14nzybc",h.className="login-title svelte-14nzybc",o.className="login-header svelte-14nzybc",O.className="login-headline svelte-14nzybc",k.className="form-button svelte-14nzybc",k.rel="nofollow",k.href=t.loginUrl,A.className="form-button svelte-14nzybc",A.rel="nofollow",A.href=t.joinUrl,w.className="login-buttons svelte-14nzybc",v.className="login-body svelte-14nzybc",s.className="login-content default-modal-content",Object(ht.c)(P,"click",click_handler_1),P.className="icon-font close",i.className="default-modal-container",n.className="core-modal-container is-active"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(n,r),Object(ht.d)(n,i),Object(ht.d)(i,s),Object(ht.d)(s,o),Object(ht.d)(o,l),Object(ht.d)(l,u),Object(ht.d)(o,_),Object(ht.d)(o,h),Object(ht.d)(h,b),Object(ht.d)(s,g),Object(ht.d)(s,v),Object(ht.d)(v,O),Object(ht.d)(O,j),Object(ht.d)(v,y),Object(ht.d)(v,w),Object(ht.d)(w,k),Object(ht.d)(k,E),Object(ht.d)(w,C),Object(ht.d)(w,S),Object(ht.d)(S,N),Object(ht.d)(w,T),Object(ht.d)(w,A),Object(ht.d)(A,I),Object(ht.d)(i,L),Object(ht.d)(i,P)},p:function p(e,t){e.icon&&f!==(f="icon-font-chess "+t.icon+" svelte-14nzybc")&&(u.className=f),e.title&&Object(ht.E)(b,t.title),e.translations&&M!==(M=t.translations.loginOrJoin)&&Object(ht.E)(j,M),e.translations&&R!==(R=t.translations.login)&&Object(ht.E)(E,R),e.loginUrl&&(k.href=t.loginUrl),e.translations&&x!==(x=t.translations.or)&&Object(ht.E)(N,x),e.translations&&D!==(D=t.translations.join)&&Object(ht.E)(I,D),e.joinUrl&&(A.href=t.joinUrl)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(a,"click",click_handler),Object(ht.A)(P,"click",click_handler_1)}}}function Login_register_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(function login_register_svelte_data(){return{icon:"",joinUrl:Object($e.h)(),loginUrl:Object($e.i)(),show:!1,title:"",translations:mt.a}}(),e.data),this._intro=!0,this._fragment=function login_register_svelte_create_main_fragment(e,t){var n,a=t.show&&login_register_svelte_create_if_block(e,t);return{c:function c(){a&&a.c(),n=Object(ht.h)()},m:function m(e,t){a&&a.m(e,t),Object(ht.u)(e,n,t)},p:function p(t,r){r.show?a?a.p(t,r):((a=login_register_svelte_create_if_block(e,r)).c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d:function d(e){a&&a.d(e),e&&Object(ht.p)(n)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}Object(ht.e)(Login_register_svelte.prototype,ht.x),Object(ht.e)(Login_register_svelte.prototype,{show:function show(e){var t=e.icon,n=e.title;this.set({icon:t,show:!0,title:n})},hide:function hide(){this.set({show:!1})}});var ti=Login_register_svelte,ni=document.getElementById(b.c.LOGIN_REGISTER_MODAL),ai="data-announcement-hash",ri=function readAnnouncement(e){return h.default.generate("web_user_callback_announcement_read",{announcementHash:e})},ii=document.getElementById("system-alert-close"),si=function clickListenter(){var e=ii.getAttribute(ai);ii.removeEventListener("click",clickListenter),function readAnnouncement(e){cn.a.get(ri(e))}(e),ii.parentNode.remove()},oi=n(74),ci=n.n(oi);n(356);var li={hide:function hide(){this.store.hide()},messageChange:function messageChange(e){this.store.set({message:e.target.value})},onMount:function onMount(){ci()(this.refs.textarea),this.store.getCaptcha(),this.refs.textarea.focus()},submit:function submit(e){this.refs.textarea.classList.add("disabled"),this.refs.textarea.setAttribute("readonly",!0),this.store.sendMessage(e)}};function message_modal_svelte_create_if_block(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g,v,O,j,y,w,k,E,C,S,N,T,A,I,L=t.translations.message,P=!1,M=t.translations.send;function click_handler(t){e.hide()}function click_handler_1(t){e.hide()}var R={size:"50",src:t.$avatar_url,live:t.$is_in_livechess,online:t.$is_online,username:t.$username},x=new Tn.a({root:e.root,store:e.store,data:R});function select_block_type(e){return e.$success?message_modal_svelte_create_if_block_4:message_modal_svelte_create_else_block}var D=select_block_type(t),U=D(e,t);function textarea_input_handler(){P=!0,e.store.set({message:k.value}),P=!1}function input_handler(t){e.messageChange(t)}var B=t.$captcha&&message_modal_svelte_create_if_block_3(e,t);function click_handler_2(n){e.submit(t.captchaText)}var z=t.$sending&&message_modal_svelte_create_if_block_2(e,t),$=t.$errorMessage&&t.$errorMessage.length&&message_modal_svelte_create_if_block_1(e,t);return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.k)("\n\n    "),i=Object(ht.i)("div"),s=Object(ht.i)("div"),o=Object(ht.i)("span"),l=Object(ht.k)(L),u=Object(ht.k)("\n\n        "),(f=Object(ht.i)("div")).innerHTML='<span class="icon-font-chess x icon-font-primary svelte-8xbxgk"></span>',_=Object(ht.k)("\n\n      "),h=Object(ht.i)("div"),b=Object(ht.i)("div"),g=Object(ht.i)("span"),x._fragment.c(),v=Object(ht.k)("\n\n          "),O=Object(ht.i)("span"),j=Object(ht.k)(t.$username),y=Object(ht.k)("\n\n          "),U.c(),w=Object(ht.k)("\n\n        "),k=Object(ht.i)("textarea"),E=Object(ht.k)("\n\n        "),B&&B.c(),C=Object(ht.k)("\n\n        "),S=Object(ht.i)("div"),N=Object(ht.i)("button"),T=Object(ht.k)(M),A=Object(ht.k)("\n\n          "),z&&z.c(),I=Object(ht.k)("\n\n        "),$&&$.c(),Object(ht.c)(a,"click",click_handler),a.className="core-modal-background svelte-8xbxgk",o.className="title svelte-8xbxgk",Object(ht.c)(f,"click",click_handler_1),f.className="dismissible-icon icon-font svelte-8xbxgk",s.className="section-title svelte-8xbxgk",g.className="avatar svelte-8xbxgk",O.className="username svelte-8xbxgk",b.className="top-section svelte-8xbxgk",Object(ht.c)(k,"input",textarea_input_handler),Object(ht.c)(k,"input",input_handler),k.rows="8",k.className="form-textarea svelte-8xbxgk",Object(ht.c)(N,"click",click_handler_2),N.disabled=t.disabled,N.type="button",N.className="form-button svelte-8xbxgk",S.className="send-container svelte-8xbxgk",h.className="main svelte-8xbxgk",i.className="core-modal svelte-8xbxgk",n.className=t.modalClasses+" svelte-8xbxgk"},m:function m(c,d){Object(ht.u)(c,n,d),Object(ht.d)(n,a),Object(ht.d)(n,r),Object(ht.d)(n,i),Object(ht.d)(i,s),Object(ht.d)(s,o),Object(ht.d)(o,l),Object(ht.d)(s,u),Object(ht.d)(s,f),Object(ht.d)(i,_),Object(ht.d)(i,h),Object(ht.d)(h,b),Object(ht.d)(b,g),x._mount(g,null),Object(ht.d)(b,v),Object(ht.d)(b,O),Object(ht.d)(O,j),Object(ht.d)(b,y),U.m(b,null),Object(ht.d)(h,w),Object(ht.d)(h,k),e.refs.textarea=k,k.value=t.$message,Object(ht.d)(h,E),B&&B.m(h,null),Object(ht.d)(h,C),Object(ht.d)(h,S),Object(ht.d)(S,N),Object(ht.d)(N,T),Object(ht.d)(S,A),z&&z.m(S,null),Object(ht.d)(h,I),$&&$.m(h,null)},p:function p(a,r){t=r,a.translations&&L!==(L=t.translations.message)&&Object(ht.E)(l,L);var i={};a.$avatar_url&&(i.src=t.$avatar_url),a.$is_in_livechess&&(i.live=t.$is_in_livechess),a.$is_online&&(i.online=t.$is_online),a.$username&&(i.username=t.$username),x._set(i),a.$username&&Object(ht.E)(j,t.$username),D===(D=select_block_type(t))&&U?U.p(a,t):(U.d(1),(U=D(e,t)).c(),U.m(b,null)),!P&&a.$message&&(k.value=t.$message),t.$captcha?B?B.p(a,t):((B=message_modal_svelte_create_if_block_3(e,t)).c(),B.m(h,C)):B&&(B.d(1),B=null),a.translations&&M!==(M=t.translations.send)&&Object(ht.E)(T,M),a.disabled&&(N.disabled=t.disabled),t.$sending?z||((z=message_modal_svelte_create_if_block_2(e,t)).c(),z.m(S,null)):z&&(z.d(1),z=null),t.$errorMessage&&t.$errorMessage.length?$?$.p(a,t):(($=message_modal_svelte_create_if_block_1(e,t)).c(),$.m(h,null)):$&&($.d(1),$=null),a.modalClasses&&(n.className=t.modalClasses+" svelte-8xbxgk")},d:function d(t){t&&Object(ht.p)(n),Object(ht.A)(a,"click",click_handler),Object(ht.A)(f,"click",click_handler_1),x.destroy(),U.d(),Object(ht.A)(k,"input",textarea_input_handler),Object(ht.A)(k,"input",input_handler),e.refs.textarea===k&&(e.refs.textarea=null),B&&B.d(),Object(ht.A)(N,"click",click_handler_2),z&&z.d(),$&&$.d()}}}function message_modal_svelte_create_else_block(e,t){var n,a;return{c:function c(){n=Object(ht.i)("a"),(a=Object(ht.i)("div")).innerHTML='<span class="icon-font-chess mail-alt icon-font-primary svelte-8xbxgk"></span>',a.className="icon-font message-popover-icon svelte-8xbxgk",n.href=t.composeUrl},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.composeUrl&&(n.href=t.composeUrl)},d:function d(e){e&&Object(ht.p)(n)}}}function message_modal_svelte_create_if_block_4(e,t){var n;return{c:function c(){(n=Object(ht.i)("div")).innerHTML='<span class="icon-font-chess checkmark svelte-8xbxgk"></span>',n.className="icon-font message-popover-icon message-success svelte-8xbxgk"},m:function m(e,t){Object(ht.u)(e,n,t)},p:ht.v,d:function d(e){e&&Object(ht.p)(n)}}}function message_modal_svelte_create_if_block_3(e,t){var n,a,r,i,s,o=!1;function input_input_handler(){o=!0,e.set({captchaText:a.value}),o=!1}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("input"),i=Object(ht.k)("\n\n            "),s=Object(ht.i)("img"),Object(ht.c)(a,"input",input_input_handler),a.autocomplete="off",a.className="form-input svelte-8xbxgk",Object(ht.D)(a,"type","text"),a.name="code",a.placeholder=r=t.translations.captchaPlaceholder,s.className="captcha svelte-8xbxgk",s.src=t.$captcha,n.className="captcha-container svelte-8xbxgk"},m:function m(e,r){Object(ht.u)(e,n,r),Object(ht.d)(n,a),a.value=t.captchaText,Object(ht.d)(n,i),Object(ht.d)(n,s)},p:function p(e,t){!o&&e.captchaText&&(a.value=t.captchaText),e.translations&&r!==(r=t.translations.captchaPlaceholder)&&(a.placeholder=r),e.$captcha&&(s.src=t.$captcha)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(a,"input",input_input_handler)}}}function message_modal_svelte_create_if_block_2(e,t){var n,a=new aa({root:e.root,store:e.store,data:{style:"dark right"}});return{c:function c(){n=Object(ht.i)("div"),a._fragment.c(),n.className="bounce svelte-8xbxgk"},m:function m(e,t){Object(ht.u)(e,n,t),a._mount(n,null)},d:function d(e){e&&Object(ht.p)(n),a.destroy()}}}function message_modal_svelte_create_if_block_1(e,t){var n;return{c:function c(){(n=Object(ht.i)("div")).className="error svelte-8xbxgk"},m:function m(e,a){Object(ht.u)(e,n,a),n.innerHTML=t.$errorMessage},p:function p(e,t){e.$errorMessage&&(n.innerHTML=t.$errorMessage)},d:function d(e){e&&Object(ht.p)(n)}}}function Message_modal_svelte(e){var t=this;Object(ht.t)(this,e),this.refs={},this._state=Object(ht.e)(Object(ht.e)(this.store._init(["username","message","sending","show","avatar_url","is_in_livechess","is_online","success","captcha","errorMessage"]),function message_modal_svelte_data(){return{captchaText:"",translations:mt.a}}()),e.data),this.store._add(this,["username","message","sending","show","avatar_url","is_in_livechess","is_online","success","captcha","errorMessage"]),this._recompute({$username:1,$message:1,$sending:1,$show:1},this._state),this._intro=!0,this._handlers.destroy=[ht.z],this._fragment=function message_modal_svelte_create_main_fragment(e,t){var n,a=t.$username&&message_modal_svelte_create_if_block(e,t);return{c:function c(){a&&a.c(),n=Object(ht.h)()},m:function m(e,t){a&&a.m(e,t),Object(ht.u)(e,n,t)},p:function p(t,r){r.$username?a?a.p(t,r):((a=message_modal_svelte_create_if_block(e,r)).c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d:function d(e){a&&a.d(e),e&&Object(ht.p)(n)}}}(this,this._state),this.root._oncreate.push(function(){(function message_modal_svelte_oncreate(){var e=this;window.addEventListener("message",function(t){t.data===Ct.MOUNT_MESSAGE_MODAL&&e.onMount()})}).call(t),t.fire("update",{changed:Object(ht.f)({},t._state),current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Message_modal_svelte.prototype,ht.x),Object(ht.e)(Message_modal_svelte.prototype,li),Message_modal_svelte.prototype._recompute=function _recompute(e,t){e.$username&&this._differs(t.composeUrl,t.composeUrl=function composeUrl(e){var t=e.$username;return h.default.generate("web_message_compose_username",{username:t})}(t))&&(e.composeUrl=!0),(e.$message||e.$sending)&&this._differs(t.disabled,t.disabled=function disabled(e){var t=e.$message,n=e.$sending;return 0===t.trim().length||n}(t))&&(e.disabled=!0),e.$show&&(this._differs(t.modalClasses,t.modalClasses=function message_modal_svelte_modalClasses(e){var t=["core-modal-container"];return e.$show&&t.push("is-active"),t.join(" ")}(t))&&(e.modalClasses=!0),this._differs(t.show,t.show=function message_modal_svelte_show(e){var t=e.$show;return t&&window.postMessage(Ct.MOUNT_MESSAGE_MODAL,window.location.origin),t}(t))&&(e.show=!0))};var ui=Message_modal_svelte,di=document.getElementById("message-modal"),fi=null,_i=function setupMessageModal(){fi||(fi=new ui({target:di,store:gt.default.stores.message}))};function badge_svelte_create_if_block(e,t){var n,a;return{c:function c(){n=Object(ht.i)("span"),a=Object(ht.k)(t.badgeCount),n.className="badge"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.badgeCount&&Object(ht.E)(a,t.badgeCount)},d:function d(e){e&&Object(ht.p)(n)}}}function Badge_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(this.store._init(["badges"]),e.data),this.store._add(this,["badges"]),this._recompute({$badges:1,badge:1},this._state),this._intro=!0,this._handlers.destroy=[ht.z],this._fragment=function badge_svelte_create_main_fragment(e,t){var n,a=t.$badges[t.badge]>0&&badge_svelte_create_if_block(0,t);return{c:function c(){a&&a.c(),n=Object(ht.h)()},m:function m(e,t){a&&a.m(e,t),Object(ht.u)(e,n,t)},p:function p(e,t){t.$badges[t.badge]>0?a?a.p(e,t):((a=badge_svelte_create_if_block(0,t)).c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d:function d(e){a&&a.d(e),e&&Object(ht.p)(n)}}}(0,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}Object(ht.e)(Badge_svelte.prototype,ht.x),Badge_svelte.prototype._recompute=function _recompute(e,t){(e.$badges||e.badge)&&this._differs(t.badgeCount,t.badgeCount=function badgeCount(e){var t=e.$badges,n=e.badge;if(!Object($e.g)()&&O(j.CHESS_TODAY)&&n===_.c.ALERTS){var a=t[_.c.ALERTS]+t[_.c.MESSAGES],r=ba(ga.MESSAGE_UNREAD_COUNT_MAX,_.b);return O(j.USER_MESSAGES_OVERFLOW)&&a>r?"".concat(r,"+"):a}return n===_.c.MESSAGES&&O(j.USER_MESSAGES_OVERFLOW)&&t[n]>ba(ga.MESSAGE_UNREAD_COUNT_MAX,_.b)?"".concat(ba(ga.MESSAGE_UNREAD_COUNT_MAX,_.b),"+"):t[n]}(t))&&(e.badgeCount=!0)};var hi=Badge_svelte;function home_notification_panel_old_svelte_create_if_block(e,t){var n,a=new ha({root:e.root,store:e.store,data:{homeWidget:!0,isNewHome:!1}});return{c:function c(){n=Object(ht.i)("div"),a._fragment.c(),n.className="notification-container notifications"},m:function m(e,t){Object(ht.u)(e,n,t),a._mount(n,null)},d:function d(e){e&&Object(ht.p)(n),a.destroy()}}}function Home_notification_panel_old_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(this.store._init(["notifications","showNotificationsOnHome"]),e.data),this.store._add(this,["notifications","showNotificationsOnHome"]),this._recompute({$notifications:1,$showNotificationsOnHome:1},this._state),this._intro=!0,this._handlers.destroy=[ht.z],this._fragment=function home_notification_panel_old_svelte_create_main_fragment(e,t){var n,a=t.showWidget&&home_notification_panel_old_svelte_create_if_block(e);return{c:function c(){a&&a.c(),n=Object(ht.h)()},m:function m(e,t){a&&a.m(e,t),Object(ht.u)(e,n,t)},p:function p(t,r){r.showWidget?a||((a=home_notification_panel_old_svelte_create_if_block(e)).c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d:function d(e){a&&a.d(e),e&&Object(ht.p)(n)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Home_notification_panel_old_svelte.prototype,ht.x),Home_notification_panel_old_svelte.prototype._recompute=function _recompute(e,t){(e.$notifications||e.$showNotificationsOnHome)&&this._differs(t.showWidget,t.showWidget=function showWidget(e){var t=e.$notifications,n=e.$showNotificationsOnHome;return null!=t&&t.length>0&&n}(t))&&(e.showWidget=!0)};var mi=Home_notification_panel_old_svelte;n(357);function home_notification_panel_svelte_create_if_block(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g=t.translations.alerts,v=t.showWidget&&home_notification_panel_svelte_create_if_block_1(e,t),O=new ha({root:e.root,store:e.store,data:{homeWidget:!0,isNewHome:!0}});return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("span"),r=Object(ht.i)("span"),i=Object(ht.k)(g),s=Object(ht.k)("\n\n      "),o=Object(ht.i)("div"),v&&v.c(),l=Object(ht.k)("\n\n        "),u=Object(ht.i)("a"),_=Object(ht.k)("\n\n    "),h=Object(ht.i)("div"),b=Object(ht.i)("div"),O._fragment.c(),r.className="section-link-name",u.className="alerts-gear-icon icon-font-chess circle-gearwheel svelte-1qq9cox",u.href=f=t.routes.settings,u.target="_self",o.className="home-alerts-buttons-wrapper svelte-1qq9cox",a.className="section-link-component alerts-section-link svelte-1qq9cox",b.className="notification-container notifications",h.id="home-alerts-wrapper",n.className="section-container-component"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(r,i),Object(ht.d)(a,s),Object(ht.d)(a,o),v&&v.m(o,null),Object(ht.d)(o,l),Object(ht.d)(o,u),Object(ht.d)(n,_),Object(ht.d)(n,h),Object(ht.d)(h,b),O._mount(b,null)},p:function p(t,n){t.translations&&g!==(g=n.translations.alerts)&&Object(ht.E)(i,g),n.showWidget?v?v.p(t,n):((v=home_notification_panel_svelte_create_if_block_1(e,n)).c(),v.m(o,l)):v&&(v.d(1),v=null),t.routes&&f!==(f=n.routes.settings)&&(u.href=f)},d:function d(e){e&&Object(ht.p)(n),v&&v.d(),O.destroy()}}}function home_notification_panel_svelte_create_if_block_1(e,t){var n,a,r=t.translations.clearAll;function click_handler(t){e.clearAll(t)}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.k)(r),Object(ht.c)(n,"click",click_handler),n.className="clear-button svelte-1qq9cox"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a)},p:function p(e,t){e.translations&&r!==(r=t.translations.clearAll)&&Object(ht.E)(a,r)},d:function d(e){e&&Object(ht.p)(n),Object(ht.A)(n,"click",click_handler)}}}function Home_notification_panel_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(Object(ht.e)(this.store._init(["notifications"]),function home_notification_panel_svelte_data(){return{routes:G,translations:mt.a}}()),e.data),this.store._add(this,["notifications"]),this._recompute({$notifications:1},this._state),this._intro=!0,this._handlers.destroy=[ht.z],this._fragment=function home_notification_panel_svelte_create_main_fragment(e,t){var n,a=t.showWidget&&home_notification_panel_svelte_create_if_block(e,t);return{c:function c(){a&&a.c(),n=Object(ht.h)()},m:function m(e,t){a&&a.m(e,t),Object(ht.u)(e,n,t)},p:function p(t,r){r.showWidget?a?a.p(t,r):((a=home_notification_panel_svelte_create_if_block(e,r)).c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d:function d(e){a&&a.d(e),e&&Object(ht.p)(n)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Home_notification_panel_svelte.prototype,ht.x),Object(ht.e)(Home_notification_panel_svelte.prototype,{clearAll:function clearAll(e){e.stopPropagation(),this.store.ignoreAll()}}),Home_notification_panel_svelte.prototype._recompute=function _recompute(e,t){e.$notifications&&this._differs(t.showWidget,t.showWidget=function home_notification_panel_svelte_showWidget(e){var t=e.$notifications;return null!=t&&t.length>0}(t))&&(e.showWidget=!0)};var pi=Home_notification_panel_svelte;n(358);function offline_challenge_toaster_svelte_ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function offline_challenge_toaster_svelte_offlineChallenge(e){var t=e.$notifications;if(t.length>0&&t[0].type.id===H.offlineChallenge){var n=lt(t[0].notifications[0]);return function offline_challenge_toaster_svelte_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?offline_challenge_toaster_svelte_ownKeys(n,!0).forEach(function(t){f()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):offline_challenge_toaster_svelte_ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({icon:"icon-main ".concat(Vt(n.gameType))},n)}return null}var bi={accept:function accept(e,t){e.preventDefault(),window.location=G.live(t.id)},decline:function decline(e,t){e.preventDefault(),this.store.declineRequest(t)},showUserPopup:function showUserPopup(e){e.preventDefault();var t=this.get().offlineChallenge;window.postMessage({key:r.SHOW_USER_POPOVER,target:e.currentTarget.id,username:t.from},window.location.origin)}};function offline_challenge_toaster_svelte_ondestroy(){this.refs.component&&this.refs.component.querySelector("strong").removeEventListener("click",this.get().clickListenerEvent)}function onupdate(){if(this.refs.component&&!this.get().clickListenerEvent){var e=this.showUserPopup.bind(this);this.refs.component.querySelector("strong").addEventListener("click",e),this.set({clickListenerEvent:e})}}function offline_challenge_toaster_svelte_create_if_block(e,t){var n,a,r,i,s,o,l,u,f,_,h,b,g,v,O,j,y,w,k,E=t.offlineChallenge.content,C=t.translations.decline,S=t.translations.accept;function click_handler(n){e.decline(n,t.offlineChallenge)}function click_handler_1(n){e.accept(n,t.offlineChallenge)}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),i=Object(ht.k)("\n  "),s=Object(ht.i)("img"),u=Object(ht.k)("\n  "),f=Object(ht.i)("div"),_=Object(ht.i)("noscript"),h=Object(ht.k)("\n    "),b=Object(ht.i)("a"),g=Object(ht.k)(C),v=Object(ht.k)("\n    |\n    "),O=Object(ht.i)("a"),j=Object(ht.k)(S),y=Object(ht.k)("\n  "),w=Object(ht.i)("a"),a.className=r=t.offlineChallenge.icon+" svelte-1c78fjn",s.alt="user_avatar",s.className="challenge-avatar svelte-1c78fjn",s.src=o=t.offlineChallenge.image,s.srcset=l=t.offlineChallenge.srcset,s.height="70",s.width="70",Object(ht.c)(b,"click",click_handler),b.href="#",Object(ht.c)(O,"click",click_handler_1),O.href="#",f.className="content",w.className="icon-settings icon-font icon-font-chess circle-gearwheel",w.href=k=t.routes.liveSettings,n.className="offline-challenge-toaster"},m:function m(t,r){Object(ht.u)(t,n,r),Object(ht.d)(n,a),Object(ht.d)(n,i),Object(ht.d)(n,s),Object(ht.d)(n,u),Object(ht.d)(n,f),Object(ht.d)(f,_),_.insertAdjacentHTML("beforebegin",E),Object(ht.d)(f,h),Object(ht.d)(f,b),Object(ht.d)(b,g),Object(ht.d)(f,v),Object(ht.d)(f,O),Object(ht.d)(O,j),Object(ht.d)(n,y),Object(ht.d)(n,w),e.refs.component=n},p:function p(e,n){t=n,e.offlineChallenge&&r!==(r=t.offlineChallenge.icon+" svelte-1c78fjn")&&(a.className=r),e.offlineChallenge&&o!==(o=t.offlineChallenge.image)&&(s.src=o),e.offlineChallenge&&l!==(l=t.offlineChallenge.srcset)&&(s.srcset=l),e.offlineChallenge&&E!==(E=t.offlineChallenge.content)&&(Object(ht.n)(_),_.insertAdjacentHTML("beforebegin",E)),e.translations&&C!==(C=t.translations.decline)&&Object(ht.E)(g,C),e.translations&&S!==(S=t.translations.accept)&&Object(ht.E)(j,S),e.routes&&k!==(k=t.routes.liveSettings)&&(w.href=k)},d:function d(t){t&&Object(ht.p)(n),Object(ht.A)(b,"click",click_handler),Object(ht.A)(O,"click",click_handler_1),e.refs.component===n&&(e.refs.component=null)}}}function Offline_challenge_toaster_svelte(e){var t=this;Object(ht.t)(this,e),this.refs={},this._state=Object(ht.e)(Object(ht.e)(this.store._init(["notifications"]),function offline_challenge_toaster_svelte_data(){return{routes:G,translations:mt.a,clickListenerEvent:null}}()),e.data),this.store._add(this,["notifications"]),this._recompute({$notifications:1},this._state),this._intro=!0,this._handlers.update=[onupdate],this._handlers.destroy=[offline_challenge_toaster_svelte_ondestroy,ht.z],this._fragment=function offline_challenge_toaster_svelte_create_main_fragment(e,t){var n,a=t.offlineChallenge&&offline_challenge_toaster_svelte_create_if_block(e,t);return{c:function c(){a&&a.c(),n=Object(ht.h)()},m:function m(e,t){a&&a.m(e,t),Object(ht.u)(e,n,t)},p:function p(t,r){r.offlineChallenge?a?a.p(t,r):((a=offline_challenge_toaster_svelte_create_if_block(e,r)).c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d:function d(e){a&&a.d(e),e&&Object(ht.p)(n)}}}(this,this._state),this.root._oncreate.push(function(){t.fire("update",{changed:Object(ht.f)({},t._state),current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Offline_challenge_toaster_svelte.prototype,ht.x),Object(ht.e)(Offline_challenge_toaster_svelte.prototype,bi),Offline_challenge_toaster_svelte.prototype._recompute=function _recompute(e,t){e.$notifications&&this._differs(t.offlineChallenge,t.offlineChallenge=offline_challenge_toaster_svelte_offlineChallenge(t))&&(e.offlineChallenge=!0)};var gi=Offline_challenge_toaster_svelte;n(359);var vi={clicked:function clicked(){var clicked=this.get().toaster.clicked;clicked instanceof Function&&clicked()},showDuration:function showDuration(e){var t=this;if(e){var n=setTimeout(function(){t.fire("durationExpired")},e);this.set({durationTimeout:n})}}};function notification_toaster_svelte_ondestroy(){var e=this.get(),t=e.toaster.destroyed,n=e.durationTimeout;clearTimeout(n),t instanceof Function&&t()}function notification_toaster_svelte_create_if_block(e,t){var n,a;return{c:function c(){(n=Object(ht.i)("img")).alt="user_avatar",n.className="avatar svelte-14bix6w",n.src=a=t.toaster.avatarUrl,n.height="60",n.width="60"},m:function m(e,t){Object(ht.u)(e,n,t)},p:function p(e,t){e.toaster&&a!==(a=t.toaster.avatarUrl)&&(n.src=a)},d:function d(e){e&&Object(ht.p)(n)}}}function Notification_toaster_svelte(e){var t=this;Object(ht.t)(this,e),this.refs={},this._state=Object(ht.e)({durationTimeout:null},e.data),this._intro=!0,this._handlers.destroy=[notification_toaster_svelte_ondestroy],this._fragment=function notification_toaster_svelte_create_main_fragment(e,t){var n,a,r,i=t.toaster.content,s=t.toaster.avatarUrl&&notification_toaster_svelte_create_if_block(0,t);function click_handler(t){e.clicked()}return{c:function c(){n=Object(ht.i)("div"),s&&s.c(),a=Object(ht.k)("\n\n  "),(r=Object(ht.i)("div")).className="content svelte-14bix6w",Object(ht.c)(n,"click",click_handler),n.className="toaster svelte-14bix6w"},m:function m(t,o){Object(ht.u)(t,n,o),s&&s.m(n,null),Object(ht.d)(n,a),Object(ht.d)(n,r),r.innerHTML=i,e.refs.component=n},p:function p(e,t){t.toaster.avatarUrl?s?s.p(e,t):((s=notification_toaster_svelte_create_if_block(0,t)).c(),s.m(n,a)):s&&(s.d(1),s=null),e.toaster&&i!==(i=t.toaster.content)&&(r.innerHTML=i)},d:function d(t){t&&Object(ht.p)(n),s&&s.d(),Object(ht.A)(n,"click",click_handler),e.refs.component===n&&(e.refs.component=null)}}}(this,this._state),this.root._oncreate.push(function(){(function notification_toaster_svelte_oncreate(){var e=this.get().toaster,t=e.created,n=e.duration;this.showDuration(n),t instanceof Function&&t()}).call(t),t.fire("update",{changed:Object(ht.f)({},t._state),current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Notification_toaster_svelte.prototype,ht.x),Object(ht.e)(Notification_toaster_svelte.prototype,vi);var Oi=Notification_toaster_svelte;n(360);function notification_toasters_svelte_ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}var ji={add:function add(e){var t=this.get().toasters,n=e.id||+new Date;return t[n]=function notification_toasters_svelte_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?notification_toasters_svelte_ownKeys(n,!0).forEach(function(t){f()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):notification_toasters_svelte_ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{id:n}),this.set({toasters:t}),n},remove:function remove(e){var t=this.get().toasters;delete t[e],this.set({toasters:t})}};function notification_toasters_svelte_get_each_context(e,t,n){var a=Object.create(e);return a.id=t[n][0],a.toaster=t[n][1],a}function notification_toasters_svelte_create_each_block(e,t){var n={toaster:t.toaster},a=new Oi({root:e.root,store:e.store,data:n});return a.on("durationExpired",function(n){e.remove(t.id)}),{c:function c(){a._fragment.c()},m:function m(e,t){a._mount(e,t)},p:function p(e,n){t=n;var r={};(e.Object||e.toasters)&&(r.toaster=t.toaster),a._set(r)},d:function d(e){a.destroy(e)}}}function Notification_toasters_svelte(e){Object(ht.t)(this,e),this._state=Object(ht.e)(Object(ht.e)({Object:Object},{toasters:{}}),e.data),this._intro=!0,this._fragment=function notification_toasters_svelte_create_main_fragment(e,t){for(var n,a,r=t.Object.entries(t.toasters),i=[],s=0;s<r.length;s+=1)i[s]=notification_toasters_svelte_create_each_block(e,notification_toasters_svelte_get_each_context(t,r,s));return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div");for(var e=0;e<i.length;e+=1)i[e].c();a.className="toasters-list svelte-1g2kuyc",n.className="toasters-container svelte-1g2kuyc"},m:function m(e,t){Object(ht.u)(e,n,t),Object(ht.d)(n,a);for(var r=0;r<i.length;r+=1)i[r].m(a,null)},p:function p(t,n){if(t.Object||t.toasters){r=n.Object.entries(n.toasters);for(var s=0;s<r.length;s+=1){var o=notification_toasters_svelte_get_each_context(n,r,s);i[s]?i[s].p(t,o):(i[s]=notification_toasters_svelte_create_each_block(e,o),i[s].c(),i[s].m(a,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=r.length}},d:function d(e){e&&Object(ht.p)(n),Object(ht.m)(i,e)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Notification_toasters_svelte.prototype,ht.x),Object(ht.e)(Notification_toasters_svelte.prototype,ji);var yi=Notification_toasters_svelte;n(361);var wi={accept:function accept(e){this.store.acceptChallenge(e)},decline:function decline(e){this.store.declineChallenge(e)},showUserPopover:function showUserPopover(e){e.preventDefault();var t=this.get().challenge;window.postMessage({key:r.SHOW_USER_POPOVER,target:b.c.PUZZLE_BATTLE_CHALLENGE_USER,username:t.from.username},window.location.origin)},removeClickListener:function removeClickListener(){var e=this.get(),t=e.showUserPopoverListener,n=e.usernameEl;n&&(n.removeEventListener("click",t),this.set({showUserPopoverListener:null,usernameEl:null}))}};function puzzle_battle_challenge_toaster_svelte_ondestroy(){this.removeClickListener()}function puzzle_battle_challenge_toaster_svelte_onupdate(){if(this.removeClickListener(),this.refs.component){var e=this.showUserPopover.bind(this),t=this.refs.component.querySelector("strong");t&&(t.addEventListener("click",e),this.set({showUserPopoverListener:e,usernameEl:t}))}}function puzzle_battle_challenge_toaster_svelte_create_if_block(e,t){var n,a,r,i,s,o,l,u,f,_,h;function click_handler(n){e.decline(t.challenge)}function click_handler_1(n){e.accept(t.challenge)}return{c:function c(){n=Object(ht.i)("div"),a=Object(ht.i)("div"),r=Object(ht.i)("img"),s=Object(ht.k)("\n    "),o=Object(ht.i)("div"),l=Object(ht.i)("span"),u=Object(ht.k)("\n      "),(f=Object(ht.i)("button")).innerHTML='<span class="icon icon-font-chess x svelte-gn2wjl"></span>',_=Object(ht.k)("\n      "),(h=Object(ht.i)("button")).innerHTML='<span class="icon icon-font-chess checkmark svelte-gn2wjl"></span>',r.alt="user_avatar",r.className="challenge-avatar svelte-gn2wjl",r.src=i=t.challenge.from.avatarUrl,r.height="60",r.width="60",Object(ht.c)(f,"click",click_handler),f.className="button decline svelte-gn2wjl",Object(ht.c)(h,"click",click_handler_1),h.className="button accept svelte-gn2wjl",o.className="content svelte-gn2wjl",a.className="puzzle-battle-challenge-toaster svelte-gn2wjl",n.className="puzzle-battle-challenge-toaster-wrapper svelte-gn2wjl"},m:function m(i,c){Object(ht.u)(i,n,c),Object(ht.d)(n,a),Object(ht.d)(a,r),Object(ht.d)(a,s),Object(ht.d)(a,o),Object(ht.d)(o,l),l.innerHTML=t.message,Object(ht.d)(o,u),Object(ht.d)(o,f),Object(ht.d)(o,_),Object(ht.d)(o,h),e.refs.component=a},p:function p(e,n){t=n,e.challenge&&i!==(i=t.challenge.from.avatarUrl)&&(r.src=i),e.message&&(l.innerHTML=t.message)},d:function d(t){t&&Object(ht.p)(n),Object(ht.A)(f,"click",click_handler),Object(ht.A)(h,"click",click_handler_1),e.refs.component===a&&(e.refs.component=null)}}}function Puzzle_battle_challenge_toaster_svelte(e){var t=this;Object(ht.t)(this,e),this.refs={},this._state=Object(ht.e)(Object(ht.e)(this.store._init(["challenges"]),{showUserPopoverListener:null,usernameEl:null}),e.data),this.store._add(this,["challenges"]),this._recompute({$challenges:1,challenge:1},this._state),this._intro=!0,this._handlers.update=[puzzle_battle_challenge_toaster_svelte_onupdate],this._handlers.destroy=[puzzle_battle_challenge_toaster_svelte_ondestroy,ht.z],this._fragment=function puzzle_battle_challenge_toaster_svelte_create_main_fragment(e,t){var n,a=t.challenge&&puzzle_battle_challenge_toaster_svelte_create_if_block(e,t);return{c:function c(){a&&a.c(),n=Object(ht.h)()},m:function m(e,t){a&&a.m(e,t),Object(ht.u)(e,n,t)},p:function p(t,r){r.challenge?a?a.p(t,r):((a=puzzle_battle_challenge_toaster_svelte_create_if_block(e,r)).c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d:function d(e){a&&a.d(e),e&&Object(ht.p)(n)}}}(this,this._state),this.root._oncreate.push(function(){t.fire("update",{changed:Object(ht.f)({},t._state),current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),Object(ht.r)(this))}Object(ht.e)(Puzzle_battle_challenge_toaster_svelte.prototype,ht.x),Object(ht.e)(Puzzle_battle_challenge_toaster_svelte.prototype,wi),Puzzle_battle_challenge_toaster_svelte.prototype._recompute=function _recompute(e,t){e.$challenges&&this._differs(t.challenge,t.challenge=function puzzle_battle_challenge_toaster_svelte_challenge(e){var t=e.$challenges;return 0===t.length?null:t[0]}(t))&&(e.challenge=!0),e.challenge&&this._differs(t.message,t.message=function puzzle_battle_challenge_toaster_svelte_message(e){var t=e.challenge;return t?mt.a.puzzleBattleChallengeMessage(t.from.username,t.from.rating,b.c.PUZZLE_BATTLE_CHALLENGE_USER):""}(t))&&(e.message=!0)};var ki,Ei=Puzzle_battle_challenge_toaster_svelte,Ci=document.querySelector(_.l.MAIN_NAV_LOGIN_LINK),Si=document.querySelectorAll(_.l.MAIN_NAV_REGISTER_LINK),Ni=document.querySelector(_.l.MAIN_NAV);!function addPageLoadTimestampToLog(){Object(Wr.a)({key:"pageLoad",value:(new Date).getTime()})}(),function attachNewGameModalListener(){window.addEventListener("message",function(e){var t=e.data;t&&(t.key===_.e.SHOW_NEW_GAME_MODAL?(Wn(),t.challengeUser?Vn.showChallengeUser(t.challengeUser):Vn.show(t.type)):t.key===_.e.SEND_NEW_GAME_SEEK&&(Wn(),Vn.createChallenge()))})}(),function checkAndShowChallengeUser(){if(null!=qn&&qn.getAttribute(_.a.showChallengeUser)){var e=JSON.parse(qn.getAttribute(_.a.challengeUser));Wn(),Vn.showChallengeUser(e)}}(),window.addEventListener("message",function(e){var t=e.data;_i(),t&&t.event===r.SHOW_MESSAGE_MODAL&&gt.default.stores.message.set(Object.assign({},t.user,{show:!0}))}),function(){var e=document.getElementById(b.c.SHAREABLE_GAME_SHORT_UUID);if(e&&e.getAttribute(b.a.SHAREABLE_GAME_UUID)&&"true"===e.getAttribute(b.a.SEEK_IS_SEEKER)){var t=document.getElementById(b.c.SHAREABLE_GAME_URL_MODAL);null==ei&&(ei=new Xr({target:t})),ei.show({shortUuid:e.getAttribute(b.a.SHAREABLE_GAME_UUID)})}else Object($e.e)()&&window.addEventListener("message",function(e){var t=e.data;if(t.event===_.e.OPEN_SHAREABLE_URL_MODAL){var n=nn(t.challenge);dn(n).then(function(e){var t=e.gameSeek,n=document.getElementById(b.c.SHAREABLE_GAME_URL_MODAL);null==ei&&(ei=new Xr({target:n})),ei.show({id:t.id,shortUuid:t.shortUuid})})}else t.event===_.e.CLOSE_SHAREABLE_URL_MODAL&&ei&&ei.hide()})}(),ki=new ti({target:ni,store:gt.default}),window.addEventListener("message",function(e){var t=e.data;t&&t.event===r.LOGIN_OR_REGISTER_MODAL&&ki.show({icon:t.icon,title:t.title})}),ii&&ii.addEventListener("click",si),o()(document.querySelectorAll(b.b.BADGES)).map(function(e){var t=e.getAttribute(b.a.BADGE_TYPE),n=e.getAttribute(b.a.BADGE_COUNT),a=null!=n?parseInt(n,10):0;return gt.default.stores.notifications.setBadgeCount({type:t,count:a}),Object($e.j)(hi,{target:e,store:gt.default.stores.notifications,data:{badge:e.getAttribute(b.a.BADGE_TYPE)}})}),document.getElementById(b.c.HOME_NOTIFICATIONS)&&(gt.default.stores.notifications.fetch(),window.addEventListener("message",function viewBootedEvent(e){var t=e.data;if("HOME_MOUNTED"===t||"NEW_HOME_MOUNTED"===t){var n="NEW_HOME_MOUNTED"===t,a=n?pi:mi,r=document.getElementById(b.c.HOME_NOTIFICATIONS);n&&(r.innerHTML=""),new a({target:r,store:gt.default.stores.notifications}),n&&r.classList.add("home-alerts-loaded"),window.removeEventListener("message",viewBootedEvent)}})),function(){var e=document.getElementById(b.c.OFFLINE_CHALLENGE_TOASTER);if(e){var t=e.getAttribute(b.a.BADGE_TYPE),n=e.getAttribute(b.a.BADGE_COUNT),a=null!=n?parseInt(n,10):0;return gt.default.stores.notifications.setBadgeCount({type:t,count:a}),a>0&&gt.default.stores.notifications.fetch(),new gi({store:gt.default.stores.notifications,target:e})}}(),function renderScrollbars(){Me.c("isDarkMode")&&document.documentElement.classList.add(Kr),Object(kt.d)()&&(document.documentElement.classList.add(Yr),Object(kt.g)()&&document.documentElement.classList.add(Jr))}(),function(){(function shouldCacheCurrentUrl(){return![la.b.login,la.b.register].find(function(e){return window.location.href.indexOf(e)>=0})&&!document.body.classList.contains(_.d.NO_REDIRECT)})()&&oe.a.set("returnUrl",window.location.href);var e=oe.a.get("returnUrl");if(e){var t=new URLSearchParams;t.set("returnUrl",e);var n=function getMainNav(){return null==Ni&&(Ni=document.querySelector(_.l.MAIN_NAV)),Ni}(),a=la.b.loginAndGoRoute(e),r=la.b.registerRoute(e);n&&(a="".concat(n.getAttribute(_.a.loginAndGoRoute),"?").concat(t.toString()),r="".concat(n.getAttribute(_.a.registerRoute),"?").concat(t.toString())),Ci&&Ci.setAttribute("href",a),o()(Si).forEach(function(e){e.setAttribute("href",r)})}}();var Ti=function(){var e=document.getElementById(b.c.NOTIFICATION_TOASTERS);if(e)return new yi({target:e})}();window.toaster=function createToastersApi(e){return{add:function add(t){return e.add(t)},remove:function remove(t){return e.remove(t)}}}(Ti),O(j.PUZZLE_BATTLE_DIRECT_CHALLENGE)&&function(){var e=document.getElementById(b.c.PUZZLE_BATTLE_CHALLENGE_TOASTER);if(e)new Ei({store:gt.default.stores.puzzleBattle,target:e})}()}]);