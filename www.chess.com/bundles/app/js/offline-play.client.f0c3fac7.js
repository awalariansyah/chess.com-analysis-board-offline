!function(e){var t={};function __webpack_require__(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,__webpack_require__),a.l=!0,a.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)__webpack_require__.d(n,a,function(t){return e[t]}.bind(null,a));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="/bundles/app/js/",__webpack_require__(__webpack_require__.s=1096)}({0:function(e,t,n){"use strict";var a=n(9);t.a=a.a},1:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r});var a={ADD_BLINKING_SQUARE:"ADD_BLINKING_SQUARE",CLEAR_ARROW:"CLEAR_ARROW",CLEAR_BLINKING_SQUARE:"CLEAR_BLINKING_SQUARE",CLEAR_EFFECT:"CLEAR_EFFECT",CLEAR_MARKED_SQUARE:"CLEAR_MARKED_SQUARE",INIT:"INIT",LOAD:"LOAD",MAKE_MOVE:"MAKE_MOVE",ILLEGAL_MOVE:"ILLEGAL_MOVE",JUMP_TO_POSITION:"JUMP_TO_POSITION",TREE_CHANGE:"TREE_CHANGE",TREE_AMENDED:"TREE_AMENDED",SETTINGS_CHANGE:"SETTINGS_CHANGE",PGN_HEADERS_UPDATED:"PGN_HEADERS_UPDATED",CANCEL_PREMOVES:"CANCEL_PREMOVES",PREMOVE:"PREMOVE",GUESS_THE_MOVE:"GUESS_THE_MOVE",CANCEL_GUESS_THE_MOVE:"CANCEL_GUESS_THE_MOVE",UPDATE_NODE:"UPDATE_NODE"},r={MAX_HISTORY_LIMIT:200,getInitialHistory:function getInitialHistory(){return[]},add:function add(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.length>r.MAX_HISTORY_LIMIT-1){var a=e.findIndex(function(e){return null!==e});e[a]=null}e.push({type:t,payload:n})},getLastItem:function getLastItem(e){return e[e.length-1]}}},10:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return s}),n.d(t,"h",function(){return c}),n.d(t,"f",function(){return l}),n.d(t,"d",function(){return u}),n.d(t,"g",function(){return d}),n.d(t,"e",function(){return f});var a=n(4),r=n(0),o={ARIA_CONTROLS:"aria-controls",AVATAR:"data-avatar",CUSTOM_BTN_CLASS:"data-custom-btn-class",CUSTOM_COLLAPSE_CLASS:"data-custom-collapse-class",DARK_MODE:"data-dark-mode",ICON_BUTTON:"data-icon-button",STATS:"data-stats",SURVEY_DATA:"data-survey",SURVEY_VOTED:"data-voted-survey",USERNAME:"data-username",VS_STATS:"data-vs-stats"},i={getArticleAuthors:"web_article_callback_list_authors",getBlogAuthors:"web_blog_callback_authors",getContent:"web_content_callback_load_more",getNewsAuthors:"web_news_callback_list_authors"},s={GRID_VIEW:"grid",LIST_VIEW:"list",LOCALE:window.context&&window.context.locale||"en_US",LOGGED_IN:window.context&&window.context.user,USERNAME:window.context&&window.context.user?window.context.user.username:null},c={category:function category(e){return r.a.trans(e,{},"dynamic")},loading:r.a.trans("Loading..."),showMore:r.a.trans("More"),showLess:r.a.trans("Less")},l={AMPLITUDE_LOGGER:"amplitude-logger",BASE_CONTAINER:".base-container",BOARD_POPOVER:"v-board-popover",CAPTCHA:"captcha",COLLAPSE:"v-toggle-collapse",COLLAPSED:"toggle-collapsed",CONTENT_AD:"content-ad",CONTENT_CATEGORY_SELECT:"content-category-select",CONTENT_LANGUAGE_SELECT:"content-language-select",CONFIRM_OPEN:"confirm-open",CONFIRM_POPOVER:"v-confirm-popover",CONFIRM_POPOVER_INLINE:"confirm-popover-inline",FEATURE_SIDEBAR_LINK:"post-category-link-feature",FILTERS:"page-filters",FORM_DATEPICKER:"v-datepicker",FORM_DROPDOWN:"form-dropdown",GAME_PREVIEW:"game-preview",GIFT_MEMBERSHIP_MODAL:"gift-membership-modal",HEADLINE_SIDEBAR_LINK:"post-category-link-headline",HIDDEN:"toggle-hidden",LANGUAGE_DROPDOWN:"post-view-languages",MESSAGE_PARENT:"vue-message",NAVIGATION_FOOTER:"navigation-footer",NEW_GAME:"new-game",NEW_GAME_BUTTON:"new-game-button",PAGINATION_BOTTOM:"pagination-bottom",PAGINATION_TOP:"pagination-top",POST_AUTHOR_FOLLOW:"post-author-follow",POST_CAN_EDIT_URL:"post-can-edit-url",POST_EDIT_URL:"post-edit-url",POST_EDIT_URL_FIELD:"post-edit-url-field",POST_IMAGE_BUTTON:"image-upload-button",POST_IMAGE_THUMBNAIL:"image-upload-thumbnail",SCROLL_TOP_ANCHOR:"scroll-top-anchor",SHORT_SIDEBAR_AD_BOTTOM:"short-sidebar-ad-bottom",SHORT_SIDEBAR_AD_TOP:"short-sidebar-ad-top",SIDEBAR_STATS:"sidebar-stats",SIDEBAR_SURVEY:"sidebar-survey",SIDEBAR_TOGGLE_BUTTON_TEXT:"toggle-content-button-text",SIDEBAR_TOGGLE_ICON:"toggle-content-icon",SIDEBAR_USER_ITEMS:"sidebar-users-grid-toggle-item",SIDEBAR_USERS_TOGGLE_BUTTON:"toggle-content-button",STAT_CHART:"stat-chart",TOOLTIP:"v-tooltip",TOOLTIP_CLASS:"tooltip",TOOLTIP_TOP:"top",USER_POPOVER:"v-user-popover",USER_TAGLINE:"post-view-meta-user",VERSION_DROPDOWN:"version-dropdown"},u={SHOW_MODAL:"show-confirm-popover",VOTE_COUNTED:"vote-counted",VIEW_CHANGE:"view-change",VIEW_GRID:"view-grid",VIEW_LIST:"view-list"},d={changeContentLanguage:function changeContentLanguage(){return a.a.generate("web_user_callback_set_content_language")},enPassant:function enPassant(){return a.a.generate("web_article_view",{url:"how-to-capture-en-passant"})},surveyVote:function surveyVote(e,t){return a.a.generate("web_survey_callback_vote",{id:e,optionId:t})},redirectToLoginPage:function redirectToLoginPage(e){return a.a.generate("web_security_login_and_go",{redirectUrl:e})},teamMatch:function teamMatch(e){return a.a.generate("web_team_match_view",{match:e})},tournament:function tournament(e){return a.a.generate("web_tournament_view",{url:e})},userProfile:function userProfile(e){return a.a.generate("web_member_view",{username:e})}},f=JSON.parse(localStorage.getItem("json_settings"))},1096:function(e,t,n){n(542),n(543),n(544),n(798),n(799),n(800),n(546),n(545),e.exports=n(1097)},1097:function(e,t,n){"use strict";n.r(t);var a=n(471),r=n(71),o=document.getElementById(a.a.WHAT_IS_CHESS);Object(r.g)(o),Object(r.f)()},12:function(e,t,n){e.exports=n(25)(2)},13:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o});var a=n(79),r={$1:"!",$2:"?",$3:"!!",$4:"??",$5:"!?",$6:"?!",$10:"=",$11:"=",$12:"=",$13:"∞",$14:"⩲",$15:"⩱",$16:"±",$17:"∓",$18:"+-",$19:"-+",$22:"⨀",$146:"N"},o=Object(a.a)(r)},15:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(3),r=n.n(a),o=n(6),i=n(2),s=n(1),c=n(7);function ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}var l=function selectNode(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=i.a.findNode(e.jce._lines(),t,n,a),u=function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach(function(t){r()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.tree.selected),d=u.line,f=u.move;if(!l)return e;var m={};return m=t.move+n<0&&t.line===l.ids.line?{line:0,move:-1}:l.ids,o.a.selectNode(e,m),s.b.add(e.history,s.a.JUMP_TO_POSITION,{from:{line:d,move:f},to:m}),c.a.updateState(e)}},16:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return formatNumber}),n.d(t,"c",function(){return formatTime});var a=n(0);function getLocale(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return(e||(Object.prototype.hasOwnProperty.call(window,"context")?window.context.i18n.locale:"en-US")).replace("_",t)}var r={year:{milliseconds:31536e6,str:"{1} 1 year|]1,Inf] %1$s% years",strAgo:"{1} 1 year ago|]1,Inf] %1$s% years ago"},month:{milliseconds:function getMsInThisMonth(){switch((new Date).getMonth()){case 3:case 5:case 8:case 10:return 2592e6;case 1:return(new Date).getFullYear()%4==0?25056e5:24192e5;default:return 26784e5}}(),str:"{1} 1 month|]1,Inf] %1$s% months",strAgo:"{1} 1 month ago|]1,Inf] %1$s% months ago"},day:{milliseconds:864e5,str:"{1} 1 day|]1,Inf] %1$s% days",strAgo:"{1} 1 day ago|]1,Inf] %1$s% days ago"},hour:{milliseconds:36e5,str:"{1} 1 hour|]1,Inf] %1$s% hours",strAgo:"{1} 1 hour ago|]1,Inf] %1$s% hours ago"},minute:{milliseconds:6e4,str:"{1} 1 minute|]1,Inf] %1$s% minutes",strAgo:"{1} 1 minute ago|]1,Inf] %1$s% minutes ago"}},o={hoursMinute:function hoursMinute(e){var t,n,r=[],o=0,i=e;return!0===(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&(i-=86400*(o=Math.floor(i/86400))),i-=3600*(t=Math.floor(i/3600)),n=Math.floor(i/60),o>0&&r.push(a.a.transChoice("{0} 0 days|{1} 1 day|]1,Inf] %1$s% days",o,{"%1$s%":o})),t>0&&r.push(a.a.transChoice("{0} 0 hours|{1} 1 hour|]1,Inf] %1$s% hours",t,{"%1$s%":t})),(n>0||0===r.length)&&r.push(a.a.transChoice("{0} 0 min|{1} 1 min|]1,Inf] %1$s% min",n,{"%1$s%":n})),r.join(" ")},long:function long(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e instanceof Date?e:new Date(e);return new Intl.DateTimeFormat(getLocale(),{year:"numeric",month:"short",day:"numeric"}).format(t)},full:function full(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e instanceof Date?e:new Date(e);return new Intl.DateTimeFormat(getLocale(),{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}).format(t)},numeric:function numeric(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e instanceof Date?e:new Date(e);if(window.Intl){var n=getLocale();return new Intl.DateTimeFormat(n,{day:"2-digit",month:"2-digit",year:"numeric"}).format(t)}var a="0".concat(t.getMonth()+1).slice(-2),r="0".concat(t.getDate()).slice(-2);return"".concat(a,"/").concat(r,"/").concat(t.getFullYear())},relative:function relative(e){var t,n,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=Date.now(),c=(e instanceof Date?e:new Date(e)).getTime(),l=s-c;if(Math.abs(l)>r.month.milliseconds&&o){return new Intl.DateTimeFormat(getLocale(),{year:"numeric",month:"short",day:"numeric"}).format(c)}if(l>=r.year.milliseconds)n=r.year,t=Math.abs(Math.floor(l/r.year.milliseconds));else if(l>=r.month.milliseconds)n=r.month,t=Math.abs(Math.floor(l/r.month.milliseconds));else if(l>=r.day.milliseconds)n=r.day,t=Math.abs(Math.floor(l/r.day.milliseconds));else if(l>=r.hour.milliseconds)n=r.hour,t=Math.abs(Math.floor(l/r.hour.milliseconds));else{if(!(l>=r.minute.milliseconds))return a.a.trans("Just now");n=r.minute,t=Math.abs(Math.floor(l/r.minute.milliseconds))}var u=Math.abs(l)===l;return a.a.transChoice(u&&i?n.strAgo:n.str,t,{"%1$s%":t})},customNumericDate:function customNumericDate(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"m/d/y",a=e instanceof Date?e:new Date(e),r={d:"0".concat(a.getDate()).slice(-2),m:"0".concat(a.getMonth()+1).slice(-2),y:"".concat(a.getFullYear())};return["m","d","y"].every(function(e){return n.split("/").includes(e)})?n.split("/").reduce(function(e,t){return e.push(r[t]),e},[]).join(t):"".concat(r.m).concat(t).concat(r.d).concat(t).concat(r.y)}};function formatNumber(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Intl.NumberFormat([getLocale(t),"en-US"],n).format(e)}function formatTime(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e<0||null==e)return"";var n=(e%1e3/1e3).toString().slice(2,t+2),a=Math.floor(e/1e3),r=Math.floor(a/60),o=Math.floor(r/60),i=r%60;i=i<10&&o?"0".concat(i):i;var s=a%60;s=s<10?"0".concat(s):s;var c="".concat(i,":").concat(s);return o&&(c="".concat(o,":").concat(c)),t&&(c="".concat(c,".").concat(n)),c}},17:function(e,t,n){"use strict";var a={name:"icon-font",mixins:[{props:{family:{type:String,default:"chess"},isDarkMode:{type:Boolean,default:!1},name:{type:String,required:!0},theme:{type:String,default:""}}}]},r=n(72),o=n(5);var i=Object(o.a)(a,function(){var e,t=this,n=t.$createElement,a=t._self._c||n;return a("div",t._g({class:[t.$style.component,(e={},e[t.$style.darkMode]=t.isDarkMode,e)]},t.$listeners),[a("span",{class:[t.$style[t.family],t.name,t.$style[t.theme]]})])},[],!1,function injectStyles(e){this.$style=r.default.locals||r.default},null,null);t.a=i.exports},18:function(e,t,n){"use strict";var a="icon-background",r="icon-component",o="icon-component-shadow",i="icon-shadow",s='\n  <path class="'.concat(i,'" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>\n  <path class="').concat(a,'" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#95bb4a"/>\n  <path d="M9 3.72a.48.48 0 0 0-.44.3L7.24 7.46l-3.68.19a.48.48 0 0 0-.27.84l2.86 2.32-1 3.56a.47.47 0 0 0 .18.5.46.46 0 0 0 .27.09.5.5 0 0 0 .26-.08l3.09-2 3.09 2a.5.5 0 0 0 .26.08.46.46 0 0 0 .27-.09.47.47 0 0 0 .18-.5l-1-3.56 2.86-2.32a.48.48 0 0 0-.27-.84l-3.68-.19L9.44 4A.48.48 0 0 0 9 3.72z" opacity=".1"/>\n  <path d="M9 3.22a.48.48 0 0 0-.44.3L7.24 7l-3.68.19a.48.48 0 0 0-.27.81l2.86 2.32-1 3.56a.47.47 0 0 0 .18.5.46.46 0 0 0 .27.09.5.5 0 0 0 .26-.08l3.09-2 3.09 2a.5.5 0 0 0 .26.08.46.46 0 0 0 .27-.09.47.47 0 0 0 .18-.5l-1-3.56L14.71 8a.48.48 0 0 0-.27-.84L10.76 7 9.44 3.52a.48.48 0 0 0-.44-.3z" fill="#fff"/>\n'),c='\n  <path class="'.concat(i,'" opacity=".3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"/>\n  <path class="').concat(a,'" fill="#a88865" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"/>\n  <path class="').concat(o,'" opacity=".3" d="M8.4,6c-1-.75-2.52-1.09-4.83-1.09H2.49v8.71H3.57A8.13,8.13,0,0,1,8.4,14.76Z"/>\n  <path class="').concat(o,'" opacity=".3" d="M9.49,14.76a8.14,8.14,0,0,1,4.84-1.17h1.08V4.88H14.33C12,4.88,10.52,5.22,9.49,6Z"/>\n  <path class="').concat(r,'" fill="#fff" d="M8.4,5.47c-1-.75-2.52-1.09-4.83-1.09H3v8.71h.58A8.13,8.13,0,0,1,8.4,14.26Z"/>\n  <path class="').concat(r,'" fill="#fff" d="M9.49,14.26a8.14,8.14,0,0,1,4.84-1.17h.58V4.38h-.58c-2.32,0-3.81.34-4.84,1.09Z"/>\n'),l='\n  <path class="'.concat(i,'" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>\n  <path class="').concat(a,'" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#c93430"/>\n  <g class="').concat(o,'" opacity=".2">\n    <path d="M14.68 5.48a2.77 2.77 0 0 0-.77-.92 3.81 3.81 0 0 0-1.1-.56 3.86 3.86 0 0 0-1.2-.19 3.68 3.68 0 0 0-1.19.19 5.72 5.72 0 0 0-.9.37l-.33.2a3.5 3.5 0 0 1 .43.63A3.26 3.26 0 0 1 10 6.66a.45.45 0 0 0 .19 0l.11-.09a1.13 1.13 0 0 1 .28-.18 2.54 2.54 0 0 1 .42-.23 1.61 1.61 0 0 1 .49-.07 1.13 1.13 0 0 1 .73.24.74.74 0 0 1 .3.6 1 1 0 0 1-.25.68c-.17.19-.39.4-.65.64s-.33.27-.49.42a3.08 3.08 0 0 0-.45.55 2.55 2.55 0 0 0-.33.66 2.43 2.43 0 0 0-.13.84v.35a.34.34 0 0 0 .32.32h1.72a.27.27 0 0 0 .22-.1.29.29 0 0 0 .09-.22v-.21a.93.93 0 0 1 .27-.7 6.62 6.62 0 0 1 .65-.64A4.62 4.62 0 0 0 14 9a5.58 5.58 0 0 0 .49-.6 2.92 2.92 0 0 0 .36-.73 3.08 3.08 0 0 0 .14-1 2.76 2.76 0 0 0-.31-1.19zM12.3 12.72h-1.89a.29.29 0 0 0-.22.09.33.33 0 0 0-.09.22v1.84a.31.31 0 0 0 .09.22.26.26 0 0 0 .22.1h1.89a.33.33 0 0 0 .23-.09.34.34 0 0 0 .1-.23V13a.34.34 0 0 0-.1-.22.33.33 0 0 0-.23-.06zM6.68 12.72H4.79a.29.29 0 0 0-.22.09.33.33 0 0 0-.09.22v1.84a.35.35 0 0 0 .08.22.28.28 0 0 0 .23.1h1.89a.35.35 0 0 0 .23-.09.34.34 0 0 0 .1-.23V13a.34.34 0 0 0-.1-.22.35.35 0 0 0-.23-.06zM8.28 4.56A3.63 3.63 0 0 0 7.19 4 3.86 3.86 0 0 0 6 3.81 3.78 3.78 0 0 0 4.79 4a6.65 6.65 0 0 0-.9.37 2.84 2.84 0 0 0-.55.38l-.21.19a.31.31 0 0 0 0 .41l1 1.21a.31.31 0 0 0 .21.13.54.54 0 0 0 .25-.06l.1-.09a1.46 1.46 0 0 1 .29-.18 2.2 2.2 0 0 1 .41-.18 1.57 1.57 0 0 1 .49-.07 1.13 1.13 0 0 1 .73.24.74.74 0 0 1 .3.6 1 1 0 0 1-.26.68c-.17.19-.38.4-.64.64a6.4 6.4 0 0 0-.49.42 2.7 2.7 0 0 0-.52.53 2.94 2.94 0 0 0-.34.66 2.7 2.7 0 0 0-.12.84v.35a.29.29 0 0 0 .09.22.28.28 0 0 0 .22.1h1.76a.26.26 0 0 0 .21-.1.29.29 0 0 0 .09-.22v-.21a1 1 0 0 1 .27-.7 8.22 8.22 0 0 1 .66-.64A5.68 5.68 0 0 0 8.36 9a7 7 0 0 0 .48-.6 3 3 0 0 0 .37-.73 3.1 3.1 0 0 0 .13-1 2.67 2.67 0 0 0-1.06-2.11z"/>\n  </g>\n  <path class="').concat(r,'" fill="#fff" d="M14.68 5a2.77 2.77 0 0 0-.77-.92 3.81 3.81 0 0 0-1.1-.56 3.86 3.86 0 0 0-1.2-.19 3.68 3.68 0 0 0-1.19.17 5.72 5.72 0 0 0-.9.37l-.33.2a3.5 3.5 0 0 1 .43.63A3.26 3.26 0 0 1 10 6.16a.45.45 0 0 0 .19 0l.09-.16a1.13 1.13 0 0 1 .28-.18 2.54 2.54 0 0 1 .44-.16 1.61 1.61 0 0 1 .49-.07 1.13 1.13 0 0 1 .73.24.74.74 0 0 1 .3.6 1 1 0 0 1-.25.68c-.17.19-.39.4-.65.64s-.33.27-.49.42a3.08 3.08 0 0 0-.45.55 2.55 2.55 0 0 0-.33.66 2.43 2.43 0 0 0-.13.84v.35a.34.34 0 0 0 .32.32h1.72a.27.27 0 0 0 .22-.1.29.29 0 0 0 .09-.22v-.21a.93.93 0 0 1 .27-.7 6.62 6.62 0 0 1 .62-.66 4.62 4.62 0 0 0 .54-.46 5.58 5.58 0 0 0 .49-.6 2.92 2.92 0 0 0 .36-.73 3.08 3.08 0 0 0 .14-1A2.76 2.76 0 0 0 14.68 5zM12.3 12.22h-1.89a.29.29 0 0 0-.22.09.33.33 0 0 0-.09.22v1.84a.31.31 0 0 0 .09.22.26.26 0 0 0 .22.1h1.89a.33.33 0 0 0 .23-.09.34.34 0 0 0 .1-.23v-1.84a.34.34 0 0 0-.1-.22.33.33 0 0 0-.23-.09zM6.68 12.22H4.79a.29.29 0 0 0-.22.09.33.33 0 0 0-.09.22v1.84a.35.35 0 0 0 .08.22.28.28 0 0 0 .23.1h1.89a.35.35 0 0 0 .23-.09.34.34 0 0 0 .1-.23v-1.84a.34.34 0 0 0-.1-.22.35.35 0 0 0-.23-.09zM8.28 4.06a3.63 3.63 0 0 0-1.09-.56A3.86 3.86 0 0 0 6 3.31a3.78 3.78 0 0 0-1.2.17 6.65 6.65 0 0 0-.9.37 2.84 2.84 0 0 0-.55.38l-.21.19a.31.31 0 0 0 0 .41L4.09 6a.31.31 0 0 0 .21.13.54.54 0 0 0 .25-.06l.1-.07a1.46 1.46 0 0 1 .29-.18 2.2 2.2 0 0 1 .41-.18 1.57 1.57 0 0 1 .49-.07 1.13 1.13 0 0 1 .73.24.74.74 0 0 1 .3.6 1 1 0 0 1-.26.68c-.17.19-.38.4-.64.64a6.4 6.4 0 0 0-.49.42 2.7 2.7 0 0 0-.48.57 2.94 2.94 0 0 0-.34.66 2.7 2.7 0 0 0-.12.84v.35a.29.29 0 0 0 .09.22.28.28 0 0 0 .22.1h1.76a.26.26 0 0 0 .21-.1.29.29 0 0 0 .09-.22v-.21a1 1 0 0 1 .27-.7A8.22 8.22 0 0 1 7.84 9a5.68 5.68 0 0 0 .52-.48 7 7 0 0 0 .48-.6 3 3 0 0 0 .37-.73 3.1 3.1 0 0 0 .13-1 2.67 2.67 0 0 0-1.06-2.13z"/>\n'),u='\n  <path class="'.concat(i,'" opacity=".3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"/>\n  <path class="').concat(a,'" fill="#1baca6" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"/>\n  <path class="').concat(o,'" opacity=".2" d="M12.57,14.85a.3.3,0,0,1-.1.24.32.32,0,0,1-.23.1h-2a.3.3,0,0,1-.24-.1.41.41,0,0,1-.08-.24V13a.32.32,0,0,1,.09-.23.29.29,0,0,1,.23-.1h2a.32.32,0,0,1,.23.1.29.29,0,0,1,.1.23Zm-.11-3.93a.33.33,0,0,1-.1.23.34.34,0,0,1-.23.08H10.35a.32.32,0,0,1-.34-.31L9.86,4.15A.42.42,0,0,1,10,3.91a.3.3,0,0,1,.24-.1H12.3a.36.36,0,0,1,.25.1.42.42,0,0,1,.09.24Z"/>\n  <path class="').concat(r,'" fill="#fff" d="M12.57,14.35a.3.3,0,0,1-.1.24.32.32,0,0,1-.23.1h-2a.3.3,0,0,1-.24-.1.41.41,0,0,1-.08-.24v-1.9a.32.32,0,0,1,.09-.23.29.29,0,0,1,.23-.1h2a.32.32,0,0,1,.23.1.29.29,0,0,1,.1.23Zm-.11-3.93a.33.33,0,0,1-.1.23.34.34,0,0,1-.23.08H10.35a.32.32,0,0,1-.34-.31L9.86,3.65A.42.42,0,0,1,10,3.41a.3.3,0,0,1,.24-.1H12.3a.36.36,0,0,1,.25.1.42.42,0,0,1,.09.24Z"/>\n  <path class="').concat(o,'" opacity=".2" d="M8.07,14.85a.3.3,0,0,1-.1.24.32.32,0,0,1-.23.1h-2a.3.3,0,0,1-.24-.1.41.41,0,0,1-.08-.24V13a.32.32,0,0,1,.09-.23.29.29,0,0,1,.23-.1h2a.32.32,0,0,1,.23.1.29.29,0,0,1,.1.23ZM8,10.92a.33.33,0,0,1-.1.23.34.34,0,0,1-.23.08H5.85a.32.32,0,0,1-.34-.31L5.36,4.15a.42.42,0,0,1,.09-.24.3.3,0,0,1,.24-.1H7.8a.36.36,0,0,1,.25.1.42.42,0,0,1,.09.24Z"/>\n  <path class="').concat(r,'" fill="#fff" d="M8.07,14.35a.3.3,0,0,1-.1.24.32.32,0,0,1-.23.1h-2a.3.3,0,0,1-.24-.1.41.41,0,0,1-.08-.24v-1.9a.32.32,0,0,1,.09-.23.29.29,0,0,1,.23-.1h2a.32.32,0,0,1,.23.1.29.29,0,0,1,.1.23ZM8,10.42a.33.33,0,0,1-.1.23.34.34,0,0,1-.23.08H5.85a.32.32,0,0,1-.34-.31L5.36,3.65a.42.42,0,0,1,.09-.24.3.3,0,0,1,.24-.1H7.8a.36.36,0,0,1,.25.1.42.42,0,0,1,.09.24Z"/>\n'),d='\n  <path class="'.concat(i,'" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>\n  <path class="').concat(a,'" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#95bb4a"/>\n  <path class="').concat(o,'" d="M15.11 6.81l-5.66 5.66-1.66 1.65a.38.38 0 0 1-.55 0L2.89 9.78a.39.39 0 0 1 0-.55l1.39-1.39a.39.39 0 0 1 .55 0l2.69 2.69 5.65-5.65a.38.38 0 0 1 .55 0l1.39 1.38a.39.39 0 0 1 0 .55z" opacity=".2"/>\n  <path class="').concat(r,'" d="M15.11 6.31L9.45 12l-1.66 1.62a.38.38 0 0 1-.55 0L2.89 9.28a.39.39 0 0 1 0-.55l1.39-1.39a.39.39 0 0 1 .55 0L7.52 10l5.65-5.65a.38.38 0 0 1 .55 0l1.39 1.38a.39.39 0 0 1 0 .58z" fill="#fff"/>\n'),f='\n  <path class="'.concat(i,'" opacity=".3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"/>\n  <path class="').concat(a,'" fill="#5a9ac0" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"/>\n  <path class="').concat(o,'" opacity=".2" d="M15,6.8,7.81,14a.38.38,0,0,1-.55,0L3,9.73a.41.41,0,0,1,0-.55L4.36,7.81a.4.4,0,0,1,.54,0l2.63,2.64L13.1,4.9a.38.38,0,0,1,.55,0L15,6.25A.38.38,0,0,1,15,6.8Z"/>\n  <path class="').concat(r,'" fill="#ffffff" d="M15,6.3,7.81,13.49a.38.38,0,0,1-.55,0L3,9.23a.41.41,0,0,1,0-.55L4.36,7.31a.4.4,0,0,1,.54,0L7.53,10,13.1,4.4a.38.38,0,0,1,.55,0L15,5.75A.38.38,0,0,1,15,6.3Z"/>\n'),m='\n  <path class="'.concat(i,'" opacity=".3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"/>\n  <path class="').concat(a,'" fill="#a09f9e" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"/>\n  <path class="').concat(r,'" fill="#fff" d="M9,2.5A6.5,6.5,0,1,0,15.5,9,6.5,6.5,0,0,0,9,2.5Z"/>\n  <path class="').concat(a,'" fill="#a09f9e" d="M9,5a4,4,0,1,0,4,4A4,4,0,0,0,9,5Z"/>\n  <path class="').concat(r,'" fill="#fff" d="M9,7.5A1.5,1.5,0,1,0,10.5,9,1.5,1.5,0,0,0,9,7.5Z"/>\n'),p='\n  <path class="'.concat(i,'" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>\n  <path class="').concat(a,'" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#f0c15c"/>\n  <path class="').concat(o,'" opacity=".3" d="M13.51 14.85a.3.3 0 0 1-.1.24.33.33 0 0 1-.24.1h-2a.29.29 0 0 1-.23-.1.36.36 0 0 1-.09-.24V13a.33.33 0 0 1 .1-.23.27.27 0 0 1 .22-.1h2a.33.33 0 0 1 .24.1.29.29 0 0 1 .1.23zm-.12-3.93a.29.29 0 0 1-.1.23.31.31 0 0 1-.23.08h-1.77a.31.31 0 0 1-.34-.31l-.15-6.77a.49.49 0 0 1 .08-.24.32.32 0 0 1 .25-.1h2.11a.38.38 0 0 1 .25.1.42.42 0 0 1 .09.24z"/>\n  <path class="').concat(r,'" fill="#fff" d="M13.51 14.35a.3.3 0 0 1-.1.24.33.33 0 0 1-.24.1h-2a.29.29 0 0 1-.23-.1.36.36 0 0 1-.09-.24v-1.9a.33.33 0 0 1 .1-.23.27.27 0 0 1 .22-.1h2a.33.33 0 0 1 .24.1.29.29 0 0 1 .1.23zm-.12-3.93a.29.29 0 0 1-.1.23.31.31 0 0 1-.23.08h-1.77a.31.31 0 0 1-.34-.31l-.15-6.77a.49.49 0 0 1 .08-.24.32.32 0 0 1 .25-.1h2.11a.38.38 0 0 1 .25.1.42.42 0 0 1 .09.24z"/>\n  <path class="').concat(o,'" opacity=".3" d="M7.5 14.87a.33.33 0 0 1-.09.23.35.35 0 0 1-.23.09H5.29a.28.28 0 0 1-.23-.1.35.35 0 0 1-.06-.22V13a.33.33 0 0 1 .09-.22.29.29 0 0 1 .22-.09h1.87a.35.35 0 0 1 .23.09.33.33 0 0 1 .09.22zm2.21-7.16a3 3 0 0 1-.37.73 7 7 0 0 1-.48.6 5.68 5.68 0 0 1-.52.48 8.22 8.22 0 0 0-.66.64 1 1 0 0 0-.27.7v.21a.29.29 0 0 1-.09.22.26.26 0 0 1-.21.1H5.38a.28.28 0 0 1-.22-.1.29.29 0 0 1-.09-.22v-.35a2.7 2.7 0 0 1 .12-.84 3.39 3.39 0 0 1 .33-.66A3.12 3.12 0 0 1 6 8.67a6.4 6.4 0 0 1 .49-.42c.25-.24.47-.45.64-.64a1 1 0 0 0 .26-.68.74.74 0 0 0-.3-.6 1.14 1.14 0 0 0-.73-.24 1.53 1.53 0 0 0-.49.07 2.2 2.2 0 0 0-.41.18 1.46 1.46 0 0 0-.29.18l-.1.09a.54.54 0 0 1-.25.06.31.31 0 0 1-.21-.13l-1-1.21a.31.31 0 0 1 0-.41l.21-.19a2.84 2.84 0 0 1 .55-.38A6.65 6.65 0 0 1 5.29 4a3.74 3.74 0 0 1 1.2-.17 3.86 3.86 0 0 1 1.2.17 3.75 3.75 0 0 1 1.09.56 2.67 2.67 0 0 1 1.06 2.19 3.1 3.1 0 0 1-.13.96z"/>\n  <path class="').concat(r,'" fill="#fff" d="M7.5 14.37a.33.33 0 0 1-.09.23.35.35 0 0 1-.23.09H5.29a.28.28 0 0 1-.23-.1.35.35 0 0 1-.06-.22v-1.84a.33.33 0 0 1 .09-.22.29.29 0 0 1 .22-.09h1.87a.35.35 0 0 1 .23.09.33.33 0 0 1 .09.22zm2.21-7.16a3 3 0 0 1-.37.73 7 7 0 0 1-.48.6 5.68 5.68 0 0 1-.52.46 8.22 8.22 0 0 0-.66.64 1 1 0 0 0-.27.7v.21a.29.29 0 0 1-.09.22.26.26 0 0 1-.21.1H5.38a.28.28 0 0 1-.22-.1.29.29 0 0 1-.09-.22v-.35a2.7 2.7 0 0 1 .12-.84 3.39 3.39 0 0 1 .33-.66A3.12 3.12 0 0 1 6 8.17a6.4 6.4 0 0 1 .49-.42c.25-.24.47-.45.64-.64a1 1 0 0 0 .26-.68.74.74 0 0 0-.3-.6 1.14 1.14 0 0 0-.73-.24 1.53 1.53 0 0 0-.49.07 2.2 2.2 0 0 0-.41.18 1.46 1.46 0 0 0-.31.16l-.1.09a.54.54 0 0 1-.25.06.31.31 0 0 1-.21-.15l-1-1.21a.31.31 0 0 1 0-.41l.21-.19a2.84 2.84 0 0 1 .55-.38 6.65 6.65 0 0 1 .9-.37 3.74 3.74 0 0 1 1.2-.17 3.86 3.86 0 0 1 1.2.19 3.75 3.75 0 0 1 1.09.56 2.67 2.67 0 0 1 1.1 2.23 3.1 3.1 0 0 1-.13.96z"/>\n'),h='\n  <path class="'.concat(i,'" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>\n  <path class="').concat(a,'" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#c93430"/>\n  <path class="').concat(o,'" d="M14 12.58a.4.4 0 0 1 0 .56l-1.38 1.38a.4.4 0 0 1-.56 0L9 11.44l-3.08 3.08a.4.4 0 0 1-.56 0L4 13.14a.4.4 0 0 1 0-.56L7.06 9.5 4 6.42a.4.4 0 0 1 0-.56l1.36-1.38a.4.4 0 0 1 .56 0L9 7.56l3.08-3.08a.4.4 0 0 1 .56 0L14 5.86a.4.4 0 0 1 0 .56L10.94 9.5z" opacity=".2"/>\n  <path class="').concat(r,'" d="M14 12.08a.4.4 0 0 1 0 .56L12.64 14a.4.4 0 0 1-.56 0L9 10.94 5.92 14a.4.4 0 0 1-.56 0L4 12.64a.4.4 0 0 1 0-.56L7.06 9 4 5.92a.4.4 0 0 1 0-.56L5.36 4a.4.4 0 0 1 .56 0L9 7.06 12.08 4a.4.4 0 0 1 .56 0L14 5.36a.4.4 0 0 1 0 .56L10.94 9z" fill="#f1f2f2"/>\n'),g='\n  <path class="'.concat(i,'" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>\n  <path class="').concat(a,'" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#dd5357"/>\n  <path class="').concat(o,'" d="M14 12.58a.4.4 0 0 1 0 .56l-1.38 1.38a.4.4 0 0 1-.56 0L9 11.44l-3.08 3.08a.4.4 0 0 1-.56 0L4 13.14a.4.4 0 0 1 0-.56L7.06 9.5 4 6.42a.4.4 0 0 1 0-.56l1.36-1.38a.4.4 0 0 1 .56 0L9 7.56l3.08-3.08a.4.4 0 0 1 .56 0L14 5.86a.4.4 0 0 1 0 .56L10.94 9.5z" opacity=".2"/>\n  <path class="').concat(r,'" d="M14 12.08a.4.4 0 0 1 0 .56L12.64 14a.4.4 0 0 1-.56 0L9 10.94 5.92 14a.4.4 0 0 1-.56 0L4 12.64a.4.4 0 0 1 0-.56L7.06 9 4 5.92a.4.4 0 0 1 0-.56L5.36 4a.4.4 0 0 1 .56 0L9 7.06 12.08 4a.4.4 0 0 1 .56 0L14 5.36a.4.4 0 0 1 0 .56L10.94 9z" fill="#f1f2f2"/>\n'),v='\n  <path class="'.concat(i,'" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>\n  <path class="').concat(a,'" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#e6912c"/>\n  <path class="').concat(o,'" d="M9.82 14.87a.34.34 0 0 1-.1.23.33.33 0 0 1-.23.09H7.6a.26.26 0 0 1-.22-.1.31.31 0 0 1-.09-.22V13a.33.33 0 0 1 .09-.22.29.29 0 0 1 .22-.09h1.89a.33.33 0 0 1 .23.09.34.34 0 0 1 .1.22zM12 7.71a3.31 3.31 0 0 1-.36.73 7.11 7.11 0 0 1-.49.6 4.62 4.62 0 0 1-.52.48 6.62 6.62 0 0 0-.65.64.93.93 0 0 0-.27.7v.21a.29.29 0 0 1-.09.22.28.28 0 0 1-.22.1H7.69a.3.3 0 0 1-.22-.1.29.29 0 0 1-.09-.22v-.35a2.43 2.43 0 0 1 .13-.84 2.55 2.55 0 0 1 .33-.66 3.08 3.08 0 0 1 .45-.55c.16-.15.33-.29.49-.42s.47-.45.64-.64a1 1 0 0 0 .26-.68.74.74 0 0 0-.3-.6 1.13 1.13 0 0 0-.73-.24 1.57 1.57 0 0 0-.49.07 2.54 2.54 0 0 0-.41.18 1.46 1.46 0 0 0-.29.18l-.1.09a.53.53 0 0 1-.24.06c-.12 0-.19-.07-.21-.13l-1-1.21a.3.3 0 0 1 0-.41l.21-.19a2.67 2.67 0 0 1 .56-.38A5.72 5.72 0 0 1 7.61 4a3.68 3.68 0 0 1 1.19-.19A3.86 3.86 0 0 1 10 4a3.63 3.63 0 0 1 1.09.56 2.79 2.79 0 0 1 .78.92 2.76 2.76 0 0 1 .29 1.27 3.08 3.08 0 0 1-.16.96z" opacity=".2"/>\n  <path class="').concat(r,'" d="M9.82 14.37a.34.34 0 0 1-.1.23.33.33 0 0 1-.23.09H7.6a.26.26 0 0 1-.22-.1.31.31 0 0 1-.09-.22v-1.84a.33.33 0 0 1 .09-.22.29.29 0 0 1 .22-.09h1.89a.33.33 0 0 1 .23.09.34.34 0 0 1 .1.22zM12 7.21a3.31 3.31 0 0 1-.36.73 7.11 7.11 0 0 1-.49.6 4.62 4.62 0 0 1-.52.48 6.62 6.62 0 0 0-.65.64.93.93 0 0 0-.27.7v.21a.29.29 0 0 1-.09.22.28.28 0 0 1-.22.1H7.69a.3.3 0 0 1-.22-.1.29.29 0 0 1-.09-.22v-.35a2.43 2.43 0 0 1 .13-.84 2.55 2.55 0 0 1 .33-.66 3.08 3.08 0 0 1 .45-.55c.16-.15.33-.29.49-.42s.47-.45.64-.64a1 1 0 0 0 .26-.68.74.74 0 0 0-.3-.6 1.13 1.13 0 0 0-.73-.24 1.57 1.57 0 0 0-.49.07 2.54 2.54 0 0 0-.41.18 1.46 1.46 0 0 0-.29.16l-.1.09a.53.53 0 0 1-.24.06C7 6.14 6.93 6.1 6.91 6l-1-1.21a.3.3 0 0 1 0-.41l.21-.19a2.67 2.67 0 0 1 .56-.38 5.72 5.72 0 0 1 .9-.37 3.68 3.68 0 0 1 1.22-.13 3.86 3.86 0 0 1 1.2.19 3.63 3.63 0 0 1 1.09.56 2.79 2.79 0 0 1 .78.92 2.76 2.76 0 0 1 .29 1.27 3.08 3.08 0 0 1-.16.96z" fill="#fff"/>\n'),b='\n  <path\n    class="'.concat(i,'"\n    d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"\n    opacity=".3"></path>\n\n  <path\n    class="').concat(a,'"\n    d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"\n    fill="#8a8886"></path>\n\n  <path\n    d="M3.59,10.23a.25.25,0,0,1,.24-.31l1.08-.15a.49.49,0,0,1,.2.06.25.25,0,0,1,.11.2,3.58,3.58,0,0,0,.42,1.28,3.68,3.68,0,0,0,.84,1.06,3.76,3.76,0,0,0,1.16.69A3.9,3.9,0,0,0,9,13.31,3.58,3.58,0,0,0,10.47,13a3.94,3.94,0,0,0,1.22-.81A4.09,4.09,0,0,0,12.5,11a3.74,3.74,0,0,0,0-3,4.09,4.09,0,0,0-.81-1.2A3.94,3.94,0,0,0,10.47,6,3.65,3.65,0,0,0,9,5.69a3.61,3.61,0,0,0-1.23.21,3.23,3.23,0,0,0-1.09.6L7.77,7.59c.16.15.21.29.16.38s-.18.17-.4.17H4.37a.36.36,0,0,1-.2,0A.76.76,0,0,1,4,8a.52.52,0,0,1-.17-.38V4.45c0-.2.06-.33.17-.38s.25,0,.41.16L5.51,5.34a5.83,5.83,0,0,1,1.64-1A5.19,5.19,0,0,1,9,4.05a5.3,5.3,0,0,1,2.12.44,5,5,0,0,1,1.73,1.16A5.59,5.59,0,0,1,14,7.38a5.23,5.23,0,0,1,.44,2.12A5.16,5.16,0,0,1,14,11.62a5.59,5.59,0,0,1-1.16,1.73,5.32,5.32,0,0,1-1.73,1.18A5.64,5.64,0,0,1,9,15a5.23,5.23,0,0,1-1.94-.37A5.27,5.27,0,0,1,4.21,12.1,5.1,5.1,0,0,1,3.59,10.23Z"\n    class="').concat(o,'"\n    opacity=".3"></path>\n\n  <path\n    d="M3.59,9.73a.25.25,0,0,1,.24-.31l1.08-.15a.49.49,0,0,1,.2.06.25.25,0,0,1,.11.2,3.58,3.58,0,0,0,.42,1.28,3.68,3.68,0,0,0,.84,1.06,3.76,3.76,0,0,0,1.16.69A3.9,3.9,0,0,0,9,12.81a3.58,3.58,0,0,0,1.47-.31,3.94,3.94,0,0,0,1.22-.81,4.09,4.09,0,0,0,.81-1.2,3.74,3.74,0,0,0,0-3,4.09,4.09,0,0,0-.81-1.2,3.94,3.94,0,0,0-1.22-.81A3.65,3.65,0,0,0,9,5.19a3.61,3.61,0,0,0-1.23.21A3.23,3.23,0,0,0,6.68,6L7.77,7.09c.16.15.21.29.16.38s-.18.17-.4.17H4.37a.36.36,0,0,1-.2,0A.76.76,0,0,1,4,7.49a.52.52,0,0,1-.17-.38V4c0-.2.06-.33.17-.38s.25,0,.41.16L5.51,4.84a5.83,5.83,0,0,1,1.64-1A5.19,5.19,0,0,1,9,3.55,5.3,5.3,0,0,1,11.12,4a5,5,0,0,1,1.73,1.16A5.59,5.59,0,0,1,14,6.88,5.23,5.23,0,0,1,14.45,9,5.16,5.16,0,0,1,14,11.12a5.59,5.59,0,0,1-1.16,1.73A5.32,5.32,0,0,1,11.12,14,5.64,5.64,0,0,1,9,14.45a5.23,5.23,0,0,1-1.94-.37A5.27,5.27,0,0,1,4.21,11.6,5.1,5.1,0,0,1,3.59,9.73Z"\n    class="').concat(r,'"\n    fill="#ffffff"></path>\n'),_=n(13),E=n(9);n.d(t,"a",function(){return y}),n.d(t,"c",function(){return N}),n.d(t,"i",function(){return S}),n.d(t,"e",function(){return A}),n.d(t,"g",function(){return C}),n.d(t,"j",function(){return T}),n.d(t,"d",function(){return I}),n.d(t,"l",function(){return L}),n.d(t,"f",function(){return k}),n.d(t,"h",function(){return M}),n.d(t,"b",function(){return w}),n.d(t,"k",function(){return P});var O="//images.chesscomfiles.com",y={ARCADE:"arcade",DEFAULT:"default",NATURAL:"natural",NONE:"none",SLOW:"slow"},N={ALMOST_CORRECT:{color:"#8a8886",icon:b},BEST_MOVE:{color:"#9EBA5A",icon:s,key:"bestMove",label:Object(E.b)("Best Move"),phrase:Object(E.b)("is best")},BLUNDER:{annotation:_.b.$4,color:"#b33430",icon:l,key:"blunder",label:Object(E.b)("Blunder"),phrase:Object(E.b)("is a blunder")},BOOK:{icon:c,key:"book",label:Object(E.b)("Book"),phrase:Object(E.b)("is a book move")},BRILLIANT:{color:"#1baca6",icon:u,key:"brilliant",label:Object(E.b)("Brilliant"),phrase:Object(E.b)("is brilliant")},CORRECT:{color:"#acce59",key:"correct",icon:d,label:Object(E.b)("Correct")},CRITICAL:{key:"critical",label:Object(E.b)("Critical")},EXCELLENT:{color:"#5a9ac0",icon:f,key:"excellent",label:Object(E.b)("Excellent"),phrase:Object(E.b)("is excellent")},FORCED:{key:"forced",label:Object(E.b)("Forced"),phrase:Object(E.b)("is forced")},GOOD:{icon:m,key:"good",label:Object(E.b)("Good"),phrase:Object(E.b)("is good")},INACCURACY:{annotation:_.b.$6,color:"#f0c15c",icon:p,key:"inaccuracy",label:Object(E.b)("Inaccuracy"),phrase:Object(E.b)("is an inaccuracy")},INCORRECT:{color:"#c93430",icon:h,key:"incorrect",label:Object(E.b)("Incorrect")},MISSED_WIN:{color:"#dd5357",icon:g,key:"missedWin",label:Object(E.b)("Missed Win"),phrase:Object(E.b)("is a missed win")},MISTAKE:{annotation:_.b.$2,color:"#e6912c",icon:v,key:"mistake",label:Object(E.b)("Mistake"),phrase:Object(E.b)("is a mistake")},STAR:{color:"#e6912c",icon:s,key:"star"}},S={COORDINATE_FILE:".coordinates .letter"},A={INSIDE:"inside",NONE:null,OUTSIDE:"outside"},C=("".concat(O,"/chess-themes/boards"),"".concat(O,"/chess-themes/pieces"),"".concat(O,"/chess-themes/sounds"),{boardStyle:"green",pieceStyle:"neo",highlightColor:"#FFFF33",highlightOpacity:.5,arrowColor:"rgb(255, 168, 0)",flipped:!1,files:8,ranks:8}),T={DARK_MODE_CHANGE:"darkModeChange"},I=[{key:0,label:Object(E.b)("None"),value:A.NONE},{key:1,label:Object(E.b)("Inside"),value:A.INSIDE},{key:2,label:Object(E.b)("Outside"),value:A.OUTSIDE}],L={pieces:["real3d"],animations:["arcade","natural"]},k=[{key:"0",value:null},{key:"1",value:"inside"},{key:"2",value:"outside"}],M={board:".board-board",resize:".board-controls",sidebar:".board-sidebar"},w={minSidebarWidth:300,boardPaddingLeft:30},P="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR"},2:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a={getLine:function getLine(e,t){return e[t]||null},getNode:function getNode(e,t,n){if("number"==typeof t){if(void 0!==n){var r=a.getLine(e,Math.max(0,t));return r?r[n]:null}return null}if(!t)return null;var o=a.getLine(e,Math.max(0,t.line));return o?o[t.move]:null},getSelectedLine:function getSelectedLine(e){return a.getLine(e.jce._lines(),e.tree.selected.line)},getSelectedNode:function getSelectedNode(e){return a.getNode(e.jce._lines(),e.tree.selected)},nodeIsSelected:function nodeIsSelected(e,t){return!!(t||t.line||t.move)&&(e.selected.line===t.line&&e.selected.move===t.move)},getLinesFromJce:function getLinesFromJce(e){return a.formatLinesFromJce(e.jce._lines())},getJceSelectedLine:function getJceSelectedLine(e){return e._lines()[e._history().id]},formatLinesFromJce:function formatLinesFromJce(e){return a.consolidateComments(e)},consolidateComments:function consolidateComments(e){return e.map(function(t){var n=a.isContinuation(e,t.id)?a.getNode(e,t.id,1):a.getNode(e,t.id,0);return n?(t.initComment&&(n.commentBefore=t.initComment),t):t})},isContinuation:function isContinuation(e,t){var n=a.getLine(e,t);if(!n)return!1;if(void 0!==n.parentId&&void 0!==n[0]){var r=a.getNode(e,n.parentId,n.atMoveNode);return!(!r||!r.move)&&r.move===n[0].move}return!1},isMainLine:function isMainLine(e){return 0===e},getNextNodeIds:function getNextNodeIds(e,t){return!e||e.move+t<0?null:{line:e.line,move:e.move+t}},getNextContinuationLineId:function getNextContinuationLineId(e,t){var n=a.getNode(e,t);if(!n||!n.lines)return null;var r=n.lines.find(function(t){return a.isContinuation(e,t)});return-1!==r?r:null},getParentNode:function getParentNode(e,t){var n={line:e[t.line].parentId,move:e[t.line].atMoveNode};return a.findNode(e,n)},getParentNodeIds:function getParentNodeIds(e,t){var n=a.getLine(e,t.line);return n&&void 0!==n.parentId?{line:n.parentId,move:n.atMoveNode}:null},deleteRemainingNodes:function deleteRemainingNodes(e,t){return e?(e.length=t+1,e):null},deleteNode:function deleteNode(e,t){return a.prune(e,{line:t.line,move:t.move-1})},deleteLine:function deleteLine(e,t){var n=a.getLine(e,t);if(void 0!==n.parentId){var r=a.getNode(e,{line:n.parentId,move:n.atMoveNode});r.lines=r.lines.filter(function(e){return e!==t}),0===r.lines.length&&delete r.lines}var o=e.filter(function(e){return a.isMainLine(e.id)||e.id!==t});return a.rebuildIds(o)},rebuildIds:function rebuildIds(e){var t=[];return e.forEach(function(e,n){e.id!==n&&(t[e.id]=n)}),e.map(function(n){return n.id=void 0!==t[n.id]?t[n.id]:n.id,void 0!==t[n.parentId]&&(n.parentId=t[n.parentId]),n.forEach(function(n){n.ids.line=void 0!==t[n.ids.line]?t[n.ids.line]:n.ids.line,n.lines&&n.lines.length>0&&(n.lines=n.lines.map(function(e){return void 0!==t[e]?t[e]:e}).filter(function(t){return void 0!==e[t]}),0===n.lines.length&&delete n.lines)}),n})},prune:function prune(e,t){return a.getNode(e,{line:t.line,move:t.move+1})?(e[t.line]=a.deleteRemainingNodes(e[t.line],t.move),!a.isMainLine(t.line)&&a.isFirstVisibleNode(e,t)&&e.splice(e.findIndex(function(e){return e.id===t.line}),1),e.sort(function(e,t){return e.id-t.id}).reduce(function(e,t){var n=a.getNode(e,{line:t.parentId,move:t.atMoveNode});return(a.isMainLine(t.id)||n)&&e.push(t),e},[])):e},isFirstNodeInTree:function isFirstNodeInTree(e){return 0===e.line&&-1===e.move},isFirstVisibleNode:function isFirstVisibleNode(e,t){return a.isContinuation(e,t.line)?1===t.move:0===t.move},isFirstNodeInLine:function isFirstNodeInLine(e,t){return t&&e&&e[t.line]&&e[t.line][0]&&e[t.line][0].ids&&e[t.line][0].ids.line===t.line&&e[t.line][0].ids.move===t.move},isHead:function isHead(e,t){return t&&e[t.line].length-1===t.move||!1},getHeadIds:function getHeadIds(e,t){return{line:t,move:e[t].length-1}},nodeMatchesMove:function nodeMatchesMove(e,t,n){var r=a.getNode(e,t);return!!r&&(r.from===n.from&&r.to===n.to&&(r.promotion||null)===(n.promotion||null))},shouldMatchMove:function shouldMatchMove(e,t,n){return e&&1===t&&0===n},getNextMatchingNode:function getNextMatchingNode(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=a.getNode(e,t),o=a.getNode(e,t.line,t.move+1);return e.reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return r&&e.moveNumber===r.moveNumber+1||o&&e.moveNumber===o.moveNumber}).filter(function(t){return!!(r&&t.ids.line===r.ids.line||o&&t.ids.line===o.ids.line)||(!!(r&&r.lines&&-1!==r.lines.indexOf(t.ids.line)&&a.isContinuation(e,t.ids.line))||!(!o||!o.lines||-1===o.lines.indexOf(t.ids.line)||a.isContinuation(e,t.ids.line)))}).filter(function(t){return a.nodeMatchesMove(e,t.ids,n)}).sort(function(e,t){return e.ids.line-t.ids.line})[0]||null},clearNode:function clearNode(e,t){var n=a.getNode(e,t);return n?(delete n.comment,delete n.annotation,n):null},findNode:function findNode(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!e||void 0===n.line)return null;if("string"==typeof r)switch(n.move){case"begin":n.move=0;break;case"end":n.move=e[0].length-1}else if(void 0===n.move)return e[n.line];return r&&0!==Math.abs(r)&&(n=new Array(Math.abs(r)).fill(r/Math.abs(r)).reduce(function(n,r){if(null===n)return null;var i=a.isContinuation(e,n.line),s=a.getNextNodeIds(n,r);if(a.getNode(e,s)&&(-1!==r||!i||0!==s.move))return s;switch(r){case 1:return o?n:null!==(t=a.getNextContinuationLineId(e,n))?{line:t,move:1}:null;case-1:return s=i?a.getParentNodeIds(e,n):a.getNextNodeIds(a.getParentNodeIds(e,n),-1),a.getNode(e,s)?s:n;default:return null}},n)),a.getNode(e,n)||null},clearNodeMarkings:function clearNodeMarkings(e,t){var n=a.getNode(e,t);return n?(delete n.squares,delete n.arrows,delete n.effects,n):null},clearNodeAnalysis:function clearNodeAnalysis(e,t){var n=a.getNode(e,t);return n?(delete n.comment,delete n.annotation,delete n.additionalAnnotation,n):null},clearAllMarkings:function clearAllMarkings(e){return e?(e.forEach(function(t){t.length>0&&t.forEach(function(t){return a.clearNodeMarkings(e,{line:t.ids.line,move:t.ids.move})})}),e):null},clearAnalysis:function clearAnalysis(e){return e?(e.forEach(function(t){t.length>0&&t.forEach(function(t){return a.clearNodeAnalysis(e,{line:t.ids.line,move:t.ids.move})})}),e):null}}},20:function(e,t,n){"use strict";n.r(t);var a,r,o,i=n(39),s=n.n(i),c=(a=function(){var e=[[2637767806,863464769],[720845184,95069639],[1155203408,610415943],[2618685246,1655139042],[1971536997,1218186377],[848342074,540017087],[263957791,1627660921],[3896152207,4076560586],[226391645,1484086288],[436746274,3467632685],[2516964848,3797861296],[3491888988,3510251221],[1086189917,1248276018],[18044180,1876255637],[1572111136,1190386149],[597658413,2146900428],[97624494,2243205793],[1738507407,1854916977],[1950989311,2149575947],[2098318769,3283594736],[2194108574,2015279052],[4079062812,2500884588],[856979699,2941369318],[1270058469,3877737539],[2858720366,3170717948],[2378012835,1387254795],[2278688587,2178388503],[435406673,3555273441],[3031118064,1655806655],[2063925420,1107589828],[3376753832,436852829],[615148625,1302492416],[1285502018,1963045959],[346460119,1016137793],[2803604355,1176288659],[55085973,2968618255],[1669016372,4287873088],[164740250,1037634196],[896886403,883023163],[1935551383,2764331555],[410153072,4055711755],[533441746,1505690343],[3541084098,3466290517],[3214426080,4267541060],[2675233103,1951705124],[1374411850,3115986997],[1552073989,3684348154],[4244110986,875606593],[844343081,3115990494],[2356462440,135999605],[3116133511,377238503],[2129956651,2197966368],[299173332,3276914047],[1701379241,745972291],[1306570996,254977976],[2530644806,214138461],[1122123979,1667800879],[1831591130,3801192033],[1116211970,920967505],[1594837592,2551651254],[972591349,2046373768],[2479207924,1935030411],[1675376029,2367888248],[3960916618,3935874422],[1398143232,3265801671],[133930885,1520005442],[1351827834,2829577566],[2076951437,2723839804],[435980918,2364847828],[1668970368,3738157273],[2185864314,3993911799],[2041407829,31969768],[346864372,2004703094],[4047877822,3437142421],[3669961416,538399484],[616810829,4190688246],[3144558884,4030272234],[216165387,2513010905],[2761740594,3216997572],[3919406634,4096014649],[669429112,2434161727],[2234904640,3111407601],[1421079802,1598085235],[1924213810,310373675],[4002762044,2067865415],[2592451728,2586110625],[1890340057,4031717877],[4189625662,2577429954],[2276713138,3049850801],[2741429688,3310307512],[2924122950,3426712818],[421576781,1193704381],[2277442246,3030264553],[153237420,595540057],[4278711886,4176286928],[2380848297,4030514510],[2618700582,1303682185],[3018992701,185284845],[957243316,1291916363],[1543415220,1898408169],[504378001,531073412],[2591337657,1692896435],[1333852064,903543556],[1661259930,188168388],[561112646,2197961224],[1536910315,2632972300],[1349168372,2307429186],[411152329,2745631190],[1694697476,1081411140],[3755185459,2631660711],[4019355068,4027326706],[2066937809,3761668332],[3120395808,3878773315],[94890149,2109283191],[3045629038,358812277],[1249184265,3465901047],[3477490924,2308583306],[4114113436,3875911716],[1014604031,1434513279],[3991324799,2222416029],[2040431088,1539915569],[2253613964,4081224332],[2547464012,1611168627],[2722521980,4281500978],[71289574,213969824],[2450408597,903689630],[1894451515,364024012],[1939968537,374938813],[1447259295,3785468557],[4021046128,1664847745],[3139524504,3562928047],[1173487682,4065269608],[2467266804,3907744866],[4284945151,3486998177],[2925674454,1953016432],[3710671816,1271453948],[2129465869,1422863833],[587093076,18243356],[3373793513,2411305257],[2156648078,1791034213],[3737413652,1534461430],[468575139,2935304962],[1129551363,3603256834],[2861996892,1763494778],[2826449619,2465197654],[1704209531,1014895022],[3738359347,3402630390],[569410928,4095796581],[3021312909,2108247612],[2444777957,2664129360],[282063667,3773661258],[682545472,3188439005],[3318488457,1917822038],[1447622272,4045023041],[757420137,4038580915],[2613420942,4146703316],[4012836163,150381244],[2938127093,3428591704],[1208226490,3086335530],[2935205706,1446903363],[430957978,3830532479],[1381578755,3757172800],[4109399782,1596778224],[288855589,1954372339],[3169178148,2256716053],[2644780093,3895892303],[107966643,1071681559],[1304747544,2607225372],[1359190711,1898207171],[3229237120,3273634996],[3027167685,3863637628],[3011615298,2883984519],[564135827,978463264],[770797430,362326607],[1983662611,1907583229],[4153656423,48268960],[3609759233,720080177],[3727911466,1270989899],[200708787,2366086947],[744508026,393422515],[1213261630,65757284],[3485747185,3845951003],[2958861301,1680248217],[2598470344,3163845864],[2767997908,4233451722],[3881113485,1492930166],[1773764017,2764062206],[4189435844,2898689174],[4234838742,1267095035],[2624081078,3302114327],[2395569449,390426320],[1728307101,690284926],[3309827454,1118258254],[2028172868,3888829086],[4271523049,909051386],[146617804,942892565],[2467685867,974297806],[2483428231,503635829],[3743260573,2018222096],[1002067894,2289153437],[3535252974,3738302271],[4154611160,1002664952],[3623154244,2349656961],[3646679180,3524329383],[862933752,4282853607],[2806008282,3272780913],[2734037942,3828874677],[1328176304,2137666995],[2278785213,2780788825],[381286368,1816476193],[2074232908,2316293454],[4087773386,3651330956],[967884669,3728964514],[4239349185,3213509668],[419231360,1463788948],[1275421624,2672384707],[1088456595,436245261],[2365565249,783696577],[1758083333,845223583],[2048846183,3530914274],[2635948261,124738415],[940630937,3069598626],[839474029,1253439921],[902477345,165479306],[2836079689,2681188273],[2007115168,2093139645],[1363041891,1282466609],[1130479818,1063857938],[3644959908,1260430427],[1385135238,46497915],[1386975934,3110156681],[2635987502,4233461619],[1915744629,4117939016],[487743653,285736599],[2049219159,3960249250],[69242857,3908563670],[1511066720,1488527520],[215590039,1703564952],[1459430344,4184955468],[676103291,2642967214],[83799035,3182827979],[1949179493,476101251],[2593534694,1493478716],[2283504289,995211746],[1349412676,3449243940],[2954378677,1878813305],[249149717,3329151870],[1578231917,1483986052],[4135085182,890874990],[461755528,3505523909],[3669622373,634949665],[219487622,2914465301],[2825233742,3703631897],[2479105382,2935590907],[2582097898,3187672881],[1221328648,1843341402],[2140891889,3958868911],[1482849818,345750049],[751922730,3178831411],[3546542069,4036458902],[216179596,877293293],[444615341,3117393729],[2424254530,494454238],[1344234989,3003337991],[929188581,2760877801],[2507911009,1879899982],[980166547,1311840394],[3566535507,1790747461],[143525013,2311336672],[4181962471,4273938872],[1815842366,862009811],[911175674,1179575598],[3591335374,3694215714],[1452686093,3393294272],[385158879,2447709103],[4011414929,1264623507],[1448477120,911094312],[3971299641,2289992053],[3133647265,2234591563],[3007628400,964409938],[1708345684,3673411261],[3031964479,2843021794],[3022128657,2480338599],[118850112,473449293],[2048127371,3202109429],[3158349745,382018770],[1505327237,3807570472],[2568424029,3272693060],[1866609495,3888556537],[844703982,1852802964],[3504617058,682636099],[1448882679,3733580327],[821387540,2215744532],[3631471417,311618895],[2077838877,2383929020],[3352949096,1688694420],[2491080787,3998672444],[3368630402,4182204255],[983299419,2837414346],[3651215291,1033373924],[265429091,3988955082],[3019003608,2896212153],[2955948456,3025235588],[903690197,2266253487],[3925215275,89402958],[3959093811,3609545561],[2455088053,223552128],[3115011301,2133669107],[1765081558,673805649],[3324795129,2111392191],[3443871631,432345706],[3152559950,3425427147],[3699649406,672784944],[3129545774,7668664],[2747044893,173040075],[3925243406,852328481],[164095314,3161868591],[2234471571,1302682825],[2164784335,105893718],[159995093,536831360],[599199451,425051327],[3274759746,1680930461],[1192619331,3903085578],[2832721114,3078660237],[91404660,4030521531],[3044880024,1578375623],[3906596030,754177855],[803516785,1894094672],[288455592,2030430096],[2143232492,2317305324],[388352703,3406060288],[2521731420,3588403719],[1043041227,4028028525],[3195290851,2468913324],[4166724431,3168683191],[1228226538,968516529],[500177583,3444787306],[533367442,4252082053],[4236023256,657816314],[413575568,3367198397],[3435884549,3334062733],[1004255532,1135705894],[2859513268,4170618274],[3914086821,1251487871],[3080761716,3489067886],[3571165255,699353261],[773372954,3648014952],[769693293,2939128604],[3116440923,507748478],[1687629160,3739431776],[2489486648,3502376324],[3686847158,2878383449],[3530767427,902211375],[2121652637,2493976397],[1827477891,930064171],[2549918411,4029725732],[2071415163,844118802],[2236083679,3088894868],[2040110303,4144562891],[3489536313,1133419300],[2190878435,2301466071],[2465915458,2448602097],[1675766804,2073834499],[3329799896,1613253148],[1483966600,1348836071],[159505618,2527621997],[2674227354,1695130688],[2683539437,1927873839],[3833196123,2570082188],[3891433165,759819981],[1455453349,2179602430],[1430583255,1957776111],[2067726741,4235143439],[303380021,2998980439],[2136024795,3126725799],[2054591852,1051702291],[1029141665,489794361],[2317027384,569642164],[2068461795,624418658],[2499875684,1830645251],[1302894490,4319401],[1002663431,2406815191],[1560941298,2060652753],[2141002286,515773223],[3661248027,475092913],[3705503008,2419919909],[914567990,3496539911],[3462935583,2039034761],[2878378006,2379243316],[1133857586,1390159333],[3023618742,2140726761],[282908558,944874642],[3686955701,1148723903],[2604456805,4163675010],[3061545110,377179268],[3218002352,76459088],[2836503392,916455101],[536836808,151306053],[2886925079,404221671],[2936593041,2011015485],[453815187,1852163908],[3042568989,82176306],[3279635891,4174836410],[3282689058,2360003049],[4088968807,1516570623],[2680453086,1322680794],[1731693966,3438253771],[1842894553,1294307894],[2736377365,2964642609],[121205621,521330014],[2324595870,3005710757],[3784465521,676493813],[1958759409,2030833406],[1306150933,1016370058],[2636541290,482366508],[1950415745,1695073534],[322077955,3746046623],[3602873262,3829181504],[1211684447,1861645455],[504701736,4080111082],[2407799203,1223857855],[1925743434,1498920209],[3617596327,845198428],[2498480299,3484773806],[2680229135,2560201696],[3731399221,1536412390],[2756509305,2924710846],[2635957500,3459716133],[1372762539,769635894],[802677945,3878474636],[1707760534,3075809808],[3714687192,2872792173],[1615679922,1606381794],[1940556374,1337437342],[445390489,731124040],[2864974375,64601760],[1984806574,2141516710],[513390958,1890172555],[744398315,1475299139],[982749166,852662657],[652663695,4260736510],[1184061125,82616221],[3363191899,147951756],[1064069880,1507328085],[2138882964,547595589],[2616926846,3186935246],[2298715513,3606862940],[2414381911,811477686],[2694745228,900437726],[4202576185,2201114451],[3602305260,3323446937],[3756663274,2658490339],[3061587876,2171079416],[3390977925,2850497765],[486312941,224925241],[3515712841,3510684394],[1322319486,2647200565],[3839619171,1148450258],[392296762,1154854654],[1401523788,957405781],[1934485528,527352730],[645968162,3131215255],[696971825,3361451947],[2038689491,1946699733],[1723966113,2785859721],[2652365974,1118037185],[3988018407,3134982149],[1354171594,3053634345],[1287854075,2631782435],[1723106141,2662328866],[563845090,1878819261],[639520332,171129501],[534957223,1696062352],[3612364282,2283204027],[3109494688,1304463816],[500957989,630925278],[3477030536,2149497258],[4109750364,281719363],[951472732,564407054],[922095147,2767874048],[3946156928,829677774],[2622281253,2086286851],[2936811901,850242186],[630086272,3340782667],[2340986210,1296336989],[4107355543,3865114709],[3560210278,3968418243],[3868847493,2967450637],[611513888,2083325060],[3265390517,3025776309],[2874106961,3424470508],[1668707698,2923258228],[2778598353,24320552],[292356118,3415510793],[754567370,86994591],[185141877,1621715171],[2884558258,3722473457],[1492107531,111281805],[3336927864,4225337056],[782994598,1021838039],[346133860,18281270],[2080909533,1649329040],[3612065399,3859901127],[2151962287,284556115],[3957975594,3745718727],[52533817,3998775856],[1232633839,397383972],[2716413964,3629253960],[1531307298,3836851439],[3030137657,2500401718],[3561556693,653345841],[313061910,2945718466],[2065276,3342140708],[410498334,1470588117],[2726640512,4051654894],[2570984935,758567696],[3008987264,3462702678],[623860175,228525243],[3527183895,1829844480],[467272850,3890501742],[568376656,650516927],[990477018,4035508558],[2366955227,817792110],[4183621538,989198068],[946958343,1639184195],[3395758993,3924097558],[1690887473,3220519765],[605184237,1255270525],[275515833,1926424610],[2142902612,283494960],[2021972412,1823828440],[105373677,3448326697],[1666662384,1042433908],[1338566998,261206307],[498685668,1344755577],[3101233780,3119109371],[2733370951,3808165089],[3656512268,3449289481],[4025308119,1607880299],[778896067,1612183167],[2846510368,3674754715],[3058428120,2991822529],[1892379383,3268787440],[2565895844,4154602030],[3213117192,98999135],[2495816991,116985075],[1040203361,1785041385],[3106252493,69316595],[1639829808,2087117568],[3213709576,3799911752],[604681594,2340981536],[4236730699,2938666503],[4009938384,1878897714],[2701667332,1725918218],[2182473079,1258184],[3550198211,2760750799],[657991062,875584532],[1640976276,3380476221],[460041378,2924352091],[1972323596,2287414795],[2510248061,1350206297],[2959337826,3762681165],[1625877874,3235902929],[2070189957,1429368735],[4245163299,1839731898],[2358312347,138364248],[275739390,2179122576],[2037777210,972544338],[2766930226,1984733259],[1933485829,4209310327],[3034118011,3286589799],[2653025529,62078937],[2641780289,2679545709],[3540781195,2787026415],[1569993599,3215949659],[441337890,3947723353],[1878946792,459505587],[3724105660,920173002],[1691411102,3934795955],[148741087,3647709027],[142506469,2776440083],[3811107376,3823285243],[472209891,252266174],[1913386482,1867329194],[2960608550,482740699],[1145005292,1513558421],[1091751784,1687823886],[3625186042,3086337482],[1712140887,940065262],[1504455800,1945702563],[3896940088,2003245591],[2478191531,4197739e3],[3233871270,250924495],[3404865229,1131917964],[1462204167,429621621],[1349259705,3641608989],[3627860584,2048468319],[1244251718,1513180369],[3979211282,371413143],[3043187861,4285699810],[581894202,3060983825],[1390895705,1811317301],[2599134010,3337406128],[2488233440,2436161462],[1816641224,2208816697],[1792034756,815866116],[2779893723,2695577703],[2084952115,2951772258],[1351806869,169269771],[2469979804,86740603],[1163545420,4264616949],[1795352113,2511146232],[1796715044,3134635815],[3521170642,1538900329],[3725363621,1455009392],[1342594643,1512127734],[2618386938,662157428],[2028859350,2494504685],[1841905045,648351336],[4002935891,4033319405],[850071259,1768358867],[979915719,3876018087],[830889197,1629549437],[1744763229,2455795856],[522919199,368499868],[3063822504,2522639205],[2861636095,407686388],[4097602344,1945259027],[4215946617,1251639506],[894485042,534122652],[924809191,1807237502],[1811585710,1589663609],[3439653887,1722232],[3810997538,105152714],[2677100683,4291805514],[77233985,102407776],[4239834691,2851274395],[148802076,2006440603],[2409138150,126301601],[3048474397,3217504870],[588133437,4221603123],[1139638106,263087485],[982032635,3165674595],[562514827,1294842959],[467575086,905357513],[1405117894,3370530088],[3813285157,242912619],[3601878331,1985076606],[1586505598,2092146221],[738488098,103663229],[2970334297,321718822],[1068097019,1742926233],[235518094,420804527],[283685722,4092504887],[2666392744,3799169331],[3569817788,1256762975],[2169728352,292617248],[2444571896,2239859206],[3967907832,1066404216],[420376911,2913277294],[3046293305,2956347747],[2311278792,2477686209],[2885955184,4172514290],[3030078181,2275536480],[4212469731,4280736393],[1046900335,1773022229],[995380926,1414273529],[3892683234,2429494358],[615726237,2127712535],[3880203074,2071130305],[176180504,3070850165],[1474506861,2283723599],[1256707747,1857412043],[764236850,359687368],[3521530334,511649419],[2318567964,3992868140],[128167623,2518992858],[2220129756,1042300052],[2567608573,1349636707],[441446694,384760969],[4143447316,829506048],[817912603,2738025500],[2368091832,357934982],[1187643061,1561463042],[3438021235,3030161697],[1318922279,895468690],[434876457,1130220303],[1180291767,1132759596],[2520707785,1798553137],[1962430872,2958700157],[1510954061,3534879512],[57831539,3269538993],[3354831405,3852135009],[891783098,2698494511],[2555636406,996018997],[2881342935,3982231648],[3473267445,2894952368],[1238029452,3958679326],[2051805420,559465638],[3655936674,1186951582],[330209165,167662935],[1929681327,2450868735],[1313566811,2458925988],[4283920930,3243182650],[1438004300,4185567150],[3093439067,89876832],[3401620219,3721579956],[3673745794,2682874719],[3053321309,825410712],[822915968,3681514755],[3900685126,561657358],[553823814,1857753416],[4166295066,983949325],[128359165,3426887194],[3300989119,3884968622],[4193552686,3647722552],[452189154,1569670618],[4122259632,3537825460],[2519387887,2821594244],[74333898,2940550377],[4032631446,2173999692],[2521268686,1934310532],[2620314688,2177785789],[1378755571,2455646622],[394133753,4231198609],[734399075,2800989170],[573292462,1634883078],[1214417373,3426576256],[2110224475,2399009920],[2331215665,3224086912],[531326186,698539511],[3839443603,583861850],[2644531398,2017784332],[616620850,3070237104],[590349237,2798642861],[3582377217,3317831670],[1582708616,1596570667],[2126148205,2358511947],[173450736,3219362418],[3616831144,1323437318],[2655785577,3131359031],[401600069,2967397952],[496349349,4244179910],[2479612086,2579650653],[1710903074,2049666425],[3589924952,690291925],[3266682943,1900485231],[1496318498,3025542656],[3459221058,3389461212],[2091479615,3140389256],[663040899,1207089672],[3323704225,1105530508],[353318429,2879253542],[2674540957,941987316],[1688550857,620657353],[338551967,4286217277],[204689992,2239736295],[178008789,3940832005],[3871613304,3300636974],[1911672356,2429684487],[4055679954,1974461722],[3878217928,1009991796],[2533095482,310920740],[2174833823,3596041637],[1604814460,2939543881],[1452830254,4092397851],[2441027029,4169690209],[3524103304,3372213855]],t=[[836181454,1689436944],[2776523577,3710710688],[4049974663,3750330768],[519497435,2979405513]],n=[[1892447193,197291556],[3793382197,3742120663],[3838936,2994760034],[479846099,1018728609],[3476112862,182272649],[3504620154,1427438450],[2009473484,2679350403],[1738755500,1129731339]],a=[4174784170,2938602761],r={p:0,P:1,n:2,N:3,b:4,B:5,r:6,R:7,q:8,Q:9,k:10,K:11},o=[];o[5]=1,o[6]=0,o[9]=3,o[10]=2,o[17]=5,o[18]=4,o[33]=7,o[34]=6,o[65]=9,o[66]=8,o[129]=11,o[130]=10;var i,s=[2,5,10,20,40,80,160,64],c="nbrq",l=["","0000000","000000","00000","0000","000","00","0",""],u=16;function to32BitHex(e){var t=e.toString(16);return l[t.length]+t}function to64BitHex(e){return to32BitHex(e[0])+to32BitHex(e[1])}function hash(o,i){var c,l,u,d,f,m,p,h,g,v,b,_,E=o.split(" "),O=E[0].split("/"),y="w"===E[1],N=0,S=Number(y),A=S?3:4;for(u=7;u>=0;u-=1)for(d=0,p=(f=O[u]).length,m=0;m<p;m+=1)h=f[m],(b=r[h])>=0&&(c=(c^(g=e[64*b+8*(7-u)+d])[0])>>>0,l=(l^g[1])>>>0,b===S&&u===A&&(N|=1<<d)),d+=Number(h)||1;return"-"!==E[2]&&((v=E[2]).indexOf("K")>-1&&(c=(c^(g=t[0])[0])>>>0,l=(l^g[1])>>>0),v.indexOf("Q")>-1&&(c=(c^(g=t[2])[0])>>>0,l=(l^g[1])>>>0),v.indexOf("k")>-1&&(c=(c^(g=t[1])[0])>>>0,l=(l^g[1])>>>0),v.indexOf("q")>-1&&(c=(c^(g=t[3])[0])>>>0,l=(l^g[1])>>>0)),E[3]&&"-"!==E[3]&&(_=E[3].charCodeAt(0)-97,s[_]&N&&(c=(c^(g=n[_])[0])>>>0,l=(l^g[1])>>>0)),y&&(c=(c^a[0])>>>0,l=(l^a[1])>>>0),i&&"hex"===i?to64BitHex([c,l]):[c,l]}function wrap(e){var t,n,a,r,o={};function parseBook(e,t){var a,r,o,i,s,l,u=n.getUint16(e+8),d=n.getUint16(e+10);return r=u>>9&7,i=u>>3&7,s=7&u,l=u>>12&7,4===(o=u>>6&7)&&t&&r===i&&"-"!==t&&(7===s&&(0===r&&t.indexOf("K")>-1||7===r&&t.indexOf("k")>-1)?s-=1:0===s&&(0===r&&t.indexOf("Q")>-1||7===r&&t.indexOf("q")>-1)&&(s+=2)),a=String.fromCharCode(o+97)+(r+1)+String.fromCharCode(s+97)+(i+1),l&&(a+=c[l-1]),{move:a,weight:d}}function query(e){return"string"==typeof e&&(e={fen:e}),t(e)}if(o={query:query,pick:function pick(e){var t,n,a,r,o,i=0;if(function sortMoves(e){e.sort(function sorter(e,t){return t.weight-e.weight})}(t=(e=e||{}).moves||query(e)),a=t.length){if(e.type&&1!==a&&"best"!==e.type){if("random"===e.type){for(r=Math.floor(Math.random()*t.sum)+1,o=0;o<a-1&&!(r<=(i+=t[o].weight));o+=1);return t[o].move}return"randomDisregardWeight"===e.type?t[Math.floor(Math.random()*a)].move:"worst"===e.type?t[a-1].move:((n=parseInt(e.type)||1)<0&&(n=a+n+1),n<1?n=1:n>a&&(n=a),t[n-1].move)}return t[0].move}}},e.getUint32)t=function bufferBookFind(e){var t,a,r,o,i,s=n.length||n.byteLength||0,c=e.offset||0,l=e.fen,d=e.chess960,f=e.checkAll,m=[],p=0;for(e.hash?"string"==typeof(t=e.hash)&&(t=function hex64ToDec(e){return[parseInt(e.substr(0,8),16),parseInt(e.substr(8),16)]}(t)):t=hash(l),!d&&l&&(i=l.split(" ")[2]),c=0;c<s;c+=u)if(n.getUint32(c)===t[0]&&n.getUint32(c+4)===t[1])r=parseBook(c,i),m[m.length]=r,p+=r.weight,a=!0;else if(a&&!f)break;if(m.sum=p,e.relative)for(o=m.length-1;o>=0;o-=1)m[o].relative=Math.round(m[o].weight/p*1e4);return m},n=e,o.buffer=n;else for(r in t=function jsonBookFind(e){var t,n,r,i,s,c,l=0,u=e.fen;if(o.useFen)r=u.replace(/ \d+ \d+$/,""),(t=a[r])||(i=r.replace(/[a-h][1-8]$/,"-"))!==r&&(t=a[i]);else if(e.hash||(e.hash=hash(u,"hex")),t=a[e.hash]){if(t[0]&&t[0].n&&(t=t[0]),t.n&&!t.b)return[];if(t.b)t=function decompressMoves(e){var t,n=[],a=e.b.length;for(t=0;t<a;++t)n.push({move:e.b[t],weight:e.w[t]});return n}(t);else if(!e.chess960&&u)for(c=u.split(" ")[2],n=t.length-1;n>=0;n-=1)(s=t[n].move.match(/e([18])([ah])\1/))&&("h"===s[2]&&("1"===s[1]&&c.indexOf("K")>-1||"8"===s[1]&&c.indexOf("k")>-1)?t[n]={move:"e"+s[1]+"g"+s[1],weight:t[n].weight}:"a"===s[2]&&("1"===s[1]&&c.indexOf("Q")>-1||"8"===s[1]&&c.indexOf("q")>-1)&&(t[n]={move:"e"+s[1]+"c"+s[1],weight:t[n].weight}))}if(t)for(n=t.length-1;n>=0;n-=1)l+=Number(t[n].weight);else t=[];return t.sum=l,t},a=e,o.json=a,a){o.useFen=r.indexOf(" ")>-1;break}return o}function getBook(e,t){!function ajaxLoad(e,t){var n=new XMLHttpRequest,a=e.toLowerCase().indexOf(".json")>-1;function onload(){var e;if(n.status>=200&&n.status<300||304===n.status||0===n.status||1223===n.status)if(a)try{t(null,JSON.parse(n.response))}catch(e){t(e)}else e=new DataView(n.response),t(null,e);else t(new Error("Error code: "+n.status))}n.open("GET",e,!0),a||(n.responseType="arraybuffer"),n.onload=onload,n.onerror=onload,n.send()}(e,function onload(e,n){var a;if(n&&(a=wrap(n)),t)return t(e,a);if(e)throw e;return a})}return{hash:hash,loadBook:(i={},function loadBook(e,t){i[e]?i[e].book?setTimeout(function(){t(null,i[e].book)},0):i[e].cbs.push(t):(i[e]={cbs:[t]},getBook(e,function onload(t,n){var a=i[e].cbs;t?delete i[e]:(i[e].book=n,i[e].cbs=void 0),a.forEach(function(e){setTimeout(function(){e(t,n)},0)})}))}),to64BitHex:to64BitHex,zobristPiece:e,zobristCastle:t,zobristEnPassant:n,zobristTurn:a,zobristPieceValue:r,zobristPieceValueNumbers:o}}(),r=function init(){var e,t,n,r,o={Chess:0,Chess960:1,Crazyhouse:2,"3-check":3,"King of the Hill":4,Bughouse:5,chess960:1,Fischerandom:1,fischerandom:1,crazyhouse:2,"three-check":3,kingofthehill:4,koth:4,bughouse:5},i=["Chess","Chess960","Crazyhouse","3-check","King of the Hill","Bughouse"],c={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],d=0,f=0,m=0,p=-1,h=1,g=2,v=4,b=8,_=16,E=32,O=64,y=128,N=3,S=252,A=255,C=256,T=512,I=112,L=1,k=2,M=4,w=3,P=7,D=14,R=21,j=127,B="pnbrqkPNBRQK",F="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",V=[];V[5]=[-16,-17,-15],V[6]=[16,17,15],V[8]=[-18,-33,-31,-14,18,33,31,14],V[16]=[-17,-15,17,15],V[32]=[-16,1,16,-1],V[64]=[-17,-16,-15,1,17,16,15,-1],V[128]=[-17,-16,-15,1,17,16,15,-1];var x={P:5,p:6,N:9,n:10,B:17,b:18,R:33,r:34,Q:65,q:66,K:129,k:130},H={P:4,p:4,N:8,n:8,B:16,b:16,R:32,r:32,Q:64,q:64,K:128,k:128},G={5:"P",6:"p",9:"N",10:"n",17:"B",18:"b",33:"R",34:"r",65:"Q",66:"q",129:"K",130:"k"},U={9:"N",10:"N",17:"B",18:"B",33:"R",34:"R",65:"Q",66:"Q",129:"K",130:"K"},$=[80,0,0,0,0,0,0,96,0,0,0,0,0,0,80,0,0,80,0,0,0,0,0,96,0,0,0,0,0,80,0,0,0,0,80,0,0,0,0,96,0,0,0,0,80,0,0,0,0,0,0,80,0,0,0,96,0,0,0,80,0,0,0,0,0,0,0,0,80,0,0,96,0,0,80,0,0,0,0,0,0,0,0,0,0,80,8,96,8,80,0,0,0,0,0,0,0,0,0,0,0,8,212,224,212,8,0,0,0,0,0,0,96,96,96,96,96,96,224,0,224,96,96,96,96,96,96,0,0,0,0,0,0,8,212,224,212,8,0,0,0,0,0,0,0,0,0,0,0,80,8,96,8,80,0,0,0,0,0,0,0,0,0,0,80,0,0,96,0,0,80,0,0,0,0,0,0,0,0,80,0,0,0,96,0,0,0,80,0,0,0,0,0,0,80,0,0,0,0,96,0,0,0,0,80,0,0,0,0,80,0,0,0,0,0,96,0,0,0,0,0,80,0,0,80,0,0,0,0,0,0,96,0,0,0,0,0,0,80],z=[336,80,80,0,0,0,96,352,96,0,0,0,80,80,336,0,80,336,80,80,0,0,96,352,96,0,0,80,80,336,80,0,80,80,336,80,80,0,96,352,96,0,80,80,336,80,80,0,0,80,80,336,80,80,96,352,96,80,80,336,80,80,0,0,0,0,80,80,336,88,120,360,120,88,336,80,80,0,0,0,0,0,0,80,88,476,252,508,252,476,88,80,0,0,0,0,96,96,96,96,120,252,252,252,252,252,120,96,96,96,96,0,352,352,352,352,360,508,252,0,252,508,360,352,352,352,352,0,96,96,96,96,120,252,252,252,252,252,120,96,96,96,96,0,0,0,0,80,88,476,252,508,252,476,88,80,0,0,0,0,0,0,80,80,336,88,120,360,120,88,336,80,80,0,0,0,0,80,80,336,80,80,96,352,96,80,80,336,80,80,0,0,80,80,336,80,80,0,96,352,96,0,80,80,336,80,80,0,80,336,80,80,0,0,96,352,96,0,0,80,80,336,80,0,336,80,80,0,0,0,96,352,96,0,0,0,80,80,336],K=[336,80,80,0,0,0,96,352,96,96,0,0,80,80,336,0,80,336,80,80,0,0,96,352,96,96,0,80,80,336,80,0,80,80,336,80,80,0,96,352,96,96,80,80,336,80,80,0,0,80,80,336,80,80,96,352,96,112,80,336,80,80,0,0,0,0,80,80,336,88,120,360,120,120,336,80,80,0,0,0,0,0,0,80,88,476,252,508,252,508,88,80,0,0,0,0,96,96,96,96,120,252,252,252,252,252,252,104,96,96,96,0,352,352,352,352,360,508,252,0,252,508,488,352,352,352,352,0,96,96,96,96,120,252,252,252,252,252,252,104,96,96,96,0,0,0,0,80,88,476,252,508,252,508,88,80,0,0,0,0,0,0,80,80,336,88,120,360,120,120,336,80,80,0,0,0,0,80,80,336,80,80,96,352,96,112,80,336,80,80,0,0,80,80,336,80,80,0,96,352,96,96,80,80,336,80,80,0,80,336,80,80,0,0,96,352,96,96,0,80,80,336,80,0,336,80,80,0,0,0,96,352,96,96,0,0,80,80,336],q=[336,80,80,0,0,96,96,352,96,0,0,0,80,80,336,0,80,336,80,80,0,96,96,352,96,0,0,80,80,336,80,0,80,80,336,80,80,96,96,352,96,0,80,80,336,80,80,0,0,80,80,336,80,112,96,352,96,80,80,336,80,80,0,0,0,0,80,80,336,120,120,360,120,88,336,80,80,0,0,0,0,0,0,80,88,508,252,508,252,476,88,80,0,0,0,0,96,96,96,104,252,252,252,252,252,252,120,96,96,96,96,0,352,352,352,352,488,508,252,0,252,508,360,352,352,352,352,0,96,96,96,104,252,252,252,252,252,252,120,96,96,96,96,0,0,0,0,80,88,508,252,508,252,476,88,80,0,0,0,0,0,0,80,80,336,120,120,360,120,88,336,80,80,0,0,0,0,80,80,336,80,112,96,352,96,80,80,336,80,80,0,0,80,80,336,80,80,96,96,352,96,0,80,80,336,80,80,0,80,336,80,80,0,96,96,352,96,0,0,80,80,336,80,0,336,80,80,0,0,96,96,352,96,0,0,0,80,80,336],W=[336,80,80,0,0,96,96,352,96,96,0,0,80,80,336,0,80,336,80,80,0,96,96,352,96,96,0,80,80,336,80,0,80,80,336,80,80,96,96,352,96,96,80,80,336,80,80,0,0,80,80,336,80,112,96,352,96,112,80,336,80,80,0,0,0,0,80,80,336,120,120,360,120,120,336,80,80,0,0,0,0,0,0,80,88,508,252,508,252,508,88,80,0,0,0,0,96,96,96,104,252,252,252,252,252,252,252,104,96,96,96,0,352,352,352,352,488,508,252,0,252,508,488,352,352,352,352,0,96,96,96,104,252,252,252,252,252,252,252,104,96,96,96,0,0,0,0,80,88,508,252,508,252,508,88,80,0,0,0,0,0,0,80,80,336,120,120,360,120,120,336,80,80,0,0,0,0,80,80,336,80,112,96,352,96,112,80,336,80,80,0,0,80,80,336,80,80,96,96,352,96,96,80,80,336,80,80,0,80,336,80,80,0,96,96,352,96,96,0,80,80,336,80,0,336,80,80,0,0,96,96,352,96,96,0,0,80,80,336],Q=[336,80,80,112,112,112,96,352,96,96,112,112,112,80,336,0,80,336,80,112,112,112,112,352,96,112,112,112,112,336,80,0,80,80,336,112,112,112,112,368,112,112,112,112,368,80,80,0,80,80,80,368,112,112,112,368,112,112,112,368,112,80,80,0,80,80,80,112,368,120,120,376,120,120,368,112,112,80,80,0,0,80,88,120,120,508,252,508,252,508,120,120,120,88,80,0,96,104,252,252,252,252,252,252,252,252,252,252,252,252,104,0,352,352,480,480,488,508,252,0,252,508,488,480,480,480,352,0,96,104,252,252,252,252,252,252,252,252,252,252,252,252,104,0,0,80,88,120,120,508,252,508,252,508,120,120,120,88,80,0,80,80,80,112,368,120,120,376,120,120,368,112,112,80,80,0,80,80,80,368,112,112,112,368,112,112,112,368,112,80,80,0,80,80,336,112,112,112,112,368,112,112,112,112,368,80,80,0,80,336,80,112,112,112,112,352,96,112,112,112,112,336,80,0,336,80,80,112,112,112,96,352,96,96,112,112,112,80,336],J=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,33,16,31,15,0,0,0,0,0,0,0,0,0,0,0,18,17,16,15,14,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,-14,-15,-16,-17,-18,0,0,0,0,0,0,0,0,0,0,0,-15,-31,-16,-33,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],Y=[0,5,8,11,14],Z=[31,7,7,7,63],X={P:0,p:0,N:5,n:5,B:8,b:8,R:11,r:11,Q:14,q:14},ee=[v,b,_,E,O],te=["","N","B","R","Q"],ne={CAPTURE:1,BIG_PAWN:2,EP_CAPTURE:4,ANY_CAPTURE:5,PROMOTION:8,KSIDE_CASTLE:16,QSIDE_CASTLE:32,KQSIDE_CASTLE:48,DROP:64,DROP_OR_PROMOTE:72},ae=[0,6,1],re={K:119,Q:112,k:7,q:0,A:112,B:113,C:114,D:115,E:116,F:117,G:118,H:119,a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},oe=["Event","Site","Date","Round","White","Black","Result"],ie=["Event","Site","Date","Round","White","Black","Result","Variant","SetUp","FEN","WhiteA","WhiteB","BlackA","BlackB"];function rank(e){return e>>4}function file(e){return 7&e}function algebraic(e){return String.fromCharCode(file(e)+97)+(8-rank(e))}function swapColor(e){return 3-e}function hashNum(e,t){e[0]=(e[0]^t[0])>>>0,e[1]=(e[1]^t[1])>>>0}function completeFen(e){var t,n;return(t=[""," w - - 0 1"," - - 0 1"," - 0 1"," 0 1"," 1"][(n=(e=e.trim()).split(" ")).length])&&e?e+=t:"0"===n[5]&&(n[5]=1,e=n.join(" ")),e}function createVariantZobristNumbers(){a.zobristCheck=[[441249556,340005552],[1040760204,311043682],[1621584863,1749286446],[1006868636,1625552915],[1953853171,24921145],[161251506,1935545265]]}function validateFen(e,t){var n,a,r,i,s,c,l,u,d,f,m,p,h,g,v,b,_,E,O,y,N=/^(?:[A-H]{1,2}[a-h]{0,2}|[A-H]{0,2}[a-h]{1,2}|KQ?k?q?|Qk?q?|kq?|q|-)$/,S=1*t===o.Crazyhouse||o[t]===o.Crazyhouse||1*t===o.Bughouse||o[t]===o.Bughouse,A=0,C=0,T=!0,I="",L={0:0,7:0},k={0:0,7:0},M={0:"k",7:"K"},w={0:"r",7:"R"},P=1*t===o.Chess960||o[t]===o.Chess960;if(!e)return 1;if((1*t===o.Bughouse||o[t]===o.Bughouse)&&2===(s=e.split(" | ")).length)return 0===(c=validateFen(s[0],t))&&(c=validateFen(s[1],t)),c;if(s=e.split(/\s+/),(1*t===o["3-check"]||o[t]===o["3-check"])&&7===s.length&&(i=s.pop(),!/^\+[0-3]\+[0-3]$/.test(i)||"+3+3"===i))return 14;if(6!==s.length)return 1;if(/\D|.{7,}|^0|^$/.test(s[5]))return 2;if(/\D|.{7,}|^0.|^$/.test(s[4]))return 3;if(!/^(?:-|[abcdefgh][36])$/.test(s[3]))return 4;if(f=s[2],P){if(!N.test(f))return 12}else if(!/^(?:KQ?k?q?|Qk?q?|kq?|q|-)$/.test(f)){if(void 0!==t||!N.test(f))return 5;P=!0}if("w"!==s[1]&&"b"!==s[1])return 6;if(S&&(s[0]=s[0].replace(/~(?=.*\/)/g,"")),a=s[0].split("/"),S&&9===a.length&&(i=a.pop(),!/^[pnbrq]{0,63}$/i.test(i)))return 13;if(8!==a.length)return 7;if("3"===s[3][1]&&"w"===s[1]||"6"===s[3][1]&&"b"===s[1])return 11;for("-"!==s[3]&&(l=4===(C="3"===s[3][1]?4:3)?5:2,A=s[3].charCodeAt(0)-97,T=!1,I=4===C?"P":"p"),n=0;n<a.length;++n){for(E=0,O=!1,y=0;y<a[n].length;y++)if(+(r=a[n][y])==+r){if(O)return 8;E+=1*r,O=!0}else{if(-1===B.indexOf(r))return 9;if(T||C!==n||A!==E||I!==r||(T=!0),l===n&&A===E)return 11;n%7==0&&(r===M[n]?k[n]=1<<E:r===w[n]&&(L[n]|=1<<E)),++E,O=!1}if(8!==E)return 10}if(!T)return 11;if("-"!==f)if(P)for(p={0:0,1:0,2:252,4:248,8:240,16:224,32:192,64:128,128:0},m={0:0,1:0,2:1,4:3,8:7,16:15,32:31,64:63,128:0},_={0:[0,0],7:[0,0]},n=f.length-1;n>=0;--n){if(v=f.charCodeAt(n),b&&b>v&&b-v<8)return 15;if(75===v?h=L[g=7]&p[k[g]]:81===v?h=L[g=7]&m[k[g]]:107===v?h=L[g=0]&p[k[g]]:113===v?h=L[g=0]&m[k[g]]:(h=1<<v-((g=v>=97?0:7)?65:97),b=v),!h||0!=(h&h-1))return 15;if(k[g]<2||k[g]>64||(h&L[g])!==h)return 15;if(++_[g][1*(k[g]<h)]>1)return 15}else{if((u=(f.indexOf("K")>-1?128:0)|(f.indexOf("Q")>-1?1:0))&&(16!==k[7]||(u&L[7])!==u))return 15;if((d=(f.indexOf("k")>-1?128:0)|(f.indexOf("q")>-1?1:0))&&(16!==k[0]||(d&L[0])!==d))return 15}return 0}function handToString(e,t){var n,a,r="",o=0,i=t?6:0;if(e)for(;o<5;){for(n=e>>Y[o]&Z[o],a=0;a<n;++a)r+=B[o+i];++o}return r}function hashEP(e,t,n,r){e[n+1]!==r&&e[n-1]!==r||hashNum(t,a.zobristEnPassant[file(n)])}function addPawnMove(e,n,a){var r;(0===t||l[n]&k)&&(rank(n)%7==0?(r=a|ne.PROMOTION|e<<P|n<<D,u[f++]=r|4<<R,u[f++]=r|3<<R,u[f++]=r|2<<R,u[f++]=r|1<<R):u[f++]=a|e<<P|n<<D)}function kingOfTheHillWin(e){switch(e){case 67:case 68:case 51:case 52:return!0}return!1}function canCastle960(e,t,n,a){var r,o,i,s=t+(n-t%8),c=n>t%8?1:-1;for(i=t+c;i!==s;i+=c)if(e[i])return!1;if(o=(r=a===h?1===c?118:114:1===c?6:2)-c,l[r]||e[r]&&r!==t&&r!==s||e[o]&&o!==t&&o!==s)return!1;if(r!==t)for(i=t+(c=r>t?1:-1);i!==r;i+=c)if(i!==s&&e[i]||l[i])return!1;return!0}var se=function(){function createHeader(e,t){return"["+e+' "'+String(t).replace(/(\"|\\)/g,"\\$1")+'"]'}return function generatePgn(e,t,n,a,r,i){var s,c,l="string"==typeof e.newline?e.newline:"\n",u=void 0===e.spaceAfterPeriods||e.spaceAfterPeriods,d="";for(s in d+=createHeader("Event",t.Event)+l,d+=createHeader("Site",t.Site)+l,d+=createHeader("Date",t.Date)+l,d+=createHeader("Round",t.Round)+l,r===o.Bughouse?(d+=createHeader("WhiteA",t.WhiteA||"?")+l,d+=createHeader("BlackA",t.BlackA||"?")+l,d+=createHeader("WhiteB",t.WhiteB||"?")+l,d+=createHeader("BlackB",t.BlackB||"?")+l):(d+=createHeader("White",t.White)+l,d+=createHeader("Black",t.Black)+l),d+=createHeader("Result",t.Result)+l,r&&(d+=createHeader("Variant",t.Variant)+l),t.FEN&&t.FEN!==F&&(d+=createHeader("SetUp","1")+l,d+=createHeader("FEN",t.FEN)+l),t)-1===ie.indexOf(s)&&(d+=createHeader(s,t[s])+l);if(d+=l,c=function createLine(e,t,n,a,r,i){var s,c,l,u,d,f,m,p,v,b,_,E,O=[],y="",N=!0,S=t[n],A=S.length,C="";if(S.commands&&!i)for(d in S.commands)C+="[%"+d+" "+S.commands[d]+"]";for(S.initComment&&(C=(C+" "+S.initComment.replace(/(\"|\}|\%|\\)/g,"\\$1")).trim()),C&&O.push("{"+C+"}"),l=0;l<A;++l){if(m=(c=S[l]).color===h,y="",C="",s=c.commands,a!==o.Bughouse?(N&&!m?y=e+"...":m&&(y=e+"."),r&&(m||N)&&(y+=" ")):(O.bughouseOrder||(O.bughouseOrder=[]),O.bughouseOrder.push(c.bughouseOrder),l||(O.blackCountOffset=S[0].color===g?1:0)),y+=c.san,c.annotation&&(y+=c.annotation),c.additionalAnnotation&&(y+=" "+c.additionalAnnotation.join(" ")),N=!1,void 0===c.time||s||(s={clk:(b=c.time,_=void 0,E=void 0,_=Math.floor(b%36e3/600),E=Math.floor(b%36e3%600)/10,Math.floor(b/36e3)+":"+(_<10?"0":"")+_+":"+(E<10?"0":"")+E)}),s&&!i)for(d in s)C+="[%"+d+" "+s[d]+"]";if(c.comment&&(C=(C+" "+c.comment.replace(/(\"|\}|\%|\\)/g,"\\$1")).trim()),C&&(y+=" {"+C+"}",N=!0),O.push(y),c.lines)for(p=c.lines.length,u=0;u<p;++u)t[v=c.lines[u]].length&&((f=createLine(e,t,v,a,r,i))[0]="("+f[0],f[f.length-1]+=")",O=O.concat(f),N=!0);m||e++}return O}(a,n,0,r,u,e.hideCommands),r===o.Bughouse){if(i.isDependent)return c;c=function makeBugHousePgn(e,t,n){var a=t,r=e.siblingGame.pgn(),o=0,i=0,s=[];for(t.bughouseOrder=t.bughouseOrder||[],r.bughouseOrder=r.bughouseOrder||[];t.bughouseOrder.length||r.bughouseOrder.length;)!t.bughouseOrder.length||r.bughouseOrder.length&&t.bughouseOrder[0]>r.bughouseOrder[0]?(r.bughouseOrder.shift(),s.push("B")):(t.bughouseOrder.shift(),s.push("A"));return t=[],s.forEach(function(s){var c,l,u,d="";"A"===s?(c=a,l=++o,u=e.startingMoveNumber()):(c=r,l=++i,u=e.siblingGame.startingMoveNumber()),d=String(Math.floor((l+1)/2)+u-1),(c.blackCountOffset+l)%2?d+=s:d+=s.toLowerCase(),d+="."+(n?" ":"")+c.shift(),t.push(d)}),t}(i,c,u)}return c.push(t.Result),d+function wordWrap(e,t,n){return t<1?e:(t="number"==typeof t?t:80,e.replace(new RegExp("(.{1,"+t+"})(?: |$|\r?\n)","g"),"$1"+n).slice(0,-n.length))}(c.join(" "),e.maxWidth,l)}}(),ce=function(){var e="!?‼⁇⁉⁈□∇Δ∞⩲⩱±∓⨀⟳→↑⇆∆⌓⇔⇗⟫⟪✕⊥⊕○⇄↻⊙~",t=/\[%(\S+)\s([^\]]+)\]/,n=/^(?:[+=~\/\-\u2212]+|T?N|RR|D)$/;function extractCommands(e){var n,a,r={};do{(n=t.exec(e.value))&&(a=!0,e.value=e.value.replace(n[0],"").trim(),r[n[1]]=n[2])}while(n);a&&(e.commands=r)}function isSplitGame(e,t,n){for(var a;++t<n;)if(a=e[t].match(/^\s*(\S+)/))return/^(?:\[|1(?:\.|$))/.test(a[1])}return function tokenize(t,a){var r,o,i,s,c,l,u,d="tags",f=[],m={type:d,value:""},p=0,h=[],g=!0;for(a=a||{},s=(r=t.split(/\r?\n/)).length,o=0;o<s;++o)if("%"!==(i=r[o].trim())[0])if(i){if(l=(i=" "+i+" ").length,c=0,g)for(;c<l;++c)if(u=i[c],"tags"===d){if("["===u)m={type:d="tagName",value:""};else if(u.trim()){m={type:d="san",value:""},g=!1;break}}else if("tagName"===d)m.value&&""===u.trim()?(f.push(m),d="tagValueStart"):" "!==u&&(m.value+=u);else if("tagValueStart"===d){if('"'===u||"“"===u)m={type:d="tagValue",value:""};else if(u.trim())return!1}else if("tagValue"===d)'"'===u||"”"===u?(f.push(m),"]"===i[c+1]?(m={type:d="tags",value:""},++c):d="tagEnd"):("\\"===u&&c+2<l&&(u=i[++c]),c>0&&(m.value+=u));else if("]"===u)m={type:d="tags",value:""};else if(u.trim())return!1;for(;c<l;++c)if(u=i[c],"san"===d)if(e.indexOf(u)>-1)"!"===u||"?"===u||e.indexOf(u)<6&&(u=["!!","??","!?","?!"][e.indexOf(u)-2])?(m.value&&f.push(m),m={type:"a",value:u},"!"!==i[c+1]&&"?"!==i[c+1]||(m.value+=i[++c]),f.push(m),m={type:"san",value:""}):("∞"===u&&"=/"===m.value?(m.type="aa",m.value+=u):(m.value&&(n.test(m.value)&&("--"!==m.value||a.rejectNullMoves)&&(m.type="aa"),f.push(m)),m={type:"aa",value:u},"↑"===u&&"↑"===i[c+1]&&(m.value="↻",++c)),f.push(m),m={type:"san",value:""});else if(" "===u||"\t"===u||"\n"===u||"\r"===u||"{"===u||"("===u||")"===u){if(m.value){if("$"===m.value[0])m.type="nag";else if("*"===m.value||"1-0"===m.value||"0-1"===m.value||"1/2-1/2"===m.value||"½-½"===m.value){if(c+1<l)return!1;m.type="result","½-½"===m.value&&(m.value="1/2-1/2")}n.test(m.value)&&("--"!==m.value||a.rejectNullMoves)&&(m.type="aa"),f.push(m),m={type:d,value:""}}if(" "===u||"\t"===u||"\n"===u||"\r"===u)d="san";else if("{"===u)d="comment";else if("("===u)d="san",f.push({type:"variationStart",value:++p});else if(f.push({type:"variationEnd",value:p}),d="san",!p--)return!1;m.type=d}else if("."===u||!m.value&&+u==+u&&"-"!==i[c+1]&&"/"!==i[c+1]){if(+u==+u)switch(m.number||(m.number=""),m.number+=u,i[c+1]){case"A":case"a":case"B":case"b":m.number+=i[++c],f.push({type:"number",value:m.number}),delete m.number}}else m.value+=u;else 0===c&&(m.value=m.value.trim()),"}"!==u?("\\"===u&&c+2<l&&(u=i[++c]),m.value+=u):(m.value=m.value.trim(),m.value.indexOf("[")>-1&&extractCommands(m),f.push(m),m={type:d="san",value:""})}else"tags"===d?(d="san",g=!1):"comment"!==d&&"tagValueStart"!==d&&!p&&f.length&&isSplitGame(r,o,s)&&("tagValue"!==f[f.length-1].type&&(h.push(f),f=[]),d="tags",g=!0);return h.push(f),h}}();function Chess(ie,le){var ue,de,fe=0,me=!0,pe=[],he=h,ge=[],ve=p,be=0,_e=1,Ee=1,Oe=[],ye=[Oe],Ne=0;Oe.id=Ne;var Se={},Ae=[],Ce=!1,Te=!1,Ie=makeMoveChess;function hashPosition(){var e,t,n,r=he===h?[4174784170,2938602761]:[0,0];for(n=0;n<120;++n)136&n&&(n+=8),(e=de[n])&&hashNum(r,a.zobristPiece[64*a.zobristPieceValueNumbers[e&A]+8*(7-rank(n))+file(n)]);if(Te)for(t=1;t<3;++t)ge[t]&&(0!=(ge[t]&ge[t]-1)?(hashNum(r,a.zobristCastle[t-1]),hashNum(r,a.zobristCastle[t+1])):ge[t]>1<<file(pe[t])?hashNum(r,a.zobristCastle[t-1]):hashNum(r,a.zobristCastle[t+1]));else{for(t=1;t<3;++t)ge[t]&&(ge[t]&ne.KSIDE_CASTLE&&hashNum(r,a.zobristCastle[t-1]),ge[t]&ne.QSIDE_CASTLE&&hashNum(r,a.zobristCastle[t+1]));Ce?function hashHand(e,t){var n,r,o,i,s,c,l,u=0;for(n=1;n<3;++n){if(r=t[n])for(o=0;o<5;){for(s=u+63*o,i=r>>Y[o]&Z[o],c=0;c<i;++c)hashNum(e,[31*(l=a.zobristPiece[s++])[0]>>>0,17*l[1]>>>0]);++o}u=315}}(r,ue._hand):fe===o["3-check"]&&function hash3Check(e,t){t[h]&&hashNum(e,a.zobristCheck[t[h]-1]),t[g]&&hashNum(e,a.zobristCheck[t[g]+2])}(r,Ae)}return ve!==p&&hashEP(de,r,ve+(he===h?16:-16),v|he),r}function getCurrentHash(){var e;return Oe.length?e=Oe[Oe.length-1].hash:(Oe.hash||(Oe.hash=hashPosition()),e=Oe.hash),[e[0],e[1]]}function setVariant(e,t){fe!==(fe=e?o[e]||1*e||o[String(e).replace(/ /g,"").toLowerCase()]||o.Chess:0)&&(fe===o.Bughouse?(Ce=!0,ue.isDependent||(ue.siblingGame=Chess(),ue.siblingGame.hashing(me),ue.siblingGame.isDependent=!0,ue.siblingGame.siblingGame=ue,ue.siblingGame.header({Variant:"Bughouse"})),createVariantZobristNumbers(),Ie=makeMoveVariant):(delete ue.siblingGame,Ce=fe===o.Crazyhouse,Te=fe===o.Chess960,fe?(createVariantZobristNumbers(),Ie=makeMoveVariant):Ie=makeMoveChess),t||updateSetup(generateFen()))}function disambiguate960Rook(e,t){for(var n,a,r=e>7?h:g;!(136&e);){if((n=de[e])&r)if(n&E){if(a)return;a=e%8+(r===h?65:97)}else if(n&y)return a;e+=t}}function _clear(e,t,n){de=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],he=h,pe[h]=p,pe[g]=p,ge[h]=0,ge[g]=0,ue._hand[h]=0,ue._hand[g]=0,Ae[h]=0,Ae[g]=0,ve=p,be=0,_e=1,t||(ye=[Oe=[]],Ne=0,Oe.id=Ne,Se={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},e?setHeader(["Variant",e]):setVariant(!1,n),n||updateSetup(generateFen()))}function reset(){_clear(0,!1,!0),Oe.hash=[1178310168,378666140],de=[34,10,18,66,130,18,10,34,0,0,0,0,0,0,0,0,6,6,6,6,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,5,5,5,5,5,5,5,0,0,0,0,0,0,0,0,33,9,17,65,129,17,9,33],Ee=1,pe[h]=116,pe[g]=4,ge[h]=48,ge[g]=48}function load(e,t,n,a){var r,s,l,u,d,f,m,b,_,O,S,A,C=0;if(a?(A=(r=e.split(" "))[3],S=r[2]):(A=(r=e.trim().split(/\s+/))[3]||"-",S=r[2]||"-"),void 0===t?(31&S.charCodeAt(0))<9&&setVariant(o.Chess960,!0):setVariant(t,!0),s=r[0],!a&&!(s=function fixFenPieces(e,t){var n,a,r=e.length,i=0,s=0,c=t&&(t===o.Crazyhouse||t===o.Bughouse);for(n=0;n<r;++n)if(+(a=e[n])!=+a)if("/"===a){if(8!==s&&(e=e.substr(0,n)+(8-s)+e.substr(n),++n,++r),s=0,++i>7){if(!c&&n<r-1||!/^[pnbrq]{0,63}$/i.test(e.substr(n+1)))return!1;break}}else if(x[a]){if(++s>8)return!1}else{if("~"!==a)return!1;c&&n&&/[nbrq]/i.test(e[n-1])||(e=e.substr(0,n)+e.substr(n+1),--n,--r)}else(s+=1*a)>8&&(e=e.substr(0,n)+(a-(s-8))+e.substr(n+1),s=8);return e}(s,fe)))return!1;if(u=s.length,_clear(i[fe],n,!0),Ce){if(fe===o.Bughouse&&!ue.isDependent&&(f=e.split(" | "),!ue.siblingGame.load(1===f.length?e:f[1],t,n,a)))return reset(),!1;for(d=0;d<u;++d)if(+(m=s[d])!=+m)if("/"===m){if(C>111){for(++d;d<u;++d)m=s[d],ue._hand[m<"a"?h:g]+=1<<X[m]>>>0;break}C+=8}else de[C]=x[m],"~"===s[d+1]&&(++d,de[C]|=T),de[C]&y&&(pe[de[C]&N]=C),++C;else C+=1*m}else for(d=0;d<u;++d)+(m=s[d])!=+m?"/"===m?C+=8:(de[C]=x[m],de[C]&y&&(pe[de[C]&N]=C),++C):C+=1*m;if(he="b"===r[1]?g:h,"-"!==S)if(Te){for(_={1:[0,0],2:[0,0]},d=S.length-1;d>=0;--d)75===(l=S.charCodeAt(d))?l=disambiguate960Rook(119,-1):81===l?l=disambiguate960Rook(112,1):107===l?l=disambiguate960Rook(7,-1):113===l&&(l=disambiguate960Rook(0,1)),b=l<97?h:g,O=re[String.fromCharCode(l)],(m=de[O])===(E|b)&&(l>=97?pe[b]>=1&&pe[b]<=6&&(ge[b]|=1<<l-97):pe[b]>=113&&pe[b]<=118&&(ge[b]|=1<<l-65),++_[b][1*(pe[b]<O)]);(_[h][0]>1||_[h][1]>1)&&(ge[h]=0),(_[g][0]>1||_[g][1]>1)&&(ge[g]=0)}else{if(!a)for(d=S.length-1;d>=0;--d)m=de[re[S[d]]],b=S.charCodeAt(d)<97?h:g,m===(E|b)&&pe[b]===(b===h?116:4)||(S=S.substr(0,d)+S.substr(d+1)||"-");for(d=S.length-1;d>=0;--d)switch(S[d]){case"K":ge[h]|=ne.KSIDE_CASTLE;break;case"Q":ge[h]|=ne.QSIDE_CASTLE;break;case"k":ge[g]|=ne.KSIDE_CASTLE;break;case"q":ge[g]|=ne.QSIDE_CASTLE}}return!a&&(2!==A.length||he===h&&"6"!==A[1]||he===g&&"3"!==A[1]||de[A.charCodeAt(0)-97+16*(8-("3"===A[1]?4:5))]!==(v|swapColor(he))||de[c[A]])&&(A="-"),ve="-"===A?p:c[A],be=1*r[4]||0,_e=1*r[5]||1,fe===o["3-check"]&&(r[6]&&"+3+3"!==r[6]&&(f=r[6].match(/^\+([0-3])\+([0-3])$/)),f=f||[0,0,0],Ae[h]=1*f[1],Ae[g]=1*f[2]),n||(Ee=_e,updateSetup(generateFen())),!0}function generateFen(){return fe?function generateVariantFen(){var e,t,n,a=0,r="",i="";for(e=0;e<120;++e)136&e&&(a&&(r+=a),r+="/",a=0,e+=8),(n=de[e])?(a&&(r+=a,a=0),r+=G[n&A],Ce&&n&T&&(r+="~")):++a;if(a&&(r+=a),Ce&&(r+="/"+handToString(ue._hand[h],!0)+handToString(ue._hand[g])),Te){for(t=ge[g],e=0;t;)1&t&&(i=String.fromCharCode(e+97)+i),t>>=1,++e;for(t=ge[h],e=0;t;)1&t&&(i=String.fromCharCode(e+65)+i),t>>=1,++e}else ge[h]&ne.KSIDE_CASTLE&&(i+="K"),ge[h]&ne.QSIDE_CASTLE&&(i+="Q"),ge[g]&ne.KSIDE_CASTLE&&(i+="k"),ge[g]&ne.QSIDE_CASTLE&&(i+="q");return r+=" "+(he===h?"w":"b")+" "+(i||"-")+" "+(ve===p?"-":algebraic(ve))+" "+be+" "+_e,fe===o["3-check"]?r+=" +"+Ae[h]+"+"+Ae[g]:fe!==o.Bughouse||ue.isDependent||(r+=" | "+ue.siblingGame.fen()),r}():function generateStandardFen(){var e,t,n=0,a="",r="";for(e=0;e<120;++e)136&e&&(n&&(a+=n),a+="/",n=0,e+=8),(t=de[e])?(n&&(a+=n,n=0),a+=G[t&A]):++n;return n&&(a+=n),ge[h]&ne.KSIDE_CASTLE&&(r+="K"),ge[h]&ne.QSIDE_CASTLE&&(r+="Q"),ge[g]&ne.KSIDE_CASTLE&&(r+="k"),ge[g]&ne.QSIDE_CASTLE&&(r+="q"),a+=" "+(he===h?"w":"b")+" "+(r||"-")+" "+(ve===p?"-":algebraic(ve))+" "+be+" "+_e}()}function setHeader(e){var t,n,a;for(t=0;t<e.length;t+=2)n=e[t],a=e[t+1],n&&("Variant"===n&&(setVariant(a),a=fe?i[fe]:void 0),"Result"===n&&"*"!==a&&"1-0"!==a&&"0-1"!==a&&"1/2-1/2"!==a&&(a="*"),void 0!==a?Se[n]=String(a):oe.indexOf(n)>-1?Se[n]="Date"===n?"????.??.??":"?":delete Se[n]);return Se}function updateSetup(e){Oe.length>0||Ne||(e!==F?(Se.SetUp="1",Se.FEN=e,Oe.hash=null):(delete Se.SetUp,delete Se.FEN,Oe.hash=[1178310168,378666140]))}function get(e){var t=de[c[e]];return t?{type:G[t&S|g],color:t&N,promoted:0!=(t&T)}:null}function calculateLegalMoveInfo(a,o){var i,s,c,u,d,f,m,h,g,b,_,E,O,N,A=he,T=y|A,P=l;if(e=[],t=0,n=0,r=0,P[0]=P[1]=P[2]=P[3]=P[4]=P[5]=P[6]=P[7]=P[16]=P[17]=P[18]=P[19]=P[20]=P[21]=P[22]=P[23]=P[32]=P[33]=P[34]=P[35]=P[36]=P[37]=P[38]=P[39]=P[48]=P[49]=P[50]=P[51]=P[52]=P[53]=P[54]=P[55]=P[64]=P[65]=P[66]=P[67]=P[68]=P[69]=P[70]=P[71]=P[80]=P[81]=P[82]=P[83]=P[84]=P[85]=P[86]=P[87]=P[96]=P[97]=P[98]=P[99]=P[100]=P[101]=P[102]=P[103]=P[112]=P[113]=P[114]=P[115]=P[116]=P[117]=P[118]=P[119]=0,o!==p){for(O=function chooseKingThreats(e,t){return Te&&ge[e]?Q:ge[e]&ne.KSIDE_CASTLE&&!de[t+1]&&!de[t+2]?ge[e]&ne.QSIDE_CASTLE&&!de[t-1]&&!de[t-2]&&!de[t-3]?(r=ne.KQSIDE_CASTLE,W):(r=ne.KSIDE_CASTLE,K):ge[e]&ne.QSIDE_CASTLE&&!de[t-1]&&!de[t-2]&&!de[t-3]?(r=ne.QSIDE_CASTLE,q):z}(A,o),i=0;i<120;++i)if(136&i&&(i+=8),u=de[i])if(u&A)(!a||(0|u)&a)&&e.push(i);else if(0!=((N=O[i-o+119])&u))if(u&v)for(b=V[u],s=1;s<3;++s)136&(h=i+b[s])||(P[h]|=L,h===o&&(++t,P[i]|=k));else for(g=(b=V[u&S]).length,E=u&I,s=0;s<g;++s)if(_=b[s],!(o>(h=i)&&_<0&&o-h>16||o<h&&_>0&&h-o>16))for(;!(136&(h+=_));){if(P[h]|=L,d=de[h]){if(d&A)if(h===o){for(c=h-_;c!==i;c-=_)P[c]|=k;P[i]|=k,++t,E&&0==(136&(h+=_))&&(P[h]|=L)}else if(E&&N&C&&t<2)for(m=h+_;0==(136&m);){if(f=de[m]){f===T&&(P[h]|=M+(Math.abs(_)<<w),++n);break}m+=_}break}if(!E)break}t>1&&(e=[o])}else e=function getPieces(e,t){var n,a,r=[];for(n=0;n<120;++n)136&n&&(n+=8),(a=e[n])&&(a&t)===t&&r.push(n);return r}(de,A|a)}function validateEnPassant(e,n){var a,r,o,i=n+16*(he===h?1:-1);return(1!==t||0!=(l[n]&k)||0!=(l[i]&k))&&(a=de[e],de[n]=a,de[e]=0,r=de[i],de[i]=0,o=inCheck(),de[e]=a,de[n]=0,de[i]=r,!o)}function addCastlingMoves(e){var t,n,a;if(Te){if(ge[e])for(n=(t=pe[e])%8,a=0;a<8;++a)ge[e]&1<<a&&canCastle960(de,t,a,e)&&(u[f++]=(a>n?ne.KSIDE_CASTLE:ne.QSIDE_CASTLE)+(t<<P)+(t+(a-n)<<D),++a)}else r&ne.KSIDE_CASTLE&&(n=(t=pe[e])+2,0===l[t+1]&&0===l[t+2]&&(u[f++]=ne.KSIDE_CASTLE+(t<<P)+(n<<D))),r&ne.QSIDE_CASTLE&&(n=(t=pe[e])-2,0===l[t-1]&&0===l[t-2]&&(u[f++]=ne.QSIDE_CASTLE+(t<<P)+(n<<D)))}function generateMoves(a,r){var o,i,s,c,p,h,g,_,E,O,y=he,N=swapColor(y),A=pe[y];for(calculateLegalMoveInfo(a,A),m=e.length,f=d,E=0;E<m;++E)if(o=e[E],c=de[o],!(t&&n&&l[o]&M))if(c&v)for(h=V[c],0!==n&&0!=(l[o]&M)&&l[o]>>w!=16||(p=o+h[0],0===de[p]&&(addPawnMove(o,p,0),ae[y]===rank(o)&&(p+=h[0],de[p]||addPawnMove(o,p,ne.BIG_PAWN)))),i=1;i<3;++i)136&(p=o+(g=h[i]))||n&&l[o]&M&&l[o]>>w!==Math.abs(g)||(de[p]&N?addPawnMove(o,p,ne.CAPTURE):p===ve&&validateEnPassant(o,p)&&(u[f++]=ne.EP_CAPTURE|o<<P|p<<D));else{if(n&&l[o]&M){if(c&b)continue;if(!($[o-pe[y]+119]&c))continue;h=[g=l[o]>>w,-g]}else h=V[c&S];if(O=o<<P,o===A){for(i=0;i<8;++i)0==(136&(p=o+(g=h[i])))&&(de[p]?de[p]&N&&0==(l[p]&L)&&(u[f++]=ne.CAPTURE|O|p<<D):0==(l[p]&L)&&(u[f++]=O|p<<D));0===t&&addCastlingMoves(y)}else for(s=h.length,_=c&I,i=0;i<s;++i)for(g=h[i],p=o;!(136&(p+=g));){if(de[p]){de[p]&N&&(0===t||l[p]&k)&&(u[f++]=ne.CAPTURE|O|p<<D);break}if((0===t||l[p]&k)&&(u[f++]=O|p<<D),!_)break}}return Ce&&function drop(e,n,a){var r,o,i,s,c;if(!e)for(n&&(n>>=26),s=0;s<5;++s)if((!n||(0|n)==1<<s)&&ue._hand[a]&Z[s]<<Y[s]){for(0===s?(r=16,o=103,i=ne.DROP):(r=0,o=119,i=ne.DROP|s<<R),c=r;c<=o;++c)136&c&&(c+=8),de[c]||(0===t||1===t&&l[c]&k)&&(u[f++]=i|c<<D);if(n)return}}(r,a,y),f}function inCheckAfterMove(e,t,n,a){var r,i,s,c,l,u,d,f;if(fe===o["King of the Hill"]&&e&y&&kingOfTheHillWin(n))return!0;if(a&ne.KQSIDE_CASTLE&&(n=he===h?a&ne.KSIDE_CASTLE?117:115:a&ne.KSIDE_CASTLE?5:3,e=E,f=!0),(r=pe[swapColor(he)])===p)return!1;if(0==(e&y)&&$[n-r+119]&e)for(s=J[n-r+119],l=e&I,c=n+s;0==(136&c);){if(c===r){if(e&v){if((e&N)===h?r-n<0:r-n>0)return!0;break}return!0}if(c!==t&&de[c]||!l)break;c+=s}if(!f){if((i=$[t-r+119])&I&&(s=J[t-r+119])!==J[n-r+119])for(c=r-s;0==(136&c);){if(c!==t&&(u=de[c])){if(u&he&&i&u&&u&I)return!0;break}c-=s}if(a&ne.EP_CAPTURE&&(i=$[(d=n+16*(he===h?1:-1))-r+119])&I)for(c=r-(s=J[d-r+119]);0==(136&c);){if(c!==t&&c!==d){if(c===n)break;if(u=de[c]){if(u&he&&i&u&&u&I)return!0;break}}c-=s}}return!1}function moveToSan(e,t){var n,a,r,i,s,c,l="";return e&ne.KQSIDE_CASTLE?l=e&ne.KSIDE_CASTLE?"O-O":"O-O-O":e&ne.DROP?(r=e>>D&j,(n=e>>R)&&(l+=te[n]),l+="@"+algebraic(r)):(r=e>>D&j,(i=de[a=e>>P&j])&v?(e&ne.ANY_CAPTURE&&(l+=String.fromCharCode(file(a)+97)+"x"),l+=algebraic(r),e&ne.PROMOTION&&(l+="="+te[n=e>>R])):(l+=U[i&A],m>1&&(l+=function getDisambiguator(e,t,n){var a,r,o,i,s,c;if(f<2)return"";for(e&=S,c=0;c<f;++c)if(a=u[c],n===a>>D&&(o=a>>P&j)!==t&&de[o]&e){if(r=!0,rank(t)===rank(o)){if(i)return algebraic(t);s=!0}if(file(t)===file(o)){if(s)return algebraic(t);i=!0}}if(r)return i?String(8-rank(t)):String.fromCharCode(file(t)+97);return""}(i,a,r)),e&ne.ANY_CAPTURE&&(l+="x"),l+=algebraic(r))),t||(e&ne.KQSIDE_CASTLE?(a=e>>P&j,r=e>>D&j):e&ne.DROP_OR_PROMOTE&&(i=ee[n]+he),inCheckAfterMove(i,a,r,e)&&(Ie(e,a,r,n),s=d,d=f,c=m,fe!==o.Chess&&isVariantWin()?l+="#":generateMoves()-d?l+="+":l+="#",f=d,d=s,m=c,reverseMove(Oe.pop()))),l}function kingAttacked(e){return pe[e]!==p&&function attacked(e,t){var n,a,r,o,i=V[b],s=b|e;for(n=0;n<8;++n)if(0==(136&(r=t+i[n]))&&((a=de[r])&s)===s)return!0;for(i=V[y],n=0;n<8;++n)for(r=t+(o=i[n]);0==(136&r);){if(a=de[r]){if(a&e&&$[t-r+119]&a){if(!(a&v))return!0;if(e===h?t-r<0:t-r>0)return!0}break}r+=o}return!1}(swapColor(e),pe[e])}function inCheck(){return kingAttacked(he)}function inCheckmate(){return inCheck()&&0===generateMoves()}function inStalemate(){var e=!inCheck()&&0===generateMoves();return e&&fe===o.Bughouse&&!ue.isDependent&&(e=ue.siblingGame.inStalemate()),e}function insufficientMaterial(e){var t,n,a=0,r=0,o=0;for(n=0;n<120;++n)if(136&n&&(n+=8),t=de[n]){if(e&&0==(t&e))continue;if(100&t)return!1;if(t&b){if(r||a++)return!1}else if(t&_){if(a)return!1;if(++r,(rank(n)+n)%2&&++o,o&&r!==o)return!1}}return!0}function inThreefoldRepetition(){if(be<8)return!1;for(var e,t=getCurrentHash(),n=!1,a=be,r=!1,o=Oe,i=o.length-1;;){if((i-=2)<0){if(o.id){i=o.atMoveNode+i+2,o=ye[o.parentId];continue}if(-2===i)return!1;e=o.hash,r=!0}else e=o[i].hash,o[i].halfMoves>a||a<2?r=!0:a=o[i].halfMoves;if(e[0]===t[0]&&e[1]===t[1]){if(n)return!0;n=!0}if(r)return!1}}function modifyHand(e){var t,n,r,i,s,c,l,u,d,f=e.move;if(fe===o.Crazyhouse||f&ne.DROP?(n=ue._hand,s=e.hash,d=e.color):(n=ue.siblingGame._hand,e.handSibling=!0,me&&((c=ue.siblingGame._history()).length?s=c[c.length-1].hash:(c.hash||(c.hash=ue.siblingGame._hashPosition()),s=c.hash)),d=swapColor(e.color)),e.captured){switch((e.captured&T?v:e.captured&S)&S){case v:l=0;break;case b:l=1;break;case _:l=2;break;case E:l=3;break;default:l=4}t=1<<Y[l],me&&(i=n[d]>>Y[l]&Z[l],u=a.zobristPiece[i+63*l+(d===h?0:315)])}else t=-1<<Y[r=f>>R],me&&(i=n[d]>>Y[r]&Z[r],u=a.zobristPiece[i-1+63*r+(d===h?0:315)]);n[d]+=t,e.handChange=t,me&&hashNum(s,[31*u[0]>>>0,17*u[1]>>>0])}function makeMoveChess(e,t,n,r){var o,i,s,c,l,u,d,f,m=he,b=swapColor(m),_={move:e,epSquare:ve,halfMoves:be,castlingW:ge[h],castlingB:ge[g],color:m},O=m===h;me&&(c=getCurrentHash(),_.hash=c,hashNum(c,a.zobristTurn),ve!==p&&hashEP(de,c,ve+(O?16:-16),v|m)),0==(e&ne.KQSIDE_CASTLE)?Ce&&e&ne.DROP?(de[n]=ee[r]|m,me&&hashNum(c,a.zobristPiece[64*a.zobristPieceValueNumbers[de[n]]+8*(7-rank(n))+file(n)]),modifyHand(_),d=0):(d=de[t],(f=de[n])&&(_.captured=f,me&&hashNum(c,a.zobristPiece[64*a.zobristPieceValueNumbers[de[n]&A]+8*(7-rank(n))+file(n)]),f&E&&ge[b]&&(Te?rank(n)===(O?0:7)&&(s=1<<file(n),ge[b]&s&&(ge[b]^=s,me&&(s>1<<file(pe[m])?hashNum(c,a.zobristCastle[b-1]):hashNum(c,a.zobristCastle[b+1])))):n===(O?7:119)?ge[b]&ne.KSIDE_CASTLE&&(ge[b]^=ne.KSIDE_CASTLE,me&&hashNum(c,a.zobristCastle[b-1])):n===(O?0:112)&&ge[b]&ne.QSIDE_CASTLE&&(ge[b]^=ne.QSIDE_CASTLE,me&&hashNum(c,a.zobristCastle[b+1])))),e&ne.PROMOTION?de[n]=ee[r]|m|T:de[n]=de[t],de[t]=0,me&&(hashNum(c,a.zobristPiece[64*a.zobristPieceValueNumbers[d&A]+8*(7-rank(t))+file(t)]),hashNum(c,a.zobristPiece[64*a.zobristPieceValueNumbers[de[n]&A]+8*(7-rank(n))+file(n)]))):d=y,e&ne.EP_CAPTURE?(O?(u=n+16,l=6):(u=n-16,l=8),_.captured=v|b,de[u]=0,me&&hashNum(c,a.zobristPiece[64*a.zobristPieceValueNumbers[v|b]+8*(l-rank(n))+file(n)])):d&y?(Te?(e&ne.KQSIDE_CASTLE&&(de[n]=0,de[t]=0,e&ne.KSIDE_CASTLE?O?(o=118,i=117):(o=6,i=5):O?(o=114,i=115):(o=2,i=3),de[o]=m|y,de[i]=m|E,me&&(hashNum(c,a.zobristPiece[64*a.zobristPieceValueNumbers[y|m]+8*(7-rank(t))+file(t)]),hashNum(c,a.zobristPiece[64*a.zobristPieceValueNumbers[E|m]+8*(7-rank(n))+file(n)]),hashNum(c,a.zobristPiece[64*a.zobristPieceValueNumbers[y|m]+8*(7-rank(o))+file(o)]),hashNum(c,a.zobristPiece[64*a.zobristPieceValueNumbers[E|m]+8*(7-rank(i))+file(i)]))),me&&(0!=(ge[m]&ge[m]-1)?(hashNum(c,a.zobristCastle[m-1]),hashNum(c,a.zobristCastle[m+1])):ge[m]>1<<file(pe[m])?hashNum(c,a.zobristCastle[m-1]):hashNum(c,a.zobristCastle[m+1])),pe[m]=o||n):(e&ne.KQSIDE_CASTLE&&(de[n]=de[t],de[t]=0,e&ne.KSIDE_CASTLE?(o=n-1,i=n+1):(o=n+1,i=n-2),de[o]=de[i],de[i]=0,me&&(hashNum(c,a.zobristPiece[64*a.zobristPieceValueNumbers[y|m]+8*(7-rank(t))+file(t)]),hashNum(c,a.zobristPiece[64*a.zobristPieceValueNumbers[E|m]+8*(7-rank(i))+file(i)]),hashNum(c,a.zobristPiece[64*a.zobristPieceValueNumbers[y|m]+8*(7-rank(n))+file(n)]),hashNum(c,a.zobristPiece[64*a.zobristPieceValueNumbers[E|m]+8*(7-rank(o))+file(o)]))),me&&(ge[m]&ne.KSIDE_CASTLE&&hashNum(c,a.zobristCastle[m-1]),ge[m]&ne.QSIDE_CASTLE&&hashNum(c,a.zobristCastle[m+1])),pe[m]=n),ge[m]=0):d&E&&ge[m]&&(Te?rank(t)===(O?7:0)&&(s=1<<file(t),ge[m]&s&&(ge[m]^=s,me&&(s>1<<file(pe[m])?hashNum(c,a.zobristCastle[m-1]):hashNum(c,a.zobristCastle[m+1])))):t===(O?119:7)?ge[m]&ne.KSIDE_CASTLE&&(ge[m]^=ne.KSIDE_CASTLE,me&&hashNum(c,a.zobristCastle[m-1])):t===(O?112:0)&&ge[m]&ne.QSIDE_CASTLE&&(ge[m]^=ne.QSIDE_CASTLE,me&&hashNum(c,a.zobristCastle[m+1]))),e&ne.BIG_PAWN?(ve=O?n+16:n-16,me&&hashEP(de,c,n,v|b)):ve=p,d&v||e&ne.ANY_CAPTURE?be=0:be++,he=b,Oe.push(_)}function makeMoveVariant(e,t,n,r){var i,s=he;makeMoveChess(e,t,n,r),i=Oe[Oe.length-1],Ce?(be=i.halfMoves+1,i.captured&&modifyHand(i),fe===o.Bughouse&&(i.bughouseOrder=ue.moveCount()-1+ue.siblingGame.moveCount())):fe===o["3-check"]&&kingAttacked(he)&&(i.checked=!0,me&&Ae[s]&&hashNum(i.hash,a.zobristCheck[Ae[s]+(s===h?-1:2)]),++Ae[s],me&&hashNum(i.hash,a.zobristCheck[Ae[s]+(s===h?-1:2)]))}function reverseMove(e){var t,n,a=he,r=swapColor(a),i=e.move,s=i>>D&j,c=i>>P&j;if(he=r,ge[g]=e.castlingB,ge[h]=e.castlingW,ve=e.epSquare,be=e.halfMoves,fe){if(Te&&i&ne.KQSIDE_CASTLE)return i&ne.KSIDE_CASTLE?r===h?(n=118,t=117):(n=6,t=5):r===h?(n=114,t=115):(n=2,t=3),de[n]=0,de[t]=0,de[c]=r|y,de[s]=r|E,void(pe[r]=c);if(e.handChange&&(fe!==o.Crazyhouse&&e.handSibling?ue.siblingGame._hand[swapColor(r)]-=e.handChange:ue._hand[r]-=e.handChange),i&ne.DROP)return void(de[s]=0);e.checked&&--Ae[r]}i&ne.PROMOTION?(de[c]=v|r,i&ne.CAPTURE?de[s]=e.captured:de[s]=0):(de[c]=de[s],i&ne.KQSIDE_CASTLE?(de[s]=0,i&ne.KSIDE_CASTLE?(t=s+1,n=s-1):(t=s-2,n=s+1),de[t]=r|E,de[n]=0,pe[r]=c):(s===pe[r]&&(pe[r]=c),i&ne.CAPTURE?de[s]=e.captured:(de[s]=0,i&ne.EP_CAPTURE&&(de[s-(r===h?-16:16)]=v|a))))}function beautifyMove(e,t,n){var a,r,o=e>>D&j,i={color:he,to:algebraic(o),flags:e&j};return Ce&&0!=(e&ne.DROP)?(r=e>>R,i.drop=r,i.piece=ee[r]+he):(a=e>>P&j,i.from=algebraic(a),i.piece=de[a],e&ne.PROMOTION&&(r=e>>R,i.promotion=ee[r]+he),e&ne.CAPTURE?i.captured=de[o]:e&ne.EP_CAPTURE&&(i.captured=v|swapColor(he))),i.san=t||moveToSan(e,n),i}function isVariantWin(){return fe===o["3-check"]?3===Ae[swapColor(he)]:fe===o["King of the Hill"]?kingOfTheHillWin(pe[swapColor(he)]):void 0}function isBughouseWin(){if(fe===o.Bughouse)return ue.siblingGame.inCheckmate()}function createVariation(){var e=[],t=generateFen(),n=Oe.length-1,a=Oe[n];return!!a&&(e.parentId=Ne,e.id=ye.length,Oe.curFen=t,a.lines||(a.lines=[]),a.lines.push(e.id),a.move?reverseMove(a):(ve=a.epSquare,--be,he=swapColor(he)),he===g&&--_e,e.atMoveNode=n,e.hash=n?Oe[n-1].hash:Oe.hash,Ne=e.id,ye.push(e),Oe=e,!0)}function selectLine(e){var t=generateFen();Oe.curFen=t,Oe=ye[e],Ne=e,load(Oe.curFen,fe,!0,!0)}return ue={WHITE:h,BLACK:g,PAWN:v,KNIGHT:b,BISHOP:_,ROOK:E,QUEEN:O,KING:y,FLAGS:ne,load:load,reset:reset,moves:function moves(e){var t,n,a,moves=[],r=moveToSan;for(e&&(e.verbose&&(r=beautifyMove),e.type&&(n=e.type|e.type<<24),a=e.noDrop),generateMoves(n,a),t=0;t<f;++t)moves.push(r(u[t]));return moves},inCheck:inCheck,inCheckmate:inCheckmate,inStalemate:inStalemate,isBughouseWin:isBughouseWin,in50MoveRule:function in50MoveRule(){return be>=100},inDraw:function inDraw(){return be>=100||inStalemate()||insufficientMaterial()||inThreefoldRepetition()||Boolean(function isBughouseDraw(){if(fe===o.Bughouse)return ue.siblingGame.in50MoveRule()||ue.siblingGame.inThreefoldRepetition()}())},insufficientMaterial:insufficientMaterial,inThreefoldRepetition:inThreefoldRepetition,isVariantWin:isVariantWin,gameOver:function gameOver(){return ue.inDraw()||inCheckmate()||Boolean(isVariantWin())||Boolean(isBughouseWin())},isPositionValid:function isPositionValid(e){var t,n,a,r=0;if(!1!==(e=e||{}).pawns)for(t=0;t<=119;){if((a=de[t])&v)return!1;8==++t&&(t=112)}if(!1!==e.kings){for(t=0;t<=119;++t)if(136&t&&(t+=8),(a=de[t])&y){if(++r>2)return!1;if(n&&n&a)return!1;n=a&N}if(2!==r)return!1}return!1===e.check||!1===e.kings&&pe[swapColor(he)]===p||!kingAttacked(swapColor(he))},validateFen:validateFen,fen:generateFen,pgn:function pgn(e){return(e=e||{}).useResultHeader||Ne||(isVariantWin()||inCheckmate()?Se.Result=he===g?"1-0":"0-1":ue.inStalemate()?Se.Result="1/2-1/2":isBughouseWin()&&(Se.Result=ue.siblingGame.turn()===h?"1-0":"0-1")),se(e,Se,ye,Ee,fe,ue)},loadPgn:function loadPgn(e,t,n){var a,r,i,s,c,l,u,d,f,m={},p=0;if("number"!=typeof t&&(n=n||t,t=0),n=n||{},"string"==typeof e&&(n.singleGame&&(e=e.replace(/(?:\r?\n\s*){2,}/g,"\n")),e=ue.tokenizePgn(e,n)),t<0&&(t=e.length+t),!(s=e[t]))return!1;for(reset(),r=s.length,a=0;a<r&&"tagName"===(i=s[a]).type;++a){if(!s[a+1]||"tagValue"!==s[a+1].type)return!1;++a,"FEN"===i.value?u=completeFen(s[a].value):m[i.value]=s[a].value}if(m.Variant&&!u&&(u=F),u||"1"===m.SetUp)if("0"===m.SetUp)m.FEN=u;else if(!u||!load(u,m.Variant))return!1;for(ue.header(m),l=(c=ue)._history();a<r;++a)if("san"===(i=s[a]).type&&0===p){if(!c.move(i.value)){if(!n.skipBadLines||!(0!==Ne||Oe.length&&n.allowBadMainLine))return reset(),!1;p=1}}else if("result"===i.type&&"*"===Se.Result)setHeader(["Result",i.value]);else if("a"===i.type&&0===p&&l[l.length-1])l[l.length-1].annotation=i.value;else if("nag"!==i.type&&"aa"!==i.type||0!==p||!l[l.length-1])if("comment"===i.type&&0===p)l.length?(i.value.trim()&&(l[l.length-1].comment=i.value),i.commands&&(l[l.length-1].commands=i.commands,i.commands.clk&&(l[l.length-1].time=(d=i.commands.clk,f=void 0,10*(3600*(f=d.split(":"))[0]+60*f[1]+1*f[2]))))):(l.initComment=String(i.value),i.commands&&(l.commands=i.commands));else if("variationStart"===i.type){if(p>0)++p;else if(!createVariation())return reset(),!1;l=c._history()}else"variationEnd"===i.type?(p>0&&--p,0===p&&(selectLine(l.parentId),l=c._history())):"number"===i.type&&fe===o.Bughouse&&(l=(c=/b/i.test(i.value.slice(-1))?ue.siblingGame:ue)._history());else l[l.length-1].additionalAnnotation||(l[l.length-1].additionalAnnotation=[]),-1===l[l.length-1].additionalAnnotation.indexOf(i.value)&&l[l.length-1].additionalAnnotation.push(i.value);return!0},header:function header(e){return Array.isArray(e)?setHeader(e):"object"===s()(e)?(Object.keys(e).forEach(function(t){setHeader([t,e[t]])}),Se):Se},turn:function turn(e){return e!==h&&e!==g||(he=e),he},move:function playMove(e){var t,n,r,i,s,l,d,m,g,b,_,E,O;if("string"==typeof e){switch(e[i=e.length-1]){case"+":case"#":e=e.substr(0,i)}for(g=B.indexOf(e[0])>6?H[e[0]]:"O"===e[0]?y:v,Ce&&(-1===e.indexOf("@")?b=!0:(b=!1,g<<=24)),generateMoves(g,b),i=0;i<f;++i)if(e===(l=moveToSan(u[i],!0))){n=u[i];break}if(!n)return"--"===e?function makeNullMove(){var e,t={color:he,san:"--",epSquare:ve},n={color:he,san:"--"};return me&&(e=getCurrentHash(),t.hash=e,hashNum(e,a.zobristTurn),ve!==p&&hashEP(de,e,ve+(he===h?16:-16),v|he)),ve=p,be++,(he=swapColor(he))===h&&++_e,Oe.push(t),n}():(e=Chess.fixSanMove(e,de,he))?playMove(e):null;d=n>>P&j,m=n>>D&j,r=n>>R}else{if(e.drop){switch(e.drop){case"p":r=0;break;case"n":r=1;break;case"b":r=2;break;case"r":r=3;break;case"q":r=4;break;default:return null}g=1<<26+r}else{if(e.promotion)switch(e.promotion){case"q":r=4;break;case"n":r=1;break;case"r":r=3;break;case"b":r=2;break;default:return null}d=c[e.from],b=!0,g=de[d]&S}for(m=c[e.to],t=((r?r<<R:0)|m<<D)>>P|d,generateMoves(g,b),i=0;i<f;++i)if(u[i]>>P===t){n=u[i];break}if(!n)return(e=Chess.fixObjMove(e,de,he))?playMove(e):null}return O=n&ne.DROP_OR_PROMOTE?ee[r]+he:de[d],s=beautifyMove(n,l,!0),_=inCheckAfterMove(O,d,m,n),Ie(n,d,m,r),_&&(fe!==o.Chess&&isVariantWin()?s.san+="#":0===generateMoves()?s.san+="#":s.san+="+"),(E=Oe[Oe.length-1]).san=s.san,s.piece&T&&(E.promoted=!0),he===h&&++_e,s},undo:function undo(e){var t=Oe.pop();return t?(he===h&&--_e,t.move?(reverseMove(t),!!e||beautifyMove(t.move,t.san)):(ve=t.epSquare,--be,he=swapColor(he),!!e||{san:"--",color:t.color})):null},clear:function clear(e){_clear(e)},put:function put(e,t,n){var a,r=c[t],o=!1,i=de[r],s=i&N,l=e.color;if(isNaN(r)||!e.type||!l||-1===B.indexOf(e.type))return!1;if(de[r]=H[e.type]|l|(e.promoted?T:0),de[r]&y&&(pe[l]=r),i&&de[pe[s]]&&de[pe[s]]!==(y|s)){for(a=0;a<120;++a)136&a&&(a+=8),de[a]===(y|s)&&(pe[s]=a,o=!0);o||(pe[s]=p)}return n||load(generateFen(),fe,!0,!1),!0},get:get,remove:function remove(e,t){var n,a=de[c[e]],r=get(e),o=a&N;if(de[c[e]]=0,a&y)for(pe[o]=p,ge[o]=0,n=0;n<120;++n)if(136&n&&(n+=8),de[n]===(y|o)){pe[a.color]=n;break}return t||load(generateFen(),fe,!0,!1),r},history:function history(e,t){for(var n,a=[],r=Oe,o=r.length;;){if(-1==--o){if(r.id&&!t){o=r.atMoveNode,r=ye[r.parentId];continue}break}e?((n=beautifyMove(r[o].move,r[o].san)).color=r[o].color,!o&&r.initComment&&(n.firstComment=r.initComment),void 0!==r[o].comment&&(n.comment=r[o].comment),void 0!==r[o].time&&(n.time=r[o].time),void 0!==r[o].annotation&&(n.annotation=r[o].annotation),void 0!==r[o].additionalAnnotation&&(n.additionalAnnotation=r[o].additionalAnnotation),void 0!==r[o].commands&&(n.commands=r[o].commands),void 0!==r[o].captured&&(n.captured=r[o].captured),void 0!==r[o].promoted&&(n.promoted=r[o].promoted),void 0!==r[o].lines&&(n.lines=r[o].lines),void 0!==r[o].bughouseOrder&&(n.bughouseOrder=r[o].bughouseOrder),B.indexOf(r[o].san[0])>6?n.piece=H[r[o].san[0]]:"O"===r[o].san[0]?n.piece=y:n.piece=v,n.piece|=n.color,a.unshift(n)):a.unshift(r[o].san)}return a},hashes:function hashes(){for(var hashes=[],e=Oe,t=e.length;;){if(-1==--t){if(e.id){t=e.atMoveNode,e=ye[e.parentId];continue}e.hash||getCurrentHash(),hashes.unshift(e.hash);break}hashes.unshift(e[t].hash)}return hashes},moveCount:function moveCount(){return Oe.length},startingMoveNumber:function startingMoveNumber(){return Ee},completeFen:completeFen,createVariation:createVariation,selectLine:selectLine,hash:function hash(){var hash=getCurrentHash();return fe!==o.Bughouse||ue.isDependent?hash:[hash,ue.siblingGame.hash()]},hashing:function hashing(e){me=e,fe!==o.Bughouse||ue.isDependent||ue.siblingGame.hashing(me)},hand:function hand(){if(Ce)return handToString(ue._hand[h],!0)+handToString(ue._hand[g])},checks:function checks(){if(fe===o["3-check"])return[Ae[h],Ae[g]]},tokenizePgn:ce,_hand:[],_history:function _history(e){return e&&(Ne=(Oe=e).id),Oe},_lines:function _lines(){return ye},_hashPosition:hashPosition,_board:function _board(){return de}},ie&&load(ie,le)||reset(),ue}return Chess.fixSanMove=function(e,t,n){var a,r,o;if(/0|[?!+#]$|[18][QNRB]$|^P/.test(e))return e.replace(/[?!+#]+$/,"").replace(/0/g,"O").replace(/([18])([QNRB])$/,"$1=$2").replace(/^P/,"");if(r=e.indexOf("=")>0?-4:-2,a=e.substr(r,2),n=swapColor(n),t[c[a]]&n||/^[a-h]x?[a-h]/.test(e)){if(-1===e.indexOf("x"))return e.slice(0,r)+"x"+e.substr(r)}else if(e.indexOf("x")>-1)return e.replace("x","");return(o=e.match(/^([KQNRB]?)([a-h][1-8]?|[1-8])(x?[a-h][1-8])=?(.?)$/))?t[c[o[2]]]?{from:o[2],to:a,promotion:o[4].toLowerCase()}:o[1]+o[3]+o[4]:void 0},Chess.fixObjMove=function(e,t,n){if(t[c[e.from]]===(y|n)&&e.to&&e.from[1]===e.to[1]){if(e.from<e.to)return"O-O";if(e.from>e.to)return"O-O-O"}},Chess}(),o=function ENGINE_MANAGER(e){var t="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",n=["bench","d","eval","flip","isready","perft","ponderhit","stop","uci","ucinewgame"],r=[{cmd:"position",args:["fen","startpos","moves","continuation"]},{cmd:"go",args:["binc","btime","confidence","depth","infinite","mate","mindepth","mintime","maxdepth","maxtime","movestogo","movetime","ponder","searchmoves","shallow","winc","wtime"]}],o=["moves","searchmoves"],i=["ponder","infinite","startpos"],s=/Total Evaluation[\s\S]+\n$/i;function createWebWorker(e,t,n){var a=new Worker(e||"stockfish.js"),r={terminate:function terminate(){a.terminate()},postMessage:postMessage,addEventListener:function addEventListener(e,t){r["on"+e]=t}};function postMessage(e){a.postMessage(e)}return a.onmessage=function(e){r.onmessage(e)},a.onerror=function(o){if(t.pathToNonWasmEngine&&t.pathToNonWasmEngine!==e){o.preventDefault&&o.preventDefault();try{a.terminate()}catch(o){}return(a=createWebWorker(t.pathToNonWasmEngine,t,n)).onmessage=function(e){r.onmessage(e)},function requeue(e){e.length&&e.forEach(function(e){e.message="",postMessage(e.cmd)})}(n._activeCommands()),!1}if(t.onError)return t.onError(o)},r}function parseSearchLine(e){var t,n,a,r,o,i={},s=["lowerbound","upperbound","score"],c=["depth","seldepth","time","nodes","multipv","cp","mate","currmovenumber","hashfull","nps","tbhits","sbhits","cpuload"],l=["depth","seldepth","time","nodes","pv","multipv","score","cp","mate","lowerbound","upperbound","currmove","currmovenumber","hashfull","nps","tbhits","sbhits","cpuload","string","refutation","currline","bestmove","ponder","baseTurn","pvSan","bestmoveSan","ponderSan","bmc"],u=["pv","pvSan","string","refutation","currline"];for(n=(t=e.split(" ")).length,a="info"===t[0]?1:0,i.mtype=t[0];a<n;a+=1)t[a]&&(!o||r&&l.indexOf(t[a])>-1?(o=t[a],s.indexOf(o)>-1?(i[o]=!0,o=null):r=u.indexOf(o)>-1||-1===l.indexOf(o)):(c.indexOf(o)>-1&&(t[a]=Number(t[a])),r?(void 0===i[o]&&(i[o]=[]),i[o].push(t[a])):(i[o]=t[a],o=null)));return"(none)"===i.bestmove&&(i.bestmove=void 0,i.bestmoveSan=void 0),"(none)"===i.ponder&&(i.ponder=void 0,i.ponderSan=void 0),i}function getFirstWord(e){var t=e.indexOf(" ");return-1===t?e:e.substr(0,t)}return function loadEngine(c,l){var u,d,f={},m=function createWorker(e,t){var n=e.pathToNonWasmEngine&&"undefined"==typeof WebAssembly?e.pathToNonWasmEngine:e.enginePath||e.pathToEngineWorker;if(e.pathToWasmEngine&&(n+="#"+e.pathToWasmEngine),"undefined"!=typeof Worker)return createWebWorker(n,e,t)}(c,f),p=[],h=[];function onmessage(t){var n,a,r,o,i,c="string"==typeof t?t:t.data;if(f)if(c.indexOf("\n")>-1)for(o=c.split("\n"),i=0;i<o.length;i+=1)onmessage(o[i]);else if(e.log&&console.log("debug (onmessage): "+c),f.stream&&f.stream(c),p.length&&0!==c.indexOf("No such option")&&0!==c.indexOf("id ")&&0!==c.indexOf("Stockfish")&&0!==c.indexOf("info string variant")&&(a=function determineQueueNum(e,t){var n,a,r,o,i=getFirstWord(e);if("bench"!==t[0].cmd&&"perft"!==t[0].cmd)for(n="uciok"===i||"option"===i?"uci":"readyok"===i||"ready"===i?"isready":"json"===i?"fetch":"bestmove"===i||"info"===i?"go":"other",o=t.length,r=0;r<o;r+=1)if((a=getFirstWord(t[r].cmd))===n||"other"===n&&("d"===a||"eval"===a))return r;return 0}(c,p),r=p[a])){if(r.stream&&!r.discard&&r.stream(c),void 0===r.message?r.message="":""!==r.message&&(r.message+="\n"),r.message+=c,"uciok"===getFirstWord(c))n=!0;else if("readyok"===getFirstWord(c)||"ready"===getFirstWord(c))n=!0,f.ready=!0;else if(0!==c.indexOf("bestmove")&&"bestmove"!==getFirstWord(c)||"bench"===r.cmd)if("d"===r.cmd)0!==c.indexOf("Legal uci moves")&&0!==c.indexOf("Key is")||(r.done=!0,n=!0);else if("fetch json"===r.cmd)try{r.message=JSON.parse(r.message.replace(/^json /gm,"").replace(/\n/g,"")),n=!0}catch(t){}else"eval"===r.cmd?s.test(r.message)&&(n=!0):0===c.indexOf("pawn key")?n=!0:0===c.indexOf("Nodes/second")?n=!0:0===c.indexOf("Unknown command")&&(n=!0);else n=!0,r.message=c;n&&(p.splice(a,1),r.cb&&!r.discard?r.cb(r.message):r.ondiscard&&r.ondiscard())}}function bestMoveSearch(){var n,a,r,o,i,s=1,c=[],l=[],d=null,m=h[0].args,p=h[0].cb,g=h[0].stream,v=m.timeout,b=1,_=14;function convertpv(e){var t=[],n=l[e]||createSanPv(c[e]);return c[e].forEach(function oneach(e,a){t.push({moveSan:n[a],moveLan:e})}),t}function getpv(e,t,n,a){var r;for(r=c.length-1;r>=0;r-=1)if(c[r][0]===e)return convertpv(r);return n?[{moveSan:t,moveLan:e},{moveSan:a,moveLan:n}]:t?[{moveSan:t,moveLan:e}]:[]}function convertScore(e){0===e.mate?(e.mateIn=0,e.cp=-31800*b):(e.mateIn=Number(e.mate*b)||null,"number"!=typeof e.mateIn||isNaN(e.mateIn)||"number"==typeof e.cp?(e.cp*=b,9===Math.abs(e.cp)&&(e.cp=0),m.normalize&&e.depth<=_&&"number"==typeof loadEngine._previousCP&&1===e.multipv&&function normalize(e){var t=.03*Math.pow(32,e.depth/_);e.cp=loadEngine._previousCP+(e.cp-loadEngine._previousCP)*t}(e)):e.cp=31800*b*(e.mate/Math.abs(e.mate))),e.score=e.cp/100}function addBestMoveProps(t){var i;if(t.baseTurn=r,t.cp=n,t.score=n/100,t.mate=a,t.mateIn=d,t.depth=s,t.moveLan=t.bestmove,t.moveLan){if(t.move=e.uciToObj(t.moveLan)[0],!(i=o.move(t.move)))throw new Error("Bad moveLan in line: "+t.moveLan+" at "+o.fen()+"\ndata: "+JSON.stringify(t)+"\nargs: "+JSON.stringify(m));if(t.moveSan=t.bestmoveSan=i.san,t.ponder&&"(none)"!==t.ponder){if(!(i=o.move(e.uciToObj(t.ponder)[0])))throw new Error("Bad ponder in line: "+t.ponder+" at "+o.fen()+"\ndata: "+JSON.stringify(t)+"\nargs: "+JSON.stringify(m));t.ponderSan=i.san,o.undo(!0)}o.undo(!0)}}function createSanPv(t){var n,a,r=t.length,i=[];for(n=0;n<r;++n){if(!(a=o.move(e.uciToObj(t[n])[0])))throw new Error("Bad pv in line: "+t[n]+" ("+n+") at "+o.fen()+"\npv: "+JSON.stringify(t)+"\nargs: "+JSON.stringify(m));i.push(a.san)}for(n=0;n<r;++n)o.undo(!0);return i}function createTimeout(){v&&(clearTimeout(u),u=setTimeout(function(){f.stop(),p&&(p(),p=void 0)},v))}m.timeout=void 0,h[0].started=!0,m.difficulty>=0&&m.difficulty<20?(f.setoption("Skill Level",m.difficulty),m.maximumError>=0&&m.maximumError<=4999&&f.setoption("Skill Level Maximum Error",m.maximumError),m.errorProbability>=1&&m.errorProbability<=128&&f.setoption("Skill Level Probability",m.errorProbability)):f.setoption("Skill Level",20),void 0!==m.contempt?f.setoption("Contempt",m.contempt):f.setoption("Contempt","0"),m.multiPv>1?f.setoption("MultiPV",m.multiPv):f.setoption("MultiPV",1),m.movetime||m.wtime&&m.btime||m.depth||(m.btime=m.btime||72e3,m.wtime=m.wtime||72e3),!m.startpos&&m.fen||m.moves||m.variant?(o=e.createGame({fen:m.fen?(i=m.fen,(i+"").replace(/\[([qrbnp]*)\]/i,"/$1").replace(/([0-3])\+([0-3]) (\d+ \d+)/,function(e,t,n,a){return a+" +"+(3-t)+"+"+(3-n)})):t,moves:m.moves,variant:m.variant,disableHashing:!0})).turn()===o.WHITE?r="w":(r="b",b=-1):(r="w",o=e.createGame({disableHashing:!0})),f.setVariant(m.variant),f.position(m),f.go(m,function returnBestMove(e){var t=parseSearchLine(e);if(addBestMoveProps(t),s>_&&n<5e3&&n>-5e3&&(loadEngine._previousCP=n),t.pv=getpv(t.moveLan,t.moveSan),1===t.pv.length&&t.ponder&&(t.pv=getpv(t.moveLan,t.moveSan,t.ponder,t.ponderSan)),p)try{p(t)}catch(e){console.error(e)}h.shift(),h.length>0&&bestMoveSearch(),clearTimeout(u)},function streamInfo(e){var t=parseSearchLine(e);t.score&&(t.baseTurn=r,convertScore(t),1!==t.multipv&&0!==t.depth||(n=t.cp,a=t.mate,d=t.mateIn)),t.pv&&g&&(t.pvSan=createSanPv(t.pv)),!t.pv||t.lowerbound||t.upperbound||(c.push(t.pv),g&&l.push(t.pvSan)),t.depth>s?s=t.depth:"bestmove"===t.mtype&&addBestMoveProps(t),!g||0===t.mateIn&&t.pv||g(t),createTimeout()}),createTimeout()}function startUp(){f.isready(function onstart(){c.settings?f.uci(function onuci(){Object.keys(c.settings).forEach(function oneach(e){f.setoption(e,c.settings[e])}),l&&l(f)}):l&&l(f)})}return f.send=function(t,n,a){var r;t=String(t).trim(),e.log&&console.log("debug (send): "+t),"ucinewgame"!==t&&"flip"!==t&&"stop"!==t&&"ponderhit"!==t&&0!==t.indexOf("position")&&0!==t.indexOf("setoption")?p[p.length]={cmd:t,cb:n,stream:a}:r=!0,m&&(m.postMessage(t),r&&n&&setTimeout(n,0))},f._activeCommands=function(){return p},f.quit=function(){m&&m.terminate&&(m.terminate(),m=null,f.ready=void 0),clearTimeout(u)},n.forEach(function oneach(e){f[e]=function makeSCmd(t,n){f.send(e,t,n)}}),r.forEach(function oneach(e){f[e.cmd]=function makeCCmd(t,n,a){var r=[e.cmd];d&&t.fen&&(t.fen=function convertStockfishVariantFen(e){return(e+"").replace(/^([^\/]+)((?:\/[^\/]+){7})\/([qrbnp]*)/i,"$1$2[$3]").replace(/( \d+ \d+) \+([0-3])\+([0-3])/,function(e,t,n,a){return" "+(3-n)+"+"+(3-a)+t})}(t.fen)),e.args.forEach(function oneach(e){if(t[e]||0===t[e]){if(o.indexOf(e)>-1){if(!t[e]||!t[e].length)return;Array.isArray(t[e])&&(t[e]=t[e].join(" "))}r.push(e),-1===i.indexOf(e)&&r.push(t[e])}}),f.send(r.join(" "),n,a)}}),f.setoption=function(e,t){f.send("setoption name "+e+" value "+t)},f.setVariant=function(e){var t;e!==d&&(t=String(e).toLowerCase().replace(/ |-/g,""),e&&"chess"!==t?"chess960"===t?(f.setoption("UCI_Variant","chess"),f.setoption("UCI_Chess960","true")):("threecheck"===t&&(t="3check"),f.setoption("UCI_Variant",t),f.setoption("UCI_Chess960","false")):(t=void 0,f.setoption("UCI_Variant","chess"),f.setoption("UCI_Chess960","false")),d=t)},f.loadBook=function(e,t){a.loadBook(e,function onload(n,a){f.book=a,f.pathToBook=e,f.bookLoaded=!0,n&&(console.error("Error loading opening book."),console.error(n),f.pathToBook=null,f.bookLoaded=!1),t()})},f.getBestMove=function(t,n,a){var r;if((t=t||{}).fen=t.fen||t.baseFen,t.is960&&(t.variant="Chess960"),f.bookLoaded&&t.useBook&&(r=function getBookMove(t){var n,a,r;if(r=t.moves&&t.moves.length?e.getFenFromMoves(t.fen,t.moves,t.variant):t.fen,(n=f.book.pick({fen:r,type:void 0!==t.bookPick?t.bookPick:"random",chess960:"Chess960"===t.variant}))&&(e.getLegalMoves(r,t.variant).some(function(e){if(e.from+e.to+(e.promotion||"")===n)return a=e,!0}),a))return{moveSan:a.san,moveLan:n,move:{from:a.from,to:a.to,promotion:a.promotion||null},baseTurn:r.split(" ")[1],pv:[{moveSan:a.san,moveLan:n}],depth:null,score:null,mateIn:null,isBookMove:!0}}(t)))return setTimeout(function(){r.mtype="bestmove",n(r)},0);!function queueBestMoveSearch(e,t,n){h.push({args:e,cb:t,stream:n}),1===h.length&&bestMoveSearch()}(t,n,a)},f.stopAll=function(t){var n,a=p.length,r=0;function ondiscard(){0==(r-=1)&&t()}for(h=[],n=0;n<a;n+=1)e.log&&console.log("debug (stop_moves): "+n,getFirstWord(p[n].cmd)),"go"!==getFirstWord(p[n].cmd)||p[n].discard||(f.stop(),p[n].discard=!0,t&&(r+=1,p[n].ondiscard=ondiscard));t&&!r&&f.isready(t)},f.restartEngine=function(e){return f.stopAll(),f.quit(),p=[],h=[],f.bookLoaded&&!c.book&&((c=JSON.parse(JSON.stringify(c))).book=f.book),loadEngine(c,e)},f.stopFast=function(e,t){var n;f.stopAll(function(){clearTimeout(n),e(f)}),n=setTimeout(function(){f.restartEngine(e)},t||5e3)},"undefined"!=typeof Worker&&(function addListener(){m.addEventListener("message",onmessage,!1)}(),c.book&&(f.book=c.book,f.bookLoaded=!0,f.pathToBook=c.pathToBook),!f.book&&c.pathToBook?f.loadBook(c.pathToBook,startUp):setTimeout(startUp,0),f.getFenFromMoves=e.getFenFromMoves,f.getLegalMoves=e.getLegalMoves,f.getPositionInfo=e.getPositionInfo,f.isFenValid=e.isFenValid,f.ready=!1,f)}},function(){var e,t=r(),n="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",i=252,c=255,l={4:"p",5:"P",6:"p",8:"n",9:"N",10:"n",16:"b",17:"B",18:"b",32:"r",33:"R",34:"r",64:"q",65:"Q",66:"q",128:"k",129:"K",130:"k"},u="pnbrq",d=512,f="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!?{~}(^)[_]@#$,./&-*++=",m="qnrbkp";function decodeTCN(e){var t,n,a,r,o=e.length,i=[];for(t=0;t<o;t+=2)r={},n=f.indexOf(e[t]),(a=f.indexOf(e[t+1]))>63&&(r.promotion=m[Math.floor((a-64)/3)],a=n+(n<16?-8:8)+(a-1)%3-1),n>75?r.drop=m[n-79]:r.from=f[n%8]+(Math.floor(n/8)+1),r.to=f[a%8]+(Math.floor(a/8)+1),i.push(r);return i}function uciToObj(e){var t,n,a=e.split(" "),r=a.length,o=[];if(e)for(t=0;t<r;++t)4===(n=a[t]).length?"@"===n[1]?o.push({drop:n[0].toLowerCase(),to:n.substr(2,2)}):o.push({from:n.substr(0,2),to:n.substr(2,2)}):o.push({from:n.substr(0,2),to:n.substr(2,2),promotion:n[4]});return o}function isSameMove(e,t){return e.san===t.san||e.from==t.from&&e.to==t.to&&e.promotion==t.promotion&&e.drop==t.drop}function makePremove(e,n,a){var o,i,s,c,l,u=e.header().Variant,d=getPremoves(e.fen(),n,u);if(d){for(o=d.length-1;o>=0;--o)if(isSameMove(i=d[o],a)){s=!0;break}if(s)return i.drop?e.put({type:i.drop,color:n},i.to,!0):(c=e.remove(i.from,!0),i.flags===t.FLAGS.KSIDE_CASTLE?(l=e.remove("Chess960"===u?i.to:"h"+i.from[1],!0),e.put(c,"g"+i.from[1],!0),e.put(l,"f"+i.from[1],!0)):i.flags===t.FLAGS.QSIDE_CASTLE?(l=e.remove("Chess960"===u?i.to:"a"+i.from[1],!0),e.put(c,"c"+i.from[1],!0),e.put(l,"d"+i.from[1],!0)):(i.promotion&&(c.type=i.promotion,c.promoted=!0),e.put(c,i.to,!0))),i}if(a.from&&(a=r.fixObjMove(a,e._board(),n)))return makePremove(e,n,{san:a})}function getPieces(e,t){var n,a,r,o=t?{}:[],s=e._board();if(t)for(n=112;n>=0;++n)136&n&&(n-=24),(a=s[n])&&(o[r=f[7&n]+(8-(n>>4))]={type:l[a&i],color:3&a,promoted:0!=(a&d),square:r});else for(n=112;n>=0;++n)136&n&&(n-=24),(a=s[n])&&o.push({type:l[a&i],color:3&a,promoted:0!=(a&d),rank:8-(n>>4),file:1+(7&n)});return o}function makeMoves(e,t,n,a){var r,o,i,s,c,l,u,d,f,m;for(n=n||{},"string"==typeof t&&(t=t.trim().split(" ")),i=t.length,r=0;r<i;r+=1){if(c="b"===t[r].board||"B"===t[r].board?e.siblingGame:e,l="string"==typeof t[r]?uciToObj(t[r])[0]:t[r].san?t[r].san:t[r],!c.move(l)){if(!n.autoPromote){if(n.skipBadLines)break;return!1}if(!0===n.autoPromote?l.promotion="q":l.promotion=n.autoPromote,!c.move(l)){if(n.skipBadLines)break;return!1}}if(d=(u=c._history())[u.length-1],a&&(f=parseInt(a[r],10)),("number"!=typeof f||isNaN(f))&&(f=parseInt(t[r].time,10)),"number"!=typeof f||isNaN(f)||(d.time=f,f=void 0),t[r].firstComment&&(u.initComment=t[r].firstComment),t[r].comment&&(d.comment=t[r].comment),t[r].annotation&&(d.annotation=t[r].annotation),t[r].additionalAnnotation&&(d.additionalAnnotation=t[r].additionalAnnotation),t[r].commands&&(d.commands=t[r].commands),t[r].lines)for(s=t[r].lines.length,o=0;o<s;++o){if(m=e._history().id,e.createVariation(),!makeMoves(e,t[r].lines[o],n)&&!n.skipBadLines)return!1;e.selectLine(m)}}return!0}function createGame(e){var t,a;if((e=e||{}).game)return e.game;if(t=r(),e.analysis&&function extendChess(e){var t,a,o=-1,i=0;function fixContComment(t){var n=e._lines()[t.ids.line];return n.initComment&&(t.comment=(n.initComment+" "+(t.comment||"")).trim(),n.initComment=""),!0}e.extended||(e.extended=!0,t={header:e.header,load:e.load,loadPgn:e.loadPgn,createVariation:e.createVariation,undo:e.undo,pgn:e.pgn},e._move=e.move,e.premoves=[],e.undo=function(){return e.deletePosition(o,i)},e.isLegalMove=function(n){return!!e._move(n)&&t.undo(!0)},e.premove=function(t,n){var a,o=e.premoves.length,i=r();return o?i.load(e.premoves[o-1].fen,e.header().Variant):i.load(e.fen(),e.header().Variant),(a=makePremove(i,n,t))?(e.premoves.push({move:a,pieces:getPieces(i),fen:i.fen()}),a):null},e.getPieces=function(t){return getPieces(e,t)},e.origHistory=e.history,e.history=function(t,n){var a,r,o,i=[],c=e._history(),l=c.length,u=e._lines();for("boolean"==typeof t&&(t={verbose:t}),t=t||{},n&&(t.noParentLines=n),t.toCurrent&&(l=e.ids().move+1);;){if(-1==--l){if(c.id&&!t.noParentLines){l=c.atMoveNode,c=u[c.parentId];continue}break}if(t.verbose){for(r in a={},c[l])if(c[l][r]&&"object"===s()(c[l][r]))for(o in a[r]=c[l][r].constructor===Array?[]:{},c[l][r])a[r][o]=c[l][r][o];else a[r]=c[l][r];i.unshift(a)}else i.unshift(c[l].san)}return i},e._getPos=function(a,r){var s,c;return"number"!=typeof a&&(a=o),"number"!=typeof r&&(r=i),s=(c=e._lines())[r],a>=0?s[a]:s.id?s.atMoveNode?c[s.parentId][s.atMoveNode-1]:e._getPos(s.atMoveNode-1,s.parentId):{fen:t.header().FEN||n,hash:s.hash,initial:!0}},e.move=function(t,n){var a,r,s,c,l=e._history();if(t&&("string"==typeof t||t.to&&(t.from||t.drop))){if(i===l.id&&o<l.length-1||n){if(e.moveForward(n,t))return!0;o<l.length-1&&(e.selectPosition(o+1),e.createVariation(),l=e._history())}e.siblingGame&&(s=e.isDependent?e.siblingGame.fen():e.fen()),(a=e._move(t))&&(normalizeMoveObj(a),i=l.id,r=l[o=l.length-1],c=e._getPos(o-1),e.siblingGame?(e.isDependent?r.fen=e.siblingGame.fen():r.fen=e.fen(),r.beforeFen=s):(r.fen=e.fen(),r.beforeFen=c.fen),c.initial?(r.moveNumber=0,r.previous=null):(r.moveNumber=c.moveNumber+1,r.previous=c.ids,c.isContinuation&&fixContComment(c)),i&&0===o&&e._lines()[l.parentId][l.atMoveNode].move===r.move&&(r.isContinuation=!0),r.flags=a.flags,r.to=a.to,r.from=a.from,r.drop=a.drop,r.capturedStr=a.captured,r.promotion=a.promotion,r.piece=a.piece,a.promoted&&(r.promoted=!0),a.capturedPromotedPawn&&(r.capturedPromotedPawn=!0),r.ids={move:o,line:i})}return a},e.header=e.headers=function(n){var a=t.header(n);return e.siblingGame&&extendChess(e.siblingGame),a},e.load=function(n,a,r,s){var c=t.load(n,a,r,s);return e.siblingGame&&extendChess(e.siblingGame),c&&!r&&(o=-1,i=0),c},e.removeEmptyLines=function(){var t,n,a=e._lines();for(t=a.length-1;t>0;--t)a[t].length||(a[t]=void 0,n=!0);n&&e.reorderLines()},e.loadPgn=function(n,a,r){var s=t.loadPgn(n,a,r),c=e._history();return e.removeEmptyLines(),o=c.length-1,i=c.id,s},e.ids=function(){return{move:o,line:i}},e.selectLine=function(t){e.selectPosition(null,t)},e.moveBackward=function(){var t;if(o<=1)if(0===i){if(-1===o)return!1;e.selectPosition(o-1)}else(t=e._getPos(o-1,i)).isContinuation?e.selectPosition(e._history().atMoveNode,e._history().parentId):t.initial?e.selectPosition(-1,0):e.selectPosition(t.ids.move,t.ids.line);else e.selectPosition(o-1);return!0},e.moveForward=function(t,n){var a,s,c,l,u,d,f=e._lines();if("string"==typeof n&&(n={san:n}),!(a=f[i][o+1])||n&&!isSameMove(n,a)){if(n&&a&&a.lines)for(u=a.lines.length,l=0;l<u;++l)if((c=f[a.lines[l]][0])&&isSameMove(n,c)){a=c,d=!0;break}if(!d&&t&&(s=f[i][o])&&s.lines)for(u=s.lines.length,l=0;l<u;++l)if((c=f[s.lines[l]][0])&&c.isContinuation&&(c=f[s.lines[l]][1])&&(!n||isSameMove(n,c))){a=c,d=!0;break}if(!d)return!!(n&&n.san&&(n=r.fixSanMove(n.san,e._board(),e.turn()))||n&&n.to&&n.from&&Math.abs(n.to.charCodeAt(0)-n.from.charCodeAt(0))>1&&(n=r.fixObjMove(n,e._board(),e.turn())))&&e.moveForward(t,n)}return e.selectPosition(a.ids.move,a.ids.line)},e.moveVariation=function(t,n){var a,r,o,i=e._lines(),s=i[t];if(s&&s.id)for(r=(a=i[s.parentId][s.atMoveNode].lines).length-1;r>=0;--r)if(a[r]===t&&a[o=r-(n?1:-1)])return a[r]=a[o],a[o]=t,e.reorderLines(),!0;return!1},e.promoteVariation=function(t,n){for(var a,r,s,c,l,u,d=e._lines(),f=d[t];f&&f[0]&&f.id&&(-1!==n||f.parentId);){for(a=d[s=f.parentId],c=f.atMoveNode,f[0].lines=a[c].lines.concat(f[0].lines||[]),a[c].lines=void 0,u=a.length-c,r=a.splice(c,u),l=0;l<u;++l)r[l].ids.line=t,r[l].ids.move=l;for(r.id=t,r.parentId=s,r.atMoveNode=c,r.hash=f.hash,0===c?(r.initComment=a.initComment,a.initComment=f.initComment):f.initComment&&(a[c-1].comment=((a[c-1].comment||"")+" "+f.initComment).trim()),d[t]=r,u=f.length,l=0;l<u;++l)f[l].ids.line=s,f[l].ids.move=l+c,a.push(f[l]);for(r[0].isContinuation=!!f[0].isContinuation&&fixContComment(r[0]),a[c].isContinuation=!c&&"number"==typeof a.parentId&&d[a.parentId][a.atMoveNode].move===a[0].move&&fixContComment(a[c]),u=a[c].lines.length,l=0;l<u;++l)d[a[c].lines[l]].atMoveNode=c,d[a[c].lines[l]][0]&&(d[a[c].lines[l]][0].isContinuation=d[a[c].lines[l]][0].move===a[c].move&&fixContComment(d[a[c].lines[l]][0]));if(i===t?(i=s,o+=c):i===s&&o>=c&&(i=t,o-=c),1===n)break;f=d[t=s]}return void 0!==a&&(e._history(d[i]),e.reorderLines(),!o&&d[i][0].isContinuation&&e.selectPosition(d[i].atMoveNode,d[i].parentId),!0)},e.reorderLines=function(t,n){var r,o,s,c,l,u,d,f,m,p,h=e._lines();for(t?m=n.length-1:(t=0,n=[h[0]],m=0,a=!1),s=(r=h[t]).length,o=0;o<s;++o)if((c=r[o]).ids.line=m,c.lines)for(l=c.lines.length,u=0;u<l;++u)(f=h[d=c.lines[u]])?(f.atMoveNode=o,p=n.length,c.lines[u]=p,f.parentId=m,a||d!==i||(a=!0,i=p),n.push(f),e.reorderLines(d,n)):(1===c.lines.length?delete c.lines:c.lines.splice(u,1),--u,--l);t||e.saveLines(n,!0)},e.createVariation=function(){var n,a,r,s,c=e._history(),l=e._lines();return o===c.length-1?(n=t.createVariation(),c=e._history(),o=c.length-1,i=c.id,n):-1!==o&&(a=[],r=c[o],a.parentId=c.id,a.id=l.length,r.lines||(r.lines=[]),r.lines.push(a.id),s=e._getPos(o-1),a.hash=s.hash,a.atMoveNode=o,l.push(a),e.selectPosition(-1,a.id))},e.selectLineEnd=function(t){return"number"!=typeof t&&(t=i),(t!==i||o<e._history().length-1)&&e.selectPosition(null,t,!0)},e.selectLineStart=function(){var t,n;return i?(o>1||1===o&&!e._getPos(0).isContinuation?t=e._history():(n=e._getPos(-1),t=e._lines()[n.ids?n.ids.line:0]),e.selectPosition(t.id?t[1]&&t[0].isContinuation?1:0:-1,t.id)):-1!==o&&e.selectPosition(-1,0)},e.selectPosition=function(n,a,r){var s=e._lines(),c=e._history();if("number"==typeof a&&(a!==i||r)){if(a<0||a>=s.length)return!1;if(c=s[a],"number"!=typeof n)n=c.length-1;else if(n<-1||n>=c.length)return!1;i=a,e._history(c),r=!0}if("number"==typeof n&&(n!==o||r)){if(n<-1||n>=c.length)return!1;t.load(e._getPos(n).fen,t.header().Variant,!0,!0),o=n}return!0},e.resetToMainLine=function(){var t=e._lines();e.selectLineEnd(0),t.length>1&&(t.length=1,e.reorderLines())},e.saveLines=function(t,n){var a,r,o,i=e._lines(),s=t.length;for(t!==i&&(i.length=0),r=0;r<s;++r){if(a=t[r],r&&"number"!=typeof a.parentId)return!1;t!==i&&i.push(a),a.id=r}return n||(o=e.ids(),e.selectPosition(-1,0,!0),e.selectPosition(o.move,o.line)),!0},e.deletePosition=function(t,n){var a,r,s=e._lines();return!(!s[n]||!(s[n][t]||-1===t&&0!==n))&&(n&&(0===t?t=-1:1===t&&s[n][0].isContinuation&&(t=-1)),i>0&&n!==i?r=!1!==(a=function descendsFromMove(e,t,n){for(var a,r=e[t];"number"==typeof(a=r.parentId);){if(a===n)return r.atMoveNode;r=e[a]}return!1}(s,i,n))&&a>=t:n===i&&t<=o&&(r=!0),r&&(t>1?e.selectPosition(t-1,n):(e.selectPosition(s[n][0].isContinuation||1===t?1:0,n),e.moveBackward())),t>0?s[n].length=t:n?s[n]=null:s[0].length=0,e.reorderLines(),e.ids())},e.mark=function(t,n){var a=o<0?e._lines()[i]:e._lines()[i][o],r=t.type,s=1;t.color&&("arrow"===r?e.mark({key:t.color+t.key,type:"cal"},n):"square"===r&&e.mark({key:t.color+t.key,type:"csl"},n)),"cal"!==r&&"csl"!==r&&(r="c_"+r,s=0),a.commands&&a.commands[r]&&(a.commands[r]=a.commands[r].split(",").filter(function rm(e){return e.slice(s).split(";")[0]!==t.key.slice(s)}).join(","),a.commands[r]||delete a.commands[r]),n||(a.commands||(a.commands={}),a.commands[r]=(a.commands[r]?a.commands[r]+",":"")+t.key+(t.data?";"+t.data.join(";"):""))},e.markings=function(){var t,n,a,r,s,c,l,u,d={},f=o<0?e._lines()[i]:e._lines()[i][o],m={cal:"arrow",csl:"square"};for(n in f.commands){if(a=f.commands[n],m[n])n=m[n],r=0;else{if("c_"!==n.substr(0,2))continue;n=n.slice(2),r=1}for(d[n]=d[n]||{},c=(s=a.split(",")).length,t=0;t<c;++t)r?(u=(l=s[t].split(";")).shift(),d[n][u]=d[n][u]||{type:n,key:u},d[n][u].data=l):(u=s[t].slice(1),d[n][u]=d[n][u]||{type:n,key:u},d[n][u].color=s[t][0])}return d},e.clearMarkings=function(){var t,n=o<0?e._lines()[i]:e._lines()[i][o];for(t in n.commands)/^c[sa]l$|^c_/.test(t)&&delete n.commands[t]},e.pgn=function(n){var a,r=e.ids();return e.selectLineEnd(0),a=t.pgn(n),e.selectPosition(r.move,r.line),a},e.loadMoves=function(t,n){var a,r,s;if(n=n||{},"string"==typeof t&&(t=decodeTCN(t)),t){for(n.atCurrent||e.selectPosition(-1,0),s=i,r=t.length,a=0;a<r;++a){if(!e.move(t[a],!0)&&(t[a].promotion=!0===n.autoPromote?"q":n.autoPromote,!e.move(t[a],!0)))return!1;i!==s&&"merge"!==n.method&&(e.promoteVariation(i,1),"promote"!==n.method&&(e._history()[o].lines=void 0,e.reorderLines()),s=i)}"merge"!==n.method&&"promote"!==n.method&&e.deletePosition(o+1,i)}return!0})}(t),e.disableHashing&&t.hashing(!1),e.pgn){if(!t.loadPgn(e.pgn,e.index,e.options))return!1}else{if(e.headers&&(e.variant=e.headers.Variant||e.variant,e.fen||(e.fen=e.headers.FEN)),(e.fen||e.variant)&&!t.load(e.fen||n,e.variant))return!1;e.headers&&"object"===s()(e.headers)&&!Array.isArray(e.headers)&&t.header(e.headers)}if(e.tcn)if("object"===s()(e.tcn)){if(!function playBughouseTCN(e,t,n){var a,r,o,i=[decodeTCN(t[0]),decodeTCN(t[1])],s=[0,0],c=[0,0],l=i[0].length+i[1].length,u=Math.max(0|n[0][0],0|n[0][1],0|n[1][0],0|n[1][1]),d=[0,0],f=[0,0];for(a=[[u+=600-u%600,u],[u,u]];l--;){if(f[0]=d[0]+a[0][c[0]]-n[0][s[0]]||0,f[1]=d[1]+a[1][c[1]]-n[1][s[1]]||0,i[r=f[0]<=f[1]?0:1][s[r]]||(r^=1),(!(o=r?e.siblingGame:e).move(i[r][s[r]])||l&&o.inCheckmate()&&o.undo(!0))&&!(o=(r^=1)?e.siblingGame:e).move(i[r][s[r]]))return!1;o._history()[s[r]].time=n[r][s[r]],a[r][c[r]]=n[r][s[r]],d[r]=f[r],c[r]^=1,++s[r]}return!0}(t,e.tcn,e.timestamps||[[],[]]))return!1}else a=decodeTCN(e.tcn);else a=e.moves;return!(a&&!makeMoves(t,a,e,e.timestamps))&&t}function normalizeMoveObj(e){return e&&(e.piece&d&&(e.promoted=!0),e.piece=l[e.piece&i],e.captured&&(e.captured&d&&(e.capturedPromotedPawn=!0),e.captured=l[e.captured&c]),e.promotion&&(e.promotion=l[e.promotion&i]),void 0!==e.drop&&(e.drop=u[e.drop])),e}function getPremoves(e,n,a){var o,i,s,c,l,d,f,m,p=[];function pawnCapture(e){var a,r=l[0]+"x"+e;if(1===n&&7===o||2===n&&2===o)for(a=4;a>0;--a)p.push({color:n,to:e,flags:t.FLAGS.CAPTURE|t.FLAGS.PROMOTION,from:l,promotion:1<<a+2,piece:4,san:r+"="+u[a].toUpperCase()});else 1===o&&2===n||8===o&&1===n||p.push({color:n,to:e,flags:t.FLAGS.CAPTURE,from:l,piece:4,san:r})}if(1!==n&&2!==n||!t.load(e,a||"chess"))return null;for(e=t.fen(),(c=r()).clear(),a&&c.header({Variant:a}),t.turn(n),c.turn(n),o=1;o<9;++o)for(i=1;i<9;++i)l=String.fromCharCode(i+96)+o,(s=t.get(l))&&(t.remove(l,!0),s.color===n&&("p"===s.type?(i>1&&pawnCapture(String.fromCharCode(i-1+96)+(o+(1===n?1:-1))),i<8&&pawnCapture(String.fromCharCode(i+1+96)+(o+(1===n?1:-1)))):"k"===s.type&&(f=l[0],m=o),c.put(s,l,!0),p=p.concat(c.moves({verbose:!0})),c.remove(l,!0)));return"-"!==(d=e.split(" ")[2])&&d.split("").forEach(function(e){(1===n&&e<"a"||2===n&&e>="a")&&("k"===(e=e.toLowerCase())?p.push({color:n,to:"g"+m,flags:t.FLAGS.KSIDE_CASTLE,from:"e"+m,piece:128,san:"O-O"}):"q"===e?p.push({color:n,to:"c"+m,flags:t.FLAGS.QSIDE_CASTLE,from:"e"+m,piece:128,san:"O-O-O"}):e>f?p.push({color:n,to:e+m,flags:t.FLAGS.KSIDE_CASTLE,from:f+m,piece:128,san:"O-O"}):p.push({color:n,to:e+m,flags:t.FLAGS.QSIDE_CASTLE,from:f+m,piece:128,san:"O-O-O"}))}),(p=p.concat(t.moves({verbose:!0}))).forEach(function(e){normalizeMoveObj(e)}),p}function getLegalMoves(e,n){var a,r,o,i;if("string"==typeof e){if(!(r=t).load(e,n))return null}else r=createGame(e);for(i=(a=r.moves({verbose:!0})).length,o=0;o<i;++o)normalizeMoveObj(a[o]);return a}function jce(t,n){return(e=e||o(jce))(t,n)}return jce.gameFingerprints=function gameFingerprints(e){var t,r,o,i,s,c,l,u,d,f=createGame(e),m=[""],p=[];if(!f)return!1;for(d=(u=f.header()).Variant||"",c=f.hashes(),t="function"==typeof f.origHistory?f.origHistory(!0):f.history(!0),s=c.length,r=[c[0][0],c[0][1]],p.push(a.to64BitHex(r)+d),c[0]=a.to64BitHex(c[0]),o=1;o<s;++o)r[0]=(r[0]^c[o][0]*(o+58465))>>>0,r[1]=(r[1]^c[o][1]*(o+984))>>>0,c[o]=a.to64BitHex(c[o]),p.push(a.to64BitHex(r)+d),normalizeMoveObj(t[i=o-1]),l=(t[i].from?t[i].from:t[i].drop.toUpperCase()+"@")+t[i].to+(t[i].promotion||""),i&&(l=m[i]+" "+l),m.push(l);return{startingFen:u.FEN||n,hashes:c,fingerprints:p,moves:m,variant:u.Variant}},jce.getFenFromMoves=function getFenFromMoves(e,n,a){return t.reset(),t.load(e,a),!(n&&!makeMoves(t,n))&&t.fen()},jce.getLegalMoves=getLegalMoves,jce.getPremoves=getPremoves,jce.getPositionInfo=function getPositionInfo(e,n,a){var r,o,i,s={gameOver:!1,check:!1,checkmate:!1,draw:!1,stalemate:!1,threefold:!1,insufficient:!1};if(Array.isArray(n)||(a=n,n=null),"boolean"==typeof a?(r=a,a={}):r=(a=a||{}).variant,"string"==typeof e){if(0!==(i=t).validateFen(e,r)||!i.load(e,r))return!1}else i=createGame(e);return!(n&&!makeMoves(i,n))&&(a.getLegalMoves?(o=getLegalMoves({game:i}),s.legalMoves=o):o=i.moves(),i.inCheck()?(s.check=!0,s.checkmate=0===o.length):s.stalemate=0===o.length,a.premove&&(a.check=!1,a.kings=!1),s.threefold=i.inThreefoldRepetition(),s.insufficient=i.insufficientMaterial(a.color),s.fiftyMoveRule=i.in50MoveRule(),s.draw=s.stalemate||s.threefold||s.insufficient||s.fiftyMoveRule||i.inDraw(),a.skipValidation||(s.isValid=i.isPositionValid(a)),r&&(s.variantWin=i.isVariantWin(),void 0===s.variantWin&&(s.variantWin=i.isBughouseWin())),s.gameOver=s.checkmate||s.draw||Boolean(s.variantWin),s)},jce.isFenValid=function isFenValid(e,n){return 0===t.validateFen(e,n)},jce.encodeTCN=function encodeTCN(e){var t,n,a,r,o="";for(Array.isArray(e)||(e=[e]),n=e.length,t=0;t<n;t+=1)a=e[t].drop?79+m.indexOf(e[t].drop):f.indexOf(e[t].from[0])+8*(e[t].from[1]-1),r=f.indexOf(e[t].to[0])+8*(e[t].to[1]-1),e[t].promotion&&(r=3*m.indexOf(e[t].promotion)+64+(r<a?9+r-a:r-a-7)),o+=f[a]+f[r];return o},jce.decodeTCN=decodeTCN,jce.uciToObj=uciToObj,jce.generatePgn=function generatePgn(e){var t;return(e=e||{}).disableHashing=!0,!!(t=createGame(e))&&t.pgn(e)},jce.pgnToFen=function pgnToFen(e,n){var a,r,o=[];if(t.reset(),!t.loadPgn(e))return!1;if(a=t.moveCount(),"number"==typeof n){for(n<0&&(n=a+n+1),r=a-1;r>=n&&r>=0;r-=1)t.undo();return t.fen()}for(r=0;r<=a;r+=1)o.unshift(t.fen()),t.undo();return o},jce.pgnToJson=function pgnToJson(e,n,a){var r,o=[],i=t;return"number"!=typeof n&&(a=n,n=void 0),r=i.tokenizePgn(e,a),n<0&&(n=r.length+n),!!r&&(a&&a.includeFen&&(i=createGame({analysis:!0})),r.forEach(function(e,t){var r,s;t===n||void 0===n?i.loadPgn([e],0,a)?(s=function normalizeHistory(e){var t,n,a,r,o,i,s,c=e.history(!0,!0);if(e.siblingGame){for(t=e.siblingGame.history(!0,!0),a=c.length+t.length,n=[],r=0;r<a;++r)!c.length||t.length&&t[0].bughouseOrder<c[0].bughouseOrder?(o=t.shift()).board="b":(o=c.shift()).board="a",n.push(o);c=n}for(a=c.length,r=0;r<a;++r)if((i=c[r]).fen||normalizeMoveObj(i),i.lines)for(s=i.lines.length-1;s>=0;--s)e.selectLine(i.lines[s]),i.lines[s]=normalizeHistory(e).moves;return{moves:c}}(i),r=i.header(),o.push({headers:r,moves:s.moves})):o.push(!1):o.push(void 0)}),"number"==typeof n?o[n]:o)},jce.sanToObj=function sanToObj(e,n,a){return t.reset(),!!t.load(n,a)&&normalizeMoveObj(t.move(e))},jce.completeFen=t.completeFen,jce.shortenFen=function shortenFen(e,n){return t.completeFen(e).split(" ").slice(0,n||4).join(" ")},jce.createGame=createGame,jce.getPositionDetails=function getPositionDetails(e,t){var n,a,r,o;if((e=e||{}).disableHashing=!0,!(n=createGame(e)))return null;if(t)if(e.premove){if(!(r=makePremove(n,e.color,t)))return null}else{if(!(r=n.move(t)))return null;n.extended||normalizeMoveObj(r)}return o=n.fen(),e.premove&&(e.check=!1,e.kings=!1),e.skipValidation||n.isPositionValid(e)?(a=o.split(" "),{fen:o,pieces:getPieces(n),sideToMove:n.turn(),castling:a[2],epSquare:"-"===a[3]?null:a[3],halfMoves:+a[4],moveNumber:+a[5],move:r,hand:n.hand(),checks:n.checks()}):null},jce.predict=function predict(e,t){var n=Math.min(Math.max(.20773843*Math.atan(2.49085889*e/100-2.47841945*t/100)+.02262979*e/100-.02256839*t/100+.52239679,0),1),a=Math.min(Math.max(-.20720905*Math.atan(2.49626837*e/100-2.48220286*t/100)+-.02352551*e/100+.02172627*t/100+.49443923,0),1),r=Math.min(Math.max(Math.exp(.037043456*e/100+.178106427*t/100-8.069742932)+.004823544*Math.exp(-1.364136591*Math.pow(e/100-t/100,2))+-.001625539,0),1),o=n+a+r;return{w:n/o,b:a/o,d:r/o}},jce.FLAGS=t.FLAGS,jce.loadECO=function loadECO(e,t){a.loadBook(e,function onload(e,n){if(!n||!n.json)return t(e||new Error("Invalid book"));t(e,function queryECO(e){var t,r,o,i,s,c,l,u,d;if(e.hash)r="string"==typeof e.hash?[a.hex64ToDec(e.hash)]:[e.hash],i=1;else{if(!(t=createGame(e)))return!1;i=(r=t.hashes()).length}for(o=0;o<i;++o)if(s=n.json[a.to64BitHex(r[o])]){if(s.constructor===Array)if(c&&-1===s[0].m.indexOf(c.m)){for(u=s.length-1;u>=0;--u)if(!u||-1!==s[u].m.indexOf(c.m)){(d=s[u]).e=s[0].e,d.s=s[0].s,d.mate=s[0].mate,d.v=s[0].v,d.h=s[0].h,d.n=d.n||s[0].n,d.u=d.u||s[0].u,d.c=d.c||s[0].c;break}}else d=s[0];else d=s;(d.n||e.allowNameless)&&(c=d)}else e.mustEndInBook&&(c=void 0);if(c)return l={name:c.n},c.m&&(l.moves=c.m),void 0!==c.d&&(l.sdiff=c.d/100),c.u?(l.url=c.u,l.code=l.url.substr(0,3)):c.n&&c.c&&(l.url=c.c+"-"+c.n.replace(/['+,]/g,"").replace(/[^a-z0-9.]+/gi,"-").replace(/(with-\d|St)\.+-?/,"$1-"),l.code=c.c),c.e?(l.eval=c.e,l.depth=c.h,l.score=c.e[0].cp/100,void 0!==c.e[0].mate&&(l.mate=c.e[0].mate)):(l.score=c.s/100,void 0!==c.mate&&(l.mate=c.mate)),c.v&&(l.bad=!0),l},n.json)})},jce}());t.default=c},22:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(24),r=n.n(a),o=n(3),i=n.n(o);function ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach(function(t){i()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var s={getId:function getId(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return Array(e||20).fill().reduce(function(e){return e+t.charAt(Math.floor(Math.random()*t.length))},"")},getInitialFen:function getInitialFen(){return"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"},formatJSTimestampForPgn:function formatJSTimestampForPgn(e){var t=new Date(e),n="0".concat(t.getUTCDate()).slice(-2),a="0".concat(t.getUTCMonth()+1).slice(-2);return"".concat(t.getFullYear(),"-").concat(a,"-").concat(n)},getSanFromFileRank:function getSanFromFileRank(e){return e&&e.file&&e.rank?String.fromCharCode(96+e.file)+e.rank.toString():null},getFileRankFromSan:function getFileRankFromSan(e){return e?{file:e.toLowerCase().charCodeAt(0)-96,rank:Number(e.charAt(1))}:null},getPieceAt:function getPieceAt(e,t){return e.setup.pieces.find(function(e){return e.file===t.file&&e.rank===t.rank})},cloneGame:function cloneGame(e){return{id:e.id,variant:e.variant,jce:e.jce,tree:s.cloneTree(e.tree),setup:JSON.parse(JSON.stringify(e.setup)),markings:_objectSpread({},e.markings),settings:_objectSpread({},e.settings),history:r()(e.history),premoves:e.premoves.map(function(e){return JSON.parse(JSON.stringify(e))})}},cloneTree:function cloneTree(e){return _objectSpread({},e,{initialMarkings:JSON.parse(JSON.stringify(e.initialMarkings)),selected:_objectSpread({},e.selected),selectedNode:e.selectedNode?_objectSpread({},e.selectedNode,{ids:_objectSpread({},e.selectedNode.ids),hash:r()(e.selectedNode.hash),lines:e.selectedNode.lines&&r()(e.selectedNode.lines),arrows:e.selectedNode.arrows&&r()(e.selectedNode.arrows)}):null})},getFirstFen:function getFirstFen(e){return e.tree.lines[0].length?e.tree.lines[0][0].beforeFen:e.setup.fen}}},24:function(e,t,n){e.exports=n(25)(15)},25:function(e,t){e.exports=vueDLL},28:function(e,t,n){e.exports=n(25)(39)},3:function(e,t,n){e.exports=n(25)(5)},30:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i});var a=n(3),r=n.n(a),o=function createComponentConfig(e,t){var n=document.querySelector(e),a=e.replace(/#|\./g,""),o=r()({},"".concat(a),{});return null!=n&&(o[a]=Object.assign({el:e},t(n))),o},i=function mergePropsData(e,t){return e.propsData=Object.assign({},e.propsData,t),e}},33:function(e,t,n){"use strict";n.d(t,"k",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"j",function(){return s}),n.d(t,"e",function(){return c}),n.d(t,"f",function(){return l}),n.d(t,"g",function(){return u}),n.d(t,"h",function(){return d}),n.d(t,"c",function(){return f}),n.d(t,"d",function(){return m}),n.d(t,"i",function(){return p});n(2);var a=n(13),r=(n(52),function normalizeAnnotation(e){return Object.prototype.hasOwnProperty.call(a.b,e)||Object.prototype.hasOwnProperty.call(a.a,e)?s(e)?a.b[e]:normalizeAnnotation(a.a[e]):e||""}),o=function additionalAnnotationExists(e,t){return e.additionalAnnotation&&Array.isArray(e.additionalAnnotation)&&r(e.additionalAnnotation[0])===r(t)},i=function annotationExists(e,t){return r(e.annotation)===r(t)},s=function isNagFormat(e){return e&&"$"===e.charAt(0)},c=function hasComment(e){return Boolean(e&&"string"==typeof e.comment)},l=function hasCommentBefore(e){return Boolean(e&&"string"==typeof e.commentBefore)},u=function hasLines(e){return Boolean(e&&e.lines&&e.lines.length)},d=function isEnPassant(e){return 4===e.flags},f=function cleanCommentString(e){var t;return" "===(t=(t=e.replace(/<\/?[^>]+(>|$)/g,"")).replace(/&nbsp;/g," "))&&(t=""),t},m=function generateAnnotationString(e){var t="";return e.annotation&&(t="".concat(t).concat(r(e.annotation))),e.additionalAnnotation&&e.additionalAnnotation[0]&&(t="".concat(t,"&nbsp;").concat(r(e.additionalAnnotation[0]))),t},p=function isFirstNodeOnFormattedLine(e){return 0===e.ids.move}},39:function(e,t,n){e.exports=n(25)(17)},4:function(e,t,n){"use strict";t.a=new class Router{constructor(){this.baseUrl=null,null==window.Routing&&(window.Routing={generate:function generate(e){return e}})}generate(e,t,n){var a=t||{},r=this.baseUrl||a.baseUrl||null;return"string"==typeof a.username&&(a.username=a.username.toLowerCase()),null!=r?(delete a.baseUrl,r+window.Routing.generate(e,a,!1)):window.Routing.generate(e,a,n)}setBaseUrl(e){this.baseUrl=e}}},41:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(6),r={premove:function premove(e,t){var n=!1;return e.settings.premoves&&!e.settings.analysis&&e.jce.premoves.length<8&&(n=e.jce.premove(t,e.setup.playingAs)),n},cancelPremoves:function cancelPremoves(e){return!!e.jce.premoves.length&&(e.jce.premoves.length=0,!0)},consumePremove:function consumePremove(e){if(e.jce.premoves.length){var t=e.jce.premoves.shift();if(a.a.move(e,t.move)){var n=e.jce.premoves.map(function(e){return e});e.jce.premoves.length=0;for(var o=0;o<n.length;o+=1){var i=n[o];if(delete i.move.san,!r.premove(e,i.move))break}return!0}}return!1}}},43:function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"e",function(){return s}),n.d(t,"f",function(){return c}),n.d(t,"h",function(){return l}),n.d(t,"g",function(){return u}),n.d(t,"a",function(){return d}),n.d(t,"b",function(){return copyInputValueToBuffer}),n.d(t,"j",function(){return showHideMore}),n.d(t,"i",function(){return f}),n.d(t,"k",function(){return m});var a=n(10),r=n(74),o=function getClickedChild(e,t,n){var a=n,r=null;if(!e||!t||!n)return r;for(;a&&a!==e&&!r;)a.classList.contains(t)&&(r=a),a=a.parentNode;return r},i=function getElement(e){return document.querySelector(".".concat(e))},s=function getElements(e){return document.getElementsByClassName(e)},c=function getScrollElement(){return document.querySelector(".base-container")||document.body},l=function injectMounts(e,t){t.forEach(function(t){var n=document.createElement("div");n.id=t,e.appendChild(n)})},u=function injectModalMounts(e){var t=Object(r.c)();l(t,e)},d=function copyCustomValueToClipoard(e){var t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)};function copyInputValueToBuffer(e){e&&(e.focus(),e.select(),document.execCommand("copy"))}function showHideMore(e,t,n,r){var o=s(e);Array.from(o).forEach(function(e){var o=e.getAttribute("data-key"),i=document.querySelectorAll(".".concat(t,"[data-key=").concat(o,"]")),s=e.querySelector(".".concat(n)),c=e.querySelector(".".concat(r));s.innerHTML=a.h.showMore,e.addEventListener("click",function(){var e=s.innerHTML===a.h.showMore;s.innerHTML=e?a.h.showLess:a.h.showMore,c.classList.toggle("toggle-content-icon-up"),Array.from(i).forEach(function(e){e.style.display="block"===e.style.display?"none":"block"})})})}var f=function scriptExist(e){return document.querySelectorAll('script[src="'.concat(e,'"]')).length>0},m=function styleExist(e){return document.querySelectorAll('link[href="'.concat(e,'"]')).length>0}},44:function(e,t,n){"use strict";n.r(t),n.d(t,"nodeProps",function(){return i});var a=n(24),r=n.n(a),o=n(2),i=["additionalAnnotation","annotation","arrows","color","comment","commentBefore","fen","flags","from","ids","lines","moveNumber","piece","previous","promotion","san","time","to"];t.default=function moveList(){var e,t={lines:[]};return{state:t,updateLines:function updateLines(n){t.lines=r()(n),(n||[]).forEach(function(a,r){e=o.a.isContinuation(n,a.id),t.lines[r]=a.map(function(t){var n={};return i.forEach(function(e){void 0!==t[e]&&(n[e]=t[e])}),e&&0===t.ids.move&&(n.commentBefore=a.initComment),n}),t.lines[r].atMoveNode=a.atMoveNode,t.lines[r].id=a.id,t.lines[r].parentId=a.parentId})}}}()},45:function(e,t,n){"use strict";var a=n(83),r={name:"modal-container",props:{autoShow:{type:Boolean,default:!1},closeOnBackgroundClick:{type:Boolean,default:!0},closeOnEscPress:{type:Boolean,default:!1},centerOverParent:{type:Boolean,default:!1},centerOverContent:{type:Boolean,default:!1}},data:function data(){return{visible:!1}},mounted:function mounted(){this.closeOnEscPress&&window.addEventListener("keyup",this.onKeyPress),this.autoShow&&this.show()},beforeDestroy:function beforeDestroy(){this.closeOnEscPress&&window.removeEventListener("keyup",this.onKeyPress)},methods:{hide:function hide(){this.visible=!1,this.$emit(a.a.MODAL_DID_HIDE)},onBackgroundClick:function onBackgroundClick(){this.closeOnBackgroundClick&&this.hide()},onKeyPress:function onKeyPress(e){27===e.keyCode&&this.hide()},show:function show(){this.visible=!0}}},o=n(80),i=n(5);var s=Object(i.a)(r,function(){var e,t,n=this,a=n.$createElement,r=n._self._c||a;return r("transition",{attrs:{"enter-active-class":n.$style.enter,"leave-active-class":n.$style.leave}},[n.visible?r("div",{class:[n.$style.component,(e={},e[n.$style["parent-centered"]]=n.centerOverParent,e),(t={},t[n.$style["content-centered"]]=n.centerOverContent,t)]},[n.centerOverParent?n._e():r("div",{class:n.$style.bg,on:{click:n.onBackgroundClick}}),n._v(" "),[n._t("default")]],2):n._e()])},[],!1,function injectStyles(e){this.$style=o.default.locals||o.default},null,null);t.a=s.exports},47:function(e,t,n){var a,r;
/**
 * @author William DURAND <william.durand1@gmail.com>
 * @license MIT Licensed
 */void 0===(r="function"==typeof(a=function(){"use strict";var e={},t="en",n=[],a=new RegExp(/^\w+\: +(.+)$/),r=new RegExp(/^\s*((\{\s*(\-?\d+[\s*,\s*\-?\d+]*)\s*\})|([\[\]])\s*(-Inf|\-?\d+)\s*,\s*(\+?Inf|\-?\d+)\s*([\[\]]))\s?(.+?)$/),o=new RegExp(/^\s*(\{\s*(\-?\d+[\s*,\s*\-?\d+]*)\s*\})|([\[\]])\s*(-Inf|\-?\d+)\s*,\s*(\+?Inf|\-?\d+)\s*([\[\]])/),i={locale:get_current_locale(),fallback:t,placeHolderPrefix:"%",placeHolderSuffix:"%",defaultDomain:"messages",pluralSeparator:"|",add:function(t,a,r,o){var i=o||this.locale||this.fallback,s=r||this.defaultDomain;return e[i]||(e[i]={}),e[i][s]||(e[i][s]={}),e[i][s][t]=a,!1===function exists(e,t){for(var n=0;n<e.length;n++)if(t===e[n])return!0;return!1}(n,s)&&n.push(s),this},trans:function(e,t,n,a){var r=get_message(e,n,a,this.locale,this.fallback);return replace_placeholders(r,t||{})},transChoice:function(e,t,n,s,c){var l=get_message(e,s,c,this.locale,this.fallback),u=parseInt(t,10);return void 0===(n=n||{}).count&&(n.count=t),void 0===l||isNaN(u)||(l=function pluralize(e,t,n){var s,c,l=[],u=[],d=e.split(i.pluralSeparator),f=[];for(s=0;s<d.length;s++){var m=d[s];r.test(m)?(f=m.match(r),l[f[0]]=f[f.length-1]):a.test(m)?(f=m.match(a),u.push(f[1])):u.push(m)}for(c in l)if(o.test(c))if((f=c.match(o))[1]){var p,h=f[2].split(",");for(p in h)if(t==h[p])return l[c]}else{var g=convert_number(f[4]),v=convert_number(f[5]);if(("["===f[3]?t>=g:t>g)&&("]"===f[6]?t<=v:t<v))return l[c]}return u[function plural_position(e,t){var n=t;switch("pt_BR"===n&&(n="xbr"),n.length>3&&(n=n.split("_")[0]),n){case"bo":case"dz":case"id":case"ja":case"jv":case"ka":case"km":case"kn":case"ko":case"ms":case"th":case"tr":case"vi":case"zh":return 0;case"af":case"az":case"bn":case"bg":case"ca":case"da":case"de":case"el":case"en":case"eo":case"es":case"et":case"eu":case"fa":case"fi":case"fo":case"fur":case"fy":case"gl":case"gu":case"ha":case"he":case"hu":case"is":case"it":case"ku":case"lb":case"ml":case"mn":case"mr":case"nah":case"nb":case"ne":case"nl":case"nn":case"no":case"om":case"or":case"pa":case"pap":case"ps":case"pt":case"so":case"sq":case"sv":case"sw":case"ta":case"te":case"tk":case"ur":case"zu":return 1==e?0:1;case"am":case"bh":case"fil":case"fr":case"gun":case"hi":case"ln":case"mg":case"nso":case"xbr":case"ti":case"wa":return 0===e||1==e?0:1;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2;case"cs":case"sk":return 1==e?0:e>=2&&e<=4?1:2;case"ga":return 1==e?0:2==e?1:2;case"lt":return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2;case"sl":return e%100==1?0:e%100==2?1:e%100==3||e%100==4?2:3;case"mk":return e%10==1?0:1;case"mt":return 1==e?0:0===e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3;case"lv":return 0===e?0:e%10==1&&e%100!=11?1:2;case"pl":return 1==e?0:e%10>=2&&e%10<=4&&(e%100<12||e%100>14)?1:2;case"cy":return 1==e?0:2==e?1:8==e||11==e?2:3;case"ro":return 1==e?0:0===e||e%100>0&&e%100<20?1:2;case"ar":return 0===e?0:1==e?1:2==e?2:e>=3&&e<=10?3:e>=11&&e<=99?4:5;default:return 0}}(t,n)]||u[0]||void 0}(l,u,c||this.locale||this.fallback)),replace_placeholders(l,n)},fromJSON:function(e){if("string"==typeof e&&(e=JSON.parse(e)),e.locale&&(this.locale=e.locale),e.fallback&&(this.fallback=e.fallback),e.defaultDomain&&(this.defaultDomain=e.defaultDomain),e.translations)for(var t in e.translations)for(var n in e.translations[t])for(var a in e.translations[t][n])this.add(a,e.translations[t][n][a],n,t);return this},reset:function(){e={},n=[],this.locale=get_current_locale()}};function replace_placeholders(e,t){var n,a=i.placeHolderPrefix,r=i.placeHolderSuffix;for(n in t){var o=new RegExp(a+n+r,"g");if(o.test(e)){var s=String(t[n]).replace(new RegExp("\\$","g"),"$$$$");e=e.replace(o,s)}}return e}function get_message(t,a,r,o,i){var s,c,l,u,d=r||o||i,f=a,m=d.split("_")[0];if(!(d in e))if(m in e)d=m;else{if(!(i in e))return t;d=i}if(null==f)for(var p=0;p<n.length;p++)if(has_message(d,n[p],t)||has_message(m,n[p],t)||has_message(i,n[p],t)){f=n[p];break}if(has_message(d,f,t))return e[d][f][t];for(;d.length>2&&(s=d.length,c=d.split(/[\s_]+/),l=c[c.length-1],u=l.length,1!==c.length);)if(has_message(d=d.substring(0,s-(u+1)),f,t))return e[d][f][t];return has_message(i,f,t)?e[i][f][t]:t}function has_message(t,n,a){return t in e&&n in e[t]&&a in e[t][n]}function convert_number(e){return"-Inf"===e?Number.NEGATIVE_INFINITY:"+Inf"===e||"Inf"===e?Number.POSITIVE_INFINITY:parseInt(e,10)}function get_current_locale(){return"undefined"!=typeof document?document.documentElement.lang.replace("-","_"):t}return i})?a.call(t,n,t,e):a)||(e.exports=r)},471:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a={MAIN_AD:"main-ad",SHORT_SIDEBAR_AD_BOTTOM:"short-sidebar-ad-bottom",SHORT_SIDEBAR_AD_TOP:"short-sidebar-ad-top",TALL_SIDEBAR_AD:"tall-sidebar-ad",WHAT_IS_CHESS:"what-is-chess"}},48:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r});var a={AUTHENTICATE:"navigation-sidebar-authenticate-component",AUTHENTICATE_COLLAPSED:"navigation-sidebar-authenticate-collapsed",BADGE_HOME:"navigation-sidebar-home-badge",BADGE_INDEX:"navigation-sidebar-index-badge",BADGE_MESSAGES:"navigation-sidebar-messages-badge",BADGE_PLAY:"navigation-sidebar-play-badge",BOTTOM_LINK_EXPAND_COLLAPSE:"navigation-sidebar-expand-collapse-feature",BOTTOM_LINK_HELP:"navigation-sidebar-help-feature",BOTTOM_LINK_SEARCH:"navigation-sidebar-search-feature",BOTTOM_LINK_SETTINGS:"navigation-settings-link",BOTTOM_LINK_TOP_MENU:"navigation-toggle",DAILY_TIME_CONTROLS_BUTTON:"navigation-sidebar-play-button",HELP_POPOVER:"navigation-popover-help-component navigation-sidebar-feature-popover-help",LINK:"navigation-sidebar-category-component",LINK_HOME:"navigation-sidebar-home-category",LINK_INDEX:"navigation-sidebar-index-category",LINK_LEARN:"navigation-sidebar-learn-category",LINK_PLAY:"navigation-sidebar-play-category",LINK_SHARE:"navigation-sidebar-share-category",LOGO:"navigation-sidebar-primary-logo",LOGO_COLLAPSED:"navigation-sidebar-logo-collapsed",NAV_CLOSE_ICON:"nav-close-icon",NAV_OPEN_ICON:"nav-open-icon",NOTIFICATIONS_PANEL_CATCHMENT:"navigation-sidebar-notifications-catchment",SEARCH_BUTTON:"navigation-search-link",SEARCH_POPOVER:"navigation-sidebar-feature-popover-search",SECONDARY:"navigation-sidebar-secondary-component",SECONDARY_ACTIVE:"navigation-sidebar-secondary-active",SECONDARY_COLLAPSED:"navigation-sidebar-secondary-collapsed",SECONDARY_CONTROLS_SHOW:"navigation-sidebar-play-show",SECONDARY_DAILY_TIME_CONTROLS:"navigation-sidebar-play-daily",SECONDARY_ELEMENT:"navigation-sidebar-secondary-element",SECONDARY_LINK_DAILY:"navigation-secondary-dailychess",SECONDARY_LINK_LIVE:"navigation-secondary-livechess",SECONDARY_LIVE_TIME_CONTROLS:"navigation-sidebar-play-live",SECONDARY_NAVIGATION:"navigation-sidebar-secondary-navigation",SECONDARY_PANEL_HOME:"navigation-sidebar-home-component",SECONDARY_PANEL_LEARN:"navigation-sidebar-learn-component",SECONDARY_PANEL_NOTIFICATIONS:"navigation-sidebar-notifications-component",SECONDARY_PANEL_PLAY:"navigation-sidebar-play-component",SECONDARY_PANEL_SHARE:"navigation-sidebar-share-component",SECONDARY_WIDE:"navigation-sidebar-secondary-wide",SIDEBAR:"#sb",SIDEBAR_CATEGORIES_COLLAPSED:"navigation-sidebar-categories-collapsed",SIDEBAR_CATEGORY:"navigation-sidebar-category-component",SIDEBAR_CATEGORY_COLLAPSED:"navigation-sidebar-category-collapsed",SIDEBAR_COLLAPSED:"collapsed",SIDEBAR_FEATURE:"navigation-sidebar-feature-component",SIDEBAR_FEATURE_COLLAPSED:"navigation-sidebar-feature-collapsed",SIDEBAR_FEATURES:"navigation-sidebar-features-component",SIDEBAR_FEATURES_COLLAPSED:"navigation-sidebar-features-collapsed",SIDEBAR_FORCED_OPEN:"navigation-sidebar-open",SIDEBAR_GAMES:"navigations-sidebar-games",SIDEBAR_INTERNATIONAL:"nav-sidebar-wide",SIDEBAR_LINKS:"navigation-sidebar-primary-top",TIME_CONTROLS:"navigation-sidebar-play-daily",TV_COMPONENT:"navigation-sidebar-category-component navigation-sidebar-categories-watch",TV_ELEMENT:"chesstv",TV_EXCLAM:"navigation-sidebar-categories-exclamation",TV_POPOVER:"navigation-popover-watch-component navigation-sidebar-categories-popover-watch"},r={DAILY_TIME_CONTROLS_HEADER:"daily-time-controls-header",LIVE_TIME_CONTROLS_HEADER:"live-time-controls-header",DAILY_TIME_CONTROLS_SIDEBAR:"daily-time-controls-sidebar",LIVE_TIME_CONTROLS_SIDEBAR:"live-time-controls-sidebar",MOBILE_NAV_TOGGLE:"mobile-nav-toggle",LANGUAGE_PICKER_MODAL:"language-picker-modal",MODAL_VIDEO:"modal-video"}},49:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function isRtl(){return"rtl"===document.querySelector("html").getAttribute("dir")}},5:function(e,t,n){"use strict";function normalizeComponent(e,t,n,a,r,o,i,s){var c,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),a&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),i?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},l._ssrRegister=c):r&&(c=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function renderWithStyleInjection(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",function(){return normalizeComponent})},50:function(e,t,n){"use strict";var a=n(3),r=n.n(a),o=n(22);function ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}var i=n(6),s=n(15),c=n(1),l=n(7),u=n(20),d=n(2);function create_variation_ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}var f=function createVariation(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=function create_variation_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?create_variation_ownKeys(n,!0).forEach(function(t){r()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):create_variation_ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.tree.selected);if(!e.settings.variations)return null;void 0!==n.line&&void 0!==n.move?i.a.selectNode(e,n):n=e.tree.selected;var o=d.a.getNode(e.jce._lines(),{line:n.line,move:n.move}).san;return i.a.createVariation(e),t&&i.a.move(e,o),c.b.add(e.history,c.a.JUMP_TO_POSITION,{from:a,to:n}),l.a.updateState(e)},m=function shouldNotMutateLine(e){return-1!==e.tree.selected.move&&e.settings.mainLineIsImmutable&&d.a.isMainLine(e.tree.selected.line)},p=function isValidMove(e,t){return null!==u.default.getPositionDetails({fen:i.a.getFen(e),variant:i.a.getHeaders(e).Variant||"Chess"},t)},h=function makeMove(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=i.a.getJCEMove(e,t);if(null===a)return c.b.add(e.history,c.a.ILLEGAL_MOVE),e;var r=e.settings.analysis||n;if(!d.a.isHead(e.jce._lines(),e.tree.selected)){if(!r)return Object(s.a)(e,d.a.getHeadIds(e.jce._lines(),e.tree.selected.line));var o=d.a.getNextMatchingNode(e.jce._lines(),e.tree.selected,a);if(o)return Object(s.a)(e,o.ids);if(p(e,a)){if(c.b.add(e.history,c.a.TREE_AMENDED),e.settings.variations)return i.a.selectNode(e,{line:e.tree.selected.line,move:e.tree.selected.move+1}),i.a.createVariation(e),l.a.updateState(e),makeMove(e,a);if(!e.settings.mainLineIsImmutable)return d.a.prune(e.jce._lines(),e.tree.selected),makeMove(e,a)}return c.b.add(e.history,c.a.ILLEGAL_MOVE),e}if(!r&&!i.a.isUserTurn(e))return c.b.add(e.history,c.a.ILLEGAL_MOVE),e;if(r&&e.settings.variations&&m(e)&&p(e,a)){var u=d.a.getNextMatchingNode(e.jce._lines(),e.tree.selected,a);return u?Object(s.a)(e,u.ids):(f(e,!0),l.a.updateState(e),makeMove(e,a))}return!m(e)&&i.a.move(e,a,e.settings.rules)?(c.b.add(e.history,c.a.MAKE_MOVE,a),l.a.updateState(e)):(c.b.add(e.history,c.a.ILLEGAL_MOVE),e)},g=function setPlayingAs(e,t){return[1,2].indexOf(t)>=0&&(e.setup.playingAs=t),e},v=n(88),b=function changeSettings(e,t){var n=Object.prototype.hasOwnProperty.call(t,"premoves")&&e.settings.premoves!==t.premoves;return e.settings=Object.assign(e.settings,t),e.settings.premoves||Object(v.a)(e),c.b.add(e.history,c.a.SETTINGS_CHANGE),n&&l.a.updateState(e),e},_=function loadFromFen(e,t){return t?(d.a.clearAllMarkings(e.jce._lines()),i.a.load(e,t),c.b.add(e.history,c.a.LOAD),l.a.updateState(e)):null},E=function clearMarkings(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=d.a.getNode(e.jce._lines(),t)||d.a.getNode(e.jce._lines(),i.a.getSelectedIds(e))||e.tree.initialMarkings;return(a.arrows&&a.arrows.length||a.squares&&a.squares.length||a.effects&&a.effects.length)&&(a.arrows=[],a.squares=[],a.effects=[],n&&(l.a.updateState(e),c.b.add(e.history,c.a.TREE_CHANGE))),e},O=function convertFileToInteger(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").charCodeAt(0)-97+1},y=function createGame(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={id:o.a.getId(),variant:e.variant||"chess",settings:Object.assign(l.a.getInitialSettings(),e.settings),setup:Object.assign(l.a.getInitialSetup(),e.setup),tree:Object.assign(l.a.getInitialTree(),e.tree),history:c.b.getInitialHistory(),markings:Object.assign(l.a.getInitialMarkings(),e.markings),premoves:[]};return g(t,e.player||1),Object.defineProperty(t,"jce",{writable:!1,enumerable:!1,configurable:!1,value:i.a.createJce(e)}),i.a.updateIdsFromJce(t),c.b.add(t.history,c.a.INIT),t.jce.siblingGame&&!t.sibling&&(t.sibling={id:o.a.getId(),variant:t.variant||"chess",sibling:t,settings:t.settings,setup:l.a.getInitialSetup(),tree:l.a.getInitialTree(),history:c.b.getInitialHistory(),markings:Object.assign(l.a.getInitialMarkings(),e.markings),premoves:[]},Object.defineProperty(t.sibling,"jce",{writable:!1,enumerable:!1,configurable:!1,value:i.a.createJce({game:t.jce.siblingGame})}),i.a.updateIdsFromJce(t.sibling)),l.a.updateState(t),t},N=n(33);function select_line_start_ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}var S=function selectLineStart(e){var t=d.a.getSelectedLine(e),n=0,a=function select_line_start_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?select_line_start_ownKeys(n,!0).forEach(function(t){r()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):select_line_start_ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.tree.selected);0===e.tree.selected.move&&void 0!==t.parentId?(i.a.selectLine(e,t.parentId),t=d.a.getSelectedLine(e)):d.a.isMainLine(t.id)&&(n=-1);var o={line:t.id,move:n};return i.a.selectNode(e,o),c.b.add(e.history,c.a.JUMP_TO_POSITION,{from:a,to:o}),l.a.updateState(e)},A=function deleteNode(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(d.a.findNode(e.jce._lines(),e.tree.selected),Object.assign(e.tree.selected,t));return n.line>0&&(n.move<=0||d.a.isFirstVisibleNode(e.jce._lines(),n))&&(n.move=-1),e.jce.deletePosition(n.move,n.line),c.b.add(e.history,c.a.TREE_CHANGE),l.a.updateState(e),e},C=function deleteRemainingNodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign(e.tree.selected,t);return A(e,{move:n.move+1,line:n.line})},T=function getTcn(e,t){var a=e.jce&&e.jce._lines()||n(44).default.state.lines;return u.default.encodeTCN(d.a.getLine(a,t)||a[0])},I=n(13),L=n(54),k=function loadFromTcn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.a.getInitialFen(),a=arguments.length>3?arguments[3]:void 0;_(e,n);var r=u.default.decodeTCN(t);return r?(r.forEach(function(t){"Crazyhouse"!==e.variant&&"Bughouse"!==e.variant||!t.drop||Object(L.a)(e,e.setup.sideToMove,t.drop),h(e,t,!0)}),l.a.updateState(e),a?Object(s.a)(e,e.tree.selected,-1):(c.b.add(e.history,c.a.LOAD),e)):null},M=function markArrow(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=d.a.getNode(e.jce._lines(),n)||d.a.getNode(e.jce._lines(),i.a.getSelectedIds(e))||e.tree.initialMarkings;return r.arrows||(r.arrows=[]),r.arrows.find(function(e){return i.a.isFileRankEqual(e.fromFileRank,t.fromFileRank)&&i.a.isFileRankEqual(e.toFileRank,t.toFileRank)})||(r.arrows.push(t),a&&(l.a.updateState(e),c.b.add(e.history,c.a.TREE_CHANGE))),e},w=function markEffect(e){var t=e.game,n=e.effect,a=e.ids,r=e.persist,o=e.updateState,s=void 0===o||o;if(r)return t.setup.effects=n?[n]:null,l.a.updateState(t),t;var u=d.a.getNode(t.jce._lines(),a)||d.a.getNode(t.jce._lines(),i.a.getSelectedIds(t))||t.tree.initialMarkings;return u.effects||(u.effects=[]),u.effects.find(function(e){return i.a.isFileRankEqual(e.square,n.square)})||(u.effects.push(n),s&&(l.a.updateState(t),c.b.add(t.history,c.a.TREE_CHANGE))),t},P=function markSquare(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=d.a.getNode(e.jce._lines(),n)||d.a.getNode(e.jce._lines(),i.a.getSelectedIds(e))||e.tree.initialMarkings;return r.squares||(r.squares=[]),r.squares.find(function(e){return i.a.isFileRankEqual(e,t)})||(r.squares.push(t),a&&(l.a.updateState(e),c.b.add(e.history,c.a.TREE_CHANGE))),e},D=function fixTcn(e,t){var n=y({variant:e.variant,fen:o.a.getFirstFen(e)});return k(n,t,n.setup.fen),T(n)};function merge_tcn_ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function select_line_end_ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}var R=function selectLineEnd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.tree.selected.line,n=d.a.getLine(e.jce._lines(),t).length-1,a=function select_line_end_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?select_line_end_ownKeys(n,!0).forEach(function(t){r()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):select_line_end_ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.tree.selected);if(e.tree.selected.move!==n||t!==e.tree.selected.line){var o={line:t,move:n};return i.a.selectNode(e,o),c.b.add(e.history,c.a.JUMP_TO_POSITION,{from:a,to:o}),l.a.updateState(e)}return e};function reset_to_main_line_ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}n.d(t,"a",function(){return j});var j={addBlinkingSquare:function addBlinkingSquare(e,t,n,a){var i=o.a.getId(),s=function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach(function(t){r()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:i,interval:t,times:n},a);return e.markings.blinkingSquares.push(s),setTimeout(function(){var t=e.markings.blinkingSquares.findIndex(function(e){return e.id===i});e.markings.blinkingSquares.splice(t,1)},0),e},addVariant:function addVariant(e,t){return t?(Object(s.a)(e,{line:0,move:0}),t.match(/.{2}/g).forEach(function(t){return h(e,{tcn:t},!0)}),e):e},canMoveBackward:function canMoveBackward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(0===e.tree.selected.line&&e.tree.selected.move-t<-1)return!1;var a=e.tree.lines||n(44).default.state.lines;return null!==d.a.findNode(a,e.tree.selected,-1*t,!1)},canMoveForward:function canMoveForward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=e.tree.lines||n(44).default.state.lines;return null!==d.a.findNode(a,e.tree.selected,t,!1)},changeSettings:b,clearAnalysis:function clearAnalysis(e){var t=j.resetToMainLine(e),n=d.a.clearAnalysis(t.jce._lines());return t.jce.saveLines(n),c.b.add(t.history,c.a.TREE_CHANGE),l.a.updateState(e)},clearArrow:function clearArrow(e,t,n){var a=d.a.getNode(e.jce._lines(),n)||d.a.getNode(e.jce._lines(),i.a.getSelectedIds(e))||e.tree.initialMarkings;a.arrows||(a.arrows=[]);var r=a.arrows.findIndex(function(e){return i.a.isFileRankEqual(e.fromFileRank,t.fromFileRank)&&i.a.isFileRankEqual(e.toFileRank,t.toFileRank)});return-1!==r&&(a.arrows.splice(r,1),l.a.updateState(e),c.b.add(e.history,c.a.TREE_CHANGE)),e},clearBlinkingSquare:function clearBlinkingSquare(e,t){return e.markings.blinkingSquares[t]&&delete e.markings.blinkingSquares[t],e},clearBoard:function clearBoard(e){return b(e,{rules:!1}),_(e,"8/8/8/8/8/8/8/8 w - - 0 1"),c.b.add(e.history,c.a.LOAD),l.a.updateState(e)},clearEffect:function clearEffect(e,t,n){var a=d.a.getNode(e.jce._lines(),n)||d.a.getNode(e.jce._lines(),i.a.getSelectedIds(e))||e.tree.initialMarkings;a.effects||(a.effects=[]);var r=a.effects.findIndex(function(e){return i.a.isFileRankEqual(e.square,t.square)});return-1!==r&&(a.effects.splice(r,1),l.a.updateState(e),c.b.add(e.history,c.a.TREE_CHANGE)),e},clearMarkedSquare:function clearMarkedSquare(e,t,n){var a=d.a.getNode(e.jce._lines(),n)||d.a.getNode(e.jce._lines(),i.a.getSelectedIds(e))||e.tree.initialMarkings;a.squares||(a.squares=[]);var r=a.squares.findIndex(function(e){return i.a.isFileRankEqual(e,t)});return-1!==r&&(a.squares.splice(r,1),l.a.updateState(e),c.b.add(e.history,c.a.TREE_CHANGE)),e},clearMarkings:E,clearNodes:function clearNodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.jce._lines();if(!n)return e;if(void 0===t.line&&void 0===t.move)return n.forEach(function(e){e.forEach(function(e,t){return d.a.clearNode(n,{line:e.ids.line,move:t})})}),c.b.add(e.history,c.a.TREE_CHANGE),e;if(void 0===t.move){var a=d.a.getLine(e.jce._lines(),t.line);return a?(a.forEach(function(e,t){return d.a.clearNode(n,{line:a.id,move:t})}),c.b.add(e.history,c.a.TREE_CHANGE),e):e}return d.a.getNode(n,t)?(d.a.clearNode(n,t),c.b.add(e.history,c.a.TREE_CHANGE),e):e},convertLanToFileRanks:function convertLanToFileRanks(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{fromFileRank:{file:O(e[0]),rank:Number(e[1])},toFileRank:{file:O(e[2]),rank:Number(e[3])}}},createGame:y,createVariation:f,deleteLine:function deleteLine(e,t){return e.jce.deletePosition(-1,t)?(c.b.add(e.history,c.a.TREE_CHANGE),l.a.updateState(e),e):null},deleteNode:A,deleteRemainingNodes:C,getCurrentFullLine:function getCurrentFullLine(e){var t=e.jce._history().length-e.jce.ids().move-1,n=e.jce.history(!0);return 0===t?n:n.slice(0,-t)},getPgn:function getPgn(e,t){return i.a.getPgn(e,t)},getPgnHeaders:function getPgnHeaders(e){return i.a.getHeaders(e)},getSelectedNode:function getSelectedNode(e){return d.a.getSelectedNode(e)},getTcn:T,isMoveLegal:function isMoveLegal(e,t){var n=!1;if(!e.settings.rules)return!0;for(var a=0;a<e.setup.legalMoves.length;a++){var r=e.setup.legalMoves[a];if(r.from===t.from&&r.to===t.to){n=!0;break}}return n},loadFromFen:_,loadFromLan:function loadFromLan(e,t,n,a){var r=t.map(function(e){return u.default.encodeTCN({from:e.slice(0,2),to:e.slice(2,4),promotion:e.slice(4,5)||void 0})}).join("");return j.loadFromTcn(e,r,n,a)},loadFromPgn:function loadFromPgn(e,t,n){return t?(i.a.loadPgn(e,function normalizePgnAnnotation(e){return Object.keys(I.b).forEach(function(t){e=e.replace(new RegExp("\\".concat(t,"\\b"),"gm"),Object(N.k)(t))}),e}(t)),l.a.updateState(e),n?Object(s.a)(e,e.tree.selected,n):(c.b.add(e.history,c.a.LOAD),e)):e},loadFromSanMoves:function loadFromSanMoves(e,t,n,a){return t&&t.length?(n&&i.a.load(e,n),t.forEach(function(t){return h(e,{san:t},!0)}),l.a.updateState(e),a?Object(s.a)(e,e.tree.selected,-1):(c.b.add(e.history,c.a.LOAD),e)):null},loadFromTcn:k,makeMove:h,makeOpponentMove:function makeOpponentMove(e,t){return g(e,3-e.setup.playingAs),h(e,t),g(e,3-e.setup.playingAs),l.a.updateState(e)},markArrow:M,markEffect:w,markSquare:P,mergeTcn:function mergeTcn(e,t,n){if("string"!=typeof t||e.settings.mainLineIsImmutable)return null;if(""===t)return S(e),k(e,"",e.setup.fen);var a=function merge_tcn_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?merge_tcn_ownKeys(n,!0).forEach(function(t){r()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):merge_tcn_ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.tree.selected),o=T(e),i=t,l=e.history.length-1;if(!(o.includes(i)||i.includes(o)||(o=D(e,o),i=D(e,i),o.includes(i)||i.includes(o))))return k(e,i);if(i.length<o.length)Object(s.a)(e,{line:0,move:i.length/2-1}),C(e);else{if(!(i.length>o.length))return e;var f;if(Object(s.a)(e,{line:0,move:o.length/2-1}),i.slice(o.length).match(/.{2}/g).forEach(function(t){f=u.default.decodeTCN(t)[0],"Crazyhouse"!==e.variant&&"Bughouse"!==e.variant||!f.drop||Object(L.a)(e,e.setup.sideToMove,f.drop),h(e,f,!0)}),e.history.slice(l+1).some(function(e){return e&&e.type===c.a.ILLEGAL_MOVE}))return Object(s.a)(e,a),C(e),e.history=e.history.slice(0,l),mergeTcn(e,D(e,i))}if(n)return Object(s.a)(e,e.tree.selected,-1);if(a.line!==e.tree.selected.line||a.move!==e.tree.selected.move){var m=d.a.getNode(e.jce._lines(),a)?a:e.tree.selected;return Object(s.a)(e,m)}return e},moveBackward:function moveBackward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(s.a)(e,e.tree.selected,-1*t,!1)},moveForward:function moveForward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(s.a)(e,e.tree.selected,t,!1)},moveToEnd:function moveToEnd(e){return d.a.isMainLine(e.tree.selected.line)||i.a.selectLine(e,0),R(e),l.a.updateState(e)},moveToStart:function moveToStart(e){return d.a.isMainLine(e.tree.selected.line)||i.a.selectLine(e,0),S(e),l.a.updateState(e)},moveVariation:function moveVariation(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=d.a.getLine(e.jce._lines(),t);if(a&&void 0!==a.parentId){var r=d.a.getLine(e.jce._lines(),a.parentId)[a.atMoveNode],o=-1;if(r.lines.forEach(function(e,n){t===e&&(o=n)}),o>-1){var i=null;n&&o>0?(i=r.lines[o-1],r.lines[o-1]=t,r.lines[o]=i):!n&&o<r.lines.length-1&&(i=r.lines[o+1],r.lines[o+1]=t,r.lines[o]=i)}c.b.add(e.history,c.a.TREE_CHANGE)}return e},promoteVariation:function promoteVariation(e,t){var n=t;void 0===n&&(n=e.tree.selected);var a=d.a.getLine(e.jce._lines(),n.line);if(a&&void 0!==a.parentId)for(var r=n.move,o=function _loop(){if(e.settings.mainLineIsImmutable&&d.a.isMainLine(a.parentId))return"break";var t=d.a.getLine(e.jce._lines(),a.parentId),n=d.a.isContinuation(e.jce._lines(),a.id)?1:0,o=a[n]&&a[n].commentBefore,s=a.atMoveNode,c=a.slice(0);a.length=0,o&&t[s-1]&&(t[s-1].comment?(" "!==t[s-1].comment.substr(-1)&&(t[s-1].comment+=" "),t[s-1].comment+=o):t[s-1].comment=o,delete c[n].commentBefore,delete a.initComment);var l=t.slice(s),u=l[0].lines.map(function(e){return e});delete l[0].lines,l.forEach(function(t,n){t.lines&&t.lines.length&&t.lines.forEach(function(t){var r=d.a.getLine(e.jce._lines(),t);r.parentId=a.id,r.atMoveNode=n})}),t.length=s,c.forEach(function(n){n.ids={line:t.id,move:t.length},n.lines&&n.lines.length&&n.lines.forEach(function(n){var a=d.a.getLine(e.jce._lines(),n);a.parentId=t.id,a.atMoveNode=t.length}),t.push(n)}),l.forEach(function(e,t){e.ids={line:a.id,move:t},a.push(e)}),t[s].lines=u,t[s].lines.forEach(function(n){d.a.getLine(e.jce._lines(),n).parentId=t.id}),i.a.selectNode(e,{line:t.id,move:s+r}),a=d.a.getLine(e.jce._lines(),a.parentId),r=s+r};void 0!==a.parentId&&"break"!==o(););return e.jce.saveLines(e.tree.lines),c.b.add(e.history,c.a.TREE_CHANGE),l.a.updateState(e)},resetToMainLine:function resetToMainLine(e){var t=function reset_to_main_line_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?reset_to_main_line_ownKeys(n,!0).forEach(function(t){r()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):reset_to_main_line_ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.tree.selected);d.a.isMainLine(e.tree.selected.line)||i.a.selectLine(e,0),R(e);var n=e.tree.selected;return e.tree.lines.length=1,e.tree.lines=d.a.rebuildIds(e.tree.lines),e.jce.saveLines(e.tree.lines),c.b.add(e.history,c.a.JUMP_TO_POSITION,{from:t,to:n}),l.a.updateState(e)},selectLineEnd:R,selectLineStart:S,selectNode:s.a,setPlayingAs:g,updateMarkings:function updateMarkings(e){var t=e.arrow,n=e.effect,a=e.game,r=e.ids,o=e.square;return E(a,r,!1),t&&M(a,t,r,!1),n&&w({game:a,effect:n,ids:r,updateState:!1}),o&&P(a,o,r,!1),l.a.updateState(a),c.b.add(a.history,c.a.TREE_CHANGE),a},updateNode:function updateNode(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=e.jce._lines(),r=d.a.findNode(a,t);if(!r||!n||n.commentBefore&&!d.a.isFirstVisibleNode(a,t))return null;var o=d.a.getLine(a,t.line);if(void 0===n.commentBefore&&d.a.isFirstVisibleNode(a,t)?delete o.initComment:n.commentBefore&&(o.initComment=n.commentBefore),n.annotation&&(n.annotation=Object(N.b)(r,n.annotation)?"":Object(N.k)(n.annotation)),n.additionalAnnotation){if(!Object(N.j)(n.additionalAnnotation))return null;Object(N.a)(r,n.additionalAnnotation)&&(n.additionalAnnotation=[]),n.additionalAnnotation=[].concat(Object(N.k)(n.additionalAnnotation))}return Object.assign(r,n),c.b.add(e.history,c.a.UPDATE_NODE,{line:t.line,move:t.move}),l.a.updateState(e)},updatePgnHeaders:function updatePgnHeaders(e,t){if(!t)return null;var n=Object.keys(t).reduce(function(e,n){return"Date"===n&&"number"==typeof t[n]&&(t[n]=o.a.formatJSTimestampForPgn(t[n])),e.push(n),e.push(t[n]),e},[]);return i.a.updateHeaders(e,n),c.b.add(e.history,c.a.PGN_HEADERS_UPDATED),e.setup.result=l.a.getResult(e),e}}},52:function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"a",function(){return d}),n.d(t,"c",function(){return m});var a,r,o,i=n(3),s=n.n(i),c=n(13),l=n(0),u={AFTER:"after",BEFORE:"before"},d={ADD_ANNOTATION:"addAnnotation",ADD_EVAL_NOTATION:"addEvalNotation",CLEAR_ANALYSIS:"clearAnalysis",CREATE_CONTINUATION:"createContinuation",CREATE_VARIATION:"createVariation",DELETE_COMMENT:"deleteComment",DELETE_LINE:"deleteLine",DELETE_MOVE:"deleteMove",INSERT_COMMENT:"insertComment",MOVE_VARIATION_DOWN:"moveVariationDown",MOVE_VARIATION:"moveVariation",PROMOTE_VARIATION:"promoteVariation",REMOVE_ANNOTATION:"removeAnnotation",REMOVE_BEGIN:"removeBegin",REMOVE_END:"removeEnd",REMOVE_EVAL_ANNOTATION:"removeEvalAnnotation",REMOVE_FOCUS:"removeFocus",SET_BEGIN:"setBegin",SET_END:"setEnd",SET_FOCUS:"setFocus",UPDATE_COMMENT:"updateComment"},f=[{code:"$1",display:c.b.$1,meaning:l.a.trans("Good move"),action:d.ADD_ANNOTATION},{code:"$2",display:c.b.$2,meaning:l.a.trans("Bad move"),action:d.ADD_ANNOTATION},{code:"$3",display:c.b.$3,meaning:l.a.trans("Excellent move"),action:d.ADD_ANNOTATION},{code:"$4",display:c.b.$4,meaning:l.a.trans("Blunder"),action:d.ADD_ANNOTATION},{code:"$5",display:c.b.$5,meaning:l.a.trans("Speculative move"),action:d.ADD_ANNOTATION},{code:"$6",display:c.b.$6,meaning:l.a.trans("Dubious move"),action:d.ADD_ANNOTATION},{code:"$10",display:c.b.$10,meaning:l.a.trans("Drawish"),action:d.ADD_EVAL_NOTATION},{code:"$13",display:c.b.$13,meaning:l.a.trans("Unclear"),action:d.ADD_EVAL_NOTATION},{code:"$14",display:c.b.$14,meaning:l.a.trans("White has a slight advantage"),action:d.ADD_EVAL_NOTATION},{code:"$15",display:c.b.$15,meaning:l.a.trans("Black has a slight advantage"),action:d.ADD_EVAL_NOTATION},{code:"$16",display:c.b.$16,meaning:l.a.trans("White has a moderate advantage"),action:d.ADD_EVAL_NOTATION},{code:"$17",display:c.b.$17,meaning:l.a.trans("Black has a moderate advantage"),action:d.ADD_EVAL_NOTATION},{code:"$18",display:c.b.$18,meaning:l.a.trans("White has a decisive advantage"),action:d.ADD_EVAL_NOTATION},{code:"$19",display:c.b.$19,meaning:l.a.trans("Black has a decisive advantage"),action:d.ADD_EVAL_NOTATION},{code:"$22",display:c.b.$22,meaning:l.a.trans("The position is in zugzwang"),action:d.ADD_EVAL_NOTATION},{code:"$146",display:c.b.$146,meaning:l.a.trans("Novelty"),action:d.ADD_EVAL_NOTATION}],m=(l.a.trans("Clear All Analysis"),d.CLEAR_ANALYSIS,l.a.trans("Insert Continuation"),d.CREATE_CONTINUATION,l.a.trans("Insert Alternate Line"),d.CREATE_VARIATION,l.a.trans("Delete Comment After"),d.DELETE_COMMENT,u.AFTER,l.a.trans("Delete Comment Before"),d.DELETE_COMMENT,u.BEFORE,l.a.trans("Delete Entire Variation"),d.DELETE_LINE,l.a.trans("Delete Move"),d.DELETE_MOVE,l.a.trans("Comment After"),d.INSERT_COMMENT,u.AFTER,l.a.trans("Comment Before"),d.INSERT_COMMENT,u.BEFORE,l.a.trans("Move Variation Down"),d.MOVE_VARIATION_DOWN,l.a.trans("Move Variation Up"),d.MOVE_VARIATION,l.a.trans("Promote"),d.PROMOTE_VARIATION,l.a.trans("Remove Annotation"),d.REMOVE_ANNOTATION,l.a.trans("Remove Begin"),d.REMOVE_BEGIN,l.a.trans("Remove End"),d.REMOVE_END,l.a.trans("Remove Evaluation Annotation"),d.REMOVE_EVAL_ANNOTATION,l.a.trans("Remove Focus"),d.REMOVE_FOCUS,l.a.trans("Set Begin"),d.SET_BEGIN,l.a.trans("Set End"),d.SET_END,l.a.trans("Set Focus"),d.SET_FOCUS,d.SET_BEGIN,d.SET_END,d.SET_FOCUS,d.REMOVE_BEGIN,d.REMOVE_END,d.REMOVE_FOCUS,{BEGIN:"begin",END:"end",FOCUS:"focus"});a={},s()(a,d.SET_BEGIN,m.BEGIN),s()(a,d.SET_END,m.END),s()(a,d.SET_FOCUS,m.FOCUS),r={},s()(r,d.REMOVE_BEGIN,m.BEGIN),s()(r,d.REMOVE_END,m.END),s()(r,d.REMOVE_FOCUS,m.FOCUS),o=[],f.forEach(function(e){var t=o[o.length-1]||null;t&&4!==t.length?t.push(e):o.push([e])})},54:function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(7);var a={p:1,n:32,b:256,r:2048,q:16384},r=function setHand(e,t,n){return e.jce._hand[t]=n.split("").reduce(function(e,t){return e+a[t]},0),e.setup.hand=e.jce.hand(),e}},542:function(e,t,n){e.exports={ad:"what-is-chess-ad",title:"what-is-chess-title",play:"what-is-chess-play",icon:"what-is-chess-icon"}},543:function(e,t,n){e.exports={separator:"authentication-login-separator",label:"authentication-login-label",form:"authentication-login-form","zero-margin":"authentication-login-zero-margin",options:"authentication-login-options",forgot:"authentication-login-forgot",social:"authentication-login-social",button:"authentication-login-button",facebook:"authentication-login-facebook",google:"authentication-login-google",icon:"authentication-login-icon"}},544:function(e,t,n){e.exports={board:"daily-puzzle-board"}},545:function(e,t,n){e.exports={category:"social-members-category",title:"social-members-title",icon:"social-members-icon",content:"social-members-content",quantity:"social-members-quantity"}},546:function(e,t,n){e.exports={component:"social-likes-component",darkMode:"social-likes-darkMode",network:"social-likes-network",icon:"social-likes-icon",quantity:"social-likes-quantity",facebook:"social-likes-facebook",twitter:"social-likes-twitter",youtube:"social-likes-youtube",twitch:"social-likes-twitch",instagram:"social-likes-instagram"}},55:function(e,t,n){e.exports={component:"icon-font-component",primary:"icon-font-primary",darkMode:"icon-font-darkMode",secondary:"icon-font-secondary",tertiary:"icon-font-tertiary",chess:"icon-font-chess",captured:"icon-font-captured"}},56:function(e,t,n){"use strict";var a=n(48),r={expanded:null===document.querySelector("".concat(a.a.SIDEBAR,".").concat(a.a.SIDEBAR_COLLAPSED)),forcedOpen:!1,isLive:"/live"===window.location.pathname.substr(0,5),isLiveElement:document.querySelector("#live-app"),isVisible:!0,isWide:"en-US"!==document.documentElement.getAttribute("lang"),position:"horizontal",showingSecondary:null};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];return{emit:function emit(n,a){t.filter(function(e){return e.type===n}).forEach(function(t){return t.handler(e,a)})},off:function off(e){return-1!==t.findIndex(function(t){return t.type===e.type&&t.handler===e.handler})&&t.splice(t,1),t},on:function on(e,n){return t.push({type:e,handler:n}),t},state:e,subscriptions:t}}(r)},57:function(e,t,n){"use strict";t.a={BOTTOM_LINK_MOUSE_ENTER:"BOTTOM_LINK_MOUSE_ENTER",EXPAND_COLLAPSE_CHANGE:"EXPAND_COLLAPSE_CHANGE",FEATURE_LINK_INIT:"FEATURE_LINK_INIT",FETCH_NOTIFICATIONS:"FETCH_NOTIFICATIONS",FETCH_NOTIFICATION_COUNT:"FETCH_NOTIFICATION_COUNT",HIDE_TIME_CONTROLS:"HIDE_TIME_CONTROLS",LINK_SECONDARY_HIDE:"LINK_SECONDARY_HIDE",LINK_SECONDARY_MOUNTS:"LINK_SECONDARY_MOUNTS",NAV_TOGGLED:"NAV_TOGGLED",NOTIFICATIONS_FETCHED:"NOTIFICATIONS_FETCHED",NOTIFICATIONS_PANEL_INIT:"NOTIFICATIONS_PANEL_INIT",OPEN_LANGUAGE_PICKER:"OPEN_LANGUAGE_PICKER",SECONDARY_CHANGE:"SECONDARY_CHANGE",SHOW_VIDEO_MODAL:"SHOW_VIDEO_MODAL",TOGGLE_DAILY_CONTROLS:"TOGGLE_DAILY_CONTROLS",TOGGLE_LIVE_CONTROLS:"TOGGLE_LIVE_CONTROLS",VIEW_MOUNTED:"VIEW_MOUNTED"}},6:function(e,t,n){"use strict";var a=n(20),r=n(2),o=n(50),i=n(22);n.d(t,"a",function(){return s});var s={createJce:function createJce(e){var t=Object.assign({},e,{analysis:!0});return a.default.createGame(t)||null},updateIdsFromJce:function updateIdsFromJce(e){return e&&e.jce?(e.tree.selected=e.jce.ids(),e):null},getSelectedIds:function getSelectedIds(e){return e.jce.ids()},getPositionInfo:function getPositionInfo(e){var t=a.default.getPositionInfo({game:e.jce},{skipValidation:!0,getLegalMoves:!0});return e.settings.premoves?t.legalPremoves=s.getLegalPremoves(e):t.legalPremoves=[],t},getPositionDetails:function getPositionDetails(e){return Object.assign(a.default.getPositionDetails({game:e.jce,kings:!1,skipValidation:!0}),{hand:s.getHand(e)})},addExtraCastlingMoves:function addExtraCastlingMoves(e){e.setup.legalMoves.forEach(function(t){16!==t.flags&&32!==t.flags||("chess960"===e.variant?s.addCastlingMoves960(e,t):s.addCastlingMoves(e,t))})},addCastlingMoves:function addCastlingMoves(e,t){var n=1===t.color?1:8;(16===t.flags?[8]:[1,2]).forEach(function(a){e.setup.legalMoves.push({color:t.color,flags:t.flags,piece:"k",from:t.from,san:16===t.flags?"O-O":"O-O-O",to:i.a.getSanFromFileRank({file:a,rank:n})})})},addCastlingMoves960:function addCastlingMoves960(e,t){for(var n=i.a.getFileRankFromSan(t.from).rank,a=1,r=0;r<2;){var o=i.a.getPieceAt(e,{file:a,rank:n});void 0!==o&&"r"===o.type&&r++,(1===r&&32===t.flags||2===r&&16===t.flags)&&e.setup.legalMoves.push({color:t.color,flags:t.flags,piece:"k",from:t.from,san:16===t.flags?"O-O":"O-O-O",to:i.a.getSanFromFileRank({file:a,rank:n})})}a++},getHeaders:function getHeaders(e){return e.jce.header()},getFen:function getFen(e){return e.jce.fen()},getPgn:function getPgn(e,t){return e.jce.pgn(t)},getPremoves:function getPremoves(e){return e.jce.premoves},getHand:function getHand(e){return e.jce.hand()},getChecks:function getChecks(e){return e.jce.checks()},getLegalPremoves:function getLegalPremoves(e){return a.default.getPremoves(e.jce.premoves&&e.jce.premoves.length>0?e.jce.premoves[e.jce.premoves.length-1].fen:e.jce.fen(),e.setup.playingAs,e.variant)},load:function load(e,t){return e.jce.load(t)&&s.updateIdsFromJce(e),e},loadPgn:function loadPgn(e,t){return e.jce.loadPgn(t)&&s.updateIdsFromJce(e),e},createVariation:function createVariation(e){return e.jce.createVariation()&&(e.jce.reorderLines(),s.updateIdsFromJce(e)),e},getJCEMove:function getJCEMove(e,t){var n=t;return s.isValidMoveObject(t)?(n.san?n=a.default.sanToObj(n.san,s.getFen(e),e.variant):n.tcn&&(n=a.default.decodeTCN(n.tcn)[0]),n):null},move:function move(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t)return null;var a=!1;if(!1===n){var r=t.from?e.jce.get(t.from):null,o=t.to?e.jce.get(t.to):null;if(r&&o&&"k"===o.type)return null;e.jce.remove(t.to),e.jce.remove(t.from);var i=t.drop||t.put;a=e.jce.put(r||{type:i.toLowerCase(),color:i&&i.toUpperCase()===i?1:2},t.to),t.from&&r&&null===t.to&&(a=!0)}else t.drop&&(t.drop=t.drop.toLowerCase()),a=e.jce.move(t);return a&&s.updateIdsFromJce(e),a},selectLine:function selectLine(e,t){var n=r.a.getLine(e.tree.lines,t);return n&&(e.jce.selectLine(t),e.tree.selected={line:t,move:n.length-1}),e},selectNode:function selectNode(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{line:0,move:0};return e.jce.selectPosition(t.move,t.line),e},updateHeaders:function updateHeaders(e,t){return e.jce.header(t)},clear:function clear(e){return e.jce.clear(e.variant)},isFileRankEqual:function isFileRankEqual(e,t){return e.file&&t.file&&e.rank&&t.rank&&e.file===t.file&&e.rank===t.rank},isValidMoveObject:function isValidMoveObject(e){return"string"==typeof e.from&&"string"==typeof e.to||"string"==typeof e.san||"string"==typeof e.tcn||!e.from&&"string"==typeof e.to&&"string"==typeof e.drop||null===e.to&&"string"==typeof e.from||!e.from&&"string"==typeof e.to&&"string"==typeof e.put},movesMatch:function movesMatch(e,t){return!(e.from!==t.from||e.to!==t.to||e.promotion&&e.promotion!==t.promotion||e.drop&&e.drop!==t.drop)},getMoveNumber:function getMoveNumber(e,t){return 1===e?Math.ceil(t/2+1):Math.floor(t/2+1)},isUserTurn:function isUserTurn(e){return e.setup.playingAs===e.setup.sideToMove},getFens:function getFens(e){var t=[e.setup.fen];return(e.tree.lines||n(44).default.state.lines)[0].forEach(function(e){t.push(e.fen)}),t},getLastTcn:function getLastTcn(e){var t=o.a.getTcn(e);return t.substr(t.length-2)},getSanMoves:function getSanMoves(e,t){var a=[];return(e.tree.lines||n(44).default.state.lines)[0].some(function(e,n){return"number"==typeof t&&n>=t||(a.push(e.san),!1)}),a}}},60:function(e,t,n){e.exports={component:"form-dropdown-component",select:"form-dropdown-select",filter:"form-dropdown-filter","desktop-button":"form-dropdown-desktop-button","mobile-button":"form-dropdown-mobile-button",value:"form-dropdown-value",chevron:"form-dropdown-chevron",options:"form-dropdown-options",left:"form-dropdown-left","advanced-options":"form-dropdown-advanced-options",option:"form-dropdown-option",icon:"form-dropdown-icon",live960:"form-dropdown-live960",bullet:"form-dropdown-bullet",blitz:"form-dropdown-blitz",rapid:"form-dropdown-rapid",threecheck:"form-dropdown-threecheck",kingofthehill:"form-dropdown-kingofthehill",crazyhouse:"form-dropdown-crazyhouse",bughouse:"form-dropdown-bughouse",selected:"form-dropdown-selected","short-title":"form-dropdown-short-title",overlay:"form-dropdown-overlay",separator:"form-dropdown-separator",flag:"form-dropdown-flag"}},61:function(e,t,n){e.exports={component:"modal-container-component","parent-centered":"modal-container-parent-centered",bg:"modal-container-bg",enter:"modal-container-enter",leave:"modal-container-leave","content-centered":"modal-container-content-centered"}},62:function(e,t,n){e.exports={box:"modal-video-box",video:"modal-video-video",close:"modal-video-close"}},65:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var a=n(18),r=function getBoardContainerElement(){var e=a.h.board.substr(1),t=document.getElementsByClassName(e)[0];return t||null},o=function getBoardElement(){var e=r();if(!e)return null;var t=e.childNodes;return Array.from(t).find(function(e){return 1===e.nodeType})}},68:function(e,t,n){"use strict";var a=n(10),r=n(30),o=n(0),i=n(92),s=[{value:"newest",label:o.a.trans("Most Recent")},{value:"view_count",label:o.a.trans("Most Views")}],c=document.getElementById(a.f.FILTERS),l=c?c.getAttribute(a.a.ICON_BUTTON):null;t.a=Object(r.a)("#".concat(a.f.FILTERS),function(){return{component:i.a,propsData:{iconButton:l,onChange:function onChange(){},options:s,overlay:!0,value:s[0]}}})},7:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(3),r=n.n(a),o=n(2),i=n(6);function ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach(function(t){r()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var s={},c={q:9,r:5,b:3,n:3,p:1,k:0},l={getInitialSettings:function getInitialSettings(){return{variations:!1,analysis:!1,mainLineIsImmutable:!1,rules:!0,premoves:!1,GTM:!1}},getInitialSetup:function getInitialSetup(){return{ranks:8,files:8}},getInitialTree:function getInitialTree(){return{initialMarkings:{arrows:[],effects:[],squares:[]}}},getInitialMarkings:function getInitialMarkings(){return{arrows:[],blinkingSquares:[],effects:[],squares:[]}},clearState:function clearState(e){return e.setup=l.getInitialSetup(),e},updateState:function updateState(e){e.setup=Object.assign({},e.setup,i.a.getPositionInfo(e),i.a.getPositionDetails(e)),i.a.addExtraCastlingMoves(e),e.tree.lines=o.a.getLinesFromJce(e),e.tree.selected=e.jce.ids(),e.tree.selectedNode=o.a.getSelectedNode(e),e.setup.capturedPieces=l.getCapturedPieces(e.setup),e.setup.capturedScores=l.getCapturedScores(e.setup),e.setup.result=l.getResult(e),e.premoves=i.a.getPremoves(e),e.variant=i.a.getHeaders(e).Variant||e.variant,e.startingMoveNumber=e.setup.moveNumber;var t=o.a.getNode(e.tree.lines,i.a.getSelectedIds(e))||e.tree.initialMarkings;return t&&(e.markings.squares=t.squares?t.squares.map(function(e){return _objectSpread({},e)}):[],e.markings.arrows=t.arrows?t.arrows.map(function(e){return _objectSpread({},e)}):[],e.setup.effects?e.markings.effects=e.setup.effects:t.effects?e.markings.effects=t.effects.map(function(e){return _objectSpread({},e)}):e.markings.effects=[]),s[e.id]=!0,e.sibling&&!s[e.sibling.id]&&(e.sibling=l.updateState(e.sibling)),s={},e},getCapturedPieces:function getCapturedPieces(e){return e.pieces.reduce(function(e,t){if("k"===t.type)return e;var n=t.promoted?"p":t.type;return e[t.color-1][n]-=1,e},[{p:8,n:2,b:2,r:2,q:1},{p:8,n:2,b:2,r:2,q:1}])},getCapturedScores:function getCapturedScores(e){return e.pieces.reduce(function(e,t){return e[t.color-1]+=c[t.type],e},[0,0])},getResult:function getResult(e){var t=i.a.getHeaders(e).Result;return"*"!==t?t:e.setup.insufficient||e.setup.stalemate?"1/2-1/2":e.setup.gameOver&&!e.setup.draw?1===e.setup.sideToMove?"0-1":"1-0":"*"}}},71:function(e,t,n){"use strict";var a=n(57);function removeClassFromElement(e,t){var n=document.getElementById(e);null===n&&void 0===n||n.classList.remove(t)}function addClassToElement(e,t){var n=document.getElementById(e);null===n&&void 0===n||n.classList.add(t)}var r=n(10),o=n(43),i=n(49),s=n(4),c=n(16),l=n(0),u=n(8);Object(u.a)("web_articles_authors"),Object(u.a)("web_article_post"),Object(u.a)("web_article_view",{url:"free-chess-curriculum-for-parents-coaches"}),Object(u.a)("web_article_view",{url:"study-plan-directory"}),Object(u.a)("web_article_index",{unpublished:1}),l.a.trans("Articles"),l.a.trans("Article Authors"),l.a.trans("Authors"),l.a.trans("Create Article"),l.a.trans("Curriculum for Kids"),l.a.trans("Delete Article"),l.a.trans("Are you sure you want to delete this article?"),l.a.trans("Edit Article"),l.a.trans("Headline"),l.a.trans("Lock Comments"),l.a.trans("My Articles"),l.a.trans("RSS"),l.a.trans("Study Plans"),l.a.trans("Translate"),l.a.trans("Unlock Comments"),l.a.trans("Unpublished");function parseArticlesResponse(e){var t=window.location.pathname.indexOf("articles")>-1;return e.length?e.map(function(e){return Object.assign({},e,{author:{chessTitle:e.chess_title,username:e.username,url:s.a.generate(t?"web_article_member":"web_member_view",{username:e.username})},time:c.a.relative(1e3*e.create_date),comments:Object(c.b)(e.comment_count),views:Object(c.b)(e.view_count),excerpt:e.body,image:e.image_url})}):e}function setArticleToHeadline(e){return e&&(e.isHeadline=!0),e}n(94),n(98),n(30),Object(u.a)("web_blog_all"),Object(u.a)("web_blog_view",{url:"webmaster/how-to-become-a-top-blogger-for-chesscom"}),Object(u.a)("web_blog_index"),Object(u.a)("web_blog_post",{title:l.a.trans("What got me playing chess")}),Object(u.a)("web_blog_post",{title:l.a.trans("My chess goals are...")}),Object(u.a)("web_blog_post",{title:l.a.trans("My best chess win")}),Object(u.a)("web_blog_settings_edit"),Object(u.a)("web_blog_post"),Object(u.a)("web_blog_authors"),l.a.trans("All Blogs"),l.a.trans("Become a listed Chess.com top blogger!"),l.a.trans("Blogs"),l.a.trans("Start Your Blog"),l.a.trans("This is your personal blog where you can share your chess thoughts. Some ideas to blog about:"),l.a.trans("Blog Settings"),l.a.trans("What got me playing chess"),l.a.trans("My chess goals are..."),l.a.trans("My best chess win"),l.a.trans("Bury Blog"),l.a.trans("<strong>NOTE:</strong> Your Blog has not yet been published. This is only a <strong>preview</strong>."),l.a.trans("Click here"),l.a.trans("Create Post"),l.a.trans("Delete"),l.a.trans("Delete Blog"),l.a.trans("Are you sure you want to delete this blog?"),l.a.trans("Are you sure you want to delete post and report to akismet?"),l.a.trans("Edit"),l.a.trans("Edit Blog"),l.a.trans("Get Listed"),l.a.trans("Headline"),l.a.trans("Most Recent"),l.a.trans("Most Views"),l.a.trans("My Blog"),l.a.trans("for more info."),l.a.trans("No"),l.a.trans("User doesn't have any blog posts"),l.a.trans("Publish"),l.a.trans("Report Spam"),l.a.trans("Top Bloggers"),l.a.trans("Unbury Blog"),l.a.trans("Yes"),n(68);function parseBlogsResponse(e){return e.map(function(e){return Object.assign({},e,{author:{chessTitle:e.chess_title,username:e.username,url:s.a.generate("web_member_view",{username:e.username})},comments:Object(c.b)(e.comment_count),excerpt:e.body,isDraft:!e.is_live,image:e.image_url,time:c.a.relative(1e3*e.create_date),views:Object(c.b)(e.view_count)})})}function setBlogToHeadline(e){return e&&(e.isHeadline=!0),e}var d=n(78),f=n(56),m=n(48),p=n(17),h=n(45),g={name:"modal-video",components:{IconFont:p.a,ModalContainer:h.a},props:{source:{type:String,required:!0}},mounted:function mounted(){var e=this;f.a.on(a.a.SHOW_VIDEO_MODAL,function(){e.$refs.modal.show()})},methods:{hide:function hide(){this.$refs.modal.hide()}}},v=n(81),b=n(5);var _=Object(b.a)(g,function(){var e=this.$createElement,t=this._self._c||e;return t("modal-container",{ref:"modal"},[t("div",{class:this.$style.box},[t("div",{class:this.$style.video},[t("iframe",{attrs:{allowfullscreen:"",frameborder:"0",height:"100%",width:"100%",src:this.source}}),this._v(" "),t("icon-font",{class:this.$style.close,attrs:{family:"chess",name:"x",theme:"primary"},on:{click:this.hide}})],1)])])},[],!1,function injectStyles(e){this.$style=v.default.locals||v.default},null,null).exports,E=n(28),O=function(e){return new E.default({el:"#".concat(m.b.MODAL_VIDEO),render:function render(t){return t(_,{props:{source:e}})}})};function parseContentResponse(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a={articles:{setHeadline:setArticleToHeadline,parseContent:parseArticlesResponse},blogs:{setHeadline:setBlogToHeadline,parseContent:parseBlogsResponse},news:{setHeadline:d.c,parseContent:d.b}};return Object.prototype.hasOwnProperty.call(a,e)?(n&&t[0]&&(t[0]=a[e].setHeadline(t[0])),a[e].parseContent(t)):t}function showFooterOnLoad(){window.addEventListener("load",function(){removeClassFromElement("".concat(r.f.NAVIGATION_FOOTER),"navigation-footer-hide"),Object(o.d)("layout-one-column-component")&&addClassToElement("".concat(r.f.NAVIGATION_FOOTER),"navigation-footer-component-one-column"),Object(o.d)("layout-two-column-flipped-component")&&addClassToElement("".concat(r.f.NAVIGATION_FOOTER),"navigation-footer-component-flipped-column")})}function showVideoModalOnClick(e){if(null!==e){var t=null;e.addEventListener("click",function(){var n=e.getAttribute("data-src");t||(t=t||O(n)),f.a.emit(a.a.SHOW_VIDEO_MODAL)})}}function showCaptcha(){removeClassFromElement("".concat(r.f.CAPTCHA),"mobile-app-captcha-hide")}function hideCaptcha(){addClassToElement("".concat(r.f.CAPTCHA),"mobile-app-captcha-hide")}function stripTags(e){return String(e).replace(/<[^>]+>/gm,"")}n.d(t,"c",function(){return parseContentResponse}),n.d(t,"f",function(){return showFooterOnLoad}),n.d(t,"g",function(){return showVideoModalOnClick}),n.d(t,"e",function(){return showCaptcha}),n.d(t,"a",function(){return hideCaptcha}),n.d(t,"h",function(){return stripTags}),n.d(t,"b",function(){return y}),n.d(t,"i",function(){return A}),n.d(t,"d",function(){return C});var y=function onEditBtnClick(e,t){e.preventDefault(),t.classList.add(r.f.POST_CAN_EDIT_URL)},N=function ariaInBtn(e,t){return e||t},S=function collapseBtn(e){var t=e.currentTarget,n=t.getAttribute(r.a.ARIA_CONTROLS),a=t.getAttribute(r.a.CUSTOM_BTN_CLASS),o=t.getAttribute(r.a.CUSTOM_COLLAPSE_CLASS),i=r.f.COLLAPSED,s=r.f.HIDDEN;t.classList.toggle(N(a,i));var c=document.getElementById(n);c&&c.classList.toggle(N(o,s))},A=function toggleCollapse(){Array.from(document.querySelectorAll(".".concat(r.f.COLLAPSE))).forEach(function(e){e.addEventListener("click",S)}),document.removeEventListener("DOMContentLoaded",toggleCollapse)},C=function rtlClass(e){return Object(i.a)()?e["right-to-left"]:""}},72:function(e,t,n){"use strict";var a=n(55),r=n.n(a);t.default=r.a},74:function(e,t,n){"use strict";var a=n(18),r=function animationChangeRequiresRefresh(e,t){return a.l.animations.indexOf(e)>-1||a.l.animations.indexOf(t)>-1},o=n(50),i=n(93),s=function buildEffect(e){var t=e.icon,n=e.node;return{position:{x:"right",y:"top"},square:e.square||o.a.convertLanToFileRanks("".concat(n.from).concat(n.to)).toFileRank,template:Object(i.a)({path:t,size:"100%"})}},c=n(12),l=n(4),u=function seekGifUntilReady(e,t){c.default.get(e).then(function(n){202===n.status?setTimeout(seekGifUntilReady.bind(null,e,t),2e3):200===n.status&&t(e)}).catch(function(){t(e)})},d=function getCustomAnimatedGif(e){var t=e.tcn,n=e.flip,a=e.isChess960,r=e.initialPosition,o=l.a.generate("web_game_callback_create_dyn_gif_url"),i={tcn:t,flip:n,isChess960:a,initialSetup:r};return c.default.post(o,i).then(function(e){return new Promise(function(t){u(e.data,t)})})},f=n(65),m=function getShareUrl(){var e=window.document.documentElement.lang,t=window.location,n=e.split("-")[0];return t.pathname.split("/")[1]===n||"en"===n?t.href:"".concat(t.protocol,"//").concat(t.hostname,"/").concat(n).concat(t.pathname)},p=function normalizeFen(e){var t=e;-1!==t.indexOf("|")&&(t=t.split("|")[0].trim());var n=t.split(" "),a=n[0].split("/");return a.length>8&&(a.pop(),n[0]=a.join("/"),t=n.join(" ")),t},h=function pieceChangeRequiresRefresh(e,t){var n=e===t,r=a.l.pieces.indexOf(e)>-1||a.l.pieces.indexOf(t)>-1;return!n&&r},g=function setBoardSize(e){var t=document.querySelector(a.h.board);t&&"number"==typeof e&&(t.style.width="".concat(e,"px"))},v=function showBoardResize(){var e=document.querySelector(a.h.resize);e&&(e.style.visibility="visible")};n.d(t,"a",function(){return r}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return f.a}),n.d(t,"d",function(){return d}),n.d(t,"e",function(){return m}),n.d(t,"f",function(){return p}),n.d(t,"g",function(){return h}),n.d(t,"h",function(){return g}),n.d(t,"i",function(){return v})},77:function(e,t,n){"use strict";var a=n(60),r=n.n(a);t.default=r.a},78:function(e,t,n){"use strict";n.d(t,"a",function(){return parseAuthorsResponse}),n.d(t,"b",function(){return parseNewsResponse}),n.d(t,"c",function(){return setNewsToHeadline});var a=n(4),r=n(16);function parseAuthorsResponse(e){return e.length?e.map(function(e){return Object.assign({},e,{followers:Object(r.b)(e.followers)})}):e}function parseNewsResponse(e){return e.map(function(e){return Object.assign({},e,{author:{chessTitle:e.chess_title,username:e.username,url:a.a.generate("web_member_view",{username:e.username})},time:r.a.relative(1e3*e.create_date),comments:Object(r.b)(e.comment_count),views:Object(r.b)(e.view_count),excerpt:e.body,image:e.image_url,isDraft:!e.is_live})})}function setNewsToHeadline(e){return e&&(e.isHeadline=!0),e}},79:function(e,t,n){"use strict";n.d(t,"d",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return s}),n.d(t,"e",function(){return c}),n.d(t,"a",function(){return l});var a=n(3),r=n.n(a);function ownKeys(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach(function(t){r()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var o=function objectIsEmpty(e){return e&&!Object.keys(e).length};var i=function objectHasData(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e&&Object.keys(e).length>0};var s=function objectHasProp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object.prototype.hasOwnProperty.call(e,t)},c=function objectWithExcludedProps(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object.keys(e).filter(function(e){return!t.includes(e)}).reduce(function(t,n){return _objectSpread({},t,r()({},n,e[n]))},{})},l=function invertObject(e){return Object.keys(e).reduce(function(t,n){return _objectSpread({},t,r()({},e[n],n))},{})}},798:function(e,t,n){e.exports={modal:"modal-with-footer-modal",newbie:"modal-with-footer-newbie",content:"modal-with-footer-content",header:"modal-with-footer-header",icon:"modal-with-footer-icon",footer:"modal-with-footer-footer"}},799:function(e,t,n){e.exports={"background-wrapper":"promo-background-wrapper","background-fixed-height":"promo-background-fixed-height","background-image":"promo-background-image",section:"promo-section","modal-layout":"promo-modal-layout","modal-layout-chess960":"promo-modal-layout-chess960"}},8:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(4),r=function generateRoute(e,t,n){var r=e,o=t;if(n){var i=document.querySelector("[data-url-locale]"),s=i&&i.getAttribute("data-url-locale"),c=s&&"en"!==s.split("_")[0]&&s.split("_")[0];c&&o&&(r="i18n_".concat(r),o._locale=c)}return a.a.generate(r,o)}},80:function(e,t,n){"use strict";var a=n(61),r=n.n(a);t.default=r.a},800:function(e,t,n){e.exports={title:"newbie-modal-title",list:"newbie-modal-list",wrapper:"newbie-modal-wrapper","wrapper-slim":"newbie-modal-wrapper-slim",background:"newbie-modal-background","four-players":"newbie-modal-four-players",bughouse:"newbie-modal-bughouse",play:"newbie-modal-play",icon:"newbie-modal-icon"}},81:function(e,t,n){"use strict";var a=n(62),r=n.n(a);t.default=r.a},83:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a={HIDE_MODAL:"hide-modal",HIDE_MODAL_BACKGROUND_CLICK:"hide-background",HIDE_MODAL_SOCIAL_SHARE:"hide-modal-social-share",LOGIN_OR_REGISTER_MODAL:"LOGIN_OR_REGISTER_MODAL",MODAL_DID_HIDE:"modal-did-hide",SHOW_MODAL_SOCIAL_SHARE:"show-modal-social-share",SHOW_UPGRADE_MODAL:"show-upgrade-modal"}},88:function(e,t,n){"use strict";var a=n(1),r=n(6),o=n(41),i=n(7),s=n(15),c=n(2),l=function makePremove(e,t){var n=r.a.getJCEMove(e,t);return null===n?(a.b.add(e.history,a.a.ILLEGAL_MOVE),e):c.a.isHead(e.jce._lines(),e.tree.selected)||e.settings.analysis?e.settings.analysis?void 0:(o.a.premove(e,n)?(a.b.add(e.history,a.a.PREMOVE),i.a.updateState(e)):a.b.add(e.history,a.a.ILLEGAL_MOVE),e):Object(s.a)(e,c.a.getHeadIds(e.jce._lines(),e.tree.selected.line))},u=function cancelPremoves(e){return o.a.cancelPremoves(e)&&(a.b.add(e.history,a.a.CANCEL_PREMOVES),i.a.updateState(e)),e},d=function consumePremove(e){return e.premoves.length?(o.a.consumePremove(e)?(a.b.add(e.history,a.a.MAKE_MOVE),i.a.updateState(e)):u(e),e):e};n.d(t,"c",function(){return l}),n.d(t,"a",function(){return u}),n.d(t,"b",function(){return d})},9:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"c",function(){return c}),n.d(t,"a",function(){return l});var a=n(47),r=n.n(a);r.a.placeHolderPrefix="",r.a.placeHolderSuffix="";var o=function escapeParameters(e){var t={};return null!=e&&Object.keys(e).forEach(function(n){var a=function escapeRegExp(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}(n);null!=a&&a.length>0&&(t[a]=e[n])}),t},i=function getTranslatedPhrase(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"messages",n=arguments.length>2?arguments[2]:void 0;return window.chesscom_translations&&window.chesscom_translations[t]&&window.chesscom_translations[t][e]?window.chesscom_translations[t][e]:window.chesscom_live_translations&&window.chesscom_live_translations[t]&&window.chesscom_live_translations[t][e]?window.chesscom_live_translations[t][e]:"live"===t&&window.i18n_phrases&&window.i18n_phrases[e]?window.i18n_phrases:"countries"===t&&window.Country&&window.Country[e]?window.Country:n?void 0:"javascript"!==t?getTranslatedPhrase(e,"javascript"):e},s=function trans(e,t,n){return r.a.trans(i(e,n),o(t),n)},c=function transChoice(e,t,n,a){return void 0===t?"":r.a.transChoice(i(e,a),t,o(n))},l={trans:s,transChoice:c}},92:function(e,t,n){"use strict";var a={name:"form-dropdown",components:{IconFont:n(17).a},props:{advancedOptionsClass:{type:Boolean,default:!1},alignDropdown:{type:String,default:"right"},colorIcons:{type:Boolean,default:!1},countryFlag:{type:Number,default:2},iconButton:{type:String,default:""},labelKey:{type:String,default:"label"},onChange:{type:Function,required:!1},options:{type:Array,required:!0},overlay:{type:Boolean,default:!1},shortTitle:{type:Boolean,default:!1},shortTitleKey:{type:String,default:"shortTitle"},value:{type:Object,required:!0},valueKey:{type:String,default:"value"}},data:function data(){return{showOptions:!1}},methods:{setSelectedOption:function setSelectedOption(e){this.toggleOptions(),this.value!==e&&(this.$emit("input",e),this.onChange&&this.onChange(e))},toggleOptions:function toggleOptions(){this.showOptions=!this.showOptions}}},r=n(77),o=n(5);var i=Object(o.a)(a,function(){var e,t,n,a=this,r=a.$createElement,o=a._self._c||r;return o("div",{class:a.$style.component},[a.iconButton?o("div",{class:(e={},e[a.$style["mobile-button"]]=a.iconButton,e),on:{click:function(e){return a.toggleOptions()}}},[o("icon-font",{class:a.$style.filter,attrs:{name:a.iconButton}})],1):a._e(),a._v(" "),o("div",{class:[a.$style.select,(t={},t[a.$style["desktop-button"]]=a.iconButton,t)],on:{click:function(e){return a.toggleOptions()}}},[a.value.icon?o("icon-font",{class:a.$style.icon,attrs:{theme:"primary",name:a.value.icon}}):a._e(),a._v(" "),a.value.countryId?o("div",{class:[a.$style.flag,"country-flags-component country-flags-large country-"+a.value.countryId]}):a._e(),a._v(" "),o("span",{class:a.$style.value},[a._v(a._s(a.value[a.labelKey])+"‎")]),a._v(" "),o("icon-font",{directives:[{name:"show",rawName:"v-show",value:a.showOptions,expression:"showOptions"}],class:a.$style.chevron,attrs:{name:"chevron-up"}}),a._v(" "),o("icon-font",{directives:[{name:"show",rawName:"v-show",value:!a.showOptions,expression:"!showOptions"}],class:a.$style.chevron,attrs:{name:"chevron-bottom"}})],1),a._v(" "),a.overlay?o("div",{directives:[{name:"show",rawName:"v-show",value:a.showOptions,expression:"showOptions"}],class:a.$style.overlay,on:{click:function(e){return a.toggleOptions()}}}):a._e(),a._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:a.showOptions,expression:"showOptions"}],class:[a.$style.options,(n={},n[a.$style["advanced-options"]]=a.advancedOptionsClass,n),[a.$style[a.alignDropdown]]]},a._l(a.options,function(e){var t,n;return e.separator?e.separator?o("span",{class:a.$style.separator}):a._e():o("span",{key:e[a.valueKey],class:[a.$style.option,(t={},t[a.$style.selected]=e===a.value,t)],on:{click:function(t){return a.setSelectedOption(e)}}},[e.icon&&!e.noIconInsideDropdown?o("icon-font",{class:[a.$style.icon,(n={},n[a.$style[e.icon]]=a.colorIcons,n)],attrs:{theme:"primary",name:e.icon}}):a._e(),a._v(" "),e.countryId?o("div",{class:[a.$style.flag,"country-flags-component country-"+e.countryId]}):a._e(),a._v(" "),a.shortTitle?o("span",{class:a.$style["short-title"]},[a._v("\n        "+a._s(e[a.shortTitleKey])+"\n      ")]):a._e(),a._v(" "),o("span",{class:a.$style.label},[a._v("\n        "+a._s(e[a.labelKey])+"\n      ")])],1)}),0)])},[],!1,function injectStyles(e){this.$style=r.default.locals||r.default},null,null);t.a=i.exports},93:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function makeSvg(e){var t=e.path,n=void 0===t?"":t,a=e.size,r=void 0===a?24:a,o=e.viewBox,i=void 0===o?"0 0 18 19":o;return'\n  <svg width="'.concat(r,'" height="').concat(r,'" viewBox="').concat(i,'">\n    ').concat(n,"\n  </svg>\n")}},94:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function concatUrlParams(e){var t=[];return e.forEach(function(e){t.push(e.join("="))}),t}},98:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function getAllUrlParams(e){var t=[];return e.substring(1).split("&").forEach(function(e){t.push(e.split("="))}),t}}});